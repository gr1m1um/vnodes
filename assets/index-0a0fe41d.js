(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();function makeMap(n,e){const r=Object.create(null),s=n.split(",");for(let o=0;o<s.length;o++)r[s[o]]=!0;return e?o=>!!r[o.toLowerCase()]:o=>!!r[o]}function normalizeStyle(n){if(isArray(n)){const e={};for(let r=0;r<n.length;r++){const s=n[r],o=isString(s)?parseStringStyle(s):normalizeStyle(s);if(o)for(const a in o)e[a]=o[a]}return e}else{if(isString(n))return n;if(isObject$2(n))return n}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(n){const e={};return n.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const s=r.split(propertyDelimiterRE);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function normalizeClass(n){let e="";if(isString(n))e=n;else if(isArray(n))for(let r=0;r<n.length;r++){const s=normalizeClass(n[r]);s&&(e+=s+" ")}else if(isObject$2(n))for(const r in n)n[r]&&(e+=r+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(n){return!!n||n===""}function looseCompareArrays(n,e){if(n.length!==e.length)return!1;let r=!0;for(let s=0;r&&s<n.length;s++)r=looseEqual(n[s],e[s]);return r}function looseEqual(n,e){if(n===e)return!0;let r=isDate(n),s=isDate(e);if(r||s)return r&&s?n.getTime()===e.getTime():!1;if(r=isSymbol(n),s=isSymbol(e),r||s)return n===e;if(r=isArray(n),s=isArray(e),r||s)return r&&s?looseCompareArrays(n,e):!1;if(r=isObject$2(n),s=isObject$2(e),r||s){if(!r||!s)return!1;const o=Object.keys(n).length,a=Object.keys(e).length;if(o!==a)return!1;for(const l in n){const c=n.hasOwnProperty(l),u=e.hasOwnProperty(l);if(c&&!u||!c&&u||!looseEqual(n[l],e[l]))return!1}}return String(n)===String(e)}function looseIndexOf(n,e){return n.findIndex(r=>looseEqual(r,e))}const toDisplayString=n=>isString(n)?n:n==null?"":isArray(n)||isObject$2(n)&&(n.toString===objectToString||!isFunction(n.toString))?JSON.stringify(n,replacer,2):String(n),replacer=(n,e)=>e&&e.__v_isRef?replacer(n,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[s,o])=>(r[`${s} =>`]=o,r),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()]}:isObject$2(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=n=>onRE.test(n),isModelListener=n=>n.startsWith("onUpdate:"),extend$3=Object.assign,remove$1=(n,e)=>{const r=n.indexOf(e);r>-1&&n.splice(r,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn$2=(n,e)=>hasOwnProperty$1.call(n,e),isArray=Array.isArray,isMap=n=>toTypeString(n)==="[object Map]",isSet=n=>toTypeString(n)==="[object Set]",isDate=n=>toTypeString(n)==="[object Date]",isFunction=n=>typeof n=="function",isString=n=>typeof n=="string",isSymbol=n=>typeof n=="symbol",isObject$2=n=>n!==null&&typeof n=="object",isPromise=n=>isObject$2(n)&&isFunction(n.then)&&isFunction(n.catch),objectToString=Object.prototype.toString,toTypeString=n=>objectToString.call(n),toRawType=n=>toTypeString(n).slice(8,-1),isPlainObject=n=>toTypeString(n)==="[object Object]",isIntegerKey=n=>isString(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=n=>{const e=Object.create(null);return r=>e[r]||(e[r]=n(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(n=>n.replace(camelizeRE,(e,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(n=>n.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(n=>n.charAt(0).toUpperCase()+n.slice(1)),toHandlerKey=cacheStringFunction(n=>n?`on${capitalize(n)}`:""),hasChanged=(n,e)=>!Object.is(n,e),invokeArrayFns=(n,e)=>{for(let r=0;r<n.length;r++)n[r](e)},def=(n,e,r)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:r})},looseToNumber=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const r=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.scopes)for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(n,e=activeEffectScope){e&&e.active&&e.effects.push(n)}function getCurrentScope(){return activeEffectScope}const createDep=n=>{const e=new Set(n);return e.w=0,e.n=0,e},wasTracked=n=>(n.w&trackOpBit)>0,newTracked=n=>(n.n&trackOpBit)>0,initDepMarkers=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=trackOpBit},finalizeDepMarkers=n=>{const{deps:e}=n;if(e.length){let r=0;for(let s=0;s<e.length;s++){const o=e[s];wasTracked(o)&&!newTracked(o)?o.delete(n):e[r++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}e.length=r}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,r=null,s){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,s)}run(){if(!this.active)return this.fn();let e=activeEffect,r=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(n){const{deps:e}=n;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(n);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const n=trackStack.pop();shouldTrack=n===void 0?!0:n}function track(n,e,r){if(shouldTrack&&activeEffect){let s=targetMap.get(n);s||targetMap.set(n,s=new Map);let o=s.get(r);o||s.set(r,o=createDep()),trackEffects(o)}}function trackEffects(n,e){let r=!1;effectTrackDepth<=maxMarkerBits?newTracked(n)||(n.n|=trackOpBit,r=!wasTracked(n)):r=!n.has(activeEffect),r&&(n.add(activeEffect),activeEffect.deps.push(n))}function trigger(n,e,r,s,o,a){const l=targetMap.get(n);if(!l)return;let c=[];if(e==="clear")c=[...l.values()];else if(r==="length"&&isArray(n)){const u=Number(s);l.forEach((f,d)=>{(d==="length"||d>=u)&&c.push(f)})}else switch(r!==void 0&&c.push(l.get(r)),e){case"add":isArray(n)?isIntegerKey(r)&&c.push(l.get("length")):(c.push(l.get(ITERATE_KEY)),isMap(n)&&c.push(l.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(n)||(c.push(l.get(ITERATE_KEY)),isMap(n)&&c.push(l.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(n)&&c.push(l.get(ITERATE_KEY));break}if(c.length===1)c[0]&&triggerEffects(c[0]);else{const u=[];for(const f of c)f&&u.push(...f);triggerEffects(createDep(u))}}function triggerEffects(n,e){const r=isArray(n)?n:[...n];for(const s of r)s.computed&&triggerEffect(s);for(const s of r)s.computed||triggerEffect(s)}function triggerEffect(n,e){(n!==activeEffect||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...r){const s=toRaw(this);for(let a=0,l=this.length;a<l;a++)track(s,"get",a+"");const o=s[e](...r);return o===-1||o===!1?s[e](...r.map(toRaw)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...r){pauseTracking();const s=toRaw(this)[e].apply(this,r);return resetTracking(),s}}),n}function hasOwnProperty(n){const e=toRaw(this);return track(e,"has",n),e.hasOwnProperty(n)}function createGetter(n=!1,e=!1){return function(s,o,a){if(o==="__v_isReactive")return!n;if(o==="__v_isReadonly")return n;if(o==="__v_isShallow")return e;if(o==="__v_raw"&&a===(n?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(s))return s;const l=isArray(s);if(!n){if(l&&hasOwn$2(arrayInstrumentations,o))return Reflect.get(arrayInstrumentations,o,a);if(o==="hasOwnProperty")return hasOwnProperty}const c=Reflect.get(s,o,a);return(isSymbol(o)?builtInSymbols.has(o):isNonTrackableKeys(o))||(n||track(s,"get",o),e)?c:isRef(c)?l&&isIntegerKey(o)?c:c.value:isObject$2(c)?n?readonly(c):reactive(c):c}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(n=!1){return function(r,s,o,a){let l=r[s];if(isReadonly(l)&&isRef(l)&&!isRef(o))return!1;if(!n&&(!isShallow(o)&&!isReadonly(o)&&(l=toRaw(l),o=toRaw(o)),!isArray(r)&&isRef(l)&&!isRef(o)))return l.value=o,!0;const c=isArray(r)&&isIntegerKey(s)?Number(s)<r.length:hasOwn$2(r,s),u=Reflect.set(r,s,o,a);return r===toRaw(a)&&(c?hasChanged(o,l)&&trigger(r,"set",s,o):trigger(r,"add",s,o)),u}}function deleteProperty(n,e){const r=hasOwn$2(n,e);n[e];const s=Reflect.deleteProperty(n,e);return s&&r&&trigger(n,"delete",e,void 0),s}function has$1(n,e){const r=Reflect.has(n,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(n,"has",e),r}function ownKeys(n){return track(n,"iterate",isArray(n)?"length":ITERATE_KEY),Reflect.ownKeys(n)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(n,e){return!0},deleteProperty(n,e){return!0}},shallowReactiveHandlers=extend$3({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=n=>n,getProto=n=>Reflect.getPrototypeOf(n);function get(n,e,r=!1,s=!1){n=n.__v_raw;const o=toRaw(n),a=toRaw(e);r||(e!==a&&track(o,"get",e),track(o,"get",a));const{has:l}=getProto(o),c=s?toShallow:r?toReadonly:toReactive;if(l.call(o,e))return c(n.get(e));if(l.call(o,a))return c(n.get(a));n!==o&&n.get(e)}function has(n,e=!1){const r=this.__v_raw,s=toRaw(r),o=toRaw(n);return e||(n!==o&&track(s,"has",n),track(s,"has",o)),n===o?r.has(n):r.has(n)||r.has(o)}function size(n,e=!1){return n=n.__v_raw,!e&&track(toRaw(n),"iterate",ITERATE_KEY),Reflect.get(n,"size",n)}function add$1(n){n=toRaw(n);const e=toRaw(this);return getProto(e).has.call(e,n)||(e.add(n),trigger(e,"add",n,n)),this}function set(n,e){e=toRaw(e);const r=toRaw(this),{has:s,get:o}=getProto(r);let a=s.call(r,n);a||(n=toRaw(n),a=s.call(r,n));const l=o.call(r,n);return r.set(n,e),a?hasChanged(e,l)&&trigger(r,"set",n,e):trigger(r,"add",n,e),this}function deleteEntry(n){const e=toRaw(this),{has:r,get:s}=getProto(e);let o=r.call(e,n);o||(n=toRaw(n),o=r.call(e,n)),s&&s.call(e,n);const a=e.delete(n);return o&&trigger(e,"delete",n,void 0),a}function clear(){const n=toRaw(this),e=n.size!==0,r=n.clear();return e&&trigger(n,"clear",void 0,void 0),r}function createForEach(n,e){return function(s,o){const a=this,l=a.__v_raw,c=toRaw(l),u=e?toShallow:n?toReadonly:toReactive;return!n&&track(c,"iterate",ITERATE_KEY),l.forEach((f,d)=>s.call(o,u(f),u(d),a))}}function createIterableMethod(n,e,r){return function(...s){const o=this.__v_raw,a=toRaw(o),l=isMap(a),c=n==="entries"||n===Symbol.iterator&&l,u=n==="keys"&&l,f=o[n](...s),d=r?toShallow:e?toReadonly:toReactive;return!e&&track(a,"iterate",u?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:g,done:m}=f.next();return m?{value:g,done:m}:{value:c?[d(g[0]),d(g[1])]:d(g),done:m}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(n){return function(...e){return n==="delete"?!1:this}}function createInstrumentations(){const n={get(a){return get(this,a)},get size(){return size(this)},has,add:add$1,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(a){return get(this,a,!1,!0)},get size(){return size(this)},has,add:add$1,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},r={get(a){return get(this,a,!0)},get size(){return size(this,!0)},has(a){return has.call(this,a,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},s={get(a){return get(this,a,!0,!0)},get size(){return size(this,!0)},has(a){return has.call(this,a,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=createIterableMethod(a,!1,!1),r[a]=createIterableMethod(a,!0,!1),e[a]=createIterableMethod(a,!1,!0),s[a]=createIterableMethod(a,!0,!0)}),[n,r,e,s]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(n,e){const r=e?n?shallowReadonlyInstrumentations:shallowInstrumentations:n?readonlyInstrumentations:mutableInstrumentations;return(s,o,a)=>o==="__v_isReactive"?!n:o==="__v_isReadonly"?n:o==="__v_raw"?s:Reflect.get(hasOwn$2(r,o)&&o in s?r:s,o,a)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(n){return n.__v_skip||!Object.isExtensible(n)?0:targetTypeMap(toRawType(n))}function reactive(n){return isReadonly(n)?n:createReactiveObject(n,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(n){return createReactiveObject(n,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(n){return createReactiveObject(n,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(n,e,r,s,o){if(!isObject$2(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const a=o.get(n);if(a)return a;const l=getTargetType(n);if(l===0)return n;const c=new Proxy(n,l===2?s:r);return o.set(n,c),c}function isReactive(n){return isReadonly(n)?isReactive(n.__v_raw):!!(n&&n.__v_isReactive)}function isReadonly(n){return!!(n&&n.__v_isReadonly)}function isShallow(n){return!!(n&&n.__v_isShallow)}function isProxy(n){return isReactive(n)||isReadonly(n)}function toRaw(n){const e=n&&n.__v_raw;return e?toRaw(e):n}function markRaw(n){return def(n,"__v_skip",!0),n}const toReactive=n=>isObject$2(n)?reactive(n):n,toReadonly=n=>isObject$2(n)?readonly(n):n;function trackRefValue(n){shouldTrack&&activeEffect&&(n=toRaw(n),trackEffects(n.dep||(n.dep=createDep())))}function triggerRefValue(n,e){n=toRaw(n);const r=n.dep;r&&triggerEffects(r)}function isRef(n){return!!(n&&n.__v_isRef===!0)}function shallowRef(n){return createRef(n,!0)}function createRef(n,e){return isRef(n)?n:new RefImpl(n,e)}class RefImpl{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:toRaw(e),this._value=r?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const r=this.__v_isShallow||isShallow(e)||isReadonly(e);e=r?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:toReactive(e),triggerRefValue(this))}}function unref(n){return isRef(n)?n.value:n}const shallowUnwrapHandlers={get:(n,e,r)=>unref(Reflect.get(n,e,r)),set:(n,e,r,s)=>{const o=n[e];return isRef(o)&&!isRef(r)?(o.value=r,!0):Reflect.set(n,e,r,s)}};function proxyRefs(n){return isReactive(n)?n:new Proxy(n,shallowUnwrapHandlers)}var _a$1;class ComputedRefImpl{constructor(e,r,s,o){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_a$1="__v_isReadonly";function computed$1(n,e,r=!1){let s,o;const a=isFunction(n);return a?(s=n,o=NOOP):(s=n.get,o=n.set),new ComputedRefImpl(s,o,a||!o,r)}function warn(n,...e){}function callWithErrorHandling(n,e,r,s){let o;try{o=s?n(...s):n()}catch(a){handleError(a,e,r)}return o}function callWithAsyncErrorHandling(n,e,r,s){if(isFunction(n)){const a=callWithErrorHandling(n,e,r,s);return a&&isPromise(a)&&a.catch(l=>{handleError(l,e,r)}),a}const o=[];for(let a=0;a<n.length;a++)o.push(callWithAsyncErrorHandling(n[a],e,r,s));return o}function handleError(n,e,r,s=!0){const o=e?e.vnode:null;if(e){let a=e.parent;const l=e.proxy,c=r;for(;a;){const f=a.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](n,l,c)===!1)return}a=a.parent}const u=e.appContext.config.errorHandler;if(u){callWithErrorHandling(u,null,10,[n,l,c]);return}}logError(n,r,o,s)}function logError(n,e,r,s=!0){console.error(n)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(n){const e=currentFlushPromise||resolvedPromise;return n?e.then(this?n.bind(this):n):e}function findInsertionIndex(n){let e=flushIndex+1,r=queue.length;for(;e<r;){const s=e+r>>>1;getId(queue[s])<n?e=s+1:r=s}return e}function queueJob(n){(!queue.length||!queue.includes(n,isFlushing&&n.allowRecurse?flushIndex+1:flushIndex))&&(n.id==null?queue.push(n):queue.splice(findInsertionIndex(n.id),0,n),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(n){const e=queue.indexOf(n);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(n){isArray(n)?pendingPostFlushCbs.push(...n):(!activePostFlushCbs||!activePostFlushCbs.includes(n,n.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(n),queueFlush()}function flushPreFlushCbs(n,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const r=queue[e];r&&r.pre&&(queue.splice(e,1),e--,r())}}function flushPostFlushCbs(n){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((r,s)=>getId(r)-getId(s)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=n=>n.id==null?1/0:n.id,comparator=(n,e)=>{const r=getId(n)-getId(e);if(r===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return r};function flushJobs(n){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&r.active!==!1&&callWithErrorHandling(r,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(n,e,...r){if(n.isUnmounted)return;const s=n.vnode.props||EMPTY_OBJ;let o=r;const a=e.startsWith("update:"),l=a&&e.slice(7);if(l&&l in s){const d=`${l==="modelValue"?"model":l}Modifiers`,{number:g,trim:m}=s[d]||EMPTY_OBJ;m&&(o=r.map(_=>isString(_)?_.trim():_)),g&&(o=r.map(looseToNumber))}let c,u=s[c=toHandlerKey(e)]||s[c=toHandlerKey(camelize(e))];!u&&a&&(u=s[c=toHandlerKey(hyphenate(e))]),u&&callWithAsyncErrorHandling(u,n,6,o);const f=s[c+"Once"];if(f){if(!n.emitted)n.emitted={};else if(n.emitted[c])return;n.emitted[c]=!0,callWithAsyncErrorHandling(f,n,6,o)}}function normalizeEmitsOptions(n,e,r=!1){const s=e.emitsCache,o=s.get(n);if(o!==void 0)return o;const a=n.emits;let l={},c=!1;if(!isFunction(n)){const u=f=>{const d=normalizeEmitsOptions(f,e,!0);d&&(c=!0,extend$3(l,d))};!r&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}return!a&&!c?(isObject$2(n)&&s.set(n,null),null):(isArray(a)?a.forEach(u=>l[u]=null):extend$3(l,a),isObject$2(n)&&s.set(n,l),l)}function isEmitListener(n,e){return!n||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn$2(n,e[0].toLowerCase()+e.slice(1))||hasOwn$2(n,hyphenate(e))||hasOwn$2(n,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(n){const e=currentRenderingInstance;return currentRenderingInstance=n,currentScopeId=n&&n.type.__scopeId||null,e}function pushScopeId(n){currentScopeId=n}function popScopeId(){currentScopeId=null}function withCtx(n,e=currentRenderingInstance,r){if(!e||n._n)return n;const s=(...o)=>{s._d&&setBlockTracking(-1);const a=setCurrentRenderingInstance(e);let l;try{l=n(...o)}finally{setCurrentRenderingInstance(a),s._d&&setBlockTracking(1)}return l};return s._n=!0,s._c=!0,s._d=!0,s}function markAttrsAccessed(){}function renderComponentRoot(n){const{type:e,vnode:r,proxy:s,withProxy:o,props:a,propsOptions:[l],slots:c,attrs:u,emit:f,render:d,renderCache:g,data:m,setupState:_,ctx:E,inheritAttrs:A}=n;let b,v;const M=setCurrentRenderingInstance(n);try{if(r.shapeFlag&4){const R=o||s;b=normalizeVNode(d.call(R,R,g,a,_,m,E)),v=u}else{const R=e;b=normalizeVNode(R.length>1?R(a,{attrs:u,slots:c,emit:f}):R(a,null)),v=e.props?u:getFunctionalFallthrough(u)}}catch(R){blockStack.length=0,handleError(R,n,1),b=createVNode(Comment)}let V=b;if(v&&A!==!1){const R=Object.keys(v),{shapeFlag:L}=V;R.length&&L&7&&(l&&R.some(isModelListener)&&(v=filterModelListeners(v,l)),V=cloneVNode(V,v))}return r.dirs&&(V=cloneVNode(V),V.dirs=V.dirs?V.dirs.concat(r.dirs):r.dirs),r.transition&&(V.transition=r.transition),b=V,setCurrentRenderingInstance(M),b}const getFunctionalFallthrough=n=>{let e;for(const r in n)(r==="class"||r==="style"||isOn(r))&&((e||(e={}))[r]=n[r]);return e},filterModelListeners=(n,e)=>{const r={};for(const s in n)(!isModelListener(s)||!(s.slice(9)in e))&&(r[s]=n[s]);return r};function shouldUpdateComponent(n,e,r){const{props:s,children:o,component:a}=n,{props:l,children:c,patchFlag:u}=e,f=a.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&u>=0){if(u&1024)return!0;if(u&16)return s?hasPropsChanged(s,l,f):!!l;if(u&8){const d=e.dynamicProps;for(let g=0;g<d.length;g++){const m=d[g];if(l[m]!==s[m]&&!isEmitListener(f,m))return!0}}}else return(o||c)&&(!c||!c.$stable)?!0:s===l?!1:s?l?hasPropsChanged(s,l,f):!0:!!l;return!1}function hasPropsChanged(n,e,r){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let o=0;o<s.length;o++){const a=s[o];if(e[a]!==n[a]&&!isEmitListener(r,a))return!0}return!1}function updateHOCHostEl({vnode:n,parent:e},r){for(;e&&e.subTree===n;)(n=e.vnode).el=r,e=e.parent}const isSuspense=n=>n.__isSuspense;function queueEffectWithSuspense(n,e){e&&e.pendingBranch?isArray(n)?e.effects.push(...n):e.effects.push(n):queuePostFlushCb(n)}function provide(n,e){if(currentInstance){let r=currentInstance.provides;const s=currentInstance.parent&&currentInstance.parent.provides;s===r&&(r=currentInstance.provides=Object.create(s)),r[n]=e}}function inject(n,e,r=!1){const s=currentInstance||currentRenderingInstance;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&n in o)return o[n];if(arguments.length>1)return r&&isFunction(e)?e.call(s.proxy):e}}const INITIAL_WATCHER_VALUE={};function watch(n,e,r){return doWatch(n,e,r)}function doWatch(n,e,{immediate:r,deep:s,flush:o,onTrack:a,onTrigger:l}=EMPTY_OBJ){const c=getCurrentScope()===(currentInstance==null?void 0:currentInstance.scope)?currentInstance:null;let u,f=!1,d=!1;if(isRef(n)?(u=()=>n.value,f=isShallow(n)):isReactive(n)?(u=()=>n,s=!0):isArray(n)?(d=!0,f=n.some(V=>isReactive(V)||isShallow(V)),u=()=>n.map(V=>{if(isRef(V))return V.value;if(isReactive(V))return traverse(V);if(isFunction(V))return callWithErrorHandling(V,c,2)})):isFunction(n)?e?u=()=>callWithErrorHandling(n,c,2):u=()=>{if(!(c&&c.isUnmounted))return g&&g(),callWithAsyncErrorHandling(n,c,3,[m])}:u=NOOP,e&&s){const V=u;u=()=>traverse(V())}let g,m=V=>{g=v.onStop=()=>{callWithErrorHandling(V,c,4)}},_;if(isInSSRComponentSetup)if(m=NOOP,e?r&&callWithAsyncErrorHandling(e,c,3,[u(),d?[]:void 0,m]):u(),o==="sync"){const V=useSSRContext();_=V.__watcherHandles||(V.__watcherHandles=[])}else return NOOP;let E=d?new Array(n.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const A=()=>{if(v.active)if(e){const V=v.run();(s||f||(d?V.some((R,L)=>hasChanged(R,E[L])):hasChanged(V,E)))&&(g&&g(),callWithAsyncErrorHandling(e,c,3,[V,E===INITIAL_WATCHER_VALUE?void 0:d&&E[0]===INITIAL_WATCHER_VALUE?[]:E,m]),E=V)}else v.run()};A.allowRecurse=!!e;let b;o==="sync"?b=A:o==="post"?b=()=>queuePostRenderEffect(A,c&&c.suspense):(A.pre=!0,c&&(A.id=c.uid),b=()=>queueJob(A));const v=new ReactiveEffect(u,b);e?r?A():E=v.run():o==="post"?queuePostRenderEffect(v.run.bind(v),c&&c.suspense):v.run();const M=()=>{v.stop(),c&&c.scope&&remove$1(c.scope.effects,v)};return _&&_.push(M),M}function instanceWatch(n,e,r){const s=this.proxy,o=isString(n)?n.includes(".")?createPathGetter(s,n):()=>s[n]:n.bind(s,s);let a;isFunction(e)?a=e:(a=e.handler,r=e);const l=currentInstance;setCurrentInstance(this);const c=doWatch(o,a.bind(s),r);return l?setCurrentInstance(l):unsetCurrentInstance(),c}function createPathGetter(n,e){const r=e.split(".");return()=>{let s=n;for(let o=0;o<r.length&&s;o++)s=s[r[o]];return s}}function traverse(n,e){if(!isObject$2(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),isRef(n))traverse(n.value,e);else if(isArray(n))for(let r=0;r<n.length;r++)traverse(n[r],e);else if(isSet(n)||isMap(n))n.forEach(r=>{traverse(r,e)});else if(isPlainObject(n))for(const r in n)traverse(n[r],e);return n}function defineComponent(n){return isFunction(n)?{setup:n,name:n.name}:n}const isAsyncWrapper=n=>!!n.type.__asyncLoader,isKeepAlive=n=>n.type.__isKeepAlive;function onActivated(n,e){registerKeepAliveHook(n,"a",e)}function onDeactivated(n,e){registerKeepAliveHook(n,"da",e)}function registerKeepAliveHook(n,e,r=currentInstance){const s=n.__wdc||(n.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return n()});if(injectHook(e,s,r),r){let o=r.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(s,e,r,o),o=o.parent}}function injectToKeepAliveRoot(n,e,r,s){const o=injectHook(e,n,s,!0);onUnmounted(()=>{remove$1(s[e],o)},r)}function injectHook(n,e,r=currentInstance,s=!1){if(r){const o=r[n]||(r[n]=[]),a=e.__weh||(e.__weh=(...l)=>{if(r.isUnmounted)return;pauseTracking(),setCurrentInstance(r);const c=callWithAsyncErrorHandling(e,r,n,l);return unsetCurrentInstance(),resetTracking(),c});return s?o.unshift(a):o.push(a),a}}const createHook=n=>(e,r=currentInstance)=>(!isInSSRComponentSetup||n==="sp")&&injectHook(n,(...s)=>e(...s),r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(n,e=currentInstance){injectHook("ec",n,e)}function withDirectives(n,e){const r=currentRenderingInstance;if(r===null)return n;const s=getExposeProxy(r)||r.proxy,o=n.dirs||(n.dirs=[]);for(let a=0;a<e.length;a++){let[l,c,u,f=EMPTY_OBJ]=e[a];l&&(isFunction(l)&&(l={mounted:l,updated:l}),l.deep&&traverse(c),o.push({dir:l,instance:s,value:c,oldValue:void 0,arg:u,modifiers:f}))}return n}function invokeDirectiveHook(n,e,r,s){const o=n.dirs,a=e&&e.dirs;for(let l=0;l<o.length;l++){const c=o[l];a&&(c.oldValue=a[l].value);let u=c.dir[s];u&&(pauseTracking(),callWithAsyncErrorHandling(u,r,8,[n.el,c,n,e]),resetTracking())}}const COMPONENTS="components";function resolveComponent(n,e){return resolveAsset(COMPONENTS,n,!0,e)||n}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveAsset(n,e,r=!0,s=!1){const o=currentRenderingInstance||currentInstance;if(o){const a=o.type;if(n===COMPONENTS){const c=getComponentName(a,!1);if(c&&(c===e||c===camelize(e)||c===capitalize(camelize(e))))return a}const l=resolve(o[n]||a[n],e)||resolve(o.appContext[n],e);return!l&&s?a:l}}function resolve(n,e){return n&&(n[e]||n[camelize(e)]||n[capitalize(camelize(e))])}function renderList(n,e,r,s){let o;const a=r&&r[s];if(isArray(n)||isString(n)){o=new Array(n.length);for(let l=0,c=n.length;l<c;l++)o[l]=e(n[l],l,void 0,a&&a[l])}else if(typeof n=="number"){o=new Array(n);for(let l=0;l<n;l++)o[l]=e(l+1,l,void 0,a&&a[l])}else if(isObject$2(n))if(n[Symbol.iterator])o=Array.from(n,(l,c)=>e(l,c,void 0,a&&a[c]));else{const l=Object.keys(n);o=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const f=l[c];o[c]=e(n[f],f,c,a&&a[c])}}else o=[];return r&&(r[s]=o),o}function renderSlot(n,e,r={},s,o){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return e!=="default"&&(r.name=e),createVNode("slot",r,s&&s());let a=n[e];a&&a._c&&(a._d=!1),openBlock();const l=a&&ensureValidVNode(a(r)),c=createBlock(Fragment,{key:r.key||l&&l.key||`_${e}`},l||(s?s():[]),l&&n._===1?64:-2);return!o&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),a&&a._c&&(a._d=!0),c}function ensureValidVNode(n){return n.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?n:null}const getPublicInstance=n=>n?isStatefulComponent(n)?getExposeProxy(n)||n.proxy:getPublicInstance(n.parent):null,publicPropertiesMap=extend$3(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>getPublicInstance(n.parent),$root:n=>getPublicInstance(n.root),$emit:n=>n.emit,$options:n=>resolveMergedOptions(n),$forceUpdate:n=>n.f||(n.f=()=>queueJob(n.update)),$nextTick:n=>n.n||(n.n=nextTick.bind(n.proxy)),$watch:n=>instanceWatch.bind(n)}),hasSetupBinding=(n,e)=>n!==EMPTY_OBJ&&!n.__isScriptSetup&&hasOwn$2(n,e),PublicInstanceProxyHandlers={get({_:n},e){const{ctx:r,setupState:s,data:o,props:a,accessCache:l,type:c,appContext:u}=n;let f;if(e[0]!=="$"){const _=l[e];if(_!==void 0)switch(_){case 1:return s[e];case 2:return o[e];case 4:return r[e];case 3:return a[e]}else{if(hasSetupBinding(s,e))return l[e]=1,s[e];if(o!==EMPTY_OBJ&&hasOwn$2(o,e))return l[e]=2,o[e];if((f=n.propsOptions[0])&&hasOwn$2(f,e))return l[e]=3,a[e];if(r!==EMPTY_OBJ&&hasOwn$2(r,e))return l[e]=4,r[e];shouldCacheAccess&&(l[e]=0)}}const d=publicPropertiesMap[e];let g,m;if(d)return e==="$attrs"&&track(n,"get",e),d(n);if((g=c.__cssModules)&&(g=g[e]))return g;if(r!==EMPTY_OBJ&&hasOwn$2(r,e))return l[e]=4,r[e];if(m=u.config.globalProperties,hasOwn$2(m,e))return m[e]},set({_:n},e,r){const{data:s,setupState:o,ctx:a}=n;return hasSetupBinding(o,e)?(o[e]=r,!0):s!==EMPTY_OBJ&&hasOwn$2(s,e)?(s[e]=r,!0):hasOwn$2(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(a[e]=r,!0)},has({_:{data:n,setupState:e,accessCache:r,ctx:s,appContext:o,propsOptions:a}},l){let c;return!!r[l]||n!==EMPTY_OBJ&&hasOwn$2(n,l)||hasSetupBinding(e,l)||(c=a[0])&&hasOwn$2(c,l)||hasOwn$2(s,l)||hasOwn$2(publicPropertiesMap,l)||hasOwn$2(o.config.globalProperties,l)},defineProperty(n,e,r){return r.get!=null?n._.accessCache[e]=0:hasOwn$2(r,"value")&&this.set(n,e,r.value,null),Reflect.defineProperty(n,e,r)}};let shouldCacheAccess=!0;function applyOptions(n){const e=resolveMergedOptions(n),r=n.proxy,s=n.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,n,"bc");const{data:o,computed:a,methods:l,watch:c,provide:u,inject:f,created:d,beforeMount:g,mounted:m,beforeUpdate:_,updated:E,activated:A,deactivated:b,beforeDestroy:v,beforeUnmount:M,destroyed:V,unmounted:R,render:L,renderTracked:N,renderTriggered:$,errorCaptured:I,serverPrefetch:H,expose:k,inheritAttrs:q,components:G,directives:J,filters:ne}=e;if(f&&resolveInjections(f,s,null,n.appContext.config.unwrapInjectedRef),l)for(const me in l){const fe=l[me];isFunction(fe)&&(s[me]=fe.bind(r))}if(o){const me=o.call(r,r);isObject$2(me)&&(n.data=reactive(me))}if(shouldCacheAccess=!0,a)for(const me in a){const fe=a[me],ee=isFunction(fe)?fe.bind(r,r):isFunction(fe.get)?fe.get.bind(r,r):NOOP,K=!isFunction(fe)&&isFunction(fe.set)?fe.set.bind(r):NOOP,he=computed({get:ee,set:K});Object.defineProperty(s,me,{enumerable:!0,configurable:!0,get:()=>he.value,set:ge=>he.value=ge})}if(c)for(const me in c)createWatcher(c[me],s,r,me);if(u){const me=isFunction(u)?u.call(r):u;Reflect.ownKeys(me).forEach(fe=>{provide(fe,me[fe])})}d&&callHook(d,n,"c");function le(me,fe){isArray(fe)?fe.forEach(ee=>me(ee.bind(r))):fe&&me(fe.bind(r))}if(le(onBeforeMount,g),le(onMounted,m),le(onBeforeUpdate,_),le(onUpdated,E),le(onActivated,A),le(onDeactivated,b),le(onErrorCaptured,I),le(onRenderTracked,N),le(onRenderTriggered,$),le(onBeforeUnmount,M),le(onUnmounted,R),le(onServerPrefetch,H),isArray(k))if(k.length){const me=n.exposed||(n.exposed={});k.forEach(fe=>{Object.defineProperty(me,fe,{get:()=>r[fe],set:ee=>r[fe]=ee})})}else n.exposed||(n.exposed={});L&&n.render===NOOP&&(n.render=L),q!=null&&(n.inheritAttrs=q),G&&(n.components=G),J&&(n.directives=J)}function resolveInjections(n,e,r=NOOP,s=!1){isArray(n)&&(n=normalizeInject(n));for(const o in n){const a=n[o];let l;isObject$2(a)?"default"in a?l=inject(a.from||o,a.default,!0):l=inject(a.from||o):l=inject(a),isRef(l)&&s?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:c=>l.value=c}):e[o]=l}}function callHook(n,e,r){callWithAsyncErrorHandling(isArray(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,r)}function createWatcher(n,e,r,s){const o=s.includes(".")?createPathGetter(r,s):()=>r[s];if(isString(n)){const a=e[n];isFunction(a)&&watch(o,a)}else if(isFunction(n))watch(o,n.bind(r));else if(isObject$2(n))if(isArray(n))n.forEach(a=>createWatcher(a,e,r,s));else{const a=isFunction(n.handler)?n.handler.bind(r):e[n.handler];isFunction(a)&&watch(o,a,n)}}function resolveMergedOptions(n){const e=n.type,{mixins:r,extends:s}=e,{mixins:o,optionsCache:a,config:{optionMergeStrategies:l}}=n.appContext,c=a.get(e);let u;return c?u=c:!o.length&&!r&&!s?u=e:(u={},o.length&&o.forEach(f=>mergeOptions(u,f,l,!0)),mergeOptions(u,e,l)),isObject$2(e)&&a.set(e,u),u}function mergeOptions(n,e,r,s=!1){const{mixins:o,extends:a}=e;a&&mergeOptions(n,a,r,!0),o&&o.forEach(l=>mergeOptions(n,l,r,!0));for(const l in e)if(!(s&&l==="expose")){const c=internalOptionMergeStrats[l]||r&&r[l];n[l]=c?c(n[l],e[l]):e[l]}return n}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(n,e){return e?n?function(){return extend$3(isFunction(n)?n.call(this,this):n,isFunction(e)?e.call(this,this):e)}:e:n}function mergeInject(n,e){return mergeObjectOptions(normalizeInject(n),normalizeInject(e))}function normalizeInject(n){if(isArray(n)){const e={};for(let r=0;r<n.length;r++)e[n[r]]=n[r];return e}return n}function mergeAsArray(n,e){return n?[...new Set([].concat(n,e))]:e}function mergeObjectOptions(n,e){return n?extend$3(extend$3(Object.create(null),n),e):e}function mergeWatchOptions(n,e){if(!n)return e;if(!e)return n;const r=extend$3(Object.create(null),n);for(const s in e)r[s]=mergeAsArray(n[s],e[s]);return r}function initProps(n,e,r,s=!1){const o={},a={};def(a,InternalObjectKey,1),n.propsDefaults=Object.create(null),setFullProps(n,e,o,a);for(const l in n.propsOptions[0])l in o||(o[l]=void 0);r?n.props=s?o:shallowReactive(o):n.type.props?n.props=o:n.props=a,n.attrs=a}function updateProps(n,e,r,s){const{props:o,attrs:a,vnode:{patchFlag:l}}=n,c=toRaw(o),[u]=n.propsOptions;let f=!1;if((s||l>0)&&!(l&16)){if(l&8){const d=n.vnode.dynamicProps;for(let g=0;g<d.length;g++){let m=d[g];if(isEmitListener(n.emitsOptions,m))continue;const _=e[m];if(u)if(hasOwn$2(a,m))_!==a[m]&&(a[m]=_,f=!0);else{const E=camelize(m);o[E]=resolvePropValue(u,c,E,_,n,!1)}else _!==a[m]&&(a[m]=_,f=!0)}}}else{setFullProps(n,e,o,a)&&(f=!0);let d;for(const g in c)(!e||!hasOwn$2(e,g)&&((d=hyphenate(g))===g||!hasOwn$2(e,d)))&&(u?r&&(r[g]!==void 0||r[d]!==void 0)&&(o[g]=resolvePropValue(u,c,g,void 0,n,!0)):delete o[g]);if(a!==c)for(const g in a)(!e||!hasOwn$2(e,g))&&(delete a[g],f=!0)}f&&trigger(n,"set","$attrs")}function setFullProps(n,e,r,s){const[o,a]=n.propsOptions;let l=!1,c;if(e)for(let u in e){if(isReservedProp(u))continue;const f=e[u];let d;o&&hasOwn$2(o,d=camelize(u))?!a||!a.includes(d)?r[d]=f:(c||(c={}))[d]=f:isEmitListener(n.emitsOptions,u)||(!(u in s)||f!==s[u])&&(s[u]=f,l=!0)}if(a){const u=toRaw(r),f=c||EMPTY_OBJ;for(let d=0;d<a.length;d++){const g=a[d];r[g]=resolvePropValue(o,u,g,f[g],n,!hasOwn$2(f,g))}}return l}function resolvePropValue(n,e,r,s,o,a){const l=n[r];if(l!=null){const c=hasOwn$2(l,"default");if(c&&s===void 0){const u=l.default;if(l.type!==Function&&isFunction(u)){const{propsDefaults:f}=o;r in f?s=f[r]:(setCurrentInstance(o),s=f[r]=u.call(null,e),unsetCurrentInstance())}else s=u}l[0]&&(a&&!c?s=!1:l[1]&&(s===""||s===hyphenate(r))&&(s=!0))}return s}function normalizePropsOptions(n,e,r=!1){const s=e.propsCache,o=s.get(n);if(o)return o;const a=n.props,l={},c=[];let u=!1;if(!isFunction(n)){const d=g=>{u=!0;const[m,_]=normalizePropsOptions(g,e,!0);extend$3(l,m),_&&c.push(..._)};!r&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!a&&!u)return isObject$2(n)&&s.set(n,EMPTY_ARR),EMPTY_ARR;if(isArray(a))for(let d=0;d<a.length;d++){const g=camelize(a[d]);validatePropName(g)&&(l[g]=EMPTY_OBJ)}else if(a)for(const d in a){const g=camelize(d);if(validatePropName(g)){const m=a[d],_=l[g]=isArray(m)||isFunction(m)?{type:m}:Object.assign({},m);if(_){const E=getTypeIndex(Boolean,_.type),A=getTypeIndex(String,_.type);_[0]=E>-1,_[1]=A<0||E<A,(E>-1||hasOwn$2(_,"default"))&&c.push(g)}}}const f=[l,c];return isObject$2(n)&&s.set(n,f),f}function validatePropName(n){return n[0]!=="$"}function getType(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function isSameType(n,e){return getType(n)===getType(e)}function getTypeIndex(n,e){return isArray(e)?e.findIndex(r=>isSameType(r,n)):isFunction(e)&&isSameType(e,n)?0:-1}const isInternalKey=n=>n[0]==="_"||n==="$stable",normalizeSlotValue=n=>isArray(n)?n.map(normalizeVNode):[normalizeVNode(n)],normalizeSlot=(n,e,r)=>{if(e._n)return e;const s=withCtx((...o)=>normalizeSlotValue(e(...o)),r);return s._c=!1,s},normalizeObjectSlots=(n,e,r)=>{const s=n._ctx;for(const o in n){if(isInternalKey(o))continue;const a=n[o];if(isFunction(a))e[o]=normalizeSlot(o,a,s);else if(a!=null){const l=normalizeSlotValue(a);e[o]=()=>l}}},normalizeVNodeSlots=(n,e)=>{const r=normalizeSlotValue(e);n.slots.default=()=>r},initSlots=(n,e)=>{if(n.vnode.shapeFlag&32){const r=e._;r?(n.slots=toRaw(e),def(e,"_",r)):normalizeObjectSlots(e,n.slots={})}else n.slots={},e&&normalizeVNodeSlots(n,e);def(n.slots,InternalObjectKey,1)},updateSlots=(n,e,r)=>{const{vnode:s,slots:o}=n;let a=!0,l=EMPTY_OBJ;if(s.shapeFlag&32){const c=e._;c?r&&c===1?a=!1:(extend$3(o,e),!r&&c===1&&delete o._):(a=!e.$stable,normalizeObjectSlots(e,o)),l=e}else e&&(normalizeVNodeSlots(n,e),l={default:1});if(a)for(const c in o)!isInternalKey(c)&&!(c in l)&&delete o[c]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(n,e){return function(s,o=null){isFunction(s)||(s=Object.assign({},s)),o!=null&&!isObject$2(o)&&(o=null);const a=createAppContext(),l=new Set;let c=!1;const u=a.app={_uid:uid$1++,_component:s,_props:o,_container:null,_context:a,_instance:null,version:version$2,get config(){return a.config},set config(f){},use(f,...d){return l.has(f)||(f&&isFunction(f.install)?(l.add(f),f.install(u,...d)):isFunction(f)&&(l.add(f),f(u,...d))),u},mixin(f){return a.mixins.includes(f)||a.mixins.push(f),u},component(f,d){return d?(a.components[f]=d,u):a.components[f]},directive(f,d){return d?(a.directives[f]=d,u):a.directives[f]},mount(f,d,g){if(!c){const m=createVNode(s,o);return m.appContext=a,d&&e?e(m,f):n(m,f,g),c=!0,u._container=f,f.__vue_app__=u,getExposeProxy(m.component)||m.component.proxy}},unmount(){c&&(n(null,u._container),delete u._container.__vue_app__)},provide(f,d){return a.provides[f]=d,u}};return u}}function setRef(n,e,r,s,o=!1){if(isArray(n)){n.forEach((m,_)=>setRef(m,e&&(isArray(e)?e[_]:e),r,s,o));return}if(isAsyncWrapper(s)&&!o)return;const a=s.shapeFlag&4?getExposeProxy(s.component)||s.component.proxy:s.el,l=o?null:a,{i:c,r:u}=n,f=e&&e.r,d=c.refs===EMPTY_OBJ?c.refs={}:c.refs,g=c.setupState;if(f!=null&&f!==u&&(isString(f)?(d[f]=null,hasOwn$2(g,f)&&(g[f]=null)):isRef(f)&&(f.value=null)),isFunction(u))callWithErrorHandling(u,c,12,[l,d]);else{const m=isString(u),_=isRef(u);if(m||_){const E=()=>{if(n.f){const A=m?hasOwn$2(g,u)?g[u]:d[u]:u.value;o?isArray(A)&&remove$1(A,a):isArray(A)?A.includes(a)||A.push(a):m?(d[u]=[a],hasOwn$2(g,u)&&(g[u]=d[u])):(u.value=[a],n.k&&(d[n.k]=u.value))}else m?(d[u]=l,hasOwn$2(g,u)&&(g[u]=l)):_&&(u.value=l,n.k&&(d[n.k]=l))};l?(E.id=-1,queuePostRenderEffect(E,r)):E()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(n){return baseCreateRenderer(n)}function baseCreateRenderer(n,e){const r=getGlobalThis();r.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:l,createText:c,createComment:u,setText:f,setElementText:d,parentNode:g,nextSibling:m,setScopeId:_=NOOP,insertStaticContent:E}=n,A=(W,Q,X,Y=null,Z=null,se=null,ae=!1,re=null,oe=!!Q.dynamicChildren)=>{if(W===Q)return;W&&!isSameVNodeType(W,Q)&&(Y=Ae(W),ge(W,Z,se,!0),W=null),Q.patchFlag===-2&&(oe=!1,Q.dynamicChildren=null);const{type:te,ref:de,shapeFlag:ue}=Q;switch(te){case Text$1:b(W,Q,X,Y);break;case Comment:v(W,Q,X,Y);break;case Static:W==null&&M(Q,X,Y,ae);break;case Fragment:G(W,Q,X,Y,Z,se,ae,re,oe);break;default:ue&1?L(W,Q,X,Y,Z,se,ae,re,oe):ue&6?J(W,Q,X,Y,Z,se,ae,re,oe):(ue&64||ue&128)&&te.process(W,Q,X,Y,Z,se,ae,re,oe,Me)}de!=null&&Z&&setRef(de,W&&W.ref,se,Q||W,!Q)},b=(W,Q,X,Y)=>{if(W==null)s(Q.el=c(Q.children),X,Y);else{const Z=Q.el=W.el;Q.children!==W.children&&f(Z,Q.children)}},v=(W,Q,X,Y)=>{W==null?s(Q.el=u(Q.children||""),X,Y):Q.el=W.el},M=(W,Q,X,Y)=>{[W.el,W.anchor]=E(W.children,Q,X,Y,W.el,W.anchor)},V=({el:W,anchor:Q},X,Y)=>{let Z;for(;W&&W!==Q;)Z=m(W),s(W,X,Y),W=Z;s(Q,X,Y)},R=({el:W,anchor:Q})=>{let X;for(;W&&W!==Q;)X=m(W),o(W),W=X;o(Q)},L=(W,Q,X,Y,Z,se,ae,re,oe)=>{ae=ae||Q.type==="svg",W==null?N(Q,X,Y,Z,se,ae,re,oe):H(W,Q,Z,se,ae,re,oe)},N=(W,Q,X,Y,Z,se,ae,re)=>{let oe,te;const{type:de,props:ue,shapeFlag:pe,transition:_e,dirs:ye}=W;if(oe=W.el=l(W.type,se,ue&&ue.is,ue),pe&8?d(oe,W.children):pe&16&&I(W.children,oe,null,Y,Z,se&&de!=="foreignObject",ae,re),ye&&invokeDirectiveHook(W,null,Y,"created"),$(oe,W,W.scopeId,ae,Y),ue){for(const ve in ue)ve!=="value"&&!isReservedProp(ve)&&a(oe,ve,null,ue[ve],se,W.children,Y,Z,Ce);"value"in ue&&a(oe,"value",null,ue.value),(te=ue.onVnodeBeforeMount)&&invokeVNodeHook(te,Y,W)}ye&&invokeDirectiveHook(W,null,Y,"beforeMount");const xe=(!Z||Z&&!Z.pendingBranch)&&_e&&!_e.persisted;xe&&_e.beforeEnter(oe),s(oe,Q,X),((te=ue&&ue.onVnodeMounted)||xe||ye)&&queuePostRenderEffect(()=>{te&&invokeVNodeHook(te,Y,W),xe&&_e.enter(oe),ye&&invokeDirectiveHook(W,null,Y,"mounted")},Z)},$=(W,Q,X,Y,Z)=>{if(X&&_(W,X),Y)for(let se=0;se<Y.length;se++)_(W,Y[se]);if(Z){let se=Z.subTree;if(Q===se){const ae=Z.vnode;$(W,ae,ae.scopeId,ae.slotScopeIds,Z.parent)}}},I=(W,Q,X,Y,Z,se,ae,re,oe=0)=>{for(let te=oe;te<W.length;te++){const de=W[te]=re?cloneIfMounted(W[te]):normalizeVNode(W[te]);A(null,de,Q,X,Y,Z,se,ae,re)}},H=(W,Q,X,Y,Z,se,ae)=>{const re=Q.el=W.el;let{patchFlag:oe,dynamicChildren:te,dirs:de}=Q;oe|=W.patchFlag&16;const ue=W.props||EMPTY_OBJ,pe=Q.props||EMPTY_OBJ;let _e;X&&toggleRecurse(X,!1),(_e=pe.onVnodeBeforeUpdate)&&invokeVNodeHook(_e,X,Q,W),de&&invokeDirectiveHook(Q,W,X,"beforeUpdate"),X&&toggleRecurse(X,!0);const ye=Z&&Q.type!=="foreignObject";if(te?k(W.dynamicChildren,te,re,X,Y,ye,se):ae||fe(W,Q,re,null,X,Y,ye,se,!1),oe>0){if(oe&16)q(re,Q,ue,pe,X,Y,Z);else if(oe&2&&ue.class!==pe.class&&a(re,"class",null,pe.class,Z),oe&4&&a(re,"style",ue.style,pe.style,Z),oe&8){const xe=Q.dynamicProps;for(let ve=0;ve<xe.length;ve++){const we=xe[ve],Oe=ue[we],Pe=pe[we];(Pe!==Oe||we==="value")&&a(re,we,Oe,Pe,Z,W.children,X,Y,Ce)}}oe&1&&W.children!==Q.children&&d(re,Q.children)}else!ae&&te==null&&q(re,Q,ue,pe,X,Y,Z);((_e=pe.onVnodeUpdated)||de)&&queuePostRenderEffect(()=>{_e&&invokeVNodeHook(_e,X,Q,W),de&&invokeDirectiveHook(Q,W,X,"updated")},Y)},k=(W,Q,X,Y,Z,se,ae)=>{for(let re=0;re<Q.length;re++){const oe=W[re],te=Q[re],de=oe.el&&(oe.type===Fragment||!isSameVNodeType(oe,te)||oe.shapeFlag&70)?g(oe.el):X;A(oe,te,de,null,Y,Z,se,ae,!0)}},q=(W,Q,X,Y,Z,se,ae)=>{if(X!==Y){if(X!==EMPTY_OBJ)for(const re in X)!isReservedProp(re)&&!(re in Y)&&a(W,re,X[re],null,ae,Q.children,Z,se,Ce);for(const re in Y){if(isReservedProp(re))continue;const oe=Y[re],te=X[re];oe!==te&&re!=="value"&&a(W,re,te,oe,ae,Q.children,Z,se,Ce)}"value"in Y&&a(W,"value",X.value,Y.value)}},G=(W,Q,X,Y,Z,se,ae,re,oe)=>{const te=Q.el=W?W.el:c(""),de=Q.anchor=W?W.anchor:c("");let{patchFlag:ue,dynamicChildren:pe,slotScopeIds:_e}=Q;_e&&(re=re?re.concat(_e):_e),W==null?(s(te,X,Y),s(de,X,Y),I(Q.children,X,de,Z,se,ae,re,oe)):ue>0&&ue&64&&pe&&W.dynamicChildren?(k(W.dynamicChildren,pe,X,Z,se,ae,re),(Q.key!=null||Z&&Q===Z.subTree)&&traverseStaticChildren(W,Q,!0)):fe(W,Q,X,de,Z,se,ae,re,oe)},J=(W,Q,X,Y,Z,se,ae,re,oe)=>{Q.slotScopeIds=re,W==null?Q.shapeFlag&512?Z.ctx.activate(Q,X,Y,ae,oe):ne(Q,X,Y,Z,se,ae,oe):ce(W,Q,oe)},ne=(W,Q,X,Y,Z,se,ae)=>{const re=W.component=createComponentInstance(W,Y,Z);if(isKeepAlive(W)&&(re.ctx.renderer=Me),setupComponent(re),re.asyncDep){if(Z&&Z.registerDep(re,le),!W.el){const oe=re.subTree=createVNode(Comment);v(null,oe,Q,X)}return}le(re,W,Q,X,Z,se,ae)},ce=(W,Q,X)=>{const Y=Q.component=W.component;if(shouldUpdateComponent(W,Q,X))if(Y.asyncDep&&!Y.asyncResolved){me(Y,Q,X);return}else Y.next=Q,invalidateJob(Y.update),Y.update();else Q.el=W.el,Y.vnode=Q},le=(W,Q,X,Y,Z,se,ae)=>{const re=()=>{if(W.isMounted){let{next:de,bu:ue,u:pe,parent:_e,vnode:ye}=W,xe=de,ve;toggleRecurse(W,!1),de?(de.el=ye.el,me(W,de,ae)):de=ye,ue&&invokeArrayFns(ue),(ve=de.props&&de.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ve,_e,de,ye),toggleRecurse(W,!0);const we=renderComponentRoot(W),Oe=W.subTree;W.subTree=we,A(Oe,we,g(Oe.el),Ae(Oe),W,Z,se),de.el=we.el,xe===null&&updateHOCHostEl(W,we.el),pe&&queuePostRenderEffect(pe,Z),(ve=de.props&&de.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ve,_e,de,ye),Z)}else{let de;const{el:ue,props:pe}=Q,{bm:_e,m:ye,parent:xe}=W,ve=isAsyncWrapper(Q);if(toggleRecurse(W,!1),_e&&invokeArrayFns(_e),!ve&&(de=pe&&pe.onVnodeBeforeMount)&&invokeVNodeHook(de,xe,Q),toggleRecurse(W,!0),ue&&Ne){const we=()=>{W.subTree=renderComponentRoot(W),Ne(ue,W.subTree,W,Z,null)};ve?Q.type.__asyncLoader().then(()=>!W.isUnmounted&&we()):we()}else{const we=W.subTree=renderComponentRoot(W);A(null,we,X,Y,W,Z,se),Q.el=we.el}if(ye&&queuePostRenderEffect(ye,Z),!ve&&(de=pe&&pe.onVnodeMounted)){const we=Q;queuePostRenderEffect(()=>invokeVNodeHook(de,xe,we),Z)}(Q.shapeFlag&256||xe&&isAsyncWrapper(xe.vnode)&&xe.vnode.shapeFlag&256)&&W.a&&queuePostRenderEffect(W.a,Z),W.isMounted=!0,Q=X=Y=null}},oe=W.effect=new ReactiveEffect(re,()=>queueJob(te),W.scope),te=W.update=()=>oe.run();te.id=W.uid,toggleRecurse(W,!0),te()},me=(W,Q,X)=>{Q.component=W;const Y=W.vnode.props;W.vnode=Q,W.next=null,updateProps(W,Q.props,Y,X),updateSlots(W,Q.children,X),pauseTracking(),flushPreFlushCbs(),resetTracking()},fe=(W,Q,X,Y,Z,se,ae,re,oe=!1)=>{const te=W&&W.children,de=W?W.shapeFlag:0,ue=Q.children,{patchFlag:pe,shapeFlag:_e}=Q;if(pe>0){if(pe&128){K(te,ue,X,Y,Z,se,ae,re,oe);return}else if(pe&256){ee(te,ue,X,Y,Z,se,ae,re,oe);return}}_e&8?(de&16&&Ce(te,Z,se),ue!==te&&d(X,ue)):de&16?_e&16?K(te,ue,X,Y,Z,se,ae,re,oe):Ce(te,Z,se,!0):(de&8&&d(X,""),_e&16&&I(ue,X,Y,Z,se,ae,re,oe))},ee=(W,Q,X,Y,Z,se,ae,re,oe)=>{W=W||EMPTY_ARR,Q=Q||EMPTY_ARR;const te=W.length,de=Q.length,ue=Math.min(te,de);let pe;for(pe=0;pe<ue;pe++){const _e=Q[pe]=oe?cloneIfMounted(Q[pe]):normalizeVNode(Q[pe]);A(W[pe],_e,X,null,Z,se,ae,re,oe)}te>de?Ce(W,Z,se,!0,!1,ue):I(Q,X,Y,Z,se,ae,re,oe,ue)},K=(W,Q,X,Y,Z,se,ae,re,oe)=>{let te=0;const de=Q.length;let ue=W.length-1,pe=de-1;for(;te<=ue&&te<=pe;){const _e=W[te],ye=Q[te]=oe?cloneIfMounted(Q[te]):normalizeVNode(Q[te]);if(isSameVNodeType(_e,ye))A(_e,ye,X,null,Z,se,ae,re,oe);else break;te++}for(;te<=ue&&te<=pe;){const _e=W[ue],ye=Q[pe]=oe?cloneIfMounted(Q[pe]):normalizeVNode(Q[pe]);if(isSameVNodeType(_e,ye))A(_e,ye,X,null,Z,se,ae,re,oe);else break;ue--,pe--}if(te>ue){if(te<=pe){const _e=pe+1,ye=_e<de?Q[_e].el:Y;for(;te<=pe;)A(null,Q[te]=oe?cloneIfMounted(Q[te]):normalizeVNode(Q[te]),X,ye,Z,se,ae,re,oe),te++}}else if(te>pe)for(;te<=ue;)ge(W[te],Z,se,!0),te++;else{const _e=te,ye=te,xe=new Map;for(te=ye;te<=pe;te++){const ke=Q[te]=oe?cloneIfMounted(Q[te]):normalizeVNode(Q[te]);ke.key!=null&&xe.set(ke.key,te)}let ve,we=0;const Oe=pe-ye+1;let Pe=!1,Le=0;const Re=new Array(Oe);for(te=0;te<Oe;te++)Re[te]=0;for(te=_e;te<=ue;te++){const ke=W[te];if(we>=Oe){ge(ke,Z,se,!0);continue}let Te;if(ke.key!=null)Te=xe.get(ke.key);else for(ve=ye;ve<=pe;ve++)if(Re[ve-ye]===0&&isSameVNodeType(ke,Q[ve])){Te=ve;break}Te===void 0?ge(ke,Z,se,!0):(Re[Te-ye]=te+1,Te>=Le?Le=Te:Pe=!0,A(ke,Q[Te],X,null,Z,se,ae,re,oe),we++)}const $e=Pe?getSequence(Re):EMPTY_ARR;for(ve=$e.length-1,te=Oe-1;te>=0;te--){const ke=ye+te,Te=Q[ke],Ie=ke+1<de?Q[ke+1].el:Y;Re[te]===0?A(null,Te,X,Ie,Z,se,ae,re,oe):Pe&&(ve<0||te!==$e[ve]?he(Te,X,Ie,2):ve--)}}},he=(W,Q,X,Y,Z=null)=>{const{el:se,type:ae,transition:re,children:oe,shapeFlag:te}=W;if(te&6){he(W.component.subTree,Q,X,Y);return}if(te&128){W.suspense.move(Q,X,Y);return}if(te&64){ae.move(W,Q,X,Me);return}if(ae===Fragment){s(se,Q,X);for(let ue=0;ue<oe.length;ue++)he(oe[ue],Q,X,Y);s(W.anchor,Q,X);return}if(ae===Static){V(W,Q,X);return}if(Y!==2&&te&1&&re)if(Y===0)re.beforeEnter(se),s(se,Q,X),queuePostRenderEffect(()=>re.enter(se),Z);else{const{leave:ue,delayLeave:pe,afterLeave:_e}=re,ye=()=>s(se,Q,X),xe=()=>{ue(se,()=>{ye(),_e&&_e()})};pe?pe(se,ye,xe):xe()}else s(se,Q,X)},ge=(W,Q,X,Y=!1,Z=!1)=>{const{type:se,props:ae,ref:re,children:oe,dynamicChildren:te,shapeFlag:de,patchFlag:ue,dirs:pe}=W;if(re!=null&&setRef(re,null,X,W,!0),de&256){Q.ctx.deactivate(W);return}const _e=de&1&&pe,ye=!isAsyncWrapper(W);let xe;if(ye&&(xe=ae&&ae.onVnodeBeforeUnmount)&&invokeVNodeHook(xe,Q,W),de&6)Ee(W.component,X,Y);else{if(de&128){W.suspense.unmount(X,Y);return}_e&&invokeDirectiveHook(W,null,Q,"beforeUnmount"),de&64?W.type.remove(W,Q,X,Z,Me,Y):te&&(se!==Fragment||ue>0&&ue&64)?Ce(te,Q,X,!1,!0):(se===Fragment&&ue&384||!Z&&de&16)&&Ce(oe,Q,X),Y&&be(W)}(ye&&(xe=ae&&ae.onVnodeUnmounted)||_e)&&queuePostRenderEffect(()=>{xe&&invokeVNodeHook(xe,Q,W),_e&&invokeDirectiveHook(W,null,Q,"unmounted")},X)},be=W=>{const{type:Q,el:X,anchor:Y,transition:Z}=W;if(Q===Fragment){Se(X,Y);return}if(Q===Static){R(W);return}const se=()=>{o(X),Z&&!Z.persisted&&Z.afterLeave&&Z.afterLeave()};if(W.shapeFlag&1&&Z&&!Z.persisted){const{leave:ae,delayLeave:re}=Z,oe=()=>ae(X,se);re?re(W.el,se,oe):oe()}else se()},Se=(W,Q)=>{let X;for(;W!==Q;)X=m(W),o(W),W=X;o(Q)},Ee=(W,Q,X)=>{const{bum:Y,scope:Z,update:se,subTree:ae,um:re}=W;Y&&invokeArrayFns(Y),Z.stop(),se&&(se.active=!1,ge(ae,W,Q,X)),re&&queuePostRenderEffect(re,Q),queuePostRenderEffect(()=>{W.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&W.asyncDep&&!W.asyncResolved&&W.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},Ce=(W,Q,X,Y=!1,Z=!1,se=0)=>{for(let ae=se;ae<W.length;ae++)ge(W[ae],Q,X,Y,Z)},Ae=W=>W.shapeFlag&6?Ae(W.component.subTree):W.shapeFlag&128?W.suspense.next():m(W.anchor||W.el),De=(W,Q,X)=>{W==null?Q._vnode&&ge(Q._vnode,null,null,!0):A(Q._vnode||null,W,Q,null,null,null,X),flushPreFlushCbs(),flushPostFlushCbs(),Q._vnode=W},Me={p:A,um:ge,m:he,r:be,mt:ne,mc:I,pc:fe,pbc:k,n:Ae,o:n};let Be,Ne;return e&&([Be,Ne]=e(Me)),{render:De,hydrate:Be,createApp:createAppAPI(De,Be)}}function toggleRecurse({effect:n,update:e},r){n.allowRecurse=e.allowRecurse=r}function traverseStaticChildren(n,e,r=!1){const s=n.children,o=e.children;if(isArray(s)&&isArray(o))for(let a=0;a<s.length;a++){const l=s[a];let c=o[a];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=o[a]=cloneIfMounted(o[a]),c.el=l.el),r||traverseStaticChildren(l,c)),c.type===Text$1&&(c.el=l.el)}}function getSequence(n){const e=n.slice(),r=[0];let s,o,a,l,c;const u=n.length;for(s=0;s<u;s++){const f=n[s];if(f!==0){if(o=r[r.length-1],n[o]<f){e[s]=o,r.push(s);continue}for(a=0,l=r.length-1;a<l;)c=a+l>>1,n[r[c]]<f?a=c+1:l=c;f<n[r[a]]&&(a>0&&(e[s]=r[a-1]),r[a]=s)}}for(a=r.length,l=r[a-1];a-- >0;)r[a]=l,l=e[l];return r}const isTeleport=n=>n.__isTeleport,Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(n=!1){blockStack.push(currentBlock=n?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(n){isBlockTreeEnabled+=n}function setupBlock(n){return n.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(n),n}function createElementBlock(n,e,r,s,o,a){return setupBlock(createBaseVNode(n,e,r,s,o,a,!0))}function createBlock(n,e,r,s,o){return setupBlock(createVNode(n,e,r,s,o,!0))}function isVNode(n){return n?n.__v_isVNode===!0:!1}function isSameVNodeType(n,e){return n.type===e.type&&n.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:n})=>n??null,normalizeRef=({ref:n,ref_key:e,ref_for:r})=>n!=null?isString(n)||isRef(n)||isFunction(n)?{i:currentRenderingInstance,r:n,k:e,f:!!r}:n:null;function createBaseVNode(n,e=null,r=null,s=0,o=null,a=n===Fragment?0:1,l=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return c?(normalizeChildren(u,r),a&128&&n.normalize(u)):r&&(u.shapeFlag|=isString(r)?8:16),isBlockTreeEnabled>0&&!l&&currentBlock&&(u.patchFlag>0||a&6)&&u.patchFlag!==32&&currentBlock.push(u),u}const createVNode=_createVNode;function _createVNode(n,e=null,r=null,s=0,o=null,a=!1){if((!n||n===NULL_DYNAMIC_COMPONENT)&&(n=Comment),isVNode(n)){const c=cloneVNode(n,e,!0);return r&&normalizeChildren(c,r),isBlockTreeEnabled>0&&!a&&currentBlock&&(c.shapeFlag&6?currentBlock[currentBlock.indexOf(n)]=c:currentBlock.push(c)),c.patchFlag|=-2,c}if(isClassComponent(n)&&(n=n.__vccOpts),e){e=guardReactiveProps(e);let{class:c,style:u}=e;c&&!isString(c)&&(e.class=normalizeClass(c)),isObject$2(u)&&(isProxy(u)&&!isArray(u)&&(u=extend$3({},u)),e.style=normalizeStyle(u))}const l=isString(n)?1:isSuspense(n)?128:isTeleport(n)?64:isObject$2(n)?4:isFunction(n)?2:0;return createBaseVNode(n,e,r,s,o,l,a,!0)}function guardReactiveProps(n){return n?isProxy(n)||InternalObjectKey in n?extend$3({},n):n:null}function cloneVNode(n,e,r=!1){const{props:s,ref:o,patchFlag:a,children:l}=n,c=e?mergeProps(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&normalizeKey(c),ref:e&&e.ref?r&&o?isArray(o)?o.concat(normalizeRef(e)):[o,normalizeRef(e)]:normalizeRef(e):o,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Fragment?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&cloneVNode(n.ssContent),ssFallback:n.ssFallback&&cloneVNode(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function createTextVNode(n=" ",e=0){return createVNode(Text$1,null,n,e)}function createStaticVNode(n,e){const r=createVNode(Static,null,n);return r.staticCount=e,r}function createCommentVNode(n="",e=!1){return e?(openBlock(),createBlock(Comment,null,n)):createVNode(Comment,null,n)}function normalizeVNode(n){return n==null||typeof n=="boolean"?createVNode(Comment):isArray(n)?createVNode(Fragment,null,n.slice()):typeof n=="object"?cloneIfMounted(n):createVNode(Text$1,null,String(n))}function cloneIfMounted(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:cloneVNode(n)}function normalizeChildren(n,e){let r=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(isArray(e))r=16;else if(typeof e=="object")if(s&65){const o=e.default;o&&(o._c&&(o._d=!1),normalizeChildren(n,o()),o._c&&(o._d=!0));return}else{r=32;const o=e._;!o&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},r=32):(e=String(e),s&64?(r=16,e=[createTextVNode(e)]):r=8);n.children=e,n.shapeFlag|=r}function mergeProps(...n){const e={};for(let r=0;r<n.length;r++){const s=n[r];for(const o in s)if(o==="class")e.class!==s.class&&(e.class=normalizeClass([e.class,s.class]));else if(o==="style")e.style=normalizeStyle([e.style,s.style]);else if(isOn(o)){const a=e[o],l=s[o];l&&a!==l&&!(isArray(a)&&a.includes(l))&&(e[o]=a?[].concat(a,l):l)}else o!==""&&(e[o]=s[o])}return e}function invokeVNodeHook(n,e,r,s=null){callWithAsyncErrorHandling(n,e,7,[r,s])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(n,e,r){const s=n.type,o=(e?e.appContext:n.appContext)||emptyAppContext,a={uid:uid++,vnode:n,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(s,o),emitsOptions:normalizeEmitsOptions(s,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:s.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=emit.bind(null,a),n.ce&&n.ce(a),a}let currentInstance=null;const setCurrentInstance=n=>{currentInstance=n,n.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(n){return n.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(n,e=!1){isInSSRComponentSetup=e;const{props:r,children:s}=n.vnode,o=isStatefulComponent(n);initProps(n,r,o,e),initSlots(n,s);const a=o?setupStatefulComponent(n,e):void 0;return isInSSRComponentSetup=!1,a}function setupStatefulComponent(n,e){const r=n.type;n.accessCache=Object.create(null),n.proxy=markRaw(new Proxy(n.ctx,PublicInstanceProxyHandlers));const{setup:s}=r;if(s){const o=n.setupContext=s.length>1?createSetupContext(n):null;setCurrentInstance(n),pauseTracking();const a=callWithErrorHandling(s,n,0,[n.props,o]);if(resetTracking(),unsetCurrentInstance(),isPromise(a)){if(a.then(unsetCurrentInstance,unsetCurrentInstance),e)return a.then(l=>{handleSetupResult(n,l,e)}).catch(l=>{handleError(l,n,0)});n.asyncDep=a}else handleSetupResult(n,a,e)}else finishComponentSetup(n,e)}function handleSetupResult(n,e,r){isFunction(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:isObject$2(e)&&(n.setupState=proxyRefs(e)),finishComponentSetup(n,r)}let compile;function finishComponentSetup(n,e,r){const s=n.type;if(!n.render){if(!e&&compile&&!s.render){const o=s.template||resolveMergedOptions(n).template;if(o){const{isCustomElement:a,compilerOptions:l}=n.appContext.config,{delimiters:c,compilerOptions:u}=s,f=extend$3(extend$3({isCustomElement:a,delimiters:c},l),u);s.render=compile(o,f)}}n.render=s.render||NOOP}setCurrentInstance(n),pauseTracking(),applyOptions(n),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(n){return new Proxy(n.attrs,{get(e,r){return track(n,"get","$attrs"),e[r]}})}function createSetupContext(n){const e=s=>{n.exposed=s||{}};let r;return{get attrs(){return r||(r=createAttrsProxy(n))},slots:n.slots,emit:n.emit,expose:e}}function getExposeProxy(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(proxyRefs(markRaw(n.exposed)),{get(e,r){if(r in e)return e[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](n)},has(e,r){return r in e||r in publicPropertiesMap}}))}function getComponentName(n,e=!0){return isFunction(n)?n.displayName||n.name:n.name||e&&n.__name}function isClassComponent(n){return isFunction(n)&&"__vccOpts"in n}const computed=(n,e)=>computed$1(n,e,isInSSRComponentSetup);function h$1(n,e,r){const s=arguments.length;return s===2?isObject$2(e)&&!isArray(e)?isVNode(e)?createVNode(n,null,[e]):createVNode(n,e):createVNode(n,null,e):(s>3?r=Array.prototype.slice.call(arguments,2):s===3&&isVNode(r)&&(r=[r]),createVNode(n,e,r))}const ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey),version$2="3.2.47",svgNS="http://www.w3.org/2000/svg",doc$1=typeof document<"u"?document:null,templateContainer=doc$1&&doc$1.createElement("template"),nodeOps={insert:(n,e,r)=>{e.insertBefore(n,r||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,r,s)=>{const o=e?doc$1.createElementNS(svgNS,n):doc$1.createElement(n,r?{is:r}:void 0);return n==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:n=>doc$1.createTextNode(n),createComment:n=>doc$1.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>doc$1.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,r,s,o,a){const l=r?r.previousSibling:e.lastChild;if(o&&(o===a||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),r),!(o===a||!(o=o.nextSibling)););else{templateContainer.innerHTML=s?`<svg>${n}</svg>`:n;const c=templateContainer.content;if(s){const u=c.firstChild;for(;u.firstChild;)c.appendChild(u.firstChild);c.removeChild(u)}e.insertBefore(c,r)}return[l?l.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}};function patchClass(n,e,r){const s=n._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):r?n.setAttribute("class",e):n.className=e}function patchStyle(n,e,r){const s=n.style,o=isString(r);if(r&&!o){if(e&&!isString(e))for(const a in e)r[a]==null&&setStyle(s,a,"");for(const a in r)setStyle(s,a,r[a])}else{const a=s.display;o?e!==r&&(s.cssText=r):e&&n.removeAttribute("style"),"_vod"in n&&(s.display=a)}}const importantRE=/\s*!important$/;function setStyle(n,e,r){if(isArray(r))r.forEach(s=>setStyle(n,e,s));else if(r==null&&(r=""),e.startsWith("--"))n.setProperty(e,r);else{const s=autoPrefix(n,e);importantRE.test(r)?n.setProperty(hyphenate(s),r.replace(importantRE,""),"important"):n[s]=r}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(n,e){const r=prefixCache[e];if(r)return r;let s=camelize(e);if(s!=="filter"&&s in n)return prefixCache[e]=s;s=capitalize(s);for(let o=0;o<prefixes.length;o++){const a=prefixes[o]+s;if(a in n)return prefixCache[e]=a}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(n,e,r,s,o){if(s&&e.startsWith("xlink:"))r==null?n.removeAttributeNS(xlinkNS,e.slice(6,e.length)):n.setAttributeNS(xlinkNS,e,r);else{const a=isSpecialBooleanAttr(e);r==null||a&&!includeBooleanAttr(r)?n.removeAttribute(e):n.setAttribute(e,a?"":r)}}function patchDOMProp(n,e,r,s,o,a,l){if(e==="innerHTML"||e==="textContent"){s&&l(s,o,a),n[e]=r??"";return}if(e==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=r;const u=r??"";(n.value!==u||n.tagName==="OPTION")&&(n.value=u),r==null&&n.removeAttribute(e);return}let c=!1;if(r===""||r==null){const u=typeof n[e];u==="boolean"?r=includeBooleanAttr(r):r==null&&u==="string"?(r="",c=!0):u==="number"&&(r=0,c=!0)}try{n[e]=r}catch{}c&&n.removeAttribute(e)}function addEventListener(n,e,r,s){n.addEventListener(e,r,s)}function removeEventListener(n,e,r,s){n.removeEventListener(e,r,s)}function patchEvent(n,e,r,s,o=null){const a=n._vei||(n._vei={}),l=a[e];if(s&&l)l.value=s;else{const[c,u]=parseName(e);if(s){const f=a[e]=createInvoker(s,o);addEventListener(n,c,f,u)}else l&&(removeEventListener(n,c,l,u),a[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(n){let e;if(optionsModifierRE.test(n)){e={};let s;for(;s=n.match(optionsModifierRE);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):hyphenate(n.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(n,e){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(s,r.value),e,5,[s])};return r.value=n,r.attached=getNow(),r}function patchStopImmediatePropagation(n,e){if(isArray(e)){const r=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{r.call(n),n._stopped=!0},e.map(s=>o=>!o._stopped&&s&&s(o))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(n,e,r,s,o=!1,a,l,c,u)=>{e==="class"?patchClass(n,s,o):e==="style"?patchStyle(n,r,s):isOn(e)?isModelListener(e)||patchEvent(n,e,r,s,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(n,e,s,o))?patchDOMProp(n,e,s,a,l,c,u):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),patchAttr(n,e,s,o))};function shouldSetAsProp(n,e,r,s){return s?!!(e==="innerHTML"||e==="textContent"||e in n&&nativeOnRE.test(e)&&isFunction(r)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(r)?!1:e in n}const getModelAssigner=n=>{const e=n.props["onUpdate:modelValue"]||!1;return isArray(e)?r=>invokeArrayFns(e,r):e};function onCompositionStart(n){n.target.composing=!0}function onCompositionEnd(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const vModelText={created(n,{modifiers:{lazy:e,trim:r,number:s}},o){n._assign=getModelAssigner(o);const a=s||o.props&&o.props.type==="number";addEventListener(n,e?"change":"input",l=>{if(l.target.composing)return;let c=n.value;r&&(c=c.trim()),a&&(c=looseToNumber(c)),n._assign(c)}),r&&addEventListener(n,"change",()=>{n.value=n.value.trim()}),e||(addEventListener(n,"compositionstart",onCompositionStart),addEventListener(n,"compositionend",onCompositionEnd),addEventListener(n,"change",onCompositionEnd))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,modifiers:{lazy:r,trim:s,number:o}},a){if(n._assign=getModelAssigner(a),n.composing||document.activeElement===n&&n.type!=="range"&&(r||s&&n.value.trim()===e||(o||n.type==="number")&&looseToNumber(n.value)===e))return;const l=e??"";n.value!==l&&(n.value=l)}},vModelCheckbox={deep:!0,created(n,e,r){n._assign=getModelAssigner(r),addEventListener(n,"change",()=>{const s=n._modelValue,o=getValue(n),a=n.checked,l=n._assign;if(isArray(s)){const c=looseIndexOf(s,o),u=c!==-1;if(a&&!u)l(s.concat(o));else if(!a&&u){const f=[...s];f.splice(c,1),l(f)}}else if(isSet(s)){const c=new Set(s);a?c.add(o):c.delete(o),l(c)}else l(getCheckboxValue(n,a))})},mounted:setChecked,beforeUpdate(n,e,r){n._assign=getModelAssigner(r),setChecked(n,e,r)}};function setChecked(n,{value:e,oldValue:r},s){n._modelValue=e,isArray(e)?n.checked=looseIndexOf(e,s.props.value)>-1:isSet(e)?n.checked=e.has(s.props.value):e!==r&&(n.checked=looseEqual(e,getCheckboxValue(n,!0)))}const vModelSelect={deep:!0,created(n,{value:e,modifiers:{number:r}},s){const o=isSet(e);addEventListener(n,"change",()=>{const a=Array.prototype.filter.call(n.options,l=>l.selected).map(l=>r?looseToNumber(getValue(l)):getValue(l));n._assign(n.multiple?o?new Set(a):a:a[0])}),n._assign=getModelAssigner(s)},mounted(n,{value:e}){setSelected(n,e)},beforeUpdate(n,e,r){n._assign=getModelAssigner(r)},updated(n,{value:e}){setSelected(n,e)}};function setSelected(n,e){const r=n.multiple;if(!(r&&!isArray(e)&&!isSet(e))){for(let s=0,o=n.options.length;s<o;s++){const a=n.options[s],l=getValue(a);if(r)isArray(e)?a.selected=looseIndexOf(e,l)>-1:a.selected=e.has(l);else if(looseEqual(getValue(a),e)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!r&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function getValue(n){return"_value"in n?n._value:n.value}function getCheckboxValue(n,e){const r=e?"_trueValue":"_falseValue";return r in n?n[r]:e}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>systemModifiers.some(r=>n[`${r}Key`]&&!e.includes(r))},withModifiers=(n,e)=>(r,...s)=>{for(let o=0;o<e.length;o++){const a=modifierGuards[e[o]];if(a&&a(r,e))return}return n(r,...s)},rendererOptions=extend$3({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...n)=>{const e=ensureRenderer().createApp(...n),{mount:r}=e;return e.mount=s=>{const o=normalizeContainer(s);if(!o)return;const a=e._component;!isFunction(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.innerHTML="";const l=r(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},e};function normalizeContainer(n){return isString(n)?document.querySelector(n):n}const _export_sfc=(n,e)=>{const r=n.__vccOpts||n;for(const[s,o]of e)r[s]=o;return r},_sfc_main$g={props:{graph:{required:!0}},data(){return{graphType:"basic",graphDir:"right",graphText:`a/b/c
b/d/e/f/g
e/i`,graphError:"",graphNodesFilter:"",connType:"",groupNodes:!1,edgeAlign:"",edgeSnap:""}},mounted(){this.$nextTick(()=>{this.createNodes()})},methods:{centerNodes(){const n=this.$parent.$refs.screen.panzoom;this.zoomNodes(),n.getZoom()>1&&this.zoomNodes(1)},zoomNodes(n=null){let e=1/0,r=1/0,s=-1/0,o=-1/0;(this.filterNodes||this.graph.nodes).forEach(l=>{l.x<e&&(e=l.x),l.x+l.width>s&&(s=l.x+l.width),l.y<r&&(r=l.y),l.y+l.height>o&&(o=l.y+l.height)}),e-=50,r-=50,s+=50,o+=50,this.$parent.$refs.screen.zoomRect({left:e,top:r,right:s,bottom:o},{scale:n})},createNodes(){this.graph.reset();const n=this.parsedGraph,e=(r,s)=>{this.graph.nodes.find(o=>o.id===r.id)||this.graph.createNode(r.id),s&&(this.graph.edges.find(o=>o.fromNode===s.id&&o.toNode===s.id)||this.graph.createEdge(s.id,r.id)),r.children.forEach(o=>e(o,r))};n.forEach(r=>e(r)),this.graphNodes(),this.centerNodes()},graphNodes(n){this.graph.graphNodes({nodes:n||this.graph.nodes,edges:this.graph.edges,type:this.graphType,dir:this.graphDir})}},computed:{filterNodes(){const n=this.graphNodesFilter.split(",").map(r=>r.trim()),e=this.graph.nodes.filter(r=>n.includes(r.id));return e.length?e:null},parsedGraph(){const n=[],e=[];return this.graphText.split(`
`).forEach(s=>{s.split("/").forEach((o,a,l)=>{const c=o.trim();if(!c)return;const u=a&&l[a-1].trim(),f={id:c,children:[]},d=u&&n.find(g=>g.id===u);d?d.children.push(f):e.push(f),n.push(f)})}),e}},watch:{parsedGraph(){this.$nextTick(this.createNodes)},connType(n){this.graph.edges.forEach(e=>{e.type=n})},graphDir(){this.graphNodes(),this.centerNodes()},graphType(){this.graphNodes(),this.centerNodes()},groupNodes(n){this.$emit("toggleGroupNodes",n)},edgeSnap(n){this.graph.edges.forEach(e=>{this.$set(e.fromAnchor,"snap",n),this.$set(e.toAnchor,"snap",n)})},edgeAlign(n){this.graph.edges.forEach(e=>{this.$set(e.fromAnchor,"align",n),this.$set(e.toAnchor,"align",n)})},anchorX(n){n?n.endsWith("%")||(n=parseFloat(n)):n="50%",this.graph.edges.forEach(e=>{e.fromAnchor.x=n,e.toAnchor.x=n})},anchorY(n){n?n.endsWith("%")||(n=parseFloat(n)):n="50%",this.graph.edges.forEach(e=>{e.fromAnchor.y=n,e.toAnchor.y=n})}}},_hoisted_1$g=createBaseVNode("div",{style:{"font-weight":"bold"}},"Graph",-1),_hoisted_2$c=createBaseVNode("span",null,"type",-1),_hoisted_3$9=createBaseVNode("option",{value:"basic"},"basic",-1),_hoisted_4$9=createBaseVNode("option",{value:"basic-invert"},"invert",-1),_hoisted_5$8=createBaseVNode("option",{value:"tree"},"tree",-1),_hoisted_6$7=[_hoisted_3$9,_hoisted_4$9,_hoisted_5$8],_hoisted_7$6=createBaseVNode("span",null,"dir ",-1),_hoisted_8$4=createBaseVNode("option",{value:"left"},"left",-1),_hoisted_9$1=createBaseVNode("option",{value:"right"},"right",-1),_hoisted_10$1=createBaseVNode("option",{value:"up"},"up",-1),_hoisted_11$1=createBaseVNode("option",{value:"down"},"down",-1),_hoisted_12$1=[_hoisted_8$4,_hoisted_9$1,_hoisted_10$1,_hoisted_11$1],_hoisted_13$1=createBaseVNode("div",{style:{"font-weight":"bold"}},"Edges",-1),_hoisted_14$1=createBaseVNode("span",null,"type ",-1),_hoisted_15$2=createStaticVNode('<option value="linear">linear</option><option value="smooth">smooth</option><option value="ortho">ortho</option><option value="hsmooth">hsmooth</option><option value="vsmooth">vsmooth</option>',5),_hoisted_20=[_hoisted_15$2],_hoisted_21=createBaseVNode("span",null,"snap ",-1),_hoisted_22=createBaseVNode("option",{value:"anchor"},"anchor",-1),_hoisted_23=createBaseVNode("option",{value:"rect"},"rect",-1),_hoisted_24=createBaseVNode("option",{value:"circle"},"circle",-1),_hoisted_25=[_hoisted_22,_hoisted_23,_hoisted_24],_hoisted_26=createBaseVNode("div",{style:{"font-weight":"bold"}},"Nodes",-1),_hoisted_27=createBaseVNode("span",null," Group",-1);function _sfc_render$g(n,e,r,s,o,a){return openBlock(),createElementBlock("div",null,[_hoisted_1$g,withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.graphText=l),placeholder:"add multiple lines",rows:"4"},null,512),[[vModelText,o.graphText]]),createBaseVNode("div",null,[_hoisted_2$c,withDirectives(createBaseVNode("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.graphType=l)},_hoisted_6$7,512),[[vModelSelect,o.graphType]])]),createBaseVNode("div",null,[_hoisted_7$6,withDirectives(createBaseVNode("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.graphDir=l)},_hoisted_12$1,512),[[vModelSelect,o.graphDir]])]),_hoisted_13$1,createBaseVNode("div",null,[_hoisted_14$1,withDirectives(createBaseVNode("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.connType=l)},_hoisted_20,512),[[vModelSelect,o.connType]])]),createBaseVNode("div",null,[_hoisted_21,withDirectives(createBaseVNode("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.edgeSnap=l)},_hoisted_25,512),[[vModelSelect,o.edgeSnap]])]),_hoisted_26,createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{type:"text",placeholder:"a,b,c (nodes filter)","onUpdate:modelValue":e[5]||(e[5]=l=>o.graphNodesFilter=l)},null,512),[[vModelText,o.graphNodesFilter]])]),createBaseVNode("button",{onClick:e[6]||(e[6]=()=>a.zoomNodes(null,a.filterNodes))},"Zoom Nodes"),createBaseVNode("button",{onClick:e[7]||(e[7]=()=>a.graphNodes(a.filterNodes))},"Graph Nodes"),createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"groupNodes","onUpdate:modelValue":e[8]||(e[8]=l=>o.groupNodes=l)},null,512),[[vModelCheckbox,o.groupNodes]]),_hoisted_27])])}const SinkSidebar=_export_sfc(_sfc_main$g,[["render",_sfc_render$g]]);function findPosition$1(n,e,r="right",s,o={x:40,y:40},a=!1){const l=o.x||o,c=o.y||o,u=e?r==="down"||r==="up"?e.x:r==="right"?e.x+e.width+l:r==="left"?e.x-n.width-l:-1:0,f=e?r==="right"||r==="left"?e.y:r==="down"?e.y+e.height+c:r==="up"?e.y-n.height-c:-1:0,d=r==="down"||r==="up",g=r==="right"||r==="left",m=d?l*(a?-1:1):0,_=g?c*(a?-1:1):0,E=s.filter(v=>v.id!==n.id),A={x:u,y:f,width:n.width,height:n.height};let b=boxBoxes(A,E);for(;b.length;){const v=b[0];m?A.x=v.x+m+(m>0?v.width:-n.width):A.y=v.y+_+(_>0?v.height:-n.height),b=boxBoxes(A,E)}return{x:A.x,y:A.y}}function boxBox(n,e){return n.x<e.x+e.width&&n.x+n.width>e.x&&n.y<e.y+e.height&&n.y+n.height>e.y}function boxBoxes(n,e){return e.filter(r=>boxBox(r,n))}function createDAG(n,e){const r=n.map(o=>({id:o.id,x:o.x,y:o.y,width:o.width,height:o.height,parentIds:[],children:[]})),s={};return e.forEach(o=>{if(s[o.from+o.to])return;s[o.from+o.to]=!0;const a=r.find(c=>c.id===o.from),l=r.find(c=>c.id===o.to);a&&l&&(a.children.push(l),l.parentIds.push(a.id))}),removeCycles(r),r}const removeCycles=n=>{const e=[],r=l=>l.state===0,s=l=>l.state===1,o=l=>l.state===2;n.forEach(l=>{l.state=0});const a=l=>{l.state=1,l.children.forEach(c=>{o(c)||(s(c)?(l.children.splice(l.children.indexOf(c),1),c.parentIds.splice(c.parentIds.indexOf(l.id),1),e.push(`${c.id}:${l.id}`)):a(c))}),l.state=2};return n.forEach(l=>{r(l)&&a(l)}),e},dagToFlextree=(n,e,r=!1,s=40)=>{const o={id:n.id,size:[(r?n.height:n.width)+s,(r?n.width:n.height)+s],children:[]};e.push(o),n.children.forEach(a=>{dagToFlextree(a,o.children,r,s)})};function lineRect(n,e,r,s,o){const a=[o.x,o.y,o.x+o.width,o.y+o.height];return[lineLine(n,r,e,s,a[0],a[1],a[0],a[3]),lineLine(n,r,e,s,a[0],a[1],a[2],a[1]),lineLine(n,r,e,s,a[2],a[1],a[2],a[3]),lineLine(n,r,e,s,a[0],a[3],a[2],a[3])].filter(c=>c).map(c=>Object.assign(c,{distance:Math.sqrt((n-c.x)**2+(r-c.y)**2)})).sort((c,u)=>c.distance<u.distance?1:-1).pop()}const eps=1e-7;function between(n,e,r){return n-eps<=e&&e<=r+eps}function lineLine(n,e,r,s,o,a,l,c){var u=((n*s-e*r)*(o-l)-(n-r)*(o*c-a*l))/((n-r)*(a-c)-(e-s)*(o-l)),f=((n*s-e*r)*(a-c)-(e-s)*(o*c-a*l))/((n-r)*(a-c)-(e-s)*(o-l));if(isNaN(u)||isNaN(f))return!1;if(n>=r){if(!between(r,u,n))return!1}else if(!between(n,u,r))return!1;if(e>=s){if(!between(s,f,e))return!1}else if(!between(e,f,s))return!1;if(o>=l){if(!between(l,u,o))return!1}else if(!between(o,u,l))return!1;if(a>=c){if(!between(c,f,a))return!1}else if(!between(a,f,c))return!1;return{x:u,y:f}}const util$1={findPosition:findPosition$1,createDAG,dagToFlextree,boxBox,boxBoxes,lineLine,lineRect};function count(n){var e=0,r=n.children,s=r&&r.length;if(!s)e=1;else for(;--s>=0;)e+=r[s].value;n.value=e}function node_count(){return this.eachAfter(count)}function node_each(n){var e=this,r,s=[e],o,a,l;do for(r=s.reverse(),s=[];e=r.pop();)if(n(e),o=e.children,o)for(a=0,l=o.length;a<l;++a)s.push(o[a]);while(s.length);return this}function node_eachBefore(n){for(var e=this,r=[e],s,o;e=r.pop();)if(n(e),s=e.children,s)for(o=s.length-1;o>=0;--o)r.push(s[o]);return this}function node_eachAfter(n){for(var e=this,r=[e],s=[],o,a,l;e=r.pop();)if(s.push(e),o=e.children,o)for(a=0,l=o.length;a<l;++a)r.push(o[a]);for(;e=s.pop();)n(e);return this}function node_sum(n){return this.eachAfter(function(e){for(var r=+n(e.data)||0,s=e.children,o=s&&s.length;--o>=0;)r+=s[o].value;e.value=r})}function node_sort(n){return this.eachBefore(function(e){e.children&&e.children.sort(n)})}function node_path(n){for(var e=this,r=leastCommonAncestor(e,n),s=[e];e!==r;)e=e.parent,s.push(e);for(var o=s.length;n!==r;)s.splice(o,0,n),n=n.parent;return s}function leastCommonAncestor(n,e){if(n===e)return n;var r=n.ancestors(),s=e.ancestors(),o=null;for(n=r.pop(),e=s.pop();n===e;)o=n,n=r.pop(),e=s.pop();return o}function node_ancestors(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e}function node_descendants(){var n=[];return this.each(function(e){n.push(e)}),n}function node_leaves(){var n=[];return this.eachBefore(function(e){e.children||n.push(e)}),n}function node_links(){var n=this,e=[];return n.each(function(r){r!==n&&e.push({source:r.parent,target:r})}),e}function hierarchy(n,e){var r=new Node$1(n),s=+n.value&&(r.value=n.value),o,a=[r],l,c,u,f;for(e==null&&(e=defaultChildren);o=a.pop();)if(s&&(o.value=+o.data.value),(c=e(o.data))&&(f=c.length))for(o.children=new Array(f),u=f-1;u>=0;--u)a.push(l=o.children[u]=new Node$1(c[u])),l.parent=o,l.depth=o.depth+1;return r.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function defaultChildren(n){return n.children}function copyData(n){n.data=n.data.data}function computeHeight(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function Node$1(n){this.data=n,this.depth=this.height=0,this.parent=null}Node$1.prototype=hierarchy.prototype={constructor:Node$1,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy};const name$1="d3-flextree",version$1="2.1.2",main="build/d3-flextree.js",module="index",author={name:"Chris Maloney",url:"http://chrismaloney.org"},description="Flexible tree layout algorithm that allows for variable node sizes.",keywords=["d3","d3-module","layout","tree","hierarchy","d3-hierarchy","plugin","d3-plugin","infovis","visualization","2d"],homepage="https://github.com/klortho/d3-flextree",license="WTFPL",repository={type:"git",url:"https://github.com/klortho/d3-flextree.git"},scripts={clean:"rm -rf build demo test","build:demo":"rollup -c --environment BUILD:demo","build:dev":"rollup -c --environment BUILD:dev","build:prod":"rollup -c --environment BUILD:prod","build:test":"rollup -c --environment BUILD:test",build:"rollup -c",lint:"eslint index.js src","test:main":"node test/bundle.js","test:browser":"node test/browser-tests.js",test:"npm-run-all test:*",prepare:"npm-run-all clean build lint test"},dependencies={"d3-hierarchy":"^1.1.5"},devDependencies={"babel-plugin-external-helpers":"^6.22.0","babel-preset-es2015-rollup":"^3.0.0",d3:"^4.13.0","d3-selection-multi":"^1.0.1",eslint:"^4.19.1",jsdom:"^11.6.2","npm-run-all":"^4.1.2",rollup:"^0.55.3","rollup-plugin-babel":"^2.7.1","rollup-plugin-commonjs":"^8.0.2","rollup-plugin-copy":"^0.2.3","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.2","rollup-plugin-uglify":"^3.0.0","uglify-es":"^3.3.9"},packageInfo={name:name$1,version:version$1,main,module,"jsnext:main":"index",author,description,keywords,homepage,license,repository,scripts,dependencies,devDependencies},{version}=packageInfo,defaults$4=Object.freeze({children:n=>n.children,nodeSize:n=>n.data.size,spacing:0});function flextree(n){const e=Object.assign({},defaults$4,n);function r(c){const u=e[c];return typeof u=="function"?u:()=>u}function s(c){const u=l(a(),c,f=>f.children);return u.update(),u.data}function o(){const c=r("nodeSize"),u=r("spacing");return class Ve extends hierarchy.prototype.constructor{constructor(d){super(d)}copy(){const d=l(this.constructor,this,g=>g.children);return d.each(g=>g.data=g.data.data),d}get size(){return c(this)}spacing(d){return u(this,d)}get nodes(){return this.descendants()}get xSize(){return this.size[0]}get ySize(){return this.size[1]}get top(){return this.y}get bottom(){return this.y+this.ySize}get left(){return this.x-this.xSize/2}get right(){return this.x+this.xSize/2}get root(){const d=this.ancestors();return d[d.length-1]}get numChildren(){return this.hasChildren?this.children.length:0}get hasChildren(){return!this.noChildren}get noChildren(){return this.children===null}get firstChild(){return this.hasChildren?this.children[0]:null}get lastChild(){return this.hasChildren?this.children[this.numChildren-1]:null}get extents(){return(this.children||[]).reduce((d,g)=>Ve.maxExtents(d,g.extents),this.nodeExtents)}get nodeExtents(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}static maxExtents(d,g){return{top:Math.min(d.top,g.top),bottom:Math.max(d.bottom,g.bottom),left:Math.min(d.left,g.left),right:Math.max(d.right,g.right)}}}}function a(){const c=o(),u=r("nodeSize"),f=r("spacing");return class extends c{constructor(d){super(d),Object.assign(this,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:this,lExtRelX:0,lThr:null,rExt:this,rExtRelX:0,rThr:null})}get size(){return u(this.data)}spacing(d){return f(this.data,d.data)}get x(){return this.data.x}set x(d){this.data.x=d}get y(){return this.data.y}set y(d){this.data.y=d}update(){return layoutChildren(this),resolveX(this),this}}}function l(c,u,f){const d=(g,m)=>{const _=new c(g);Object.assign(_,{parent:m,depth:m===null?0:m.depth+1,height:0,length:1});const E=f(g)||[];return _.children=E.length===0?null:E.map(A=>d(A,_)),_.children&&Object.assign(_,_.children.reduce((A,b)=>({height:Math.max(A.height,b.height+1),length:A.length+b.length}),_)),_};return d(u,null)}return Object.assign(s,{nodeSize(c){return arguments.length?(e.nodeSize=c,s):e.nodeSize},spacing(c){return arguments.length?(e.spacing=c,s):e.spacing},children(c){return arguments.length?(e.children=c,s):e.children},hierarchy(c,u){const f=typeof u>"u"?e.children:u;return l(o(),c,f)},dump(c){const u=r("nodeSize"),f=d=>g=>{const m=d+"  ",_=d+"    ",{x:E,y:A}=g,b=u(g),v=g.children||[],M=v.length===0?" ":`,${m}children: [${_}${v.map(f(_)).join(_)}${m}],${d}`;return`{ size: [${b.join(", ")}],${m}x: ${E}, y: ${A}${M}},`};return f(`
`)(c)}}),s}flextree.version=version;const layoutChildren=(n,e=0)=>(n.y=e,(n.children||[]).reduce((r,s)=>{const[o,a]=r;layoutChildren(s,n.y+n.ySize);const l=(o===0?s.lExt:s.rExt).bottom;o!==0&&separate(n,o,a);const c=updateLows(l,o,a);return[o+1,c]},[0,null]),shiftChange(n),positionRoot(n),n),resolveX=(n,e,r)=>{typeof e>"u"&&(e=-n.relX-n.prelim,r=0);const s=e+n.relX;return n.relX=s+n.prelim-r,n.prelim=0,n.x=r+n.relX,(n.children||[]).forEach(o=>resolveX(o,s,n.x)),n},shiftChange=n=>{(n.children||[]).reduce((e,r)=>{const[s,o]=e,a=s+r.shift,l=o+a+r.change;return r.relX+=l,[a,l]},[0,0])},separate=(n,e,r)=>{const s=n.children[e-1],o=n.children[e];let a=s,l=s.relX,c=o,u=o.relX,f=!0;for(;a&&c;){a.bottom>r.lowY&&(r=r.next);const d=l+a.prelim-(u+c.prelim)+a.xSize/2+c.xSize/2+a.spacing(c);(d>0||d<0&&f)&&(u+=d,moveSubtree(o,d),distributeExtra(n,e,r.index,d)),f=!1;const g=a.bottom,m=c.bottom;g<=m&&(a=nextRContour(a),a&&(l+=a.relX)),g>=m&&(c=nextLContour(c),c&&(u+=c.relX))}!a&&c?setLThr(n,e,c,u):a&&!c&&setRThr(n,e,a,l)},moveSubtree=(n,e)=>{n.relX+=e,n.lExtRelX+=e,n.rExtRelX+=e},distributeExtra=(n,e,r,s)=>{const o=n.children[e],a=e-r;if(a>1){const l=s/a;n.children[r+1].shift+=l,o.shift-=l,o.change-=s-l}},nextLContour=n=>n.hasChildren?n.firstChild:n.lThr,nextRContour=n=>n.hasChildren?n.lastChild:n.rThr,setLThr=(n,e,r,s)=>{const o=n.firstChild,a=o.lExt,l=n.children[e];a.lThr=r;const c=s-r.relX-o.lExtRelX;a.relX+=c,a.prelim-=c,o.lExt=l.lExt,o.lExtRelX=l.lExtRelX},setRThr=(n,e,r,s)=>{const o=n.children[e],a=o.rExt,l=n.children[e-1];a.rThr=r;const c=s-r.relX-o.rExtRelX;a.relX+=c,a.prelim-=c,o.rExt=l.rExt,o.rExtRelX=l.rExtRelX},positionRoot=n=>{if(n.hasChildren){const e=n.firstChild,r=n.lastChild,s=(e.prelim+e.relX-e.xSize/2+r.relX+r.prelim+r.xSize/2)/2;Object.assign(n,{prelim:s,lExt:e.lExt,lExtRelX:e.lExtRelX,rExt:r.rExt,rExtRelX:r.rExtRelX})}},updateLows=(n,e,r)=>{for(;r!==null&&n>=r.lowY;)r=r.next;return{lowY:n,index:e,next:r}};class Graph{constructor(){this.nodes=[],this.edges=[]}positionNode({node:e,parent:r,dir:s="right",spacing:o=40,invertOffset:a=!1}={}){e=typeof e=="string"?this.nodes.find(c=>c.id===e):e,r=typeof r=="string"?this.nodes.find(c=>c.id===r):r;const l=util$1.findPosition(e,r,s,this.nodes,o,a);this.updateNode(e,{x:l.x,y:l.y})}graphNodes({nodes:e,edges:r,type:s="basic",dir:o="right",spacing:a=40}={}){e=e||this.nodes,r=r||this.edges;const l=util$1.createDAG(e,r);if(l.length)if(s==="basic"||s==="basic-invert"){const c={},u=(f,d)=>{if(c[f.id])return;const g=e.filter(_=>!!c[_.id]),m=util$1.findPosition(f,d,o,g,a,s==="basic-invert");f.x=m.x,f.y=m.y,this.updateNode(f.id,{x:f.x,y:f.y}),c[f.id]=!0,f.children.forEach(_=>u(_,f))};l.filter(f=>!f.parentIds.length).forEach(f=>u(f,null))}else if(s==="tree"){const c=flextree(),u=o==="left"||o==="right";l.filter(d=>!d.parentIds.length).forEach(d=>{const g=[],m=d.x,_=d.y;util$1.dagToFlextree(d,g,u,a);const E=c.hierarchy(g[0]);c(E);const A=o==="left"?-1:1,b=o==="up"?-1:1,v=M=>{this.updateNode(M.data.id,{x:(u?M.y:M.x)*A+m,y:(u?M.x:M.y)*b+_}),M.children&&M.children.forEach(v)};v(E)})}else throw new Error("unknown layout type "+s)}reset(){for(;this.edges.length;)this.edges.pop();for(;this.nodes.length;)this.nodes.pop()}createNode(e={}){typeof e=="string"&&(e={id:e});const r=Object.assign({id:Math.random().toString(36).slice(2),x:0,y:0,width:50,height:50},e);return this.nodes.push(r),r}updateNode(e,r={}){if(typeof e=="string"&&(e=this.nodes.find(s=>s.id===e)),!e)throw new Error(`node ${e} does not exist`);return Object.assign(e,r)}removeNode(e){const r=this.nodes.indexOf(e);return r>-1&&this.nodes.splice(r,1),r}createEdge(e,r,s={}){if(arguments.length===1?(s=arguments[0],e=s.from,r=s.to):(typeof e=="object"&&(e=e.id),typeof r=="object"&&(r=r.id)),!e)throw new Error("orig required");if(!r)throw new Error("dest required");const o=Object.assign({id:Math.random().toString(36).slice(2),from:e,to:r,fromAnchor:{x:"50%",y:"50%"},toAnchor:{x:"50%",y:"50%"},type:"linear",pathd:""},s);return this.edges.push(o),o}updateEdge(e,r){return Object.assign(e,r)}removeEdge(e){const r=this.edges.indexOf(e);return r>-1&&this.edges.splice(r,1),r}reorderGraph(){for(let e=0;e<200;e++){let r=0;for(let s of this.nodes){for(let l of this.nodes)if(l.id!==s.id){let c=l.x-s.x,u=l.y-s.y,f=Math.sqrt(c*c+u*u);this.edges.find(d=>d.to===s.id&&d.from===l.id||d.from===s.id&&d.to===l.id)?f<500?f<400?f<200?(s.x-=c,s.y-=u):(s.x-=c/3,s.y-=u/3):(r++,s.x+=c/6,s.y+=u/6):(s.x+=c/3,s.y+=u/3):f<1e3?f<100?(s.x-=c*3,s.y-=u*3):f<500?(s.x-=c/3,s.y-=u/3):(s.x-=c/9,s.y-=u/9):r++}let o=0-s.x,a=0-s.y;s.x+=o/15,s.y+=a/15}if(r/(this.nodes.length*this.nodes.length)>.7)break}}}const defaults$3=[{id:"arrow-start",type:"arrow-start",scale:.5,style:"fill: green"},{id:"arrow-end",type:"arrow-end",scale:.5,style:"fill: green"},{id:"square",type:"square",scale:.5,style:"fill: green"},{id:"circle",type:"circle",scale:.5,style:"fill: green"},{id:"cross",type:"cross",scale:1,style:"fill: none"},{id:"arrow-slim-start",type:"arrow-slim-start",scale:.5,style:"fill: green"},{id:"arrow-slim-end",type:"arrow-slim-end",scale:.5,style:"fill: green"}],_sfc_main$f={props:{markers:Array},computed:{all(){return this.markers.concat(defaults$3).map(n=>{const e=defaults$3.find(r=>r.type===n.type);if(!e)console.error("unknown marker",n);else return Object.assign({},e,n)}).filter(n=>n)}}},_hoisted_1$f=["id","markerWidth","markerHeight","refX","refY"],_hoisted_2$b=["id","markerWidth","markerHeight","refX","refY"],_hoisted_3$8=["id","markerWidth","markerHeight","refX","refY"],_hoisted_4$8=["id","markerWidth","markerHeight","refX","refY"],_hoisted_5$7=["id","markerWidth","markerHeight"],_hoisted_6$6=["id","markerWidth","markerHeight","refX","refY"],_hoisted_7$5=["id","markerWidth","markerHeight","refX","refY"];function _sfc_render$f(n,e,r,s,o,a){return openBlock(),createElementBlock("g",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.all,l=>(openBlock(),createElementBlock("g",{key:l.id},[l.type==="arrow-start"?(openBlock(),createElementBlock("marker",{key:0,id:l.id,orient:"auto",markerWidth:13*l.scale,markerHeight:13*l.scale,refX:1*l.scale,refY:5*l.scale},[createBaseVNode("path",{d:"M0,5 L10,10 L10,0 L0,5",style:normalizeStyle(`transform: scale(${l.scale});${l.style}`)},null,4)],8,_hoisted_1$f)):createCommentVNode("",!0),l.type==="arrow-end"?(openBlock(),createElementBlock("marker",{key:1,id:l.id,orient:"auto",markerWidth:13*l.scale,markerHeight:13*l.scale,refX:9*l.scale,refY:5*l.scale},[createBaseVNode("path",{d:"M0,0 L0,10 L10,5 L0,0",style:normalizeStyle(`${l.style};transform: scale(${l.scale})`)},null,4)],8,_hoisted_2$b)):createCommentVNode("",!0),l.type==="square"?(openBlock(),createElementBlock("marker",{key:2,id:l.id,orient:"auto",markerWidth:5*l.scale,markerHeight:5*l.scale,refX:2.5*l.scale,refY:2.5*l.scale},[createBaseVNode("rect",{x:"0",y:"0",width:"5",height:"5",style:normalizeStyle(`transform: scale(${l.scale});${l.style}`)},null,4)],8,_hoisted_3$8)):createCommentVNode("",!0),l.type==="circle"?(openBlock(),createElementBlock("marker",{key:3,id:l.id,markerWidth:10*l.scale,markerHeight:10*l.scale,refX:2.5*l.scale,refY:2.5*l.scale},[createBaseVNode("circle",{cx:"2.5",cy:"2.5",r:"2.5",style:normalizeStyle(`transform: scale(${l.scale});${l.style}`)},null,4)],8,_hoisted_4$8)):createCommentVNode("",!0),l.type==="cross"?(openBlock(),createElementBlock("marker",{key:4,id:l.id,markerWidth:13*l.scale,orient:"auto",markerHeight:13*l.scale,fill:"none",refX:"5",refY:"5",position:"50%"},[createBaseVNode("path",{d:"M 3,3 L 7,7 M 3,7 L 7,3",fill:"none",stroke:"green","stroke-width":"2",style:normalizeStyle(`transform: scale(${l.scale});${l.style}`)},null,4)],8,_hoisted_5$7)):createCommentVNode("",!0),l.type==="arrow-slim-start"?(openBlock(),createElementBlock("marker",{key:5,id:l.id,orient:"auto",markerWidth:13*l.scale,markerHeight:13*l.scale,refX:1*l.scale,refY:5*l.scale,fill:"none",stroke:"green","stroke-width":"2","stroke-linecap":"round"},[createBaseVNode("path",{d:"M1,5 L9,9 M9,1 L1,5",style:normalizeStyle(`transform: scale(${l.scale});${l.style}`)},null,4)],8,_hoisted_6$6)):createCommentVNode("",!0),l.type==="arrow-slim-end"?(openBlock(),createElementBlock("marker",{key:6,id:l.id,orient:"auto",markerWidth:15*l.scale,markerHeight:15*l.scale,refX:9*l.scale,refY:5*l.scale,"stroke-linecap":"round",fill:"none",stroke:"green","stroke-width":"2"},[createBaseVNode("path",{d:"M10,5 L1,1 M10,5 L1,9",style:normalizeStyle(`transform: scale(${l.scale});${l.style}`)},null,4)],8,_hoisted_7$5)):createCommentVNode("",!0)]))),128))])}const Markers$1=_export_sfc(_sfc_main$f,[["render",_sfc_render$f]]),Wheel=function(){var n="",e,r,s,o=[],a={passive:!0};window.addEventListener?(e="addEventListener",r="removeEventListener"):(e="attachEvent",r="detachEvent",n="on"),s="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";function l(_,E){var A=function(b){!b&&(b=window.event);var v={originalEvent:b,target:b.target||b.srcElement,type:"wheel",deltaMode:b.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){b.preventDefault?b.preventDefault():b.returnValue=!1}};return s=="mousewheel"?(v.deltaY=-.025*b.wheelDelta,b.wheelDeltaX&&(v.deltaX=-.025*b.wheelDeltaX)):v.deltaY=b.detail,E(v)};return o.push({element:_,fn:A}),A}function c(_){for(var E=0;E<o.length;E++)if(o[E].element===_)return o[E].fn;return function(){}}function u(_){for(var E=0;E<o.length;E++)if(o[E].element===_)return o.splice(E,1)}function f(_,E,A,b){var v;s==="wheel"?v=A:v=l(_,A),_[e](n+E,v,b?a:!1)}function d(_,E,A,b){var v;s==="wheel"?v=A:v=c(_),_[r](n+E,v,b?a:!1),u(_)}function g(_,E,A){f(_,s,E,A),s=="DOMMouseScroll"&&f(_,"MozMousePixelScroll",E,A)}function m(_,E,A){d(_,s,E,A),s=="DOMMouseScroll"&&d(_,"MozMousePixelScroll",E,A)}return{on:g,off:m}}(),Utils={extend:function(n,e){n=n||{};for(var r in e)this.isObject(e[r])?n[r]=this.extend(n[r],e[r]):n[r]=e[r];return n},isElement:function(n){return n instanceof HTMLElement||n instanceof SVGElement||n instanceof SVGSVGElement||n&&typeof n=="object"&&n!==null&&n.nodeType===1&&typeof n.nodeName=="string"},isObject:function(n){return Object.prototype.toString.call(n)==="[object Object]"},isNumber:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},getSvg:function(n){var e,r;if(this.isElement(n))e=n;else if(typeof n=="string"||n instanceof String){if(e=document.querySelector(n),!e)throw new Error("Provided selector did not find any elements. Selector: "+n)}else throw new Error("Provided selector is not an HTML object nor String");if(e.tagName.toLowerCase()==="svg")r=e;else if(e.tagName.toLowerCase()==="object")r=e.contentDocument.documentElement;else if(e.tagName.toLowerCase()==="embed")r=e.getSVGDocument().documentElement;else throw e.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return r},proxy:function(n,e){return function(){return n.apply(e,arguments)}},getType:function(n){return Object.prototype.toString.apply(n).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(n,e){if(n.clientX===void 0||n.clientX===null)if(n.clientX=0,n.clientY=0,n.touches!==void 0&&n.touches.length){if(n.touches[0].clientX!==void 0)n.clientX=n.touches[0].clientX,n.clientY=n.touches[0].clientY;else if(n.touches[0].pageX!==void 0){var r=e.getBoundingClientRect();n.clientX=n.touches[0].pageX-r.left,n.clientY=n.touches[0].pageY-r.top}}else n.originalEvent!==void 0&&n.originalEvent.clientX!==void 0&&(n.clientX=n.originalEvent.clientX,n.clientY=n.originalEvent.clientY)},isDblClick:function(n,e){if(n.detail===2)return!0;if(e!=null){var r=n.timeStamp-e.timeStamp,s=Math.sqrt(Math.pow(n.clientX-e.clientX,2)+Math.pow(n.clientY-e.clientY,2));return r<250&&s<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(n,e,r){var s=this,o,a,l,c=null,u=0;r||(r={});var f=function(){u=r.leading===!1?0:s.now(),c=null,l=n.apply(o,a),c||(o=a=null)};return function(){var d=s.now();!u&&r.leading===!1&&(u=d);var g=e-(d-u);return o=this,a=arguments,g<=0||g>e?(clearTimeout(c),c=null,u=d,l=n.apply(o,a),c||(o=a=null)):!c&&r.trailing!==!1&&(c=setTimeout(f,g)),l}},createRequestAnimationFrame:function(n){var e=null;return n!=="auto"&&n<60&&n>1&&(e=Math.floor(1e3/n)),e===null?window.requestAnimationFrame||requestTimeout(33):requestTimeout(e)}};function requestTimeout(n){return function(e){window.setTimeout(e,n)}}let _browser="unknown";document.documentMode&&(_browser="ie");const SvgUtils={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(n){if(n.clientWidth&&n.clientHeight)return{width:n.clientWidth,height:n.clientHeight};if(n.getBoundingClientRect())return n.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(n,e){var r=null;if(Utils.isElement(e)?r=e:r=n.querySelector(e),!r){var s=Array.prototype.slice.call(n.childNodes||n.children).filter(function(u){return u.nodeName!=="defs"&&u.nodeName!=="#text"});s.length===1&&s[0].nodeName==="g"&&s[0].getAttribute("transform")===null&&(r=s[0])}if(!r){var o="viewport-"+new Date().toISOString().replace(/\D/g,"");r=document.createElementNS(this.svgNS,"g"),r.setAttribute("id",o);var a=n.childNodes||n.children;if(a&&a.length>0)for(var l=a.length;l>0;l--)a[a.length-l].nodeName!=="defs"&&r.appendChild(a[a.length-l]);n.appendChild(r)}var c=[];return r.getAttribute("class")&&(c=r.getAttribute("class").split(" ")),~c.indexOf("svg-pan-zoom_viewport")||(c.push("svg-pan-zoom_viewport"),r.setAttribute("class",c.join(" "))),r},setupSvgAttributes:function(n){if(n.setAttribute("xmlns",this.svgNS),n.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),n.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),n.parentNode!==null){var e=n.getAttribute("style")||"";e.toLowerCase().indexOf("overflow")===-1&&n.setAttribute("style","overflow: hidden; "+e)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:Utils.throttle(function(){for(var n=document.querySelectorAll("defs"),e=n.length,r=0;r<e;r++){var s=n[r];s.parentNode.insertBefore(s,s)}},globalThis?globalThis.internetExplorerRedisplayInterval:null),setCTM:function(n,e,r){var s=this,o="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";n.style.transform=o,"transform"in n.style?n.style.transform=o:"-ms-transform"in n.style?n.style["-ms-transform"]=o:"-webkit-transform"in n.style&&(n.style["-webkit-transform"]=o),_browser==="ie"&&r&&(r.parentNode.insertBefore(r,r),window.setTimeout(function(){s.refreshDefsGlobal()},s.internetExplorerRedisplayInterval))},getEventPoint:function(n,e){var r=e.createSVGPoint();return Utils.mouseAndTouchNormalize(n,e),r.x=n.clientX,r.y=n.clientY,r},getSvgCenterPoint:function(n,e,r){return this.createSVGPoint(n,e/2,r/2)},createSVGPoint:function(n,e,r){var s=n.createSVGPoint();return s.x=e,s.y=r,s}},ControlIcons={enable:function(n){var e=n.svg.querySelector("defs");e||(e=document.createElementNS(SvgUtils.svgNS,"defs"),n.svg.appendChild(e));var r=e.querySelector("style#svg-pan-zoom-controls-styles");if(!r){var s=document.createElementNS(SvgUtils.svgNS,"style");s.setAttribute("id","svg-pan-zoom-controls-styles"),s.setAttribute("type","text/css"),s.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",e.appendChild(s)}var o=document.createElementNS(SvgUtils.svgNS,"g");o.setAttribute("id","svg-pan-zoom-controls"),o.setAttribute("transform","translate("+(n.width-70)+" "+(n.height-76)+") scale(0.75)"),o.setAttribute("class","svg-pan-zoom-control"),o.appendChild(this._createZoomIn(n)),o.appendChild(this._createZoomReset(n)),o.appendChild(this._createZoomOut(n)),n.svg.appendChild(o),n.controlIcons=o},_createZoomIn:function(n){var e=document.createElementNS(SvgUtils.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-in"),e.setAttribute("transform","translate(30.5 5) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){n.getPublicInstance().zoomIn()},!1),e.addEventListener("touchstart",function(){n.getPublicInstance().zoomIn()},!1);var r=document.createElementNS(SvgUtils.svgNS,"rect");r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("width","1500"),r.setAttribute("height","1400"),r.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(r);var s=document.createElementNS(SvgUtils.svgNS,"path");return s.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),s.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(s),e},_createZoomReset:function(n){var e=document.createElementNS(SvgUtils.svgNS,"g");e.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),e.setAttribute("transform","translate(5 35) scale(0.4)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){n.getPublicInstance().reset()},!1),e.addEventListener("touchstart",function(){n.getPublicInstance().reset()},!1);var r=document.createElementNS(SvgUtils.svgNS,"rect");r.setAttribute("x","2"),r.setAttribute("y","2"),r.setAttribute("width","182"),r.setAttribute("height","58"),r.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(r);var s=document.createElementNS(SvgUtils.svgNS,"path");s.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),s.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(s);var o=document.createElementNS(SvgUtils.svgNS,"path");return o.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),o.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(o),e},_createZoomOut:function(n){var e=document.createElementNS(SvgUtils.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-out"),e.setAttribute("transform","translate(30.5 70) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){n.getPublicInstance().zoomOut()},!1),e.addEventListener("touchstart",function(){n.getPublicInstance().zoomOut()},!1);var r=document.createElementNS(SvgUtils.svgNS,"rect");r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("width","1500"),r.setAttribute("height","1400"),r.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(r);var s=document.createElementNS(SvgUtils.svgNS,"path");return s.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),s.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(s),e},disable:function(n){n.controlIcons&&(n.controlIcons.parentNode.removeChild(n.controlIcons),n.controlIcons=null)}};var ShadowViewport=function(n,e){this.init(n,e)};ShadowViewport.prototype.init=function(n,e){this.viewport=n,this.options=e,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=Utils.proxy(this.updateCTM,this),this.requestAnimationFrame=Utils.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var r=this.processCTM();this.setCTM(r),this.updateCTM()};ShadowViewport.prototype.cacheViewBox=function(){var n=this.options.svg.getAttribute("viewBox");if(n){var e=n.split(/[\s\,]/).filter(function(s){return s}).map(parseFloat);this.viewBox.x=e[0],this.viewBox.y=e[1],this.viewBox.width=e[2],this.viewBox.height=e[3];var r=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=r,this.activeState.x=(this.options.width-this.viewBox.width*r)/2,this.activeState.y=(this.options.height-this.viewBox.height*r)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()};ShadowViewport.prototype.simpleViewBoxCache=function(){var n=this.viewport.getBBox();this.viewBox.x=n.x,this.viewBox.y=n.y,this.viewBox.width=n.width,this.viewBox.height=n.height};ShadowViewport.prototype.getViewBox=function(){return Utils.extend({},this.viewBox)};ShadowViewport.prototype.processCTM=function(){var n=this.getCTM();if(this.options.fit||this.options.contain){var e;this.options.fit?e=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):e=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),n.a=e,n.d=e,n.e=-this.viewBox.x*e,n.f=-this.viewBox.y*e}if(this.options.center){var r=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*n.a)*.5,s=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*n.a)*.5;n.e=r,n.f=s}return this.originalState.zoom=n.a,this.originalState.x=n.e,this.originalState.y=n.f,n};ShadowViewport.prototype.getOriginalState=function(){return Utils.extend({},this.originalState)};ShadowViewport.prototype.getState=function(){return Utils.extend({},this.activeState)};ShadowViewport.prototype.getZoom=function(){return this.activeState.zoom};ShadowViewport.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom};ShadowViewport.prototype.computeRelativeZoom=function(n){return n/this.originalState.zoom};ShadowViewport.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}};ShadowViewport.prototype.getCTM=function(){var n=this.options.svg.createSVGMatrix();return n.a=this.activeState.zoom,n.b=0,n.c=0,n.d=this.activeState.zoom,n.e=this.activeState.x,n.f=this.activeState.y,n};ShadowViewport.prototype.setCTM=function(n){var e=this.isZoomDifferent(n),r=this.isPanDifferent(n);if(e||r){if(e&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(n.a))===!1?(n.a=n.d=this.activeState.zoom,e=!1):(this.updateCache(n),this.options.onZoom(this.getRelativeZoom()))),r){var s=this.options.beforePan(this.getPan(),{x:n.e,y:n.f}),o=!1,a=!1;s===!1?(n.e=this.getPan().x,n.f=this.getPan().y,o=a=!0):Utils.isObject(s)&&(s.x===!1?(n.e=this.getPan().x,o=!0):Utils.isNumber(s.x)&&(n.e=s.x),s.y===!1?(n.f=this.getPan().y,a=!0):Utils.isNumber(s.y)&&(n.f=s.y)),o&&a||!this.isPanDifferent(n)?r=!1:(this.updateCache(n),this.options.onPan(this.getPan()))}(e||r)&&this.updateCTMOnNextFrame()}};ShadowViewport.prototype.isZoomDifferent=function(n){return this.activeState.zoom!==n.a};ShadowViewport.prototype.isPanDifferent=function(n){return this.activeState.x!==n.e||this.activeState.y!==n.f};ShadowViewport.prototype.updateCache=function(n){this.activeState.zoom=n.a,this.activeState.x=n.e,this.activeState.y=n.f};ShadowViewport.prototype.pendingUpdate=!1;ShadowViewport.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))};ShadowViewport.prototype.updateCTM=function(){var n=this.getCTM();SvgUtils.setCTM(this.viewport,n,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(n)};function ShadowViewport$1(n,e){return new ShadowViewport(n,e)}var SvgPanZoom=function(n,e){this.init(n,e)},optionsDefaults={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,onUserPan:null,onUserZoom:null,onDoubleClick:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},passiveListenerOption={passive:!0};SvgPanZoom.prototype.init=function(n,e){var r=this;this.svg=n,this.defs=n.querySelector("defs"),SvgUtils.setupSvgAttributes(this.svg),this.options=Utils.extend(Utils.extend({},optionsDefaults),e),this.state="none";var s=SvgUtils.getBoundingClientRectNormalized(n);this.width=s.width,this.height=s.height,this.viewport=ShadowViewport$1(SvgUtils.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(a,l){if(r.viewport&&r.options.beforeZoom)return r.options.beforeZoom(a,l)},onZoom:function(a){if(r.viewport&&r.options.onZoom)return r.options.onZoom(a)},beforePan:function(a,l){if(r.viewport&&r.options.beforePan)return r.options.beforePan(a,l)},onPan:function(a){if(r.viewport&&r.options.onPan)return r.options.onPan(a)},onUpdatedCTM:function(a){if(r.viewport&&r.options.onUpdatedCTM)return r.options.onUpdatedCTM(a)}});var o=this.getPublicInstance();o.setBeforeZoom(this.options.beforeZoom),o.setOnZoom(this.options.onZoom),o.setBeforePan(this.options.beforePan),o.setOnPan(this.options.onPan),o.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&ControlIcons.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()};SvgPanZoom.prototype.setupHandlers=function(){var n=this,e=null;if(this.eventListeners={mousedown:function(a){var l=n.handleMouseDown(a,e);return e=a,l},touchstart:function(a){var l=n.handleMouseDown(a,e);return e=a,l},mouseup:function(a){return n.handleMouseUp(a)},touchend:function(a){return n.handleMouseUp(a)},mousemove:function(a){return n.handleMouseMove(a)},touchmove:function(a){return n.handleMouseMove(a)},mouseleave:function(a){return n.handleMouseUp(a)},touchleave:function(a){return n.handleMouseUp(a)},touchcancel:function(a){return n.handleMouseUp(a)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var r=this.options.customEventsHandler.haltEventListeners;if(r&&r.length)for(var s=r.length-1;s>=0;s--)this.eventListeners.hasOwnProperty(r[s])&&delete this.eventListeners[r[s]]}for(var o in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(o,this.eventListeners[o],this.options.preventMouseEventsDefault?!1:passiveListenerOption);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())};SvgPanZoom.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var n=this;this.wheelListener=function(r){return n.handleMouseWheel(r)};var e=!this.options.preventMouseEventsDefault;Wheel.on(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!0}};SvgPanZoom.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var n=!this.options.preventMouseEventsDefault;Wheel.off(this.options.eventsListenerElement||this.svg,this.wheelListener,n),this.options.mouseWheelZoomEnabled=!1}};SvgPanZoom.prototype.handleMouseWheel=function(n){if(!(!this.options.zoomEnabled||this.state!=="none")&&(this.options.preventMouseEventsDefault&&(n.preventDefault?n.preventDefault():n.returnValue=!1),!(this.options.onUserZoom&&this.options.onUserZoom(n)===!1))){var e=n.deltaY||1,r=Date.now()-this.lastMouseWheelEventTime,s=3+Math.max(0,30-r);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in n&&n.deltaMode===0&&n.wheelDelta&&(e=n.deltaY===0?0:Math.abs(n.wheelDelta)/n.deltaY),e=-.3<e&&e<.3?e:(e>0?1:-1)*Math.log(Math.abs(e)+10)/s;var o=this.svg.getScreenCTM().inverse(),a=SvgUtils.getEventPoint(n,this.svg).matrixTransform(o),l=Math.pow(1+this.options.zoomScaleSensitivity,-1*e);this.zoomAtPoint(l,a)}};SvgPanZoom.prototype.zoomAtPoint=function(n,e,r){var s=this.viewport.getOriginalState();r?(n=Math.max(this.options.minZoom*s.zoom,Math.min(this.options.maxZoom*s.zoom,n)),n=n/this.getZoom()):this.getZoom()*n<this.options.minZoom*s.zoom?n=this.options.minZoom*s.zoom/this.getZoom():this.getZoom()*n>this.options.maxZoom*s.zoom&&(n=this.options.maxZoom*s.zoom/this.getZoom());var o=this.viewport.getCTM(),a=e.matrixTransform(o.inverse()),l=this.svg.createSVGMatrix().translate(a.x,a.y).scale(n).translate(-a.x,-a.y),c=o.multiply(l);c.a!==o.a&&this.viewport.setCTM(c)};SvgPanZoom.prototype.zoom=function(n,e){this.zoomAtPoint(n,SvgUtils.getSvgCenterPoint(this.svg,this.width,this.height),e)};SvgPanZoom.prototype.publicZoom=function(n,e){e&&(n=this.computeFromRelativeZoom(n)),this.zoom(n,e)};SvgPanZoom.prototype.publicZoomAtPoint=function(n,e,r){if(r&&(n=this.computeFromRelativeZoom(n)),Utils.getType(e)!=="SVGPoint")if("x"in e&&"y"in e)e=SvgUtils.createSVGPoint(this.svg,e.x,e.y);else throw new Error("Given point is invalid");this.zoomAtPoint(n,e,r)};SvgPanZoom.prototype.getZoom=function(){return this.viewport.getZoom()};SvgPanZoom.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()};SvgPanZoom.prototype.computeFromRelativeZoom=function(n){return n*this.viewport.getOriginalState().zoom};SvgPanZoom.prototype.resetZoom=function(){var n=this.viewport.getOriginalState();this.zoom(n.zoom,!0)};SvgPanZoom.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())};SvgPanZoom.prototype.reset=function(){this.resetZoom(),this.resetPan()};SvgPanZoom.prototype.handleDblClick=function(n){if(this.options.preventMouseEventsDefault&&(n.preventDefault?n.preventDefault():n.returnValue=!1),this.options.controlIconsEnabled){var e=n.target.getAttribute("class")||"";if(e.indexOf("svg-pan-zoom-control")>-1)return!1}var r;n.shiftKey?r=1/((1+this.options.zoomScaleSensitivity)*2):r=(1+this.options.zoomScaleSensitivity)*2;var s=SvgUtils.getEventPoint(n,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(r,s)};SvgPanZoom.prototype.handleMouseDown=function(n,e){this.options.preventMouseEventsDefault&&(n.preventDefault?n.preventDefault():n.returnValue=!1),Utils.mouseAndTouchNormalize(n,this.svg);const r=Utils.isDblClick(n,e);this.options.onDoubleClick&&r&&this.options.onDoubleClick(),this.options.dblClickZoomEnabled&&r?this.handleDblClick(n):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=SvgUtils.getEventPoint(n,this.svg).matrixTransform(this.firstEventCTM.inverse()))};SvgPanZoom.prototype.handleMouseMove=function(n){if(this.options.preventMouseEventsDefault&&(n.preventDefault?n.preventDefault():n.returnValue=!1),this.state==="pan"&&this.options.panEnabled){if(this.options.onUserPan&&this.options.onUserPan(n)===!1)return;var e=SvgUtils.getEventPoint(n,this.svg).matrixTransform(this.firstEventCTM.inverse()),r=this.firstEventCTM.translate(e.x-this.stateOrigin.x,e.y-this.stateOrigin.y);this.viewport.setCTM(r)}};SvgPanZoom.prototype.handleMouseUp=function(n){this.options.preventMouseEventsDefault&&(n.preventDefault?n.preventDefault():n.returnValue=!1),this.state==="pan"&&(this.state="none")};SvgPanZoom.prototype.fit=function(){var n=this.viewport.getViewBox(),e=Math.min(this.width/n.width,this.height/n.height);this.zoom(e,!0)};SvgPanZoom.prototype.contain=function(){var n=this.viewport.getViewBox(),e=Math.max(this.width/n.width,this.height/n.height);this.zoom(e,!0)};SvgPanZoom.prototype.center=function(){var n=this.viewport.getViewBox(),e=(this.width-(n.width+n.x*2)*this.getZoom())*.5,r=(this.height-(n.height+n.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:e,y:r})};SvgPanZoom.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()};SvgPanZoom.prototype.pan=function(n){var e=this.viewport.getCTM();e.e=n.x,e.f=n.y,this.viewport.setCTM(e)};SvgPanZoom.prototype.panBy=function(n){var e=this.viewport.getCTM();e.e+=n.x,e.f+=n.y,this.viewport.setCTM(e)};SvgPanZoom.prototype.getPan=function(){var n=this.viewport.getState();return{x:n.x,y:n.y}};SvgPanZoom.prototype.resize=function(){var n=SvgUtils.getBoundingClientRectNormalized(this.svg);this.width=n.width,this.height=n.height;var e=this.viewport;e.options.width=this.width,e.options.height=this.height,e.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())};SvgPanZoom.prototype.destroy=function(){var n=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var e in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(e,this.eventListeners[e],this.options.preventMouseEventsDefault?!1:passiveListenerOption);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),instancesStore=instancesStore.filter(function(r){return r.svg!==n.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}};SvgPanZoom.prototype.getPublicInstance=function(){var n=this;return this.publicInstance||(this.publicInstance=this.pi={options:this.options,enablePan:function(){return n.options.panEnabled=!0,n.pi},disablePan:function(){return n.options.panEnabled=!1,n.pi},isPanEnabled:function(){return!!n.options.panEnabled},pan:function(e){return n.pan(e),n.pi},panBy:function(e){return n.panBy(e),n.pi},getPan:function(){return n.getPan()},setBeforePan:function(e){return n.options.beforePan=e===null?null:Utils.proxy(e,n.publicInstance),n.pi},setOnPan:function(e){return n.options.onPan=e===null?null:Utils.proxy(e,n.publicInstance),n.pi},enableZoom:function(){return n.options.zoomEnabled=!0,n.pi},disableZoom:function(){return n.options.zoomEnabled=!1,n.pi},isZoomEnabled:function(){return!!n.options.zoomEnabled},enableControlIcons:function(){return n.options.controlIconsEnabled||(n.options.controlIconsEnabled=!0,ControlIcons.enable(n)),n.pi},disableControlIcons:function(){return n.options.controlIconsEnabled&&(n.options.controlIconsEnabled=!1,ControlIcons.disable(n)),n.pi},isControlIconsEnabled:function(){return!!n.options.controlIconsEnabled},enableDblClickZoom:function(){return n.options.dblClickZoomEnabled=!0,n.pi},disableDblClickZoom:function(){return n.options.dblClickZoomEnabled=!1,n.pi},isDblClickZoomEnabled:function(){return!!n.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return n.enableMouseWheelZoom(),n.pi},disableMouseWheelZoom:function(){return n.disableMouseWheelZoom(),n.pi},isMouseWheelZoomEnabled:function(){return!!n.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(e){return n.options.zoomScaleSensitivity=e,n.pi},setMinZoom:function(e){return n.options.minZoom=e,n.pi},setMaxZoom:function(e){return n.options.maxZoom=e,n.pi},setBeforeZoom:function(e){return n.options.beforeZoom=e===null?null:Utils.proxy(e,n.publicInstance),n.pi},setOnZoom:function(e){return n.options.onZoom=e===null?null:Utils.proxy(e,n.publicInstance),n.pi},zoom:function(e){return n.publicZoom(e,!0),n.pi},zoomBy:function(e){return n.publicZoom(e,!1),n.pi},zoomAtPoint:function(e,r){return n.publicZoomAtPoint(e,r,!0),n.pi},zoomAtPointBy:function(e,r){return n.publicZoomAtPoint(e,r,!1),n.pi},zoomIn:function(){return this.zoomBy(1+n.options.zoomScaleSensitivity),n.pi},zoomOut:function(){return this.zoomBy(1/(1+n.options.zoomScaleSensitivity)),n.pi},getZoom:function(){return n.getRelativeZoom()},setOnUpdatedCTM:function(e){return n.options.onUpdatedCTM=e===null?null:Utils.proxy(e,n.publicInstance),n.pi},resetZoom:function(){return n.resetZoom(),n.pi},resetPan:function(){return n.resetPan(),n.pi},reset:function(){return n.reset(),n.pi},fit:function(){return n.fit(),n.pi},contain:function(){return n.contain(),n.pi},center:function(){return n.center(),n.pi},updateBBox:function(){return n.updateBBox(),n.pi},resize:function(){return n.resize(),n.pi},getSizes:function(){return{width:n.width,height:n.height,realZoom:n.getZoom(),viewBox:n.viewport.getViewBox()}},destroy:function(){return n.destroy(),n.pi}}),this.publicInstance};var instancesStore=[],svgPanZoom=function(n,e){var r=Utils.getSvg(n);if(r===null)return null;for(var s=instancesStore.length-1;s>=0;s--)if(instancesStore[s].svg===r)return instancesStore[s].instance.getPublicInstance();return instancesStore.push({svg:r,instance:new SvgPanZoom(r,e)}),instancesStore[instancesStore.length-1].instance.getPublicInstance()};const Screen_vue_vue_type_style_index_0_scoped_3ee11ae5_lang="",_sfc_main$e={props:{markers:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})}},components:{Markers:Markers$1},data(){return{panzoom:null}},mounted(){this.panzoom=svgPanZoom(this.$refs.screen,Object.assign({dblClickZoomEnabled:!1,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,controlIconsEnabled:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),fit:!1,contain:!1,center:!1,zoomScaleSensitivity:.4,minZoom:.1,maxZoom:5,onZoom:n=>{},onPan:n=>{},onUserZoom:n=>{},onUserPan:n=>{},onDoubleClick:()=>{},onUpdatedCTM:n=>{}},this.options)),this.panzoom.zoomRect=this.zoomRect,this.panzoom.zoomNode=this.zoomNode,this.panzoom.panNode=this.panNode},methods:{zoomTo({x:n,y:e,scale:r}){this.panzoom.zoom(r),this.panzoom.pan(n,e)},zoomRect(n,e={scale:null}){let r=e.scale;const s=this.$refs.screen,o=n.right-n.left,a=n.bottom-n.top;if(!r){const u=o/s.clientWidth,f=a/s.clientHeight;r=1/Math.max(u,f)}const l=-n.left*r+(s.clientWidth/r-o)/2*r,c=-n.top*r+(s.clientHeight/r-a)/2*r;this.panzoom.zoom(r),this.panzoom.pan({x:l,y:c})},zoomNode(n){const e=this.$refs.screen,r=e.clientWidth/2-n.width/2,s=e.clientHeight/2-n.height/2;this.zoomRect({left:n.x-r,right:n.x+n.width+r,top:n.y-s,bottom:n.y+n.height+s})},zoomNodes(n,e={padding:50,scale:null}){if(!n||!n.length)return;const r=e.padding||50,s=e.scale;let o=1/0,a=1/0,l=-1/0,c=-1/0;n.forEach(u=>{u.x<o&&(o=u.x),u.x+u.width>l&&(l=u.x+u.width),u.y<a&&(a=u.y),u.y+u.height>c&&(c=u.y+u.height)}),this.zoomRect({left:o-r,top:a-r,right:l+r,bottom:c+r},{scale:s})},panNode(n,e={offsetX,offsetY}){const r=e.offsetX||0,s=e.offsetY||0,o=this.panzoom.getZoom(),a=this.$el.clientWidth/2-(n.x+n.width/2)*o+r,l=this.$el.clientHeight/2-(n.y+n.height/2)*o+s;this.panzoom.pan({x:a,y:l})}}},_hoisted_1$e={class:"screen",ref:"screen"};function _sfc_render$e(n,e,r,s,o,a){const l=resolveComponent("markers");return openBlock(),createElementBlock("svg",_hoisted_1$e,[createBaseVNode("defs",null,[createVNode(l,{markers:r.markers},null,8,["markers"])]),createBaseVNode("g",null,[renderSlot(n.$slots,"default",{},void 0,!0)])],512)}const Screen=_export_sfc(_sfc_main$e,[["render",_sfc_render$e],["__scopeId","data-v-3ee11ae5"]]),drag={props:{dragThreshold:{type:Number,default:10}},data(){return{drag:{zoom:1,active:!1,prev:{x:0,y:0},threshold:{x:0,y:0,crossed:!1}}}},methods:{preventClicks(n){this.drag.threshold.crossed&&(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),document.removeEventListener("click",this.preventClicks,!0))},startDrag(n){let e=this.$parent;for(;e;){if(e.panzoom){this.drag.zoom=e.panzoom.getZoom();break}e=e.$parent}n.touches&&n.touches.length&&(n.clientX=n.touches[0].clientX,n.clientY=n.touches[0].clientY),this.drag.active=!0,this.drag.prev={x:n.clientX,y:n.clientY},this.drag.threshold={x:0,y:0,crossed:!1},document.addEventListener("mouseup",this.stopDrag),document.addEventListener("touchend",this.stopDrag),document.addEventListener("mousemove",this.applyDrag),document.addEventListener("touchmove",this.applyDrag),document.addEventListener("click",this.preventClicks,!0)},stopDrag(){this.drag.active=!1,document.removeEventListener("mouseup",this.stopDrag),document.removeEventListener("touchend",this.stopDrag),document.removeEventListener("mousemove",this.applyDrag),document.removeEventListener("touchmove",this.applyDrag)},applyDrag(n){n.touches&&n.touches.length&&(n.clientX=n.touches[0].clientX,n.clientY=n.touches[0].clientY);let e=(n.clientX-this.drag.prev.x)/this.drag.zoom,r=(n.clientY-this.drag.prev.y)/this.drag.zoom;if(this.drag.prev={x:n.clientX,y:n.clientY},!this.drag.threshold.crossed)if(Math.abs(this.drag.threshold.x)<this.dragThreshold&&Math.abs(this.drag.threshold.y)<this.dragThreshold){this.drag.threshold.x+=e,this.drag.threshold.y+=r;return}else this.drag.threshold.crossed=!0,e+=this.drag.threshold.x,r+=this.drag.threshold.y;this.onDrag({x:e,y:r})}},beforeDestroy(){document.removeEventListener("mousemove",this.applyDrag),document.removeEventListener("mouseup",this.stopDrag)}},Node_vue_vue_type_style_index_0_lang="",_sfc_main$d={mixins:[drag],props:{data:{},margin:{type:Number,default:10},useDrag:{type:Boolean,default:!0},fit:{type:Boolean,default:!0},background:{type:Boolean,default:!0},textSelect:{type:Boolean,default:!1}},mounted(){this.fit&&this.fitContent()},methods:{onDrag({x:n,y:e}){this.data.x+=n,this.data.y+=e,this.$emit("drag",{x:n,y:e})},fitContent(){this.data.width=this.$refs.content.offsetWidth,this.data.height=this.$refs.content.offsetHeight},onMousedown(n){this.textSelect||n.preventDefault(),this.useDrag&&(n.stopPropagation(),this.startDrag(n))}}},_hoisted_1$d=["x","y","width","height"],_hoisted_2$a={key:0,class:"default-label"};function _sfc_render$d(n,e,r,s,o,a){return openBlock(),createElementBlock("foreignObject",{class:normalizeClass(["node",!r.fit&&"fill"]),x:r.data.x-r.margin,y:r.data.y-r.margin,width:r.data.width+r.margin*2,height:r.data.height+r.margin*2,onMousedown:e[0]||(e[0]=(...l)=>a.onMousedown&&a.onMousedown(...l)),onTouchstart:e[1]||(e[1]=(...l)=>a.onMousedown&&a.onMousedown(...l))},[createBaseVNode("div",{class:"outer",style:normalizeStyle(`padding: ${r.margin}px;`)},[createBaseVNode("div",{class:normalizeClass(["content",r.background&&"background"]),ref:"content"},[n.$slots.default?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_2$a,toDisplayString(r.data.id),1)),renderSlot(n.$slots,"default")],2)],4)],42,_hoisted_1$d)}const Node=_export_sfc(_sfc_main$d,[["render",_sfc_render$d]]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var r=function s(){if(this instanceof s){var o=[null];o.push.apply(o,arguments);var a=Function.bind.apply(e,o);return new a}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var o=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return n[s]}})}),r}var victorExports={},victor={get exports(){return victorExports},set exports(n){victorExports=n}};(function(n,e){n.exports=r;function r(c,u){if(!(this instanceof r))return new r(c,u);this.x=c||0,this.y=u||0}r.fromArray=function(c){return new r(c[0]||0,c[1]||0)},r.fromObject=function(c){return new r(c.x||0,c.y||0)},r.prototype.addX=function(c){return this.x+=c.x,this},r.prototype.addY=function(c){return this.y+=c.y,this},r.prototype.add=function(c){return this.x+=c.x,this.y+=c.y,this},r.prototype.addScalar=function(c){return this.x+=c,this.y+=c,this},r.prototype.addScalarX=function(c){return this.x+=c,this},r.prototype.addScalarY=function(c){return this.y+=c,this},r.prototype.subtractX=function(c){return this.x-=c.x,this},r.prototype.subtractY=function(c){return this.y-=c.y,this},r.prototype.subtract=function(c){return this.x-=c.x,this.y-=c.y,this},r.prototype.subtractScalar=function(c){return this.x-=c,this.y-=c,this},r.prototype.subtractScalarX=function(c){return this.x-=c,this},r.prototype.subtractScalarY=function(c){return this.y-=c,this},r.prototype.divideX=function(c){return this.x/=c.x,this},r.prototype.divideY=function(c){return this.y/=c.y,this},r.prototype.divide=function(c){return this.x/=c.x,this.y/=c.y,this},r.prototype.divideScalar=function(c){return c!==0?(this.x/=c,this.y/=c):(this.x=0,this.y=0),this},r.prototype.divideScalarX=function(c){return c!==0?this.x/=c:this.x=0,this},r.prototype.divideScalarY=function(c){return c!==0?this.y/=c:this.y=0,this},r.prototype.invertX=function(){return this.x*=-1,this},r.prototype.invertY=function(){return this.y*=-1,this},r.prototype.invert=function(){return this.invertX(),this.invertY(),this},r.prototype.multiplyX=function(c){return this.x*=c.x,this},r.prototype.multiplyY=function(c){return this.y*=c.y,this},r.prototype.multiply=function(c){return this.x*=c.x,this.y*=c.y,this},r.prototype.multiplyScalar=function(c){return this.x*=c,this.y*=c,this},r.prototype.multiplyScalarX=function(c){return this.x*=c,this},r.prototype.multiplyScalarY=function(c){return this.y*=c,this},r.prototype.normalize=function(){var c=this.length();return c===0?(this.x=1,this.y=0):this.divide(r(c,c)),this},r.prototype.norm=r.prototype.normalize,r.prototype.limit=function(c,u){return Math.abs(this.x)>c&&(this.x*=u),Math.abs(this.y)>c&&(this.y*=u),this},r.prototype.randomize=function(c,u){return this.randomizeX(c,u),this.randomizeY(c,u),this},r.prototype.randomizeX=function(c,u){var f=Math.min(c.x,u.x),d=Math.max(c.x,u.x);return this.x=o(f,d),this},r.prototype.randomizeY=function(c,u){var f=Math.min(c.y,u.y),d=Math.max(c.y,u.y);return this.y=o(f,d),this},r.prototype.randomizeAny=function(c,u){return Math.round(Math.random())?this.randomizeX(c,u):this.randomizeY(c,u),this},r.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},r.prototype.toFixed=function(c){return typeof c>"u"&&(c=8),this.x=this.x.toFixed(c),this.y=this.y.toFixed(c),this},r.prototype.mixX=function(c,u){return typeof u>"u"&&(u=.5),this.x=(1-u)*this.x+u*c.x,this},r.prototype.mixY=function(c,u){return typeof u>"u"&&(u=.5),this.y=(1-u)*this.y+u*c.y,this},r.prototype.mix=function(c,u){return this.mixX(c,u),this.mixY(c,u),this},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyX=function(c){return this.x=c.x,this},r.prototype.copyY=function(c){return this.y=c.y,this},r.prototype.copy=function(c){return this.copyX(c),this.copyY(c),this},r.prototype.zero=function(){return this.x=this.y=0,this},r.prototype.dot=function(c){return this.x*c.x+this.y*c.y},r.prototype.cross=function(c){return this.x*c.y-this.y*c.x},r.prototype.projectOnto=function(c){var u=(this.x*c.x+this.y*c.y)/(c.x*c.x+c.y*c.y);return this.x=u*c.x,this.y=u*c.y,this},r.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},r.prototype.horizontalAngleDeg=function(){return a(this.horizontalAngle())},r.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},r.prototype.verticalAngleDeg=function(){return a(this.verticalAngle())},r.prototype.angle=r.prototype.horizontalAngle,r.prototype.angleDeg=r.prototype.horizontalAngleDeg,r.prototype.direction=r.prototype.horizontalAngle,r.prototype.rotate=function(c){var u=this.x*Math.cos(c)-this.y*Math.sin(c),f=this.x*Math.sin(c)+this.y*Math.cos(c);return this.x=u,this.y=f,this},r.prototype.rotateDeg=function(c){return c=l(c),this.rotate(c)},r.prototype.rotateTo=function(c){return this.rotate(c-this.angle())},r.prototype.rotateToDeg=function(c){return c=l(c),this.rotateTo(c)},r.prototype.rotateBy=function(c){var u=this.angle()+c;return this.rotate(u)},r.prototype.rotateByDeg=function(c){return c=l(c),this.rotateBy(c)},r.prototype.distanceX=function(c){return this.x-c.x},r.prototype.absDistanceX=function(c){return Math.abs(this.distanceX(c))},r.prototype.distanceY=function(c){return this.y-c.y},r.prototype.absDistanceY=function(c){return Math.abs(this.distanceY(c))},r.prototype.distance=function(c){return Math.sqrt(this.distanceSq(c))},r.prototype.distanceSq=function(c){var u=this.distanceX(c),f=this.distanceY(c);return u*u+f*f},r.prototype.length=function(){return Math.sqrt(this.lengthSq())},r.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},r.prototype.magnitude=r.prototype.length,r.prototype.isZero=function(){return this.x===0&&this.y===0},r.prototype.isEqualTo=function(c){return this.x===c.x&&this.y===c.y},r.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},r.prototype.toArray=function(){return[this.x,this.y]},r.prototype.toObject=function(){return{x:this.x,y:this.y}};var s=180/Math.PI;function o(c,u){return Math.floor(Math.random()*(u-c+1)+c)}function a(c){return c*s}function l(c){return c/s}})(victor);const Victor=victorExports,Edge_vue_vue_type_style_index_0_scoped_20186235_lang="",_sfc_main$c={props:{data:{type:Object,required:!0},nodes:{type:Array}},mounted(){if(typeof this.data.id>"u"){const n=Math.random().toString(36).slice(2);this.$set?this.$set(this.data,"id",n):this.data.id=n}typeof this.data.pathd>"u"&&(this.$set?this.$set(this.data,"pathd",""):this.data.pathd="")},computed:{fromNode:n=>typeof n.data.from=="string"?n.nodes.find(e=>e.id===n.data.from):n.data.from,toNode:n=>typeof n.data.to=="string"?n.nodes.find(e=>e.id===n.data.to):n.data.to,fromAnchor:n=>n.parseAnchor(n.data.fromAnchor,n.fromNode),toAnchor:n=>n.parseAnchor(n.data.toAnchor,n.toNode),pos(){let n=this.fromNode.x+(this.fromAnchor.x||0),e=this.fromNode.y+(this.fromAnchor.y||0),r=this.toNode.x+(this.toAnchor.x||0),s=this.toNode.y+(this.toAnchor.y||0);if(this.fromAnchor&&this.fromAnchor.snap){if(this.fromAnchor.snap==="circle"){const o=Math.max(this.fromNode.width,this.fromNode.height)/2,a=new Victor(r-n,s-e).normalize();n+=a.x*o,e+=a.y*o}if(this.fromAnchor.snap==="rect"){const o=util$1.lineRect(r,n,s,e,this.fromNode);o&&(n=o.x,e=o.y)}}if(this.toAnchor&&this.toAnchor.snap){if(this.toAnchor.snap==="circle"){const o=Math.max(this.toNode.width,this.toNode.height)/2,a=new Victor(r-n,s-e).normalize();r-=a.x*o,s-=a.y*o}if(this.toAnchor.snap==="rect"){const o=util$1.lineRect(n,r,e,s,this.toNode);o&&(r=o.x,s=o.y)}}return{x1:n,x2:r,y1:e,y2:s}},path(){const n=Object.assign({},this.pos);let e=`M ${n.x1},${n.y1} `;const r=n.x1-n.x2,s=n.y1-n.y2;if(this.data.type==="hsmooth"||this.data.type==="smooth"&&Math.abs(r)>=Math.abs(s)){const o={x:n.x1-r/2,y:n.y1},a={x:n.x2+r/2,y:n.y2};e+=` C ${o.x},${o.y} ${a.x},${a.y} `}else if(this.data.type==="vsmooth"||this.data.type==="smooth"&&Math.abs(s)>Math.abs(r)){const o={x:n.x1,y:n.y1-s/2},a={x:n.x2,y:n.y2+s/2};e+=` C ${o.x},${o.y} ${a.x},${a.y} `}else if(this.data.type==="ortho"&&Math.abs(r)>=Math.abs(s)){const o={x:n.x1-r/2,y:n.y1},a={x:n.x2+r/2,y:n.y2};e+=` ${o.x},${o.y} ${a.x},${a.y} `}else if(this.data.type==="ortho"&&Math.abs(s)>Math.abs(r)){const o={x:n.x1,y:n.y1-s/2},a={x:n.x2,y:n.y2+s/2};e+=` ${o.x},${o.y} ${a.x},${a.y} `}return e+=` ${n.x2} ${n.y2}`,this.data.pathd=e,e}},methods:{parseAnchor(n,e){if(!n)return{x:0,y:0};let r=n.snap,s=n.align,o={x:n.x||0,y:n.y||0};if(typeof n=="string"&&(n==="rect"||n==="circle"?(r=n,o={x:"50%",y:"50%"}):s=n),s)if(s==="center")o={x:"50%",y:"50%"};else if(s==="left")o={x:0,y:"50%"};else if(s==="right")o={x:"100%",y:"50%"};else if(s==="top")o={x:"50%",y:0};else if(s==="top-left")o={x:0,y:0};else if(s==="top-right")o={x:"100%",y:0};else if(s==="bottom")o={x:"50%",y:"100%"};else if(s==="bottom-left")o={x:0,y:"100%"};else if(s==="bottom-right")o={x:"100%",y:"100%"};else throw new Error("unkown anchor align"+s);return o.x.endsWith&&(o.x=o.x.endsWith("%")?parseInt(o.x)/100*e.width:parseInt(o.x)),o.y.endsWith&&(o.y=o.y.endsWith("%")?parseInt(o.y)/100*e.height:parseInt(o.y)),{x:o.x,y:o.y,snap:r}}}},_hoisted_1$c=["d","id"];function _sfc_render$c(n,e,r,s,o,a){return openBlock(),createElementBlock("path",{class:"edge",d:a.path,id:r.data.id},null,8,_hoisted_1$c)}const Edge=_export_sfc(_sfc_main$c,[["render",_sfc_render$c],["__scopeId","data-v-20186235"]]),Group_vue_vue_type_style_index_0_lang="",_sfc_main$b={mixins:[drag],props:{nodes:{type:Array,default:[]},margin:{type:Number,default:20},padding:{type:Object,default:()=>({left:10,right:10,top:10,bottom:10})},disableDrag:!1},mounted(){this.$on("drag",({x:n,y:e})=>{this.nodes.forEach(r=>{r.x+=n,r.y+=e})})},computed:{minX:n=>n.nodes.length?n.nodes.reduce((e,r)=>Math.min(e,r.x),1/0):0,maxX:n=>n.nodes.length?n.nodes.reduce((e,r)=>Math.max(e,r.x+r.width),-1/0):0,minY:n=>n.nodes.length?n.nodes.reduce((e,r)=>Math.min(e,r.y),1/0):0,maxY:n=>n.nodes.length?n.nodes.reduce((e,r)=>Math.max(e,r.y+r.height),-1/0):0,width:n=>n.maxX-n.minX,height:n=>n.maxY-n.minY,contentMargin:n=>n.margin&&{margin:n.margin+"px",width:`calc(100% - ${n.margin*2}px)`,height:`calc(100% - ${n.margin*2}px)`}},methods:{onMousedown(n){n.stopPropagation(),this.disableDrag||(n.preventDefault(),this.startDrag(n))}}},_hoisted_1$b=["x","y","width","height"];function _sfc_render$b(n,e,r,s,o,a){return openBlock(),createElementBlock("foreignObject",{class:"group",x:a.minX-r.padding.left-r.margin,y:a.minY-r.padding.top-r.margin,width:a.width+(r.padding.left+r.padding.right)+r.margin*2,height:a.height+(r.padding.top+r.padding.bottom)+r.margin*2,onMousedown:e[0]||(e[0]=(...l)=>a.onMousedown&&a.onMousedown(...l))},[createBaseVNode("div",{class:"content",ref:"content",style:normalizeStyle(a.contentMargin)},[renderSlot(n.$slots,"default")],4)],40,_hoisted_1$b)}const Group=_export_sfc(_sfc_main$b,[["render",_sfc_render$b]]),Port_vue_vue_type_style_index_0_lang="",_sfc_main$a={props:{id:String,startOffset:Object,edgesFrom:{type:Array,default:()=>[]},edgesTo:{type:Array,default:()=>[]}},data(){return{offset:{x:0,y:0}}},mounted(){this.updatePosition()},methods:{updatePosition(){let n=this.$slots.default&&this.$slots.default.length===1&&this.$slots.default[0].elm&&this.$slots.default[0].elm.offsetWidth?this.$slots.default[0].elm:this.$el;for(this.offset=this.startOffset||{x:n.offsetWidth/2,y:n.offsetHeight/2};n&&!n.classList.contains("content");)this.offset.x+=n.offsetLeft||0,this.offset.y+=n.offsetTop||0,n=n.offsetParent;this.edgesFrom.forEach(e=>{Object.assign(e.fromAnchor,this.offset)}),this.edgesTo.forEach(e=>{Object.assign(e.toAnchor,this.offset)})}},watch:{edgesFrom:"updatePosition",edgesTo:"updatePosition"}},_hoisted_1$a={class:"port"};function _sfc_render$a(n,e,r,s,o,a){return openBlock(),createElementBlock("span",_hoisted_1$a,[renderSlot(n.$slots,"default")])}const Port=_export_sfc(_sfc_main$a,[["render",_sfc_render$a]]),Label_vue_vue_type_style_index_0_lang="",_sfc_main$9={components:{Node},props:{edge:{type:Object,required:!0},perc:{type:Number,default:50},offset:{type:Object,default:()=>({x:0,y:0})},align:{type:String,default:"center"},rotate:{type:Boolean,default:!1},useDrag:{type:Boolean,default:!1},connector:{type:Boolean,default:!1}},data(){return{pos:{x:0,y:0},node:{id:Math.random().toString(36).slice(2),x:250,y:0,width:100,height:100},angle:0}},mounted(){this.$nextTick(this.getPosition)},methods:{getPosition(){const n=document.getElementById(this.edge.id);if(!n)throw`element not found: ${this.edge.id}`;const e=n.getTotalLength()*this.perc/100;if(this.pos=n.getPointAtLength(e),this.rotate){const r=n.getPointAtLength(e+.01);this.angle=Math.atan2(r.y-this.pos.y,r.x-this.pos.x)}else this.angle=0},updateNodePos(){const n={x:0,y:0};this.align==="center"?(n.x=this.node.width/2,n.y=this.node.height/2):this.align==="top"?n.x=this.node.width/2:this.align==="top-right"?n.x=node.width:this.align==="left"?n.y=this.node.height/2:this.align==="right"?(n.x=this.node.width,n.y=this.node.height/2):this.align==="bottom-left"?n.y=this.node.height:this.align==="bottom"?(n.x=this.node.width/2,n.y=this.node.height):this.align==="bottom-right"&&(n.x=this.node.width,n.y=this.node.height),this.node.x=this.pos.x+this.offset.x-n.x,this.node.y=this.pos.y+this.offset.y-n.y}},computed:{nodeTransform:n=>`
        transform-origin: ${n.node.x+n.node.width/2}px ${n.node.y+n.node.height}px;
        transform: rotate(${n.angle}rad);`},watch:{edge:{deep:!0,handler:"getPosition"},perc:"getPosition",pos:"updateNodePos","node.width":"updateNodePos","node.height":"updateNodePos",offset:"updateNodePos",offset:"updateNodePos",align:"updateNodePos",rotate:"getPosition"}},_hoisted_1$9={class:"label"},_hoisted_2$9=["d"];function _sfc_render$9(n,e,r,s,o,a){const l=resolveComponent("node");return openBlock(),createElementBlock("g",_hoisted_1$9,[r.connector?(openBlock(),createElementBlock("path",{key:0,class:"edge",d:`M ${o.pos.x} ${o.pos.y} L ${o.node.x+o.node.width/2} ${o.node.y+o.node.height/2}`},null,8,_hoisted_2$9)):createCommentVNode("",!0),createVNode(l,{ref:"node",data:o.node,useDrag:r.useDrag,style:normalizeStyle(a.nodeTransform),onDrag:e[0]||(e[0]=c=>n.$emit("drag",c))},{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},8,["data","useDrag","style"])])}const VLabel=_export_sfc(_sfc_main$9,[["render",_sfc_render$9]]),_sfc_main$8={components:{Screen,Node,Edge,Group,SinkSidebar},data(){return{graph:new Graph,groupNodes:!1}},methods:{toggleGroupNodes(n){this.groupNodes=n}}},_hoisted_1$8={class:"demo"},_hoisted_2$8={class:"viewport"};function _sfc_render$8(n,e,r,s,o,a){const l=resolveComponent("group"),c=resolveComponent("edge"),u=resolveComponent("node"),f=resolveComponent("screen"),d=resolveComponent("sink-sidebar");return openBlock(),createElementBlock("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$8,[createVNode(f,{ref:"screen",markers:[]},{default:withCtx(()=>[o.groupNodes?(openBlock(),createBlock(l,{key:0,nodes:n.$refs.sidebar.filterNodes||o.graph.nodes},null,8,["nodes"])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.edges,g=>(openBlock(),createBlock(c,{data:g,nodes:o.graph.nodes,key:g.id},null,8,["data","nodes"]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.nodes,g=>(openBlock(),createBlock(u,{data:g,key:g.id},null,8,["data"]))),128))]),_:1},512)]),createVNode(d,{class:"sidebar",graph:o.graph,onToggleGroupNodes:a.toggleGroupNodes,ref:"sidebar"},null,8,["graph","onToggleGroupNodes"])])}const Sink=_export_sfc(_sfc_main$8,[["render",_sfc_render$8]]);var jsExports={},js={get exports(){return jsExports},set exports(n){jsExports=n}},src={},javascriptExports={},javascript={get exports(){return javascriptExports},set exports(n){javascriptExports=n}},beautifier$2={},output={},hasRequiredOutput;function requireOutput(){if(hasRequiredOutput)return output;hasRequiredOutput=1;function n(s){this.__parent=s,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}n.prototype.clone_empty=function(){var s=new n(this.__parent);return s.set_indent(this.__indent_count,this.__alignment_count),s},n.prototype.item=function(s){return s<0?this.__items[this.__items.length+s]:this.__items[s]},n.prototype.has_match=function(s){for(var o=this.__items.length-1;o>=0;o--)if(this.__items[o].match(s))return!0;return!1},n.prototype.set_indent=function(s,o){this.is_empty()&&(this.__indent_count=s||0,this.__alignment_count=o||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},n.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},n.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},n.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var s=this.__parent.current_line;return s.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),s.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),s.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,s.__items[0]===" "&&(s.__items.splice(0,1),s.__character_count-=1),!0}return!1},n.prototype.is_empty=function(){return this.__items.length===0},n.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},n.prototype.push=function(s){this.__items.push(s);var o=s.lastIndexOf(`
`);o!==-1?this.__character_count=s.length-o:this.__character_count+=s.length},n.prototype.pop=function(){var s=null;return this.is_empty()||(s=this.__items.pop(),this.__character_count-=s.length),s},n.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},n.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},n.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},n.prototype.toString=function(){var s="";return this.is_empty()?this.__parent.indent_empty_lines&&(s=this.__parent.get_indent_string(this.__indent_count)):(s=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),s+=this.__items.join("")),s};function e(s,o){this.__cache=[""],this.__indent_size=s.indent_size,this.__indent_string=s.indent_char,s.indent_with_tabs||(this.__indent_string=new Array(s.indent_size+1).join(s.indent_char)),o=o||"",s.indent_level>0&&(o=new Array(s.indent_level+1).join(this.__indent_string)),this.__base_string=o,this.__base_string_length=o.length}e.prototype.get_indent_size=function(s,o){var a=this.__base_string_length;return o=o||0,s<0&&(a=0),a+=s*this.__indent_size,a+=o,a},e.prototype.get_indent_string=function(s,o){var a=this.__base_string;return o=o||0,s<0&&(s=0,a=""),o+=s*this.__indent_size,this.__ensure_cache(o),a+=this.__cache[o],a},e.prototype.__ensure_cache=function(s){for(;s>=this.__cache.length;)this.__add_column()},e.prototype.__add_column=function(){var s=this.__cache.length,o=0,a="";this.__indent_size&&s>=this.__indent_size&&(o=Math.floor(s/this.__indent_size),s-=o*this.__indent_size,a=new Array(o+1).join(this.__indent_string)),s&&(a+=new Array(s+1).join(" ")),this.__cache.push(a)};function r(s,o){this.__indent_cache=new e(s,o),this.raw=!1,this._end_with_newline=s.end_with_newline,this.indent_size=s.indent_size,this.wrap_line_length=s.wrap_line_length,this.indent_empty_lines=s.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new n(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}return r.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},r.prototype.get_line_number=function(){return this.__lines.length},r.prototype.get_indent_string=function(s,o){return this.__indent_cache.get_indent_string(s,o)},r.prototype.get_indent_size=function(s,o){return this.__indent_cache.get_indent_size(s,o)},r.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},r.prototype.add_new_line=function(s){return this.is_empty()||!s&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)},r.prototype.get_code=function(s){this.trim(!0);var o=this.current_line.pop();o&&(o[o.length-1]===`
`&&(o=o.replace(/\n+$/g,"")),this.current_line.push(o)),this._end_with_newline&&this.__add_outputline();var a=this.__lines.join(`
`);return s!==`
`&&(a=a.replace(/[\n]/g,s)),a},r.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},r.prototype.set_indent=function(s,o){return s=s||0,o=o||0,this.next_line.set_indent(s,o),this.__lines.length>1?(this.current_line.set_indent(s,o),!0):(this.current_line.set_indent(),!1)},r.prototype.add_raw_token=function(s){for(var o=0;o<s.newlines;o++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(s.whitespace_before),this.current_line.push(s.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},r.prototype.add_token=function(s){this.__add_space_before_token(),this.current_line.push(s),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},r.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},r.prototype.remove_indent=function(s){for(var o=this.__lines.length;s<o;)this.__lines[s]._remove_indent(),s++;this.current_line._remove_wrap_indent()},r.prototype.trim=function(s){for(s=s===void 0?!1:s,this.current_line.trim();s&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},r.prototype.just_added_newline=function(){return this.current_line.is_empty()},r.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},r.prototype.ensure_empty_line_above=function(s,o){for(var a=this.__lines.length-2;a>=0;){var l=this.__lines[a];if(l.is_empty())break;if(l.item(0).indexOf(s)!==0&&l.item(-1)!==o){this.__lines.splice(a+1,0,new n(this)),this.previous_line=this.__lines[this.__lines.length-2];break}a--}},output.Output=r,output}var token={},hasRequiredToken;function requireToken(){if(hasRequiredToken)return token;hasRequiredToken=1;function n(e,r,s,o){this.type=e,this.text=r,this.comments_before=null,this.newlines=s||0,this.whitespace_before=o||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}return token.Token=n,token}var acorn={},hasRequiredAcorn;function requireAcorn(){return hasRequiredAcorn||(hasRequiredAcorn=1,function(n){var e="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",r="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",s="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",o="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",a="(?:\\\\u[0-9a-fA-F]{4}|["+e+s+"])",l="(?:\\\\u[0-9a-fA-F]{4}|["+r+s+o+"])*";n.identifier=new RegExp(a+l,"g"),n.identifierStart=new RegExp(a),n.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+r+s+o+"])+"),n.newline=/[\n\r\u2028\u2029]/,n.lineBreak=new RegExp(`\r
|`+n.newline.source),n.allLineBreaks=new RegExp(n.lineBreak.source,"g")}(acorn)),acorn}var options$3={},options$2={},hasRequiredOptions$3;function requireOptions$3(){if(hasRequiredOptions$3)return options$2;hasRequiredOptions$3=1;function n(s,o){this.raw_options=e(s,o),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}n.prototype._get_array=function(s,o){var a=this.raw_options[s],l=o||[];return typeof a=="object"?a!==null&&typeof a.concat=="function"&&(l=a.concat()):typeof a=="string"&&(l=a.split(/[^a-zA-Z0-9_\/\-]+/)),l},n.prototype._get_boolean=function(s,o){var a=this.raw_options[s],l=a===void 0?!!o:!!a;return l},n.prototype._get_characters=function(s,o){var a=this.raw_options[s],l=o||"";return typeof a=="string"&&(l=a.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),l},n.prototype._get_number=function(s,o){var a=this.raw_options[s];o=parseInt(o,10),isNaN(o)&&(o=0);var l=parseInt(a,10);return isNaN(l)&&(l=o),l},n.prototype._get_selection=function(s,o,a){var l=this._get_selection_list(s,o,a);if(l.length!==1)throw new Error("Invalid Option Value: The option '"+s+`' can only be one of the following values:
`+o+`
You passed in: '`+this.raw_options[s]+"'");return l[0]},n.prototype._get_selection_list=function(s,o,a){if(!o||o.length===0)throw new Error("Selection list cannot be empty.");if(a=a||[o[0]],!this._is_valid_selection(a,o))throw new Error("Invalid Default Value!");var l=this._get_array(s,a);if(!this._is_valid_selection(l,o))throw new Error("Invalid Option Value: The option '"+s+`' can contain only the following values:
`+o+`
You passed in: '`+this.raw_options[s]+"'");return l},n.prototype._is_valid_selection=function(s,o){return s.length&&o.length&&!s.some(function(a){return o.indexOf(a)===-1})};function e(s,o){var a={};s=r(s);var l;for(l in s)l!==o&&(a[l]=s[l]);if(o&&s[o])for(l in s[o])a[l]=s[o][l];return a}function r(s){var o={},a;for(a in s){var l=a.replace(/-/g,"_");o[l]=s[a]}return o}return options$2.Options=n,options$2.normalizeOpts=r,options$2.mergeOpts=e,options$2}var hasRequiredOptions$2;function requireOptions$2(){if(hasRequiredOptions$2)return options$3;hasRequiredOptions$2=1;var n=requireOptions$3().Options,e=["before-newline","after-newline","preserve-newline"];function r(s){n.call(this,s,"js");var o=this.raw_options.brace_style||null;o==="expand-strict"?this.raw_options.brace_style="expand":o==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var a=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var l=0;l<a.length;l++)a[l]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=a[l];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",e),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}return r.prototype=new n,options$3.Options=r,options$3}var tokenizer$2={},inputscanner={},hasRequiredInputscanner;function requireInputscanner(){if(hasRequiredInputscanner)return inputscanner;hasRequiredInputscanner=1;var n=RegExp.prototype.hasOwnProperty("sticky");function e(r){this.__input=r||"",this.__input_length=this.__input.length,this.__position=0}return e.prototype.restart=function(){this.__position=0},e.prototype.back=function(){this.__position>0&&(this.__position-=1)},e.prototype.hasNext=function(){return this.__position<this.__input_length},e.prototype.next=function(){var r=null;return this.hasNext()&&(r=this.__input.charAt(this.__position),this.__position+=1),r},e.prototype.peek=function(r){var s=null;return r=r||0,r+=this.__position,r>=0&&r<this.__input_length&&(s=this.__input.charAt(r)),s},e.prototype.__match=function(r,s){r.lastIndex=s;var o=r.exec(this.__input);return o&&!(n&&r.sticky)&&o.index!==s&&(o=null),o},e.prototype.test=function(r,s){return s=s||0,s+=this.__position,s>=0&&s<this.__input_length?!!this.__match(r,s):!1},e.prototype.testChar=function(r,s){var o=this.peek(s);return r.lastIndex=0,o!==null&&r.test(o)},e.prototype.match=function(r){var s=this.__match(r,this.__position);return s?this.__position+=s[0].length:s=null,s},e.prototype.read=function(r,s,o){var a="",l;return r&&(l=this.match(r),l&&(a+=l[0])),s&&(l||!r)&&(a+=this.readUntil(s,o)),a},e.prototype.readUntil=function(r,s){var o="",a=this.__position;r.lastIndex=this.__position;var l=r.exec(this.__input);return l?(a=l.index,s&&(a+=l[0].length)):a=this.__input_length,o=this.__input.substring(this.__position,a),this.__position=a,o},e.prototype.readUntilAfter=function(r){return this.readUntil(r,!0)},e.prototype.get_regexp=function(r,s){var o=null,a="g";return s&&n&&(a="y"),typeof r=="string"&&r!==""?o=new RegExp(r,a):r&&(o=new RegExp(r.source,a)),o},e.prototype.get_literal_regexp=function(r){return RegExp(r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},e.prototype.peekUntilAfter=function(r){var s=this.__position,o=this.readUntilAfter(r);return this.__position=s,o},e.prototype.lookBack=function(r){var s=this.__position-1;return s>=r.length&&this.__input.substring(s-r.length,s).toLowerCase()===r},inputscanner.InputScanner=e,inputscanner}var tokenizer$1={},tokenstream={},hasRequiredTokenstream;function requireTokenstream(){if(hasRequiredTokenstream)return tokenstream;hasRequiredTokenstream=1;function n(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}return n.prototype.restart=function(){this.__position=0},n.prototype.isEmpty=function(){return this.__tokens_length===0},n.prototype.hasNext=function(){return this.__position<this.__tokens_length},n.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},n.prototype.peek=function(e){var r=null;return e=e||0,e+=this.__position,e>=0&&e<this.__tokens_length&&(r=this.__tokens[e]),r},n.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},tokenstream.TokenStream=n,tokenstream}var whitespacepattern={},pattern={},hasRequiredPattern;function requirePattern(){if(hasRequiredPattern)return pattern;hasRequiredPattern=1;function n(e,r){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,r&&(this._starting_pattern=this._input.get_regexp(r._starting_pattern,!0),this._match_pattern=this._input.get_regexp(r._match_pattern,!0),this._until_pattern=this._input.get_regexp(r._until_pattern),this._until_after=r._until_after)}return n.prototype.read=function(){var e=this._input.read(this._starting_pattern);return(!this._starting_pattern||e)&&(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},n.prototype.read_match=function(){return this._input.match(this._match_pattern)},n.prototype.until_after=function(e){var r=this._create();return r._until_after=!0,r._until_pattern=this._input.get_regexp(e),r._update(),r},n.prototype.until=function(e){var r=this._create();return r._until_after=!1,r._until_pattern=this._input.get_regexp(e),r._update(),r},n.prototype.starting_with=function(e){var r=this._create();return r._starting_pattern=this._input.get_regexp(e,!0),r._update(),r},n.prototype.matching=function(e){var r=this._create();return r._match_pattern=this._input.get_regexp(e,!0),r._update(),r},n.prototype._create=function(){return new n(this._input,this)},n.prototype._update=function(){},pattern.Pattern=n,pattern}var hasRequiredWhitespacepattern;function requireWhitespacepattern(){if(hasRequiredWhitespacepattern)return whitespacepattern;hasRequiredWhitespacepattern=1;var n=requirePattern().Pattern;function e(r,s){n.call(this,r,s),s?this._line_regexp=this._input.get_regexp(s._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}return e.prototype=new n,e.prototype.__set_whitespace_patterns=function(r,s){r+="\\t ",s+="\\n\\r",this._match_pattern=this._input.get_regexp("["+r+s+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+s+"]")},e.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var r=this._input.read(this._match_pattern);if(r===" ")this.whitespace_before_token=" ";else if(r){var s=this.__split(this._newline_regexp,r);this.newline_count=s.length-1,this.whitespace_before_token=s[this.newline_count]}return r},e.prototype.matching=function(r,s){var o=this._create();return o.__set_whitespace_patterns(r,s),o._update(),o},e.prototype._create=function(){return new e(this._input,this)},e.prototype.__split=function(r,s){r.lastIndex=0;for(var o=0,a=[],l=r.exec(s);l;)a.push(s.substring(o,l.index)),o=l.index+l[0].length,l=r.exec(s);return o<s.length?a.push(s.substring(o,s.length)):a.push(""),a},whitespacepattern.WhitespacePattern=e,whitespacepattern}var hasRequiredTokenizer$2;function requireTokenizer$2(){if(hasRequiredTokenizer$2)return tokenizer$1;hasRequiredTokenizer$2=1;var n=requireInputscanner().InputScanner,e=requireToken().Token,r=requireTokenstream().TokenStream,s=requireWhitespacepattern().WhitespacePattern,o={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},a=function(l,c){this._input=new n(l),this._options=c||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new s(this._input)};return a.prototype.tokenize=function(){this._input.restart(),this.__tokens=new r,this._reset();for(var l,c=new e(o.START,""),u=null,f=[],d=new r;c.type!==o.EOF;){for(l=this._get_next_token(c,u);this._is_comment(l);)d.add(l),l=this._get_next_token(c,u);d.isEmpty()||(l.comments_before=d,d=new r),l.parent=u,this._is_opening(l)?(f.push(u),u=l):u&&this._is_closing(l,u)&&(l.opened=u,u.closed=l,u=f.pop(),l.parent=u),l.previous=c,c.next=l,this.__tokens.add(l),c=l}return this.__tokens},a.prototype._is_first_token=function(){return this.__tokens.isEmpty()},a.prototype._reset=function(){},a.prototype._get_next_token=function(l,c){this._readWhitespace();var u=this._input.read(/.+/g);return u?this._create_token(o.RAW,u):this._create_token(o.EOF,"")},a.prototype._is_comment=function(l){return!1},a.prototype._is_opening=function(l){return!1},a.prototype._is_closing=function(l,c){return!1},a.prototype._create_token=function(l,c){var u=new e(l,c,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return u},a.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},tokenizer$1.Tokenizer=a,tokenizer$1.TOKEN=o,tokenizer$1}var directives={},hasRequiredDirectives;function requireDirectives(){if(hasRequiredDirectives)return directives;hasRequiredDirectives=1;function n(e,r){e=typeof e=="string"?e:e.source,r=typeof r=="string"?r:r.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+r,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+r,"g")}return n.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var r={};this.__directive_pattern.lastIndex=0;for(var s=this.__directive_pattern.exec(e);s;)r[s[1]]=s[2],s=this.__directive_pattern.exec(e);return r},n.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},directives.Directives=n,directives}var templatablepattern={},hasRequiredTemplatablepattern;function requireTemplatablepattern(){if(hasRequiredTemplatablepattern)return templatablepattern;hasRequiredTemplatablepattern=1;var n=requirePattern().Pattern,e={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function r(s,o){n.call(this,s,o),this.__template_pattern=null,this._disabled=Object.assign({},e),this._excluded=Object.assign({},e),o&&(this.__template_pattern=this._input.get_regexp(o.__template_pattern),this._excluded=Object.assign(this._excluded,o._excluded),this._disabled=Object.assign(this._disabled,o._disabled));var a=new n(s);this.__patterns={handlebars_comment:a.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:a.starting_with(/{{{/).until_after(/}}}/),handlebars:a.starting_with(/{{/).until_after(/}}/),php:a.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:a.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:a.starting_with(/{%/).until_after(/%}/),django_value:a.starting_with(/{{/).until_after(/}}/),django_comment:a.starting_with(/{#/).until_after(/#}/),smarty:a.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:a.starting_with(/{\*/).until_after(/\*}/),smarty_literal:a.starting_with(/{literal}/).until_after(/{\/literal}/)}}return r.prototype=new n,r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){this.__set_templated_pattern()},r.prototype.disable=function(s){var o=this._create();return o._disabled[s]=!0,o._update(),o},r.prototype.read_options=function(s){var o=this._create();for(var a in e)o._disabled[a]=s.templating.indexOf(a)===-1;return o._update(),o},r.prototype.exclude=function(s){var o=this._create();return o._excluded[s]=!0,o._update(),o},r.prototype.read=function(){var s="";this._match_pattern?s=this._input.read(this._starting_pattern):s=this._input.read(this._starting_pattern,this.__template_pattern);for(var o=this._read_template();o;)this._match_pattern?o+=this._input.read(this._match_pattern):o+=this._input.readUntil(this.__template_pattern),s+=o,o=this._read_template();return this._until_after&&(s+=this._input.readUntilAfter(this._until_pattern)),s},r.prototype.__set_templated_pattern=function(){var s=[];this._disabled.php||s.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||s.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||s.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(s.push(this.__patterns.django._starting_pattern.source),s.push(this.__patterns.django_value._starting_pattern.source),s.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||s.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&s.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+s.join("|")+")")},r.prototype._read_template=function(){var s="",o=this._input.peek();if(o==="<"){var a=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&a==="?"&&(s=s||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&a==="%"&&(s=s||this.__patterns.erb.read())}else o==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(s=s||this.__patterns.handlebars_comment.read(),s=s||this.__patterns.handlebars_unescaped.read(),s=s||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(s=s||this.__patterns.django_value.read()),this._excluded.django||(s=s||this.__patterns.django_comment.read(),s=s||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(s=s||this.__patterns.smarty_comment.read(),s=s||this.__patterns.smarty_literal.read(),s=s||this.__patterns.smarty.read()));return s},templatablepattern.TemplatablePattern=r,templatablepattern}var hasRequiredTokenizer$1;function requireTokenizer$1(){if(hasRequiredTokenizer$1)return tokenizer$2;hasRequiredTokenizer$1=1;var n=requireInputscanner().InputScanner,e=requireTokenizer$2().Tokenizer,r=requireTokenizer$2().TOKEN,s=requireDirectives().Directives,o=requireAcorn(),a=requirePattern().Pattern,l=requireTemplatablepattern().TemplatablePattern;function c(N,$){return $.indexOf(N)!==-1}var u={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:r.START,RAW:r.RAW,EOF:r.EOF},f=new s(/\/\*/,/\*\//),d=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,g=/[0-9]/,m=/[^\d\.]/,_=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),E=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";E=E.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),E="\\?\\.(?!\\d) "+E,E=E.replace(/ /g,"|");var A=new RegExp(E),b="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),v=b.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),M=new RegExp("^(?:"+v.join("|")+")$"),V,R=function(N,$){e.call(this,N,$),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var I=new a(this._input),H=new l(this._input).read_options(this._options);this.__patterns={template:H,identifier:H.starting_with(o.identifier).matching(o.identifierMatch),number:I.matching(d),punct:I.matching(A),comment:I.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:I.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:I.matching(/<!--/),html_comment_end:I.matching(/-->/),include:I.starting_with(/#include/).until_after(o.lineBreak),shebang:I.starting_with(/#!/).until_after(o.lineBreak),xml:I.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:H.until(/['\\\n\r\u2028\u2029]/),double_quote:H.until(/["\\\n\r\u2028\u2029]/),template_text:H.until(/[`\\$]/),template_expression:H.until(/[`}\\]/)}};R.prototype=new e,R.prototype._is_comment=function(N){return N.type===u.COMMENT||N.type===u.BLOCK_COMMENT||N.type===u.UNKNOWN},R.prototype._is_opening=function(N){return N.type===u.START_BLOCK||N.type===u.START_EXPR},R.prototype._is_closing=function(N,$){return(N.type===u.END_BLOCK||N.type===u.END_EXPR)&&$&&(N.text==="]"&&$.text==="["||N.text===")"&&$.text==="("||N.text==="}"&&$.text==="{")},R.prototype._reset=function(){V=!1},R.prototype._get_next_token=function(N,$){var I=null;this._readWhitespace();var H=this._input.peek();return H===null?this._create_token(u.EOF,""):(I=I||this._read_non_javascript(H),I=I||this._read_string(H),I=I||this._read_word(N),I=I||this._read_singles(H),I=I||this._read_comment(H),I=I||this._read_regexp(H,N),I=I||this._read_xml(H,N),I=I||this._read_punctuation(),I=I||this._create_token(u.UNKNOWN,this._input.next()),I)},R.prototype._read_word=function(N){var $;if($=this.__patterns.identifier.read(),$!=="")return $=$.replace(o.allLineBreaks,`
`),!(N.type===u.DOT||N.type===u.RESERVED&&(N.text==="set"||N.text==="get"))&&M.test($)?($==="in"||$==="of")&&(N.type===u.WORD||N.type===u.STRING)?this._create_token(u.OPERATOR,$):this._create_token(u.RESERVED,$):this._create_token(u.WORD,$);if($=this.__patterns.number.read(),$!=="")return this._create_token(u.WORD,$)},R.prototype._read_singles=function(N){var $=null;return N==="("||N==="["?$=this._create_token(u.START_EXPR,N):N===")"||N==="]"?$=this._create_token(u.END_EXPR,N):N==="{"?$=this._create_token(u.START_BLOCK,N):N==="}"?$=this._create_token(u.END_BLOCK,N):N===";"?$=this._create_token(u.SEMICOLON,N):N==="."&&m.test(this._input.peek(1))?$=this._create_token(u.DOT,N):N===","&&($=this._create_token(u.COMMA,N)),$&&this._input.next(),$},R.prototype._read_punctuation=function(){var N=this.__patterns.punct.read();if(N!=="")return N==="="?this._create_token(u.EQUALS,N):N==="?."?this._create_token(u.DOT,N):this._create_token(u.OPERATOR,N)},R.prototype._read_non_javascript=function(N){var $="";if(N==="#"){if(this._is_first_token()&&($=this.__patterns.shebang.read(),$))return this._create_token(u.UNKNOWN,$.trim()+`
`);if($=this.__patterns.include.read(),$)return this._create_token(u.UNKNOWN,$.trim()+`
`);N=this._input.next();var I="#";if(this._input.hasNext()&&this._input.testChar(g)){do N=this._input.next(),I+=N;while(this._input.hasNext()&&N!=="#"&&N!=="=");return N==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(I+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(I+="{}",this._input.next(),this._input.next())),this._create_token(u.WORD,I)}this._input.back()}else if(N==="<"&&this._is_first_token()){if($=this.__patterns.html_comment_start.read(),$){for(;this._input.hasNext()&&!this._input.testChar(o.newline);)$+=this._input.next();return V=!0,this._create_token(u.COMMENT,$)}}else if(V&&N==="-"&&($=this.__patterns.html_comment_end.read(),$))return V=!1,this._create_token(u.COMMENT,$);return null},R.prototype._read_comment=function(N){var $=null;if(N==="/"){var I="";if(this._input.peek(1)==="*"){I=this.__patterns.block_comment.read();var H=f.get_directives(I);H&&H.ignore==="start"&&(I+=f.readIgnored(this._input)),I=I.replace(o.allLineBreaks,`
`),$=this._create_token(u.BLOCK_COMMENT,I),$.directives=H}else this._input.peek(1)==="/"&&(I=this.__patterns.comment.read(),$=this._create_token(u.COMMENT,I))}return $},R.prototype._read_string=function(N){if(N==="`"||N==="'"||N==='"'){var $=this._input.next();return this.has_char_escapes=!1,N==="`"?$+=this._read_string_recursive("`",!0,"${"):$+=this._read_string_recursive(N),this.has_char_escapes&&this._options.unescape_strings&&($=L($)),this._input.peek()===N&&($+=this._input.next()),$=$.replace(o.allLineBreaks,`
`),this._create_token(u.STRING,$)}return null},R.prototype._allow_regexp_or_xml=function(N){return N.type===u.RESERVED&&c(N.text,["return","case","throw","else","do","typeof","yield"])||N.type===u.END_EXPR&&N.text===")"&&N.opened.previous.type===u.RESERVED&&c(N.opened.previous.text,["if","while","for"])||c(N.type,[u.COMMENT,u.START_EXPR,u.START_BLOCK,u.START,u.END_BLOCK,u.OPERATOR,u.EQUALS,u.EOF,u.SEMICOLON,u.COMMA])},R.prototype._read_regexp=function(N,$){if(N==="/"&&this._allow_regexp_or_xml($)){for(var I=this._input.next(),H=!1,k=!1;this._input.hasNext()&&(H||k||this._input.peek()!==N)&&!this._input.testChar(o.newline);)I+=this._input.peek(),H?H=!1:(H=this._input.peek()==="\\",this._input.peek()==="["?k=!0:this._input.peek()==="]"&&(k=!1)),this._input.next();return this._input.peek()===N&&(I+=this._input.next(),I+=this._input.read(o.identifier)),this._create_token(u.STRING,I)}return null},R.prototype._read_xml=function(N,$){if(this._options.e4x&&N==="<"&&this._allow_regexp_or_xml($)){var I="",H=this.__patterns.xml.read_match();if(H){for(var k=H[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),q=k.indexOf("{")===0,G=0;H;){var J=!!H[1],ne=H[2],ce=!!H[H.length-1]||ne.slice(0,8)==="![CDATA[";if(!ce&&(ne===k||q&&ne.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(J?--G:++G),I+=H[0],G<=0)break;H=this.__patterns.xml.read_match()}return H||(I+=this._input.match(/[\s\S]*/g)[0]),I=I.replace(o.allLineBreaks,`
`),this._create_token(u.STRING,I)}}return null};function L(N){for(var $="",I=0,H=new n(N),k=null;H.hasNext();)if(k=H.match(/([\s]|[^\\]|\\\\)+/g),k&&($+=k[0]),H.peek()==="\\"){if(H.next(),H.peek()==="x")k=H.match(/x([0-9A-Fa-f]{2})/g);else if(H.peek()==="u")k=H.match(/u([0-9A-Fa-f]{4})/g);else{$+="\\",H.hasNext()&&($+=H.next());continue}if(!k||(I=parseInt(k[1],16),I>126&&I<=255&&k[0].indexOf("x")===0))return N;if(I>=0&&I<32){$+="\\"+k[0];continue}else I===34||I===39||I===92?$+="\\"+String.fromCharCode(I):$+=String.fromCharCode(I)}return $}return R.prototype._read_string_recursive=function(N,$,I){var H,k;N==="'"?k=this.__patterns.single_quote:N==='"'?k=this.__patterns.double_quote:N==="`"?k=this.__patterns.template_text:N==="}"&&(k=this.__patterns.template_expression);for(var q=k.read(),G="";this._input.hasNext();){if(G=this._input.next(),G===N||!$&&o.newline.test(G)){this._input.back();break}else G==="\\"&&this._input.hasNext()?(H=this._input.peek(),H==="x"||H==="u"?this.has_char_escapes=!0:H==="\r"&&this._input.peek(1)===`
`&&this._input.next(),G+=this._input.next()):I&&(I==="${"&&G==="$"&&this._input.peek()==="{"&&(G+=this._input.next()),I===G&&(N==="`"?G+=this._read_string_recursive("}",$,"`"):G+=this._read_string_recursive("`",$,"${"),this._input.hasNext()&&(G+=this._input.next())));G+=k.read(),q+=G}return q},tokenizer$2.Tokenizer=R,tokenizer$2.TOKEN=u,tokenizer$2.positionable_operators=_.slice(),tokenizer$2.line_starters=b.slice(),tokenizer$2}var hasRequiredBeautifier$2;function requireBeautifier$2(){if(hasRequiredBeautifier$2)return beautifier$2;hasRequiredBeautifier$2=1;var n=requireOutput().Output,e=requireToken().Token,r=requireAcorn(),s=requireOptions$2().Options,o=requireTokenizer$1().Tokenizer,a=requireTokenizer$1().line_starters,l=requireTokenizer$1().positionable_operators,c=requireTokenizer$1().TOKEN;function u(k,q){return q.indexOf(k)!==-1}function f(k){return k.replace(/^\s+/g,"")}function d(k){for(var q={},G=0;G<k.length;G++)q[k[G].replace(/-/g,"_")]=k[G];return q}function g(k,q){return k&&k.type===c.RESERVED&&k.text===q}function m(k,q){return k&&k.type===c.RESERVED&&u(k.text,q)}var _=["case","return","do","if","throw","else","await","break","continue","async"],E=["before-newline","after-newline","preserve-newline"],A=d(E),b=[A.before_newline,A.preserve_newline],v={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function M(k,q){q.multiline_frame||q.mode===v.ForInitializer||q.mode===v.Conditional||k.remove_indent(q.start_line_index)}function V(k){k=k.replace(r.allLineBreaks,`
`);for(var q=[],G=k.indexOf(`
`);G!==-1;)q.push(k.substring(0,G)),k=k.substring(G+1),G=k.indexOf(`
`);return k.length&&q.push(k),q}function R(k){return k===v.ArrayLiteral}function L(k){return u(k,[v.Expression,v.ForInitializer,v.Conditional])}function N(k,q){for(var G=0;G<k.length;G++){var J=k[G].trim();if(J.charAt(0)!==q)return!1}return!0}function $(k,q){for(var G=0,J=k.length,ne;G<J;G++)if(ne=k[G],ne&&ne.indexOf(q)!==0)return!1;return!0}function I(k,q){q=q||{},this._source_text=k||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new s(q)}I.prototype.create_flags=function(k,q){var G=0;k&&(G=k.indentation_level,!this._output.just_added_newline()&&k.line_indent_level>G&&(G=k.line_indent_level));var J={mode:q,parent:k,last_token:k?k.last_token:new e(c.START_BLOCK,""),last_word:k?k.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:G,alignment:0,line_indent_level:k?k.line_indent_level:G,start_line_index:this._output.get_line_number(),ternary_depth:0};return J},I.prototype._reset=function(k){var q=k.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new n(this._options,q),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(v.BlockStatement);var G=new o(k,this._options);return this._tokens=G.tokenize(),k},I.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var k,q=this._reset(this._source_text),G=this._options.eol;this._options.eol==="auto"&&(G=`
`,q&&r.lineBreak.test(q||"")&&(G=q.match(r.lineBreak)[0]));for(var J=this._tokens.next();J;)this.handle_token(J),this._last_last_text=this._flags.last_token.text,this._flags.last_token=J,J=this._tokens.next();return k=this._output.get_code(G),k},I.prototype.handle_token=function(k,q){k.type===c.START_EXPR?this.handle_start_expr(k):k.type===c.END_EXPR?this.handle_end_expr(k):k.type===c.START_BLOCK?this.handle_start_block(k):k.type===c.END_BLOCK?this.handle_end_block(k):k.type===c.WORD?this.handle_word(k):k.type===c.RESERVED?this.handle_word(k):k.type===c.SEMICOLON?this.handle_semicolon(k):k.type===c.STRING?this.handle_string(k):k.type===c.EQUALS?this.handle_equals(k):k.type===c.OPERATOR?this.handle_operator(k):k.type===c.COMMA?this.handle_comma(k):k.type===c.BLOCK_COMMENT?this.handle_block_comment(k,q):k.type===c.COMMENT?this.handle_comment(k,q):k.type===c.DOT?this.handle_dot(k):k.type===c.EOF?this.handle_eof(k):k.type===c.UNKNOWN?this.handle_unknown(k,q):this.handle_unknown(k,q)},I.prototype.handle_whitespace_and_comments=function(k,q){var G=k.newlines,J=this._options.keep_array_indentation&&R(this._flags.mode);if(k.comments_before)for(var ne=k.comments_before.next();ne;)this.handle_whitespace_and_comments(ne,q),this.handle_token(ne,q),ne=k.comments_before.next();if(J)for(var ce=0;ce<G;ce+=1)this.print_newline(ce>0,q);else if(this._options.max_preserve_newlines&&G>this._options.max_preserve_newlines&&(G=this._options.max_preserve_newlines),this._options.preserve_newlines&&G>1){this.print_newline(!1,q);for(var le=1;le<G;le+=1)this.print_newline(!0,q)}};var H=["async","break","continue","return","throw","yield"];return I.prototype.allow_wrap_or_preserved_newline=function(k,q){if(q=q===void 0?!1:q,!this._output.just_added_newline()){var G=this._options.preserve_newlines&&k.newlines||q,J=u(this._flags.last_token.text,l)||u(k.text,l);if(J){var ne=u(this._flags.last_token.text,l)&&u(this._options.operator_position,b)||u(k.text,l);G=G&&ne}if(G)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(m(this._flags.last_token,H))return;this._output.set_wrap_point()}}},I.prototype.print_newline=function(k,q){if(!q&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==c.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var G=this._tokens.peek();this._flags.mode===v.Statement&&!(this._flags.if_block&&g(G,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(k)&&(this._flags.multiline_frame=!0)},I.prototype.print_token_line_indentation=function(k){this._output.just_added_newline()&&(this._options.keep_array_indentation&&k.newlines&&(k.text==="["||R(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(k.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},I.prototype.print_token=function(k){if(this._output.raw){this._output.add_raw_token(k);return}if(this._options.comma_first&&k.previous&&k.previous.type===c.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var q=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(q),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(k),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(k),this._output.non_breaking_space=!0,this._output.add_token(k.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)},I.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},I.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},I.prototype.set_mode=function(k){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,k),this._flags=this.create_flags(this._previous_flags,k),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},I.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===v.Statement&&M(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},I.prototype.start_of_object_property=function(){return this._flags.parent.mode===v.ObjectLiteral&&this._flags.mode===v.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||m(this._flags.last_token,["get","set"]))},I.prototype.start_of_statement=function(k){var q=!1;return q=q||m(this._flags.last_token,["var","let","const"])&&k.type===c.WORD,q=q||g(this._flags.last_token,"do"),q=q||!(this._flags.parent.mode===v.ObjectLiteral&&this._flags.mode===v.Statement)&&m(this._flags.last_token,H)&&!k.newlines,q=q||g(this._flags.last_token,"else")&&!(g(k,"if")&&!k.comments_before),q=q||this._flags.last_token.type===c.END_EXPR&&(this._previous_flags.mode===v.ForInitializer||this._previous_flags.mode===v.Conditional),q=q||this._flags.last_token.type===c.WORD&&this._flags.mode===v.BlockStatement&&!this._flags.in_case&&!(k.text==="--"||k.text==="++")&&this._last_last_text!=="function"&&k.type!==c.WORD&&k.type!==c.RESERVED,q=q||this._flags.mode===v.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||m(this._flags.last_token,["get","set"])),q?(this.set_mode(v.Statement),this.indent(),this.handle_whitespace_and_comments(k,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(k,m(k,["do","for","if","while"])),!0):!1},I.prototype.handle_start_expr=function(k){this.start_of_statement(k)||this.handle_whitespace_and_comments(k);var q=v.Expression;if(k.text==="["){if(this._flags.last_token.type===c.WORD||this._flags.last_token.text===")"){m(this._flags.last_token,a)&&(this._output.space_before_token=!0),this.print_token(k),this.set_mode(q),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}q=v.ArrayLiteral,R(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),u(this._flags.last_token.type,[c.START_EXPR,c.END_EXPR,c.WORD,c.OPERATOR,c.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===c.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,q=v.ForInitializer):u(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,q=v.Conditional):u(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&k.whitespace_before===""?this._output.space_before_token=!1:(u(this._flags.last_token.text,a)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===c.EQUALS||this._flags.last_token.type===c.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(k);else if(this._flags.last_token.type===c.WORD){this._output.space_before_token=!1;var G=this._tokens.peek(-3);if(this._options.space_after_named_function&&G){var J=this._tokens.peek(-4);m(G,["async","function"])||G.text==="*"&&m(J,["async","function"])?this._output.space_before_token=!0:this._flags.mode===v.ObjectLiteral?(G.text==="{"||G.text===","||G.text==="*"&&(J.text==="{"||J.text===","))&&(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(k);(this._flags.last_token.type===c.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(u(this._last_last_text,["function","yield"])||this._flags.mode===v.ObjectLiteral&&u(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===c.START_BLOCK?this.print_newline():(this._flags.last_token.type===c.END_EXPR||this._flags.last_token.type===c.START_EXPR||this._flags.last_token.type===c.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===c.COMMA)&&this.allow_wrap_or_preserved_newline(k,k.newlines),this.print_token(k),this.set_mode(q),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},I.prototype.handle_end_expr=function(k){for(;this._flags.mode===v.Statement;)this.restore_mode();this.handle_whitespace_and_comments(k),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(k,k.text==="]"&&R(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===c.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(k),this.restore_mode(),M(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===v.Conditional&&(this._previous_flags.mode=v.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},I.prototype.handle_start_block=function(k){this.handle_whitespace_and_comments(k);var q=this._tokens.peek(),G=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===c.END_EXPR?(this.set_mode(v.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(v.BlockStatement):G&&(u(G.text,[":",","])&&u(q.type,[c.STRING,c.WORD,c.RESERVED])||u(q.text,["get","set","..."])&&u(G.type,[c.WORD,c.RESERVED]))?u(this._last_last_text,["class","interface"])&&!u(G.text,[":",","])?this.set_mode(v.BlockStatement):this.set_mode(v.ObjectLiteral):this._flags.last_token.type===c.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(v.BlockStatement):u(this._flags.last_token.type,[c.EQUALS,c.START_EXPR,c.COMMA,c.OPERATOR])||m(this._flags.last_token,["return","throw","import","default"])?this.set_mode(v.ObjectLiteral):this.set_mode(v.BlockStatement),this._flags.last_token&&m(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var J=!q.comments_before&&q.text==="}",ne=J&&this._flags.last_word==="function"&&this._flags.last_token.type===c.END_EXPR;if(this._options.brace_preserve_inline){var ce=0,le=null;this._flags.inline_frame=!0;do if(ce+=1,le=this._tokens.peek(ce-1),le.newlines){this._flags.inline_frame=!1;break}while(le.type!==c.EOF&&!(le.type===c.END_BLOCK&&le.opened===k))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&k.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==c.OPERATOR&&(ne||this._flags.last_token.type===c.EQUALS||m(this._flags.last_token,_)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(R(this._previous_flags.mode)&&(this._flags.last_token.type===c.START_EXPR||this._flags.last_token.type===c.COMMA)&&((this._flags.last_token.type===c.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===c.COMMA||this._flags.last_token.type===c.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(k),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==c.OPERATOR&&this._flags.last_token.type!==c.START_EXPR&&(this._flags.last_token.type===c.START_BLOCK&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(k),this.indent(),!J&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()},I.prototype.handle_end_block=function(k){for(this.handle_whitespace_and_comments(k);this._flags.mode===v.Statement;)this.restore_mode();var q=this._flags.last_token.type===c.START_BLOCK;this._flags.inline_frame&&!q?this._output.space_before_token=!0:this._options.brace_style==="expand"?q||this.print_newline():q||(R(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(k)},I.prototype.handle_word=function(k){if(k.type===c.RESERVED){if(u(k.text,["set","get"])&&this._flags.mode!==v.ObjectLiteral)k.type=c.WORD;else if(k.text==="import"&&u(this._tokens.peek().text,["(","."]))k.type=c.WORD;else if(u(k.text,["as","from"])&&!this._flags.import_block)k.type=c.WORD;else if(this._flags.mode===v.ObjectLiteral){var q=this._tokens.peek();q.text===":"&&(k.type=c.WORD)}}if(this.start_of_statement(k)?m(this._flags.last_token,["var","let","const"])&&k.type===c.WORD&&(this._flags.declaration_statement=!0):k.newlines&&!L(this._flags.mode)&&(this._flags.last_token.type!==c.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==c.EQUALS&&(this._options.preserve_newlines||!m(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(k),this.print_newline()):this.handle_whitespace_and_comments(k),this._flags.do_block&&!this._flags.do_while)if(g(k,"while")){this._output.space_before_token=!0,this.print_token(k),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&g(k,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===v.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&m(k,["case","default"])){this.print_newline(),!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(k),this._flags.in_case=!0;return}if((this._flags.last_token.type===c.COMMA||this._flags.last_token.type===c.START_EXPR||this._flags.last_token.type===c.EQUALS||this._flags.last_token.type===c.OPERATOR)&&(this.start_of_object_property()||this.allow_wrap_or_preserved_newline(k)),g(k,"function")){(u(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(u(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===c.OPERATOR))&&!this._output.just_added_blankline()&&!k.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD?m(this._flags.last_token,["get","set","new","export"])||m(this._flags.last_token,H)?this._output.space_before_token=!0:g(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===c.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(L(this._flags.mode)||R(this._flags.mode))||this.print_newline(),this.print_token(k),this._flags.last_word=k.text;return}var G="NONE";if(this._flags.last_token.type===c.END_BLOCK?this._previous_flags.inline_frame?G="SPACE":m(k,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&k.newlines?G="NEWLINE":(G="SPACE",this._output.space_before_token=!0):G="NEWLINE":this._flags.last_token.type===c.SEMICOLON&&this._flags.mode===v.BlockStatement?G="NEWLINE":this._flags.last_token.type===c.SEMICOLON&&L(this._flags.mode)?G="SPACE":this._flags.last_token.type===c.STRING?G="NEWLINE":this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD||this._flags.last_token.text==="*"&&(u(this._last_last_text,["function","yield"])||this._flags.mode===v.ObjectLiteral&&u(this._last_last_text,["{",","]))?G="SPACE":this._flags.last_token.type===c.START_BLOCK?this._flags.inline_frame?G="SPACE":G="NEWLINE":this._flags.last_token.type===c.END_EXPR&&(this._output.space_before_token=!0,G="NEWLINE"),m(k,a)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?G="SPACE":G="NEWLINE"),m(k,["else","catch","finally"]))if((!(this._flags.last_token.type===c.END_BLOCK&&this._previous_flags.mode===v.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&k.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var J=this._output.current_line;J.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else G==="NEWLINE"?m(this._flags.last_token,_)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&m(k,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==c.END_EXPR?(this._flags.last_token.type!==c.START_EXPR||!m(k,["var","let","const"]))&&this._flags.last_token.text!==":"&&(g(k,"if")&&g(k.previous,"else")?this._output.space_before_token=!0:this.print_newline()):m(k,a)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&R(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():G==="SPACE"&&(this._output.space_before_token=!0);k.previous&&(k.previous.type===c.WORD||k.previous.type===c.RESERVED)&&(this._output.space_before_token=!0),this.print_token(k),this._flags.last_word=k.text,k.type===c.RESERVED&&(k.text==="do"?this._flags.do_block=!0:k.text==="if"?this._flags.if_block=!0:k.text==="import"?this._flags.import_block=!0:this._flags.import_block&&g(k,"from")&&(this._flags.import_block=!1))},I.prototype.handle_semicolon=function(k){this.start_of_statement(k)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(k);for(var q=this._tokens.peek();this._flags.mode===v.Statement&&!(this._flags.if_block&&g(q,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(k)},I.prototype.handle_string=function(k){k.text.startsWith("`")&&k.newlines===0&&k.whitespace_before===""&&(k.previous.text===")"||this._flags.last_token.type===c.WORD)||(this.start_of_statement(k)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(k),this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===c.COMMA||this._flags.last_token.type===c.START_EXPR||this._flags.last_token.type===c.EQUALS||this._flags.last_token.type===c.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(k):k.text.startsWith("`")&&this._flags.last_token.type===c.END_EXPR&&(k.previous.text==="]"||k.previous.text===")")&&k.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(k)},I.prototype.handle_equals=function(k){this.start_of_statement(k)||this.handle_whitespace_and_comments(k),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(k),this._output.space_before_token=!0},I.prototype.handle_comma=function(k){this.handle_whitespace_and_comments(k,!0),this.print_token(k),this._output.space_before_token=!0,this._flags.declaration_statement?(L(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(k)):this._flags.mode===v.ObjectLiteral||this._flags.mode===v.Statement&&this._flags.parent.mode===v.ObjectLiteral?(this._flags.mode===v.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(k)},I.prototype.handle_operator=function(k){var q=k.text==="*"&&(m(this._flags.last_token,["function","yield"])||u(this._flags.last_token.type,[c.START_BLOCK,c.COMMA,c.END_BLOCK,c.SEMICOLON])),G=u(k.text,["-","+"])&&(u(this._flags.last_token.type,[c.START_BLOCK,c.START_EXPR,c.EQUALS,c.OPERATOR])||u(this._flags.last_token.text,a)||this._flags.last_token.text===",");if(!this.start_of_statement(k)){var J=!q;this.handle_whitespace_and_comments(k,J)}if(k.text==="*"&&this._flags.last_token.type===c.DOT){this.print_token(k);return}if(k.text==="::"){this.print_token(k);return}if(this._flags.last_token.type===c.OPERATOR&&u(this._options.operator_position,b)&&this.allow_wrap_or_preserved_newline(k),k.text===":"&&this._flags.in_case){this.print_token(k),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==c.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0);return}var ne=!0,ce=!0,le=!1;if(k.text===":"?this._flags.ternary_depth===0?ne=!1:(this._flags.ternary_depth-=1,le=!0):k.text==="?"&&(this._flags.ternary_depth+=1),!G&&!q&&this._options.preserve_newlines&&u(k.text,l)){var me=k.text===":",fe=me&&le,ee=me&&!le;switch(this._options.operator_position){case A.before_newline:this._output.space_before_token=!ee,this.print_token(k),(!me||fe)&&this.allow_wrap_or_preserved_newline(k),this._output.space_before_token=!0;return;case A.after_newline:this._output.space_before_token=!0,!me||fe?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(k):this._output.space_before_token=!1,this.print_token(k),this._output.space_before_token=!0;return;case A.preserve_newline:ee||this.allow_wrap_or_preserved_newline(k),ne=!(this._output.just_added_newline()||ee),this._output.space_before_token=ne,this.print_token(k),this._output.space_before_token=!0;return}}if(q){this.allow_wrap_or_preserved_newline(k),ne=!1;var K=this._tokens.peek();ce=K&&u(K.type,[c.WORD,c.RESERVED])}else if(k.text==="...")this.allow_wrap_or_preserved_newline(k),ne=this._flags.last_token.type===c.START_BLOCK,ce=!1;else if(u(k.text,["--","++","!","~"])||G){if((this._flags.last_token.type===c.COMMA||this._flags.last_token.type===c.START_EXPR)&&this.allow_wrap_or_preserved_newline(k),ne=!1,ce=!1,k.newlines&&(k.text==="--"||k.text==="++"||k.text==="~")){var he=m(this._flags.last_token,_)&&k.newlines;he&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(he,!0)}this._flags.last_token.text===";"&&L(this._flags.mode)&&(ne=!0),this._flags.last_token.type===c.RESERVED?ne=!0:this._flags.last_token.type===c.END_EXPR?ne=!(this._flags.last_token.text==="]"&&(k.text==="--"||k.text==="++")):this._flags.last_token.type===c.OPERATOR&&(ne=u(k.text,["--","-","++","+"])&&u(this._flags.last_token.text,["--","-","++","+"]),u(k.text,["+","-"])&&u(this._flags.last_token.text,["--","++"])&&(ce=!0)),(this._flags.mode===v.BlockStatement&&!this._flags.inline_frame||this._flags.mode===v.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline()}this._output.space_before_token=this._output.space_before_token||ne,this.print_token(k),this._output.space_before_token=ce},I.prototype.handle_block_comment=function(k,q){if(this._output.raw){this._output.add_raw_token(k),k.directives&&k.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(k.directives){this.print_newline(!1,q),this.print_token(k),k.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!r.newline.test(k.text)&&!k.newlines){this._output.space_before_token=!0,this.print_token(k),this._output.space_before_token=!0;return}else this.print_block_commment(k,q)},I.prototype.print_block_commment=function(k,q){var G=V(k.text),J,ne=!1,ce=!1,le=k.whitespace_before,me=le.length;if(this.print_newline(!1,q),this.print_token_line_indentation(k),this._output.add_token(G[0]),this.print_newline(!1,q),G.length>1){for(G=G.slice(1),ne=N(G,"*"),ce=$(G,le),ne&&(this._flags.alignment=1),J=0;J<G.length;J++)ne?(this.print_token_line_indentation(k),this._output.add_token(f(G[J]))):ce&&G[J]?(this.print_token_line_indentation(k),this._output.add_token(G[J].substring(me))):(this._output.current_line.set_indent(-1),this._output.add_token(G[J])),this.print_newline(!1,q);this._flags.alignment=0}},I.prototype.handle_comment=function(k,q){k.newlines?this.print_newline(!1,q):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(k),this.print_newline(!1,q)},I.prototype.handle_dot=function(k){this.start_of_statement(k)||this.handle_whitespace_and_comments(k,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),m(this._flags.last_token,_)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(k,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(k)},I.prototype.handle_unknown=function(k,q){this.print_token(k),k.text[k.text.length-1]===`
`&&this.print_newline(!1,q)},I.prototype.handle_eof=function(k){for(;this._flags.mode===v.Statement;)this.restore_mode();this.handle_whitespace_and_comments(k)},beautifier$2.Beautifier=I,beautifier$2}var hasRequiredJavascript;function requireJavascript(){if(hasRequiredJavascript)return javascriptExports;hasRequiredJavascript=1;var n=requireBeautifier$2().Beautifier,e=requireOptions$2().Options;function r(s,o){var a=new n(s,o);return a.beautify()}return javascript.exports=r,javascriptExports.defaultOptions=function(){return new e},javascriptExports}var cssExports={},css$2={get exports(){return cssExports},set exports(n){cssExports=n}},beautifier$1={},options$1={},hasRequiredOptions$1;function requireOptions$1(){if(hasRequiredOptions$1)return options$1;hasRequiredOptions$1=1;var n=requireOptions$3().Options;function e(r){n.call(this,r,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var s=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||s;var o=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var a=0;a<o.length;a++)o[a]!=="expand"?this.brace_style="collapse":this.brace_style=o[a]}return e.prototype=new n,options$1.Options=e,options$1}var hasRequiredBeautifier$1;function requireBeautifier$1(){if(hasRequiredBeautifier$1)return beautifier$1;hasRequiredBeautifier$1=1;var n=requireOptions$1().Options,e=requireOutput().Output,r=requireInputscanner().InputScanner,s=requireDirectives().Directives,o=new s(/\/\*/,/\*\//),a=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,c=/\s/,u=/(?:\s|\n)+/g,f=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,d=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function g(m,_){this._source_text=m||"",this._options=new n(_),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}return g.prototype.eatString=function(m){var _="";for(this._ch=this._input.next();this._ch;){if(_+=this._ch,this._ch==="\\")_+=this._input.next();else if(m.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return _},g.prototype.eatWhitespace=function(m){for(var _=c.test(this._input.peek()),E=0;c.test(this._input.peek());)this._ch=this._input.next(),m&&this._ch===`
`&&(E===0||E<this._options.max_preserve_newlines)&&(E++,this._output.add_new_line(!0));return _},g.prototype.foundNestedPseudoClass=function(){for(var m=0,_=1,E=this._input.peek(_);E;){if(E==="{")return!0;if(E==="(")m+=1;else if(E===")"){if(m===0)return!1;m-=1}else if(E===";"||E==="}")return!1;_++,E=this._input.peek(_)}return!1},g.prototype.print_string=function(m){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(m)},g.prototype.preserveSingleSpace=function(m){m&&(this._output.space_before_token=!0)},g.prototype.indent=function(){this._indentLevel++},g.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},g.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var m=this._source_text,_=this._options.eol;_==="auto"&&(_=`
`,m&&a.test(m||"")&&(_=m.match(a)[0])),m=m.replace(l,`
`);var E=m.match(/^[\t ]*/)[0];this._output=new e(this._options,E),this._input=new r(m),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var A=0,b=!1,v=!1,M=!1,V=!1,R=!1,L=!1,N=this._ch,$=!1,I,H,k;I=this._input.read(u),H=I!=="",k=N,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),N=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var q=this._input.read(f),G=o.get_directives(q);G&&G.ignore==="start"&&(q+=o.readIgnored(this._input)),this.print_string(q),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(d)),this.eatWhitespace(!0);else if(this._ch==="@"||this._ch==="$")if(this.preserveSingleSpace(H),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var J=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);J.match(/[ :]$/)&&(J=this.eatString(": ").replace(/\s$/,""),this.print_string(J),this._output.space_before_token=!0),J=J.replace(/\s$/,""),J==="extend"?V=!0:J==="import"&&(R=!0),J in this.NESTED_AT_RULE?(this._nestedLevel+=1,J in this.CONDITIONAL_GROUP_RULE&&(M=!0)):!b&&A===0&&J.indexOf(":")!==-1&&(v=!0,this.indent())}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(H),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")v&&(v=!1,this.outdent()),M?(M=!1,b=this._indentLevel>=this._nestedLevel):b=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&b&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(k==="("?this._output.space_before_token=!1:k!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),k==="{"&&this._output.trim(!0),R=!1,V=!1,v&&(this.outdent(),v=!1),this.print_string(this._ch),b=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var ne=0;ne<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;ne++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[ne])){$=!0;break}(b||M)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!V&&A===0?(this.print_string(":"),v||(v=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":"))}else if(this._ch==='"'||this._ch==="'"){var ce=k==='"'||k==="'";this.preserveSingleSpace(ce||H),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")$=!1,A===0?(v&&(this.outdent(),v=!1),V=!1,R=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),A++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),A&&(A--,this.outdent()));else{var le=!1;this._input.lookBack("with")&&(le=!0),this.preserveSingleSpace(H||le),this.print_string(this._ch),v&&k==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),L=!0):(this.eatWhitespace(),A++,this.indent())}else if(this._ch===")")A&&(A--,this.outdent()),L&&this._input.peek()===";"&&this._options.selector_separator_newline&&(L=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&(!v||L)&&A===0&&!R&&!V?this._output.add_new_line():this._output.space_before_token=!0;else if((this._ch===">"||this._ch==="+"||this._ch==="~")&&!v&&A===0)this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&c.test(this._ch)&&(this._ch=""));else if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(H),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),c.test(this._ch)&&(this._ch="");else if(this._ch==="!"&&!this._input.lookBack("\\"))this._output.space_before_token=!0,this.print_string(this._ch);else{var me=k==='"'||k==="'";this.preserveSingleSpace(me||H),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&$&&this._output.add_new_line()}var fe=this._output.get_code(_);return fe},beautifier$1.Beautifier=g,beautifier$1}var hasRequiredCss;function requireCss(){if(hasRequiredCss)return cssExports;hasRequiredCss=1;var n=requireBeautifier$1().Beautifier,e=requireOptions$1().Options;function r(s,o){var a=new n(s,o);return a.beautify()}return css$2.exports=r,cssExports.defaultOptions=function(){return new e},cssExports}var htmlExports={},html={get exports(){return htmlExports},set exports(n){htmlExports=n}},beautifier={},options={},hasRequiredOptions;function requireOptions(){if(hasRequiredOptions)return options;hasRequiredOptions=1;var n=requireOptions$3().Options;function e(r){n.call(this,r,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}return e.prototype=new n,options.Options=e,options}var tokenizer={},hasRequiredTokenizer;function requireTokenizer(){if(hasRequiredTokenizer)return tokenizer;hasRequiredTokenizer=1;var n=requireTokenizer$2().Tokenizer,e=requireTokenizer$2().TOKEN,r=requireDirectives().Directives,s=requireTemplatablepattern().TemplatablePattern,o=requirePattern().Pattern,a={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:e.START,RAW:e.RAW,EOF:e.EOF},l=new r(/<\!--/,/-->/),c=function(u,f){n.call(this,u,f),this._current_tag_name="";var d=new s(this._input).read_options(this._options),g=new o(this._input);if(this.__patterns={word:d.until(/[\n\r\t <]/),single_quote:d.until_after(/'/),double_quote:d.until_after(/"/),attribute:d.until(/[\n\r\t =>]|\/>/),element_name:d.until(/[\n\r\t >\/]/),handlebars_comment:g.starting_with(/{{!--/).until_after(/--}}/),handlebars:g.starting_with(/{{/).until_after(/}}/),handlebars_open:g.until(/[\n\r\t }]/),handlebars_raw_close:g.until(/}}/),comment:g.starting_with(/<!--/).until_after(/-->/),cdata:g.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:g.starting_with(/<!\[/).until_after(/]>/),processing:g.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var m=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=g.matching(m).until_after(m)}};return c.prototype=new n,c.prototype._is_comment=function(u){return!1},c.prototype._is_opening=function(u){return u.type===a.TAG_OPEN},c.prototype._is_closing=function(u,f){return u.type===a.TAG_CLOSE&&f&&((u.text===">"||u.text==="/>")&&f.text[0]==="<"||u.text==="}}"&&f.text[0]==="{"&&f.text[1]==="{")},c.prototype._reset=function(){this._current_tag_name=""},c.prototype._get_next_token=function(u,f){var d=null;this._readWhitespace();var g=this._input.peek();return g===null?this._create_token(a.EOF,""):(d=d||this._read_open_handlebars(g,f),d=d||this._read_attribute(g,u,f),d=d||this._read_close(g,f),d=d||this._read_raw_content(g,u,f),d=d||this._read_content_word(g),d=d||this._read_comment_or_cdata(g),d=d||this._read_processing(g),d=d||this._read_open(g,f),d=d||this._create_token(a.UNKNOWN,this._input.next()),d)},c.prototype._read_comment_or_cdata=function(u){var f=null,d=null,g=null;if(u==="<"){var m=this._input.peek(1);m==="!"&&(d=this.__patterns.comment.read(),d?(g=l.get_directives(d),g&&g.ignore==="start"&&(d+=l.readIgnored(this._input))):d=this.__patterns.cdata.read()),d&&(f=this._create_token(a.COMMENT,d),f.directives=g)}return f},c.prototype._read_processing=function(u){var f=null,d=null,g=null;if(u==="<"){var m=this._input.peek(1);(m==="!"||m==="?")&&(d=this.__patterns.conditional_comment.read(),d=d||this.__patterns.processing.read()),d&&(f=this._create_token(a.COMMENT,d),f.directives=g)}return f},c.prototype._read_open=function(u,f){var d=null,g=null;return f||u==="<"&&(d=this._input.next(),this._input.peek()==="/"&&(d+=this._input.next()),d+=this.__patterns.element_name.read(),g=this._create_token(a.TAG_OPEN,d)),g},c.prototype._read_open_handlebars=function(u,f){var d=null,g=null;return f||this._options.indent_handlebars&&u==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(d=this.__patterns.handlebars_comment.read(),d=d||this.__patterns.handlebars.read(),g=this._create_token(a.COMMENT,d)):(d=this.__patterns.handlebars_open.read(),g=this._create_token(a.TAG_OPEN,d))),g},c.prototype._read_close=function(u,f){var d=null,g=null;return f&&(f.text[0]==="<"&&(u===">"||u==="/"&&this._input.peek(1)===">")?(d=this._input.next(),u==="/"&&(d+=this._input.next()),g=this._create_token(a.TAG_CLOSE,d)):f.text[0]==="{"&&u==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),g=this._create_token(a.TAG_CLOSE,"}}"))),g},c.prototype._read_attribute=function(u,f,d){var g=null,m="";if(d&&d.text[0]==="<")if(u==="=")g=this._create_token(a.EQUALS,this._input.next());else if(u==='"'||u==="'"){var _=this._input.next();u==='"'?_+=this.__patterns.double_quote.read():_+=this.__patterns.single_quote.read(),g=this._create_token(a.VALUE,_)}else m=this.__patterns.attribute.read(),m&&(f.type===a.EQUALS?g=this._create_token(a.VALUE,m):g=this._create_token(a.ATTRIBUTE,m));return g},c.prototype._is_content_unformatted=function(u){return this._options.void_elements.indexOf(u)===-1&&(this._options.content_unformatted.indexOf(u)!==-1||this._options.unformatted.indexOf(u)!==-1)},c.prototype._read_raw_content=function(u,f,d){var g="";if(d&&d.text[0]==="{")g=this.__patterns.handlebars_raw_close.read();else if(f.type===a.TAG_CLOSE&&f.opened.text[0]==="<"&&f.text[0]!=="/"){var m=f.opened.text.substr(1).toLowerCase();if(m==="script"||m==="style"){var _=this._read_comment_or_cdata(u);if(_)return _.type=a.TEXT,_;g=this._input.readUntil(new RegExp("</"+m+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(m)&&(g=this._input.readUntil(new RegExp("</"+m+"[\\n\\r\\t ]*?>","ig")))}return g?this._create_token(a.TEXT,g):null},c.prototype._read_content_word=function(u){var f="";if(this._options.unformatted_content_delimiter&&u===this._options.unformatted_content_delimiter[0]&&(f=this.__patterns.unformatted_content_delimiter.read()),f||(f=this.__patterns.word.read()),f)return this._create_token(a.TEXT,f)},tokenizer.Tokenizer=c,tokenizer.TOKEN=a,tokenizer}var hasRequiredBeautifier;function requireBeautifier(){if(hasRequiredBeautifier)return beautifier;hasRequiredBeautifier=1;var n=requireOptions().Options,e=requireOutput().Output,r=requireTokenizer().Tokenizer,s=requireTokenizer().TOKEN,o=/\r\n|[\r\n]/,a=/\r\n|[\r\n]/g,l=function(b,v){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=b.max_preserve_newlines,this.preserve_newlines=b.preserve_newlines,this._output=new e(b,v)};l.prototype.current_line_has_match=function(b){return this._output.current_line.has_match(b)},l.prototype.set_space_before_token=function(b,v){this._output.space_before_token=b,this._output.non_breaking_space=v},l.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},l.prototype.add_raw_token=function(b){this._output.add_raw_token(b)},l.prototype.print_preserved_newlines=function(b){var v=0;b.type!==s.TEXT&&b.previous.type!==s.TEXT&&(v=b.newlines?1:0),this.preserve_newlines&&(v=b.newlines<this.max_preserve_newlines+1?b.newlines:this.max_preserve_newlines+1);for(var M=0;M<v;M++)this.print_newline(M>0);return v!==0},l.prototype.traverse_whitespace=function(b){return b.whitespace_before||b.newlines?(this.print_preserved_newlines(b)||(this._output.space_before_token=!0),!0):!1},l.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},l.prototype.print_newline=function(b){this._output.add_new_line(b)},l.prototype.print_token=function(b){b.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(b.text))},l.prototype.indent=function(){this.indent_level++},l.prototype.get_full_indent=function(b){return b=this.indent_level+(b||0),b<1?"":this._output.get_indent_string(b)};var c=function(b){for(var v=null,M=b.next;M.type!==s.EOF&&b.closed!==M;){if(M.type===s.ATTRIBUTE&&M.text==="type"){M.next&&M.next.type===s.EQUALS&&M.next.next&&M.next.next.type===s.VALUE&&(v=M.next.next.text);break}M=M.next}return v},u=function(b,v){var M=null,V=null;return v.closed?(b==="script"?M="text/javascript":b==="style"&&(M="text/css"),M=c(v)||M,M.search("text/css")>-1?V="css":M.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?V="javascript":M.search(/(text|application|dojo)\/(x-)?(html)/)>-1?V="html":M.search(/test\/null/)>-1&&(V="null"),V):null};function f(b,v){return v.indexOf(b)!==-1}function d(b,v,M){this.parent=b||null,this.tag=v?v.tag_name:"",this.indent_level=M||0,this.parser_token=v||null}function g(b){this._printer=b,this._current_frame=null}g.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},g.prototype.record_tag=function(b){var v=new d(this._current_frame,b,this._printer.indent_level);this._current_frame=v},g.prototype._try_pop_frame=function(b){var v=null;return b&&(v=b.parser_token,this._printer.indent_level=b.indent_level,this._current_frame=b.parent),v},g.prototype._get_frame=function(b,v){for(var M=this._current_frame;M&&b.indexOf(M.tag)===-1;){if(v&&v.indexOf(M.tag)!==-1){M=null;break}M=M.parent}return M},g.prototype.try_pop=function(b,v){var M=this._get_frame([b],v);return this._try_pop_frame(M)},g.prototype.indent_to_tag=function(b){var v=this._get_frame(b);v&&(this._printer.indent_level=v.indent_level)};function m(b,v,M,V){this._source_text=b||"",v=v||{},this._js_beautify=M,this._css_beautify=V,this._tag_stack=null;var R=new n(v,"html");this._options=R,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}m.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var b=this._source_text,v=this._options.eol;this._options.eol==="auto"&&(v=`
`,b&&o.test(b)&&(v=b.match(o)[0])),b=b.replace(a,`
`);var M=b.match(/^[\t ]*/)[0],V={text:"",type:""},R=new _,L=new l(this._options,M),N=new r(b,this._options).tokenize();this._tag_stack=new g(L);for(var $=null,I=N.next();I.type!==s.EOF;)I.type===s.TAG_OPEN||I.type===s.COMMENT?($=this._handle_tag_open(L,I,R,V),R=$):I.type===s.ATTRIBUTE||I.type===s.EQUALS||I.type===s.VALUE||I.type===s.TEXT&&!R.tag_complete?$=this._handle_inside_tag(L,I,R,N):I.type===s.TAG_CLOSE?$=this._handle_tag_close(L,I,R):I.type===s.TEXT?$=this._handle_text(L,I,R):L.add_raw_token(I),V=$,I=N.next();var H=L._output.get_code(v);return H},m.prototype._handle_tag_close=function(b,v,M){var V={text:v.text,type:v.type};return b.alignment_size=0,M.tag_complete=!0,b.set_space_before_token(v.newlines||v.whitespace_before!=="",!0),M.is_unformatted?b.add_raw_token(v):(M.tag_start_char==="<"&&(b.set_space_before_token(v.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&M.has_wrapped_attrs&&b.print_newline(!1)),b.print_token(v)),M.indent_content&&!(M.is_unformatted||M.is_content_unformatted)&&(b.indent(),M.indent_content=!1),!M.is_inline_element&&!(M.is_unformatted||M.is_content_unformatted)&&b.set_wrap_point(),V},m.prototype._handle_inside_tag=function(b,v,M,V){var R=M.has_wrapped_attrs,L={text:v.text,type:v.type};if(b.set_space_before_token(v.newlines||v.whitespace_before!=="",!0),M.is_unformatted)b.add_raw_token(v);else if(M.tag_start_char==="{"&&v.type===s.TEXT)b.print_preserved_newlines(v)?(v.newlines=0,b.add_raw_token(v)):b.print_token(v);else{if(v.type===s.ATTRIBUTE?(b.set_space_before_token(!0),M.attr_count+=1):(v.type===s.EQUALS||v.type===s.VALUE&&v.previous.type===s.EQUALS)&&b.set_space_before_token(!1),v.type===s.ATTRIBUTE&&M.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(b.traverse_whitespace(v),R=R||v.newlines!==0),this._is_wrap_attributes_force)){var N=M.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&M.attr_count===1){var $=!0,I=0,H;do{if(H=V.peek(I),H.type===s.ATTRIBUTE){$=!1;break}I+=1}while(I<4&&H.type!==s.EOF&&H.type!==s.TAG_CLOSE);N=!$}N&&(b.print_newline(!1),R=!0)}b.print_token(v),R=R||b.previous_token_wrapped(),M.has_wrapped_attrs=R}return L},m.prototype._handle_text=function(b,v,M){var V={text:v.text,type:"TK_CONTENT"};return M.custom_beautifier_name?this._print_custom_beatifier_text(b,v,M):M.is_unformatted||M.is_content_unformatted?b.add_raw_token(v):(b.traverse_whitespace(v),b.print_token(v)),V},m.prototype._print_custom_beatifier_text=function(b,v,M){var V=this;if(v.text!==""){var R=v.text,L,N=1,$="",I="";M.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?L=this._js_beautify:M.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?L=this._css_beautify:M.custom_beautifier_name==="html"&&(L=function(ne,ce){var le=new m(ne,ce,V._js_beautify,V._css_beautify);return le.beautify()}),this._options.indent_scripts==="keep"?N=0:this._options.indent_scripts==="separate"&&(N=-b.indent_level);var H=b.get_full_indent(N);if(R=R.replace(/\n[ \t]*$/,""),M.custom_beautifier_name!=="html"&&R[0]==="<"&&R.match(/^(<!--|<!\[CDATA\[)/)){var k=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(R);if(!k){b.add_raw_token(v);return}$=H+k[1]+`
`,R=k[4],k[5]&&(I=H+k[5]),R=R.replace(/\n[ \t]*$/,""),(k[2]||k[3].indexOf(`
`)!==-1)&&(k=k[3].match(/[ \t]+$/),k&&(v.whitespace_before=k[0]))}if(R)if(L){var q=function(){this.eol=`
`};q.prototype=this._options.raw_options;var G=new q;R=L(H+R,G)}else{var J=v.whitespace_before;J&&(R=R.replace(new RegExp(`
(`+J+")?","g"),`
`)),R=H+R.replace(/\n/g,`
`+H)}$&&(R?R=$+R+`
`+I:R=$+I),b.print_newline(!1),R&&(v.text=R,v.whitespace_before="",v.newlines=0,b.add_raw_token(v),b.print_newline(!0))}},m.prototype._handle_tag_open=function(b,v,M,V){var R=this._get_tag_open_token(v);return(M.is_unformatted||M.is_content_unformatted)&&!M.is_empty_element&&v.type===s.TAG_OPEN&&v.text.indexOf("</")===0?(b.add_raw_token(v),R.start_tag_token=this._tag_stack.try_pop(R.tag_name)):(b.traverse_whitespace(v),this._set_tag_position(b,v,R,M,V),R.is_inline_element||b.set_wrap_point(),b.print_token(v)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(R.alignment_size=v.text.length+1),!R.tag_complete&&!R.is_unformatted&&(b.alignment_size=R.alignment_size),R};var _=function(b,v){if(this.parent=b||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!v)this.tag_complete=!0;else{var M;this.tag_start_char=v.text[0],this.text=v.text,this.tag_start_char==="<"?(M=v.text.match(/^<([^\s>]*)/),this.tag_check=M?M[1]:""):(M=v.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=M?M[1]:"",(v.text.startsWith("{{#>")||v.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&v.next!==null?this.tag_check=v.next.text.split(" ")[0]:this.tag_check=v.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),v.type===s.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||v.closed&&v.closed.text==="/>";var V=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(V=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(V)))}};m.prototype._get_tag_open_token=function(b){var v=new _(this._tag_stack.get_parser_token(),b);return v.alignment_size=this._options.wrap_attributes_indent_size,v.is_end_tag=v.is_end_tag||f(v.tag_check,this._options.void_elements),v.is_empty_element=v.tag_complete||v.is_start_tag&&v.is_end_tag,v.is_unformatted=!v.tag_complete&&f(v.tag_check,this._options.unformatted),v.is_content_unformatted=!v.is_empty_element&&f(v.tag_check,this._options.content_unformatted),v.is_inline_element=f(v.tag_name,this._options.inline)||v.tag_start_char==="{",v},m.prototype._set_tag_position=function(b,v,M,V,R){if(M.is_empty_element||(M.is_end_tag?M.start_tag_token=this._tag_stack.try_pop(M.tag_name):(this._do_optional_end_element(M)&&(M.is_inline_element||b.print_newline(!1)),this._tag_stack.record_tag(M),(M.tag_name==="script"||M.tag_name==="style")&&!(M.is_unformatted||M.is_content_unformatted)&&(M.custom_beautifier_name=u(M.tag_check,v)))),f(M.tag_check,this._options.extra_liners)&&(b.print_newline(!1),b._output.just_added_blankline()||b.print_newline(!0)),M.is_empty_element){if(M.tag_start_char==="{"&&M.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),M.indent_content=!0;var L=b.current_line_has_match(/{{#if/);L||b.print_newline(!1)}M.tag_name==="!--"&&R.type===s.TAG_CLOSE&&V.is_end_tag&&M.text.indexOf(`
`)===-1||(M.is_inline_element||M.is_unformatted||b.print_newline(!1),this._calcluate_parent_multiline(b,M))}else if(M.is_end_tag){var N=!1;N=M.start_tag_token&&M.start_tag_token.multiline_content,N=N||!M.is_inline_element&&!(V.is_inline_element||V.is_unformatted)&&!(R.type===s.TAG_CLOSE&&M.start_tag_token===V)&&R.type!=="TK_CONTENT",(M.is_content_unformatted||M.is_unformatted)&&(N=!1),N&&b.print_newline(!1)}else M.indent_content=!M.custom_beautifier_name,M.tag_start_char==="<"&&(M.tag_name==="html"?M.indent_content=this._options.indent_inner_html:M.tag_name==="head"?M.indent_content=this._options.indent_head_inner_html:M.tag_name==="body"&&(M.indent_content=this._options.indent_body_inner_html)),!(M.is_inline_element||M.is_unformatted)&&(R.type!=="TK_CONTENT"||M.is_content_unformatted)&&b.print_newline(!1),this._calcluate_parent_multiline(b,M)},m.prototype._calcluate_parent_multiline=function(b,v){v.parent&&b._output.just_added_newline()&&!((v.is_inline_element||v.is_unformatted)&&v.parent.is_inline_element)&&(v.parent.multiline_content=!0)};var E=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],A=["a","audio","del","ins","map","noscript","video"];return m.prototype._do_optional_end_element=function(b){var v=null;if(!(b.is_empty_element||!b.is_start_tag||!b.parent)){if(b.tag_name==="body")v=v||this._tag_stack.try_pop("head");else if(b.tag_name==="li")v=v||this._tag_stack.try_pop("li",["ol","ul"]);else if(b.tag_name==="dd"||b.tag_name==="dt")v=v||this._tag_stack.try_pop("dt",["dl"]),v=v||this._tag_stack.try_pop("dd",["dl"]);else if(b.parent.tag_name==="p"&&E.indexOf(b.tag_name)!==-1){var M=b.parent.parent;(!M||A.indexOf(M.tag_name)===-1)&&(v=v||this._tag_stack.try_pop("p"))}else b.tag_name==="rp"||b.tag_name==="rt"?(v=v||this._tag_stack.try_pop("rt",["ruby","rtc"]),v=v||this._tag_stack.try_pop("rp",["ruby","rtc"])):b.tag_name==="optgroup"?v=v||this._tag_stack.try_pop("optgroup",["select"]):b.tag_name==="option"?v=v||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):b.tag_name==="colgroup"?v=v||this._tag_stack.try_pop("caption",["table"]):b.tag_name==="thead"?(v=v||this._tag_stack.try_pop("caption",["table"]),v=v||this._tag_stack.try_pop("colgroup",["table"])):b.tag_name==="tbody"||b.tag_name==="tfoot"?(v=v||this._tag_stack.try_pop("caption",["table"]),v=v||this._tag_stack.try_pop("colgroup",["table"]),v=v||this._tag_stack.try_pop("thead",["table"]),v=v||this._tag_stack.try_pop("tbody",["table"])):b.tag_name==="tr"?(v=v||this._tag_stack.try_pop("caption",["table"]),v=v||this._tag_stack.try_pop("colgroup",["table"]),v=v||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(b.tag_name==="th"||b.tag_name==="td")&&(v=v||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),v=v||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return b.parent=this._tag_stack.get_parser_token(),v}},beautifier.Beautifier=m,beautifier}var hasRequiredHtml;function requireHtml(){if(hasRequiredHtml)return htmlExports;hasRequiredHtml=1;var n=requireBeautifier().Beautifier,e=requireOptions().Options;function r(s,o,a,l){var c=new n(s,o,a,l);return c.beautify()}return html.exports=r,htmlExports.defaultOptions=function(){return new e},htmlExports}var hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var n=requireJavascript(),e=requireCss(),r=requireHtml();function s(o,a,l,c){return l=l||n,c=c||e,r(o,a,l,c)}return s.defaultOptions=r.defaultOptions,src.js=n,src.css=e,src.html=s,src}(function(n){function e(r,s,o){var a=function(l,c){return r.js_beautify(l,c)};return a.js=r.js_beautify,a.css=s.css_beautify,a.html=o.html_beautify,a.js_beautify=r.js_beautify,a.css_beautify=s.css_beautify,a.html_beautify=o.html_beautify,a}(function(r){var s=requireSrc();s.js_beautify=s.js,s.css_beautify=s.css,s.html_beautify=s.html,r.exports=e(s,s,s)})(n)})(js);/*!
 * is-whitespace <https://github.com/jonschlinkert/is-whitespace>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var cache,isWhitespace$1=function(e){return typeof e=="string"&&regex().test(e)};function regex(){return cache||(cache=new RegExp(`^[\\s	
\v\f\r   ᠎             　\u2028\u2029\uFEFF"]+$`))}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var isExtendable=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},isObject$1=isExtendable,extendShallow$1=function(e){isObject$1(e)||(e={});for(var r=arguments.length,s=1;s<r;s++){var o=arguments[s];isObject$1(o)&&assign$1(e,o)}return e};function assign$1(n,e){for(var r in e)hasOwn$1(e,r)&&(n[r]=e[r])}function hasOwn$1(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var isBuffer_1=function(n){return n!=null&&(isBuffer$1(n)||isSlowBuffer(n)||!!n._isBuffer)};function isBuffer$1(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function isSlowBuffer(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&isBuffer$1(n.slice(0,0))}var isBuffer=isBuffer_1,toString=Object.prototype.toString,kindOf=function(e){if(typeof e>"u")return"undefined";if(e===null)return"null";if(e===!0||e===!1||e instanceof Boolean)return"boolean";if(typeof e=="string"||e instanceof String)return"string";if(typeof e=="number"||e instanceof Number)return"number";if(typeof e=="function"||e instanceof Function)return"function";if(typeof Array.isArray<"u"&&Array.isArray(e))return"array";if(e instanceof RegExp)return"regexp";if(e instanceof Date)return"date";var r=toString.call(e);return r==="[object RegExp]"?"regexp":r==="[object Date]"?"date":r==="[object Arguments]"?"arguments":r==="[object Error]"?"error":isBuffer(e)?"buffer":r==="[object Set]"?"set":r==="[object WeakSet]"?"weakset":r==="[object Map]"?"map":r==="[object WeakMap]"?"weakmap":r==="[object Symbol]"?"symbol":r==="[object Int8Array]"?"int8array":r==="[object Uint8Array]"?"uint8array":r==="[object Uint8ClampedArray]"?"uint8clampedarray":r==="[object Int16Array]"?"int16array":r==="[object Uint16Array]"?"uint16array":r==="[object Int32Array]"?"int32array":r==="[object Uint32Array]"?"uint32array":r==="[object Float32Array]"?"float32array":r==="[object Float64Array]"?"float64array":"object"};/*!
 * condense-newlines <https://github.com/jonschlinkert/condense-newlines>
 *
 * Copyright (c) 2014 Jon Schlinkert, contributors.
 * Licensed under the MIT License
 */var isWhitespace=isWhitespace$1,extend$2=extendShallow$1,typeOf=kindOf,condenseNewlines=function(n,e){var r=extend$2({},e),s=r.sep||`

`,o=r.min,a;return typeof o=="number"&&o!==2&&(a=new RegExp("(\\r\\n|\\n|\\u2424) {"+o+",}")),typeof a>"u"&&(a=r.regex||/(\r\n|\n|\u2424){2,}/g),r.keepWhitespace!==!0&&(n=n.split(`
`).map(function(l){return isWhitespace(l)?l.trim():l}).join(`
`)),n=trailingNewline(n,r),n.replace(a,s)};function trailingNewline(n,e){var r=e.trailingNewline;if(r===!1)return n;switch(typeOf(r)){case"string":n=n.replace(/\s+$/,e.trailingNewline);break;case"function":n=e.trailingNewline(n);break;case"undefined":case"boolean":default:{n=n.replace(/\s+$/,`
`);break}}return n}var isObject=isExtendable,extendShallow=function(e){isObject(e)||(e={});for(var r=arguments.length,s=1;s<r;s++){var o=arguments[s];isObject(o)&&assign(e,o)}return e};function assign(n,e){for(var r in e)hasOwn(e,r)&&(n[r]=e[r])}function hasOwn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * pretty <https://github.com/jonschlinkert/pretty>
 *
 * Copyright (c) 2013-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var beautify=jsExports,condense=condenseNewlines,extend$1=extendShallow,defaults$2={unformatted:["code","pre","em","strong","span"],indent_inner_html:!0,indent_char:" ",indent_size:2,sep:`
`},pretty=function(e,r){var s=extend$1({},defaults$2,r);return e=beautify.html(e,s),s.ocd===!0?(s.newlines&&(s.sep=s.newlines),ocd(e,s)):e};function ocd(n,e){return condense(n,e).replace(/^\s+/g,"").replace(/\s+$/g,`
`).replace(/(\s*<!--)/g,`
$1`).replace(/>(\s*)(?=<!--\s*\/)/g,"> ")}function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var javascriptStringifyExports={},javascriptStringify={get exports(){return javascriptStringifyExports},set exports(n){javascriptStringifyExports=n}};(function(n,e){(function(r,s){typeof commonjsRequire=="function"?n.exports=s():r.javascriptStringify=s()})(commonjsGlobal,function(){var r=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'",'"':'\\"',"\\":"\\\\"};function o(A){var b=s[A];return b||"\\u"+("0000"+A.charCodeAt(0).toString(16)).slice(-4)}var a={};"break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" ").map(function(A){a[A]=!0});var l=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function c(A){return!a[A]&&l.test(A)}function u(A){return"Function("+E("return this;")+")()"}function f(A){for(var b="",v=0;v<A.length;v++)c(A[v])?b+="."+A[v]:b+="["+E(A[v])+"]";return b}function d(A,b,v){var M=A.map(function(V,R){var L=v(V,R);return L===void 0?String(L):b+L.split(`
`).join(`
`+b)}).join(b?`,
`:",");return b&&M?`[
`+M+`
]`:"["+M+"]"}function g(A,b,v){var M=Object.keys(A).reduce(function(V,R){var L=v(A[R],R);return L===void 0||(R=c(R)?R:E(R),L=String(L).split(`
`).join(`
`+b),V.push(b+R+":"+(b?" ":"")+L)),V},[]).join(b?`,
`:",");return b&&M?`{
`+M+`
}`:"{"+M+"}"}var m={"[object Array]":d,"[object Object]":g,"[object Error]":function(A){return"new Error("+E(A.message)+")"},"[object Date]":function(A){return"new Date("+A.getTime()+")"},"[object String]":function(A){return"new String("+E(A.toString())+")"},"[object Number]":function(A){return"new Number("+A+")"},"[object Boolean]":function(A){return"new Boolean("+A+")"},"[object Uint8Array]":function(A,b){return"new Uint8Array("+d(A)+")"},"[object Set]":function(A,b,v){if(typeof Array.from=="function")return"new Set("+E(Array.from(A),b,v)+")"},"[object Map]":function(A,b,v){if(typeof Array.from=="function")return"new Map("+E(Array.from(A),b,v)+")"},"[object RegExp]":String,"[object Function]":String,"[object global]":u,"[object Window]":u},_={string:function(A){return"'"+A.replace(r,o)+"'"},number:String,object:String,boolean:String,symbol:String,undefined:String};function E(A,b,v){if(Object(A)!==A)return _[typeof A](A,b,v);if(typeof Buffer=="function"&&Buffer.isBuffer(A))return"new Buffer("+v(A.toString())+")";var M=m[Object.prototype.toString.call(A)];return M?M(A,b,v):void 0}return function(A,b,v,M){M=M||{},typeof v!="string"&&(v=new Array(Math.max(0,v|0)+1).join(" "));var V=Number(M.maxDepth)||100,R=!!M.references,L=!!M.skipUndefinedProperties,N=Number(M.maxValues)||1e5,$=[],I=[],H=[],k=[],q=[];function G(ge,be){if(!(L&&ge===void 0)){$.push(be);var Se=J(ge,E);return $.pop(),Se}}var J=R?function(ge,be){if(ge&&(typeof ge=="object"||typeof ge=="function")){var Se=H.indexOf(ge);if(Se>-1){q.push($.slice(),k[Se]);return}H.push(ge),k.push($.slice())}if(!($.length>V||N--<=0))return be(ge,v,G)}:function(Ee,be){var Se=I.indexOf(Ee);if(!(Se>-1||$.length>V||N--<=0)){I.push(Ee);var Ee=be(Ee,v,G);return I.pop(),Ee}};if(typeof b=="function"){var ne=J;J=function(ge,be){return ne(ge,function(Se,Ee,Ce){return b(Se,Ee,function(Ae){return be(Ae,Ee,Ce)})})}}var ce=J(A,E);if(q.length){for(var le=v?`
`:"",me=v?" = ":"=",fe=";"+le,ne=v?"(function () {":"(function(){",ee="}())",K=["var x"+me+ce],he=0;he<q.length;he+=2)K.push("x"+f(q[he])+me+"x"+f(q[he+1]));return K.push("return x"),ne+le+K.join(fe)+fe+ee}return ce}})})(javascriptStringify);const stringify$1=javascriptStringifyExports;class Text{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,r,s){let o=[];return this.decompose(0,e,o,2),s.length&&s.decompose(0,s.length,o,3),this.decompose(r,this.length,o,1),TextNode.from(o,this.length-(r-e)+s.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,r=this.length){let s=[];return this.decompose(e,r,s,0),TextNode.from(s,r-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let r=this.scanIdentical(e,1),s=this.length-this.scanIdentical(e,-1),o=new RawTextCursor(this),a=new RawTextCursor(e);for(let l=r,c=r;;){if(o.next(l),a.next(l),l=0,o.lineBreak!=a.lineBreak||o.done!=a.done||o.value!=a.value)return!1;if(c+=o.value.length,o.done||c>=s)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,r=this.length){return new PartialTextCursor(this,e,r)}iterLines(e,r){let s;if(e==null)s=this.iter();else{r==null&&(r=this.lines+1);let o=this.line(e).from;s=this.iterRange(o,Math.max(o,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new LineCursor(s)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Text.empty:e.length<=32?new TextLeaf(e):TextNode.from(TextLeaf.split(e,[]))}}class TextLeaf extends Text{constructor(e,r=textLength(e)){super(),this.text=e,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(e,r,s,o){for(let a=0;;a++){let l=this.text[a],c=o+l.length;if((r?s:c)>=e)return new Line(o,c,s,l);o=c+1,s++}}decompose(e,r,s,o){let a=e<=0&&r>=this.length?this:new TextLeaf(sliceText(this.text,e,r),Math.min(r,this.length)-Math.max(0,e));if(o&1){let l=s.pop(),c=appendText(a.text,l.text.slice(),0,a.length);if(c.length<=32)s.push(new TextLeaf(c,l.length+a.length));else{let u=c.length>>1;s.push(new TextLeaf(c.slice(0,u)),new TextLeaf(c.slice(u)))}}else s.push(a)}replace(e,r,s){if(!(s instanceof TextLeaf))return super.replace(e,r,s);let o=appendText(this.text,appendText(s.text,sliceText(this.text,0,e)),r),a=this.length+s.length-(r-e);return o.length<=32?new TextLeaf(o,a):TextNode.from(TextLeaf.split(o,[]),a)}sliceString(e,r=this.length,s=`
`){let o="";for(let a=0,l=0;a<=r&&l<this.text.length;l++){let c=this.text[l],u=a+c.length;a>e&&l&&(o+=s),e<u&&r>a&&(o+=c.slice(Math.max(0,e-a),r-a)),a=u+1}return o}flatten(e){for(let r of this.text)e.push(r)}scanIdentical(){return 0}static split(e,r){let s=[],o=-1;for(let a of e)s.push(a),o+=a.length+1,s.length==32&&(r.push(new TextLeaf(s,o)),s=[],o=-1);return o>-1&&r.push(new TextLeaf(s,o)),r}}class TextNode extends Text{constructor(e,r){super(),this.children=e,this.length=r,this.lines=0;for(let s of e)this.lines+=s.lines}lineInner(e,r,s,o){for(let a=0;;a++){let l=this.children[a],c=o+l.length,u=s+l.lines-1;if((r?u:c)>=e)return l.lineInner(e,r,s,o);o=c+1,s=u+1}}decompose(e,r,s,o){for(let a=0,l=0;l<=r&&a<this.children.length;a++){let c=this.children[a],u=l+c.length;if(e<=u&&r>=l){let f=o&((l<=e?1:0)|(u>=r?2:0));l>=e&&u<=r&&!f?s.push(c):c.decompose(e-l,r-l,s,f)}l=u+1}}replace(e,r,s){if(s.lines<this.lines)for(let o=0,a=0;o<this.children.length;o++){let l=this.children[o],c=a+l.length;if(e>=a&&r<=c){let u=l.replace(e-a,r-a,s),f=this.lines-l.lines+u.lines;if(u.lines<f>>5-1&&u.lines>f>>5+1){let d=this.children.slice();return d[o]=u,new TextNode(d,this.length-(r-e)+s.length)}return super.replace(a,c,u)}a=c+1}return super.replace(e,r,s)}sliceString(e,r=this.length,s=`
`){let o="";for(let a=0,l=0;a<this.children.length&&l<=r;a++){let c=this.children[a],u=l+c.length;l>e&&a&&(o+=s),e<u&&r>l&&(o+=c.sliceString(e-l,r-l,s)),l=u+1}return o}flatten(e){for(let r of this.children)r.flatten(e)}scanIdentical(e,r){if(!(e instanceof TextNode))return 0;let s=0,[o,a,l,c]=r>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;o+=r,a+=r){if(o==l||a==c)return s;let u=this.children[o],f=e.children[a];if(u!=f)return s+u.scanIdentical(f,r);s+=u.length+1}}static from(e,r=e.reduce((s,o)=>s+o.length+1,-1)){let s=0;for(let _ of e)s+=_.lines;if(s<32){let _=[];for(let E of e)E.flatten(_);return new TextLeaf(_,r)}let o=Math.max(32,s>>5),a=o<<1,l=o>>1,c=[],u=0,f=-1,d=[];function g(_){let E;if(_.lines>a&&_ instanceof TextNode)for(let A of _.children)g(A);else _.lines>l&&(u>l||!u)?(m(),c.push(_)):_ instanceof TextLeaf&&u&&(E=d[d.length-1])instanceof TextLeaf&&_.lines+E.lines<=32?(u+=_.lines,f+=_.length+1,d[d.length-1]=new TextLeaf(E.text.concat(_.text),E.length+1+_.length)):(u+_.lines>o&&m(),u+=_.lines,f+=_.length+1,d.push(_))}function m(){u!=0&&(c.push(d.length==1?d[0]:TextNode.from(d,f)),f=-1,u=d.length=0)}for(let _ of e)g(_);return m(),c.length==1?c[0]:new TextNode(c,r)}}Text.empty=new TextLeaf([""],0);function textLength(n){let e=-1;for(let r of n)e+=r.length+1;return e}function appendText(n,e,r=0,s=1e9){for(let o=0,a=0,l=!0;a<n.length&&o<=s;a++){let c=n[a],u=o+c.length;u>=r&&(u>s&&(c=c.slice(0,s-o)),o<r&&(c=c.slice(r-o)),l?(e[e.length-1]+=c,l=!1):e.push(c)),o=u+1}return e}function sliceText(n,e,r){return appendText(n,[""],e,r)}class RawTextCursor{constructor(e,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[r>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,r){for(this.done=this.lineBreak=!1;;){let s=this.nodes.length-1,o=this.nodes[s],a=this.offsets[s],l=a>>1,c=o instanceof TextLeaf?o.text.length:o.children.length;if(l==(r>0?c:0)){if(s==0)return this.done=!0,this.value="",this;r>0&&this.offsets[s-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(r>0?0:1)){if(this.offsets[s]+=r,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(o instanceof TextLeaf){let u=o.text[l+(r<0?-1:0)];if(this.offsets[s]+=r,u.length>Math.max(0,e))return this.value=e==0?u:r>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=o.children[l+(r<0?-1:0)];e>u.length?(e-=u.length,this.offsets[s]+=r):(r<0&&this.offsets[s]--,this.nodes.push(u),this.offsets.push(r>0?1:(u instanceof TextLeaf?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,r,s){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,r>s?-1:1),this.pos=r>s?e.length:0,this.from=Math.min(r,s),this.to=Math.max(r,s)}nextInner(e,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let s=r<0?this.pos-this.from:this.to-this.pos;e>s&&(e=s),s-=e;let{value:o}=this.cursor.next(e);return this.pos+=(o.length+e)*r,this.value=o.length<=s?o:r<0?o.slice(o.length-s):o.slice(0,s),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:r,lineBreak:s,value:o}=this.inner.next(e);return r?(this.done=!0,this.value=""):s?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(e,r,s,o){this.from=e,this.to=r,this.number=s,this.text=o}get length(){return this.to-this.from}}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<extend.length;n++)extend[n]+=extend[n-1];function isExtendingChar(n){for(let e=1;e<extend.length;e+=2)if(extend[e]>n)return extend[e-1]<=n;return!1}function isRegionalIndicator(n){return n>=127462&&n<=127487}const ZWJ=8205;function findClusterBreak(n,e,r=!0,s=!0){return(r?nextClusterBreak:prevClusterBreak)(n,e,s)}function nextClusterBreak(n,e,r){if(e==n.length)return e;e&&surrogateLow(n.charCodeAt(e))&&surrogateHigh(n.charCodeAt(e-1))&&e--;let s=codePointAt(n,e);for(e+=codePointSize(s);e<n.length;){let o=codePointAt(n,e);if(s==ZWJ||o==ZWJ||r&&isExtendingChar(o))e+=codePointSize(o),s=o;else if(isRegionalIndicator(o)){let a=0,l=e-2;for(;l>=0&&isRegionalIndicator(codePointAt(n,l));)a++,l-=2;if(a%2==0)break;e+=2}else break}return e}function prevClusterBreak(n,e,r){for(;e>0;){let s=nextClusterBreak(n,e-2,r);if(s<e)return s;e--}return 0}function surrogateLow(n){return n>=56320&&n<57344}function surrogateHigh(n){return n>=55296&&n<56320}function codePointAt(n,e){let r=n.charCodeAt(e);if(!surrogateHigh(r)||e+1==n.length)return r;let s=n.charCodeAt(e+1);return surrogateLow(s)?(r-55296<<10)+(s-56320)+65536:r}function fromCodePoint(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function codePointSize(n){return n<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let r=0;r<this.sections.length;r+=2)e+=this.sections[r];return e}get newLength(){let e=0;for(let r=0;r<this.sections.length;r+=2){let s=this.sections[r+1];e+=s<0?this.sections[r]:s}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let r=0,s=0,o=0;r<this.sections.length;){let a=this.sections[r++],l=this.sections[r++];l<0?(e(s,o,a),o+=a):o+=l,s+=a}}iterChangedRanges(e,r=!1){iterChanges(this,e,r)}get invertedDesc(){let e=[];for(let r=0;r<this.sections.length;){let s=this.sections[r++],o=this.sections[r++];o<0?e.push(s,o):e.push(o,s)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,r=!1){return e.empty?this:mapSet(this,e,r)}mapPos(e,r=-1,s=MapMode.Simple){let o=0,a=0;for(let l=0;l<this.sections.length;){let c=this.sections[l++],u=this.sections[l++],f=o+c;if(u<0){if(f>e)return a+(e-o);a+=c}else{if(s!=MapMode.Simple&&f>=e&&(s==MapMode.TrackDel&&o<e&&f>e||s==MapMode.TrackBefore&&o<e||s==MapMode.TrackAfter&&f>e))return null;if(f>e||f==e&&r<0&&!c)return e==o||r<0?a:a+u;a+=u}o=f}if(e>o)throw new RangeError(`Position ${e} is out of range for changeset of length ${o}`);return a}touchesRange(e,r=e){for(let s=0,o=0;s<this.sections.length&&o<=r;){let a=this.sections[s++],l=this.sections[s++],c=o+a;if(l>=0&&o<=r&&c>=e)return o<e&&c>r?"cover":!0;o=c}return!1}toString(){let e="";for(let r=0;r<this.sections.length;){let s=this.sections[r++],o=this.sections[r++];e+=(e?" ":"")+s+(o>=0?":"+o:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,r){super(e),this.inserted=r}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(r,s,o,a,l)=>e=e.replace(o,o+(s-r),l),!1),e}mapDesc(e,r=!1){return mapSet(this,e,r,!0)}invert(e){let r=this.sections.slice(),s=[];for(let o=0,a=0;o<r.length;o+=2){let l=r[o],c=r[o+1];if(c>=0){r[o]=c,r[o+1]=l;let u=o>>1;for(;s.length<u;)s.push(Text.empty);s.push(l?e.slice(a,a+l):Text.empty)}a+=l}return new ChangeSet(r,s)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,r=!1){return e.empty?this:mapSet(this,e,r,!0)}iterChanges(e,r=!1){iterChanges(this,e,r)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let r=[],s=[],o=[],a=new SectionIter(this);e:for(let l=0,c=0;;){let u=l==e.length?1e9:e[l++];for(;c<u||c==u&&a.len==0;){if(a.done)break e;let d=Math.min(a.len,u-c);addSection(o,d,-1);let g=a.ins==-1?-1:a.off==0?a.ins:0;addSection(r,d,g),g>0&&addInsert(s,r,a.text),a.forward(d),c+=d}let f=e[l++];for(;c<f;){if(a.done)break e;let d=Math.min(a.len,f-c);addSection(r,d,-1),addSection(o,d,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(d),c+=d}}return{changes:new ChangeSet(r,s),filtered:ChangeDesc.create(o)}}toJSON(){let e=[];for(let r=0;r<this.sections.length;r+=2){let s=this.sections[r],o=this.sections[r+1];o<0?e.push(s):o==0?e.push([s]):e.push([s].concat(this.inserted[r>>1].toJSON()))}return e}static of(e,r,s){let o=[],a=[],l=0,c=null;function u(d=!1){if(!d&&!o.length)return;l<r&&addSection(o,r-l,-1);let g=new ChangeSet(o,a);c=c?c.compose(g.map(c)):g,o=[],a=[],l=0}function f(d){if(Array.isArray(d))for(let g of d)f(g);else if(d instanceof ChangeSet){if(d.length!=r)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${r})`);u(),c=c?c.compose(d.map(c)):d}else{let{from:g,to:m=g,insert:_}=d;if(g>m||g<0||m>r)throw new RangeError(`Invalid change range ${g} to ${m} (in doc of length ${r})`);let E=_?typeof _=="string"?Text.of(_.split(s||DefaultSplit)):_:Text.empty,A=E.length;if(g==m&&A==0)return;g<l&&u(),g>l&&addSection(o,g-l,-1),addSection(o,m-g,A),addInsert(a,o,E),l=m}}return f(e),u(!c),c}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],s=[];for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")r.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((l,c)=>c&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)r.push(a[0],0);else{for(;s.length<o;)s.push(Text.empty);s[o]=Text.of(a.slice(1)),r.push(a[0],s[o].length)}}}return new ChangeSet(r,s)}static createSet(e,r){return new ChangeSet(e,r)}}function addSection(n,e,r,s=!1){if(e==0&&r<=0)return;let o=n.length-2;o>=0&&r<=0&&r==n[o+1]?n[o]+=e:e==0&&n[o]==0?n[o+1]+=r:s?(n[o]+=e,n[o+1]+=r):n.push(e,r)}function addInsert(n,e,r){if(r.length==0)return;let s=e.length-2>>1;if(s<n.length)n[n.length-1]=n[n.length-1].append(r);else{for(;n.length<s;)n.push(Text.empty);n.push(r)}}function iterChanges(n,e,r){let s=n.inserted;for(let o=0,a=0,l=0;l<n.sections.length;){let c=n.sections[l++],u=n.sections[l++];if(u<0)o+=c,a+=c;else{let f=o,d=a,g=Text.empty;for(;f+=c,d+=u,u&&s&&(g=g.append(s[l-2>>1])),!(r||l==n.sections.length||n.sections[l+1]<0);)c=n.sections[l++],u=n.sections[l++];e(o,f,a,d,g),o=f,a=d}}}function mapSet(n,e,r,s=!1){let o=[],a=s?[]:null,l=new SectionIter(n),c=new SectionIter(e);for(let u=-1;;)if(l.ins==-1&&c.ins==-1){let f=Math.min(l.len,c.len);addSection(o,f,-1),l.forward(f),c.forward(f)}else if(c.ins>=0&&(l.ins<0||u==l.i||l.off==0&&(c.len<l.len||c.len==l.len&&!r))){let f=c.len;for(addSection(o,c.ins,-1);f;){let d=Math.min(l.len,f);l.ins>=0&&u<l.i&&l.len<=d&&(addSection(o,0,l.ins),a&&addInsert(a,o,l.text),u=l.i),l.forward(d),f-=d}c.next()}else if(l.ins>=0){let f=0,d=l.len;for(;d;)if(c.ins==-1){let g=Math.min(d,c.len);f+=g,d-=g,c.forward(g)}else if(c.ins==0&&c.len<d)d-=c.len,c.next();else break;addSection(o,f,u<l.i?l.ins:0),a&&u<l.i&&addInsert(a,o,l.text),u=l.i,l.forward(l.len-d)}else{if(l.done&&c.done)return a?ChangeSet.createSet(o,a):ChangeDesc.create(o);throw new Error("Mismatched change set lengths")}}function composeSets(n,e,r=!1){let s=[],o=r?[]:null,a=new SectionIter(n),l=new SectionIter(e);for(let c=!1;;){if(a.done&&l.done)return o?ChangeSet.createSet(s,o):ChangeDesc.create(s);if(a.ins==0)addSection(s,a.len,0,c),a.next();else if(l.len==0&&!l.done)addSection(s,0,l.ins,c),o&&addInsert(o,s,l.text),l.next();else{if(a.done||l.done)throw new Error("Mismatched change set lengths");{let u=Math.min(a.len2,l.len),f=s.length;if(a.ins==-1){let d=l.ins==-1?-1:l.off?0:l.ins;addSection(s,u,d,c),o&&d&&addInsert(o,s,l.text)}else l.ins==-1?(addSection(s,a.off?0:a.len,u,c),o&&addInsert(o,s,a.textBit(u))):(addSection(s,a.off?0:a.len,l.off?0:l.ins,c),o&&!l.off&&addInsert(o,s,l.text));c=(a.ins>u||l.ins>=0&&l.len>u)&&(c||s.length>f),a.forward2(u),l.forward(u)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,r=this.i-2>>1;return r>=e.length?Text.empty:e[r]}textBit(e){let{inserted:r}=this.set,s=this.i-2>>1;return s>=r.length&&!e?Text.empty:r[s].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,r,s){this.from=e,this.to=r,this.flags=s}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,r=-1){let s,o;return this.empty?s=o=e.mapPos(this.from,r):(s=e.mapPos(this.from,1),o=e.mapPos(this.to,-1)),s==this.from&&o==this.to?this:new SelectionRange(s,o,this.flags)}extend(e,r=e){if(e<=this.anchor&&r>=this.anchor)return EditorSelection.range(e,r);let s=Math.abs(e-this.anchor)>Math.abs(r-this.anchor)?e:r;return EditorSelection.range(this.anchor,s)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,r,s){return new SelectionRange(e,r,s)}}class EditorSelection{constructor(e,r){this.ranges=e,this.mainIndex=r}map(e,r=-1){return e.empty?this:EditorSelection.create(this.ranges.map(s=>s.map(e,r)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(e,r=!0){return EditorSelection.create([e].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(e,r=this.mainIndex){let s=this.ranges.slice();return s[r]=e,EditorSelection.create(s,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map(r=>SelectionRange.fromJSON(r)),e.main)}static single(e,r=e){return new EditorSelection([EditorSelection.range(e,r)],0)}static create(e,r=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let s=0,o=0;o<e.length;o++){let a=e[o];if(a.empty?a.from<=s:a.from<s)return EditorSelection.normalized(e.slice(),r);s=a.to}return new EditorSelection(e,r)}static cursor(e,r=0,s,o){return SelectionRange.create(e,e,(r==0?0:r<0?4:8)|(s==null?3:Math.min(2,s))|(o??33554431)<<5)}static range(e,r,s,o){let a=(s??33554431)<<5|(o==null?3:Math.min(2,o));return r<e?SelectionRange.create(r,e,24|a):SelectionRange.create(e,r,(r>e?4:0)|a)}static normalized(e,r=0){let s=e[r];e.sort((o,a)=>o.from-a.from),r=e.indexOf(s);for(let o=1;o<e.length;o++){let a=e[o],l=e[o-1];if(a.empty?a.from<=l.to:a.from<l.to){let c=l.from,u=Math.max(a.to,l.to);o<=r&&r--,e.splice(--o,2,a.anchor>a.head?EditorSelection.range(u,c):EditorSelection.range(c,u))}}return new EditorSelection(e,r)}}function checkSelection(n,e){for(let r of n.ranges)if(r.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,r,s,o,a){this.combine=e,this.compareInput=r,this.compare=s,this.isStatic=o,this.id=nextID++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}static define(e={}){return new Facet(e.combine||(r=>r),e.compareInput||((r,s)=>r===s),e.compare||(e.combine?(r,s)=>r===s:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,r)}computeN(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,r)}from(e,r){return r||(r=s=>s),this.compute([e],s=>r(s.field(e)))}}function sameArray$1(n,e){return n==e||n.length==e.length&&n.every((r,s)=>r===e[s])}class FacetProvider{constructor(e,r,s,o){this.dependencies=e,this.facet=r,this.type=s,this.value=o,this.id=nextID++}dynamicSlot(e){var r;let s=this.value,o=this.facet.compareInput,a=this.id,l=e[a]>>1,c=this.type==2,u=!1,f=!1,d=[];for(let g of this.dependencies)g=="doc"?u=!0:g=="selection"?f=!0:((r=e[g.id])!==null&&r!==void 0?r:1)&1||d.push(e[g.id]);return{create(g){return g.values[l]=s(g),1},update(g,m){if(u&&m.docChanged||f&&(m.docChanged||m.selection)||ensureAll(g,d)){let _=s(g);if(c?!compareArray(_,g.values[l],o):!o(_,g.values[l]))return g.values[l]=_,1}return 0},reconfigure:(g,m)=>{let _,E=m.config.address[a];if(E!=null){let A=getAddr(m,E);if(this.dependencies.every(b=>b instanceof Facet?m.facet(b)===g.facet(b):b instanceof StateField?m.field(b,!1)==g.field(b,!1):!0)||(c?compareArray(_=s(g),A,o):o(_=s(g),A)))return g.values[l]=A,0}else _=s(g);return g.values[l]=_,1}}}}function compareArray(n,e,r){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!r(n[s],e[s]))return!1;return!0}function ensureAll(n,e){let r=!1;for(let s of e)ensureAddr(n,s)&1&&(r=!0);return r}function dynamicFacetSlot(n,e,r){let s=r.map(u=>n[u.id]),o=r.map(u=>u.type),a=s.filter(u=>!(u&1)),l=n[e.id]>>1;function c(u){let f=[];for(let d=0;d<s.length;d++){let g=getAddr(u,s[d]);if(o[d]==2)for(let m of g)f.push(m);else f.push(g)}return e.combine(f)}return{create(u){for(let f of s)ensureAddr(u,f);return u.values[l]=c(u),1},update(u,f){if(!ensureAll(u,a))return 0;let d=c(u);return e.compare(d,u.values[l])?0:(u.values[l]=d,1)},reconfigure(u,f){let d=ensureAll(u,s),g=f.config.facets[e.id],m=f.facet(e);if(g&&!d&&sameArray$1(r,g))return u.values[l]=m,0;let _=c(u);return e.compare(_,m)?(u.values[l]=m,0):(u.values[l]=_,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,r,s,o,a){this.id=e,this.createF=r,this.updateF=s,this.compareF=o,this.spec=a,this.provides=void 0}static define(e){let r=new StateField(nextID++,e.create,e.update,e.compare||((s,o)=>s===o),e);return e.provide&&(r.provides=e.provide(r)),r}create(e){let r=e.facet(initField).find(s=>s.field==this);return((r==null?void 0:r.create)||this.createF)(e)}slot(e){let r=e[this.id]>>1;return{create:s=>(s.values[r]=this.create(s),1),update:(s,o)=>{let a=s.values[r],l=this.updateF(a,o);return this.compareF(a,l)?0:(s.values[r]=l,1)},reconfigure:(s,o)=>o.config.address[this.id]!=null?(s.values[r]=o.field(this),0):(s.values[r]=this.create(s),1)}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(n){return e=>new PrecExtension(e,n)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,r){this.inner=e,this.prec=r}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,r){this.compartment=e,this.inner=r}}class Configuration{constructor(e,r,s,o,a,l){for(this.base=e,this.compartments=r,this.dynamicSlots=s,this.address=o,this.staticValues=a,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(e){let r=this.address[e.id];return r==null?e.default:this.staticValues[r>>1]}static resolve(e,r,s){let o=[],a=Object.create(null),l=new Map;for(let m of flatten(e,r,l))m instanceof StateField?o.push(m):(a[m.facet.id]||(a[m.facet.id]=[])).push(m);let c=Object.create(null),u=[],f=[];for(let m of o)c[m.id]=f.length<<1,f.push(_=>m.slot(_));let d=s==null?void 0:s.config.facets;for(let m in a){let _=a[m],E=_[0].facet,A=d&&d[m]||[];if(_.every(b=>b.type==0))if(c[E.id]=u.length<<1|1,sameArray$1(A,_))u.push(s.facet(E));else{let b=E.combine(_.map(v=>v.value));u.push(s&&E.compare(b,s.facet(E))?s.facet(E):b)}else{for(let b of _)b.type==0?(c[b.id]=u.length<<1|1,u.push(b.value)):(c[b.id]=f.length<<1,f.push(v=>b.dynamicSlot(v)));c[E.id]=f.length<<1,f.push(b=>dynamicFacetSlot(b,E,_))}}let g=f.map(m=>m(c));return new Configuration(e,l,g,c,u,a)}}function flatten(n,e,r){let s=[[],[],[],[],[]],o=new Map;function a(l,c){let u=o.get(l);if(u!=null){if(u<=c)return;let f=s[u].indexOf(l);f>-1&&s[u].splice(f,1),l instanceof CompartmentInstance&&r.delete(l.compartment)}if(o.set(l,c),Array.isArray(l))for(let f of l)a(f,c);else if(l instanceof CompartmentInstance){if(r.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let f=e.get(l.compartment)||l.inner;r.set(l.compartment,f),a(f,c)}else if(l instanceof PrecExtension)a(l.inner,l.prec);else if(l instanceof StateField)s[c].push(l),l.provides&&a(l.provides,c);else if(l instanceof FacetProvider)s[c].push(l),l.facet.extensions&&a(l.facet.extensions,Prec_.default);else{let f=l.extension;if(!f)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(f,c)}}return a(n,Prec_.default),s.reduce((l,c)=>l.concat(c))}function ensureAddr(n,e){if(e&1)return 2;let r=e>>1,s=n.status[r];if(s==4)throw new Error("Cyclic dependency between fields and/or facets");if(s&2)return s;n.status[r]=4;let o=n.computeSlot(n,n.config.dynamicSlots[r]);return n.status[r]=2|o}function getAddr(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:n=>n.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:n=>n.length?n[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:n=>n.length?n[0]:!1});class Annotation{constructor(e,r){this.type=e,this.value=r}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,r){this.type=e,this.value=r}map(e){let r=this.type.map(this.value,e);return r===void 0?void 0:r==this.value?this:new StateEffect(this.type,r)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(r=>r))}static mapEffects(e,r){if(!e.length)return e;let s=[];for(let o of e){let a=o.map(r);a&&s.push(a)}return s}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,r,s,o,a,l){this.startState=e,this.changes=r,this.selection=s,this.effects=o,this.annotations=a,this.scrollIntoView=l,this._doc=null,this._state=null,s&&checkSelection(s,r.newLength),a.some(c=>c.type==Transaction.time)||(this.annotations=a.concat(Transaction.time.of(Date.now())))}static create(e,r,s,o,a,l){return new Transaction(e,r,s,o,a,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let r of this.annotations)if(r.type==e)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let r=this.annotation(Transaction.userEvent);return!!(r&&(r==e||r.length>e.length&&r.slice(0,e.length)==e&&r[e.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(n,e){let r=[];for(let s=0,o=0;;){let a,l;if(s<n.length&&(o==e.length||e[o]>=n[s]))a=n[s++],l=n[s++];else if(o<e.length)a=e[o++],l=e[o++];else return r;!r.length||r[r.length-1]<a?r.push(a,l):r[r.length-1]<l&&(r[r.length-1]=l)}}function mergeTransaction(n,e,r){var s;let o,a,l;return r?(o=e.changes,a=ChangeSet.empty(e.changes.length),l=n.changes.compose(e.changes)):(o=e.changes.map(n.changes),a=n.changes.mapDesc(e.changes,!0),l=n.changes.compose(o)),{changes:l,selection:e.selection?e.selection.map(a):(s=n.selection)===null||s===void 0?void 0:s.map(o),effects:StateEffect.mapEffects(n.effects,o).concat(StateEffect.mapEffects(e.effects,a)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(n,e,r){let s=e.selection,o=asArray$1(e.annotations);return e.userEvent&&(o=o.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],r,n.facet(lineSeparator)),selection:s&&(s instanceof EditorSelection?s:EditorSelection.single(s.anchor,s.head)),effects:asArray$1(e.effects),annotations:o,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(n,e,r){let s=resolveTransactionInner(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(r=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(r=!1);let l=!!e[a].sequential;s=mergeTransaction(s,resolveTransactionInner(n,e[a],l?s.changes.newLength:n.doc.length),l)}let o=Transaction.create(n,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return extendTransaction(r?filterTransaction(o):o)}function filterTransaction(n){let e=n.startState,r=!0;for(let o of e.facet(changeFilter)){let a=o(n);if(a===!1){r=!1;break}Array.isArray(a)&&(r=r===!0?a:joinRanges(r,a))}if(r!==!0){let o,a;if(r===!1)a=n.changes.invertedDesc,o=ChangeSet.empty(e.doc.length);else{let l=n.changes.filter(r);o=l.changes,a=l.filtered.mapDesc(l.changes).invertedDesc}n=Transaction.create(e,o,n.selection&&n.selection.map(a),StateEffect.mapEffects(n.effects,a),n.annotations,n.scrollIntoView)}let s=e.facet(transactionFilter);for(let o=s.length-1;o>=0;o--){let a=s[o](n);a instanceof Transaction?n=a:Array.isArray(a)&&a.length==1&&a[0]instanceof Transaction?n=a[0]:n=resolveTransaction(e,asArray$1(a),!1)}return n}function extendTransaction(n){let e=n.startState,r=e.facet(transactionExtender),s=n;for(let o=r.length-1;o>=0;o--){let a=r[o](n);a&&Object.keys(a).length&&(s=mergeTransaction(s,resolveTransactionInner(e,a,n.changes.newLength),!0))}return s==n?n:Transaction.create(e,n.changes,n.selection,s.effects,s.annotations,s.scrollIntoView)}const none$2=[];function asArray$1(n){return n==null?none$2:Array.isArray(n)?n:[n]}var CharCategory=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(n){if(wordChar)return wordChar.test(n);for(let e=0;e<n.length;e++){let r=n[e];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||nonASCIISingleCaseWordChar.test(r)))return!0}return!1}function makeCategorizer(n){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let r=0;r<n.length;r++)if(e.indexOf(n[r])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(e,r,s,o,a,l){this.config=e,this.doc=r,this.selection=s,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=a,l&&(l._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)ensureAddr(this,c<<1);this.computeSlot=null}field(e,r=!0){let s=this.config.address[e.id];if(s==null){if(r)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,s),getAddr(this,s)}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let r=this.config,{base:s,compartments:o}=r;for(let l of e.effects)l.is(Compartment.reconfigure)?(r&&(o=new Map,r.compartments.forEach((c,u)=>o.set(u,c)),r=null),o.set(l.value.compartment,l.value.extension)):l.is(StateEffect.reconfigure)?(r=null,s=l.value):l.is(StateEffect.appendConfig)&&(r=null,s=asArray$1(s).concat(l.value));let a;r?a=e.startState.values.slice():(r=Configuration.resolve(s,o,this),a=new EditorState(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(c,u)=>u.reconfigure(c,this),null).values),new EditorState(r,e.newDoc,e.newSelection,a,(l,c)=>c.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:e},range:EditorSelection.cursor(r.from+e.length)}))}changeByRange(e){let r=this.selection,s=e(r.ranges[0]),o=this.changes(s.changes),a=[s.range],l=asArray$1(s.effects);for(let c=1;c<r.ranges.length;c++){let u=e(r.ranges[c]),f=this.changes(u.changes),d=f.map(o);for(let m=0;m<c;m++)a[m]=a[m].map(d);let g=o.mapDesc(f,!0);a.push(u.range.map(g)),o=o.compose(d),l=StateEffect.mapEffects(l,d).concat(StateEffect.mapEffects(asArray$1(u.effects),g))}return{changes:o,selection:EditorSelection.create(a,r.mainIndex),effects:l}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,r=this.doc.length){return this.doc.sliceString(e,r,this.lineBreak)}facet(e){let r=this.config.address[e.id];return r==null?e.default:(ensureAddr(this,r),getAddr(this,r))}toJSON(e){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let s in e){let o=e[s];o instanceof StateField&&this.config.address[o.id]!=null&&(r[s]=o.spec.toJSON(this.field(e[s]),this))}return r}static fromJSON(e,r={},s){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(s){for(let a in s)if(Object.prototype.hasOwnProperty.call(e,a)){let l=s[a],c=e[a];o.push(l.init(u=>l.spec.fromJSON(c,u)))}}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:r.extensions?o.concat([r.extensions]):o})}static create(e={}){let r=Configuration.resolve(e.extensions||[],new Map),s=e.doc instanceof Text?e.doc:Text.of((e.doc||"").split(r.staticFacet(EditorState.lineSeparator)||DefaultSplit)),o=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(o,s.length),r.staticFacet(allowMultipleSelections)||(o=o.asSingle()),new EditorState(r,s,o,r.dynamicSlots.map(()=>null),(a,l)=>l.create(a),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(e,...r){for(let s of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(s,e)){e=s[e];break}return r.length&&(e=e.replace(/\$(\$|\d*)/g,(s,o)=>{if(o=="$")return"$";let a=+(o||1);return!a||a>r.length?s:r[a-1]})),e}languageDataAt(e,r,s=-1){let o=[];for(let a of this.facet(languageData))for(let l of a(this,r,s))Object.prototype.hasOwnProperty.call(l,e)&&o.push(l[e]);return o}charCategorizer(e){return makeCategorizer(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:r,from:s,length:o}=this.doc.lineAt(e),a=this.charCategorizer(e),l=e-s,c=e-s;for(;l>0;){let u=findClusterBreak(r,l,!1);if(a(r.slice(u,l))!=CharCategory.Word)break;l=u}for(;c<o;){let u=findClusterBreak(r,c);if(a(r.slice(c,u))!=CharCategory.Word)break;c=u}return l==c?null:EditorSelection.range(l+s,c+s)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:n=>n.length?n[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(n,e){let r=Object.keys(n),s=Object.keys(e);return r.length==s.length&&r.every(o=>n[o]==e[o])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(n,e,r={}){let s={};for(let o of n)for(let a of Object.keys(o)){let l=o[a],c=s[a];if(c===void 0)s[a]=l;else if(!(c===l||l===void 0))if(Object.hasOwnProperty.call(r,a))s[a]=r[a](c,l);else throw new Error("Config merge conflict for field "+a)}for(let o in e)s[o]===void 0&&(s[o]=e[o]);return s}class RangeValue{eq(e){return this==e}range(e,r=e){return Range$1.create(e,r,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class ze{constructor(e,r,s){this.from=e,this.to=r,this.value=s}static create(e,r,s){return new ze(e,r,s)}};function cmpRange(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Chunk{constructor(e,r,s,o){this.from=e,this.to=r,this.value=s,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(e,r,s,o=0){let a=s?this.to:this.from;for(let l=o,c=a.length;;){if(l==c)return l;let u=l+c>>1,f=a[u]-e||(s?this.value[u].endSide:this.value[u].startSide)-r;if(u==l)return f>=0?l:c;f>=0?c=u:l=u+1}}between(e,r,s,o){for(let a=this.findIndex(r,-1e9,!0),l=this.findIndex(s,1e9,!1,a);a<l;a++)if(o(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,r){let s=[],o=[],a=[],l=-1,c=-1;for(let u=0;u<this.value.length;u++){let f=this.value[u],d=this.from[u]+e,g=this.to[u]+e,m,_;if(d==g){let E=r.mapPos(d,f.startSide,f.mapMode);if(E==null||(m=_=E,f.startSide!=f.endSide&&(_=r.mapPos(d,f.endSide),_<m)))continue}else if(m=r.mapPos(d,f.startSide),_=r.mapPos(g,f.endSide),m>_||m==_&&f.startSide>0&&f.endSide<=0)continue;(_-m||f.endSide-f.startSide)<0||(l<0&&(l=m),f.point&&(c=Math.max(c,_-m)),s.push(f),o.push(m-l),a.push(_-l))}return{mapped:s.length?new Chunk(o,a,s,c):null,pos:l}}}class RangeSet{constructor(e,r,s,o){this.chunkPos=e,this.chunk=r,this.nextLayer=s,this.maxPoint=o}static create(e,r,s,o){return new RangeSet(e,r,s,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let r of this.chunk)e+=r.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:r=[],sort:s=!1,filterFrom:o=0,filterTo:a=this.length}=e,l=e.filter;if(r.length==0&&!l)return this;if(s&&(r=r.slice().sort(cmpRange)),this.isEmpty)return r.length?RangeSet.of(r):this;let c=new LayerCursor(this,null,-1).goto(0),u=0,f=[],d=new RangeSetBuilder;for(;c.value||u<r.length;)if(u<r.length&&(c.from-r[u].from||c.startSide-r[u].value.startSide)>=0){let g=r[u++];d.addInner(g.from,g.to,g.value)||f.push(g)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(u==r.length||this.chunkEnd(c.chunkIndex)<r[u].from)&&(!l||o>this.chunkEnd(c.chunkIndex)||a<this.chunkPos[c.chunkIndex])&&d.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!l||o>c.to||a<c.from||l(c.from,c.to,c.value))&&(d.addInner(c.from,c.to,c.value)||f.push(Range$1.create(c.from,c.to,c.value))),c.next());return d.finishInner(this.nextLayer.isEmpty&&!f.length?RangeSet.empty:this.nextLayer.update({add:f,filter:l,filterFrom:o,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let r=[],s=[],o=-1;for(let l=0;l<this.chunk.length;l++){let c=this.chunkPos[l],u=this.chunk[l],f=e.touchesRange(c,c+u.length);if(f===!1)o=Math.max(o,u.maxPoint),r.push(u),s.push(e.mapPos(c));else if(f===!0){let{mapped:d,pos:g}=u.map(c,e);d&&(o=Math.max(o,d.maxPoint),r.push(d),s.push(g))}}let a=this.nextLayer.map(e);return r.length==0?a:new RangeSet(s,r,a||RangeSet.empty,o)}between(e,r,s){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o];if(r>=a&&e<=a+l.length&&l.between(a,e-a,r-a,s)===!1)return}this.nextLayer.between(e,r,s)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,r=0){return HeapCursor.from(e).goto(r)}static compare(e,r,s,o,a=-1){let l=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=a),c=r.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=a),u=findSharedChunks(l,c,s),f=new SpanCursor(l,u,a),d=new SpanCursor(c,u,a);s.iterGaps((g,m,_)=>compare(f,g,d,m,_,o)),s.empty&&s.length==0&&compare(f,0,d,0,0,o)}static eq(e,r,s=0,o){o==null&&(o=1e9-1);let a=e.filter(d=>!d.isEmpty&&r.indexOf(d)<0),l=r.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(a.length!=l.length)return!1;if(!a.length)return!0;let c=findSharedChunks(a,l),u=new SpanCursor(a,c,0).goto(s),f=new SpanCursor(l,c,0).goto(s);for(;;){if(u.to!=f.to||!sameValues(u.active,f.active)||u.point&&(!f.point||!u.point.eq(f.point)))return!1;if(u.to>o)return!0;u.next(),f.next()}}static spans(e,r,s,o,a=-1){let l=new SpanCursor(e,null,a).goto(r),c=r,u=l.openStart;for(;;){let f=Math.min(l.to,s);if(l.point){let d=l.activeForPoint(l.to),g=l.pointFrom<r?d.length+1:Math.min(d.length,u);o.point(c,f,l.point,d,g,l.pointRank),u=Math.min(l.openEnd(f),d.length)}else f>c&&(o.span(c,f,l.active,u),u=l.openEnd(f));if(l.to>s)return u+(l.point&&l.to>s?1:0);c=l.to,l.next()}}static of(e,r=!1){let s=new RangeSetBuilder;for(let o of e instanceof Range$1?[e]:r?lazySort(e):e)s.add(o.from,o.to,o.value);return s.finish()}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(n){if(n.length>1)for(let e=n[0],r=1;r<n.length;r++){let s=n[r];if(cmpRange(e,s)>0)return n.slice().sort(cmpRange);e=s}return n}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,r,s){this.addInner(e,r,s)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,r,s)}addInner(e,r,s){let o=e-this.lastTo||s.startSide-this.last.endSide;if(o<=0&&(e-this.lastFrom||s.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return o<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(r-this.chunkStart),this.last=s,this.lastFrom=e,this.lastTo=r,this.value.push(s),s.point&&(this.maxPoint=Math.max(this.maxPoint,r-e)),!0)}addChunk(e,r){if((e-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(e);let s=r.value.length-1;return this.last=r.value[s],this.lastFrom=r.from[s]+e,this.lastTo=r.to[s]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let r=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,r}}function findSharedChunks(n,e,r){let s=new Map;for(let a of n)for(let l=0;l<a.chunk.length;l++)a.chunk[l].maxPoint<=0&&s.set(a.chunk[l],a.chunkPos[l]);let o=new Set;for(let a of e)for(let l=0;l<a.chunk.length;l++){let c=s.get(a.chunk[l]);c!=null&&(r?r.mapPos(c):c)==a.chunkPos[l]&&!(r!=null&&r.touchesRange(c,c+a.chunk[l].length))&&o.add(a.chunk[l])}return o}class LayerCursor{constructor(e,r,s,o=0){this.layer=e,this.skip=r,this.minPoint=s,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,r,!1),this}gotoInner(e,r,s){for(;this.chunkIndex<this.layer.chunk.length;){let o=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(o)||this.layer.chunkEnd(this.chunkIndex)<e||o.maxPoint<this.minPoint))break;this.chunkIndex++,s=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],r,!0);(!s||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(e,r){(this.to-e||this.endSide-r)<0&&this.gotoInner(e,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],s=e+r.from[this.rangeIndex];if(this.from=s,this.to=e+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,r=null,s=-1){let o=[];for(let a=0;a<e.length;a++)for(let l=e[a];!l.isEmpty;l=l.nextLayer)l.maxPoint>=s&&o.push(new LayerCursor(l,r,s,a));return o.length==1?o[0]:new HeapCursor(o)}get startSide(){return this.value?this.value.startSide:0}goto(e,r=-1e9){for(let s of this.heap)s.goto(e,r);for(let s=this.heap.length>>1;s>=0;s--)heapBubble(this.heap,s);return this.next(),this}forward(e,r){for(let s of this.heap)s.forward(e,r);for(let s=this.heap.length>>1;s>=0;s--)heapBubble(this.heap,s);(this.to-e||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(n,e){for(let r=n[e];;){let s=(e<<1)+1;if(s>=n.length)break;let o=n[s];if(s+1<n.length&&o.compare(n[s+1])>=0&&(o=n[s+1],s++),r.compare(o)<0)break;n[s]=r,n[e]=o,e=s}}class SpanCursor{constructor(e,r,s){this.minPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,r,s)}goto(e,r=-1e9){return this.cursor.goto(e,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=r,this.openStart=-1,this.next(),this}forward(e,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(e,r)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let r=0,{value:s,to:o,rank:a}=this.cursor;for(;r<this.activeRank.length&&this.activeRank[r]<=a;)r++;insert(this.active,r,s),insert(this.activeTo,r,o),insert(this.activeRank,r,a),e&&insert(e,r,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,r=this.point;this.point=null;let s=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),s&&remove(s,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(s),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(s){this.openStart=0;for(let o=s.length-1;o>=0&&s[o]<e;o--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let r=[];for(let s=this.active.length-1;s>=0&&!(this.activeRank[s]<this.pointRank);s--)(this.activeTo[s]>e||this.activeTo[s]==e&&this.active[s].endSide>=this.point.endSide)&&r.push(this.active[s]);return r.reverse()}openEnd(e){let r=0;for(let s=this.activeTo.length-1;s>=0&&this.activeTo[s]>e;s--)r++;return r}}function compare(n,e,r,s,o,a){n.goto(e),r.goto(s);let l=s+o,c=s,u=s-e;for(;;){let f=n.to+u-r.to||n.endSide-r.endSide,d=f<0?n.to+u:r.to,g=Math.min(d,l);if(n.point||r.point?n.point&&r.point&&(n.point==r.point||n.point.eq(r.point))&&sameValues(n.activeForPoint(n.to+u),r.activeForPoint(r.to))||a.comparePoint(c,g,n.point,r.point):g>c&&!sameValues(n.active,r.active)&&a.compareRange(c,g,n.active,r.active),d>l)break;c=d,f<=0&&n.next(),f>=0&&r.next()}}function sameValues(n,e){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(n[r]!=e[r]&&!n[r].eq(e[r]))return!1;return!0}function remove(n,e){for(let r=e,s=n.length-1;r<s;r++)n[r]=n[r+1];n.pop()}function insert(n,e,r){for(let s=n.length-1;s>=e;s--)n[s+1]=n[s];n[e]=r}function findMinIndex(n,e){let r=-1,s=1e9;for(let o=0;o<e.length;o++)(e[o]-s||n[o].endSide-n[r].endSide)<0&&(r=o,s=e[o]);return r}function countColumn(n,e,r=n.length){let s=0;for(let o=0;o<r;)n.charCodeAt(o)==9?(s+=e-s%e,o++):(s++,o=findClusterBreak(n,o));return s}function findColumn(n,e,r,s){for(let o=0,a=0;;){if(a>=e)return o;if(o==n.length)break;a+=n.charCodeAt(o)==9?r-a%r:1,o=findClusterBreak(n,o)}return s===!0?-1:n.length}const C$1="ͼ",COUNT=typeof Symbol>"u"?"__"+C$1:Symbol.for(C$1),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(e,r){this.rules=[];let{finish:s}=r||{};function o(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function a(l,c,u,f){let d=[],g=/^@(\w+)\b/.exec(l[0]),m=g&&g[1]=="keyframes";if(g&&c==null)return u.push(l[0]+";");for(let _ in c){let E=c[_];if(/&/.test(_))a(_.split(/,\s*/).map(A=>l.map(b=>A.replace(/&/,b))).reduce((A,b)=>A.concat(b)),E,u);else if(E&&typeof E=="object"){if(!g)throw new RangeError("The value of a property ("+_+") should be a primitive value.");a(o(_),E,d,m)}else E!=null&&d.push(_.replace(/_.*/,"").replace(/[A-Z]/g,A=>"-"+A.toLowerCase())+": "+E+";")}(d.length||m)&&u.push((s&&!g&&!f?l.map(s):l).join(", ")+" {"+d.join(" ")+"}")}for(let l in e)a(o(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C$1+e.toString(36)}static mount(e,r){(e[SET]||new StyleSet(e)).mount(Array.isArray(r)?r:[r])}}let adoptedSet=null;class StyleSet{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(adoptedSet)return e.adoptedStyleSheets=[adoptedSet.sheet].concat(e.adoptedStyleSheets),e[SET]=adoptedSet;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),adoptedSet=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let r=e.head||e;r.insertBefore(this.styleTag,r.firstChild)}this.modules=[],e[SET]=this}mount(e){let r=this.sheet,s=0,o=0;for(let a=0;a<e.length;a++){let l=e[a],c=this.modules.indexOf(l);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,l),r)for(let u=0;u<l.rules.length;u++)r.insertRule(l.rules[u],s++)}else{for(;o<c;)s+=this.modules[o++].rules.length;s+=l.rules.length,o++}}if(!r){let a="";for(let l=0;l<this.modules.length;l++)a+=this.modules[l].getRules()+`
`;this.styleTag.textContent=a}}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},chrome$1=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=mac||chrome$1&&+chrome$1[1]<57;for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(n){var e=brokenModifierNames&&(n.ctrlKey||n.altKey||n.metaKey)||ie$1&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",r=!e&&n.key||(n.shiftKey?shift:base)[n.keyCode]||n.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function getSelection(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function contains(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function deepActiveElement(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function hasSelection(n,e){if(!e.anchorNode)return!1;try{return contains(n,e.anchorNode)}catch{return!1}}function clientRectsFor(n){return n.nodeType==3?textRange(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function isEquivalentPosition(n,e,r,s){return r?scanFor(n,e,r,s,-1)||scanFor(n,e,r,s,1):!1}function domIndex(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function scanFor(n,e,r,s,o){for(;;){if(n==r&&e==s)return!0;if(e==(o<0?0:maxOffset(n))){if(n.nodeName=="DIV")return!1;let a=n.parentNode;if(!a||a.nodeType!=1)return!1;e=domIndex(n)+(o<0?0:1),n=a}else if(n.nodeType==1){if(n=n.childNodes[e+(o<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=o<0?maxOffset(n):0}else return!1}}function maxOffset(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}const Rect0={left:0,right:0,top:0,bottom:0};function flattenRect(n,e){let r=e?n.left:n.right;return{left:r,right:r,top:n.top,bottom:n.bottom}}function windowRect(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function scrollRectIntoView(n,e,r,s,o,a,l,c){let u=n.ownerDocument,f=u.defaultView||window;for(let d=n;d;)if(d.nodeType==1){let g,m=d==u.body;if(m)g=windowRect(f);else{if(d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let A=d.getBoundingClientRect();g={left:A.left,right:A.left+d.clientWidth,top:A.top,bottom:A.top+d.clientHeight}}let _=0,E=0;if(o=="nearest")e.top<g.top?(E=-(g.top-e.top+l),r>0&&e.bottom>g.bottom+E&&(E=e.bottom-g.bottom+E+l)):e.bottom>g.bottom&&(E=e.bottom-g.bottom+l,r<0&&e.top-E<g.top&&(E=-(g.top+E-e.top+l)));else{let A=e.bottom-e.top,b=g.bottom-g.top;E=(o=="center"&&A<=b?e.top+A/2-b/2:o=="start"||o=="center"&&r<0?e.top-l:e.bottom-b+l)-g.top}if(s=="nearest"?e.left<g.left?(_=-(g.left-e.left+a),r>0&&e.right>g.right+_&&(_=e.right-g.right+_+a)):e.right>g.right&&(_=e.right-g.right+a,r<0&&e.left<g.left+_&&(_=-(g.left+_-e.left+a))):_=(s=="center"?e.left+(e.right-e.left)/2-(g.right-g.left)/2:s=="start"==c?e.left-a:e.right-(g.right-g.left)+a)-g.left,_||E)if(m)f.scrollBy(_,E);else{let A=0,b=0;if(E){let v=d.scrollTop;d.scrollTop+=E,b=d.scrollTop-v}if(_){let v=d.scrollLeft;d.scrollLeft+=_,A=d.scrollLeft-v}e={left:e.left-A,top:e.top-b,right:e.right-A,bottom:e.bottom-b},A&&Math.abs(A-_)<1&&(s="nearest"),b&&Math.abs(b-E)<1&&(o="nearest")}if(m)break;d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function scrollableParent(n){let e=n.ownerDocument;for(let r=n.parentNode;r&&r!=e.body;)if(r.nodeType==1){if(r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth)return r;r=r.assignedSlot||r.parentNode}else if(r.nodeType==11)r=r.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,r,s,o){this.anchorNode=e,this.anchorOffset=r,this.focusNode=s,this.focusOffset=o}}let preventScrollSupported=null;function focusPreventScroll(n){if(n.setActive)return n.setActive();if(preventScrollSupported)return n.focus(preventScrollSupported);let e=[];for(let r=n;r&&(e.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(n.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let r=0;r<e.length;){let s=e[r++],o=e[r++],a=e[r++];s.scrollTop!=o&&(s.scrollTop=o),s.scrollLeft!=a&&(s.scrollLeft=a)}}}let scratchRange;function textRange(n,e,r=e){let s=scratchRange||(scratchRange=document.createRange());return s.setEnd(n,r),s.setStart(n,e),s}function dispatchKey(n,e,r){let s={key:e,code:e,keyCode:r,which:r,cancelable:!0},o=new KeyboardEvent("keydown",s);o.synthetic=!0,n.dispatchEvent(o);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,n.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function getRoot(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function clearAttributes(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function atElementStart(n,e){let r=e.focusNode,s=e.focusOffset;if(!r||e.anchorNode!=r||e.anchorOffset!=s)return!1;for(;;)if(s){if(r.nodeType!=1)return!1;let o=r.childNodes[s-1];o.contentEditable=="false"?s--:(r=o,s=maxOffset(r))}else{if(r==n)return!0;s=domIndex(r),r=r.parentNode}}class DOMPos{constructor(e,r,s=!0){this.node=e,this.offset=r,this.precise=s}static before(e,r){return new DOMPos(e.parentNode,domIndex(e),r)}static after(e,r){return new DOMPos(e.parentNode,domIndex(e)+1,r)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let r=this.posAtStart;for(let s of this.children){if(s==e)return r;r+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,r){return null}sync(e,r){if(this.dirty&2){let s=this.dom,o=null,a;for(let l of this.children){if(l.dirty){if(!l.dom&&(a=o?o.nextSibling:s.firstChild)){let c=ContentView.get(a);(!c||!c.parent&&c.canReuseDOM(l))&&l.reuseDOM(a)}l.sync(e,r),l.dirty=0}if(a=o?o.nextSibling:s.firstChild,r&&!r.written&&r.node==s&&a!=l.dom&&(r.written=!0),l.dom.parentNode==s)for(;a&&a!=l.dom;)a=rm$1(a);else s.insertBefore(l.dom,a);o=l.dom}for(a=o?o.nextSibling:s.firstChild,a&&r&&r.node==s&&(r.written=!0);a;)a=rm$1(a)}else if(this.dirty&1)for(let s of this.children)s.dirty&&(s.sync(e,r),s.dirty=0)}reuseDOM(e){}localPosFromDOM(e,r){let s;if(e==this.dom)s=this.dom.childNodes[r];else{let o=maxOffset(e)==0?0:r==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;o==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?o=-1:o=1),e=a}o<0?s=e:s=e.nextSibling}if(s==this.dom.firstChild)return 0;for(;s&&!ContentView.get(s);)s=s.nextSibling;if(!s)return this.length;for(let o=0,a=0;;o++){let l=this.children[o];if(l.dom==s)return a;a+=l.length+l.breakAfter}}domBoundsAround(e,r,s=0){let o=-1,a=-1,l=-1,c=-1;for(let u=0,f=s,d=s;u<this.children.length;u++){let g=this.children[u],m=f+g.length;if(f<e&&m>r)return g.domBoundsAround(e,r,f);if(m>=e&&o==-1&&(o=u,a=f),f>r&&g.dom.parentNode==this.dom){l=u,c=d;break}d=m,f=m+g.breakAfter}return{from:a,to:c<0?s+this.length:c,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let r=this.parent;r;r=r.parent){if(e&&(r.dirty|=2),r.dirty&1)return;r.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let r=e.parent;if(!r)return e;e=r}}replaceChildren(e,r,s=noChildren){this.markDirty();for(let o=e;o<r;o++){let a=this.children[o];a.parent==this&&a.destroy()}this.children.splice(e,r-e,...s);for(let o=0;o<s.length;o++)s[o].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,r=1){return this.childCursor().findPos(e,r)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(e,r,s,o,a,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class ChildCursor{constructor(e,r,s){this.children=e,this.pos=r,this.i=s,this.off=0}findPos(e,r=1){for(;;){if(e>this.pos||e==this.pos&&(r>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let s=this.children[--this.i];this.pos-=s.length+s.breakAfter}}}function replaceRange(n,e,r,s,o,a,l,c,u){let{children:f}=n,d=f.length?f[e]:null,g=a.length?a[a.length-1]:null,m=g?g.breakAfter:l;if(!(e==s&&d&&!l&&!m&&a.length<2&&d.merge(r,o,a.length?g:null,r==0,c,u))){if(s<f.length){let _=f[s];_&&o<_.length?(e==s&&(_=_.split(o),o=0),!m&&g&&_.merge(0,o,g,!0,0,u)?a[a.length-1]=_:(o&&_.merge(0,o,null,!1,0,u),a.push(_))):_!=null&&_.breakAfter&&(g?g.breakAfter=1:l=1),s++}for(d&&(d.breakAfter=l,r>0&&(!l&&a.length&&d.merge(r,d.length,a[0],!1,c,0)?d.breakAfter=a.shift().breakAfter:(r<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(r,d.length,null,!1,c,0),e++));e<s&&a.length;)if(f[s-1].become(a[a.length-1]))s--,a.pop(),u=a.length?0:c;else if(f[e].become(a[0]))e++,a.shift(),c=a.length?0:u;else break;!a.length&&e&&s<f.length&&!f[e-1].breakAfter&&f[s].merge(0,0,f[e-1],!1,c,u)&&e--,(e<s||a.length)&&n.replaceChildren(e,s,a)}}function mergeChildrenInto(n,e,r,s,o,a){let l=n.childCursor(),{i:c,off:u}=l.findPos(r,1),{i:f,off:d}=l.findPos(e,-1),g=e-r;for(let m of s)g+=m.length;n.length+=g,replaceRange(n,f,d,c,u,s,0,o,a)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,r){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(r&&r.node==this.dom&&(r.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,r,s){return s&&(!(s instanceof TextView)||this.length-(r-e)+s.length>MaxJoinLen)?!1:(this.text=this.text.slice(0,e)+(s?s.text:"")+this.text.slice(r),this.markDirty(),!0)}split(e){let r=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),r}localPosFromDOM(e,r){return e==this.dom?r:r?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,r,s){return{from:s,to:s+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,r){return textCoords(this.dom,e,r)}}class MarkView extends ContentView{constructor(e,r=[],s=0){super(),this.mark=e,this.children=r,this.length=s;for(let o of r)o.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let r in this.mark.attrs)e.setAttribute(r,this.mark.attrs[r]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,r){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,r)}merge(e,r,s,o,a,l){return s&&(!(s instanceof MarkView&&s.mark.eq(this.mark))||e&&a<=0||r<this.length&&l<=0)?!1:(mergeChildrenInto(this,e,r,s?s.children:[],a-1,l-1),this.markDirty(),!0)}split(e){let r=[],s=0,o=-1,a=0;for(let c of this.children){let u=s+c.length;u>e&&r.push(s<e?c.split(e-s):c),o<0&&s>=e&&(o=a),s=u,a++}let l=this.length-e;return this.length=e,o>-1&&(this.children.length=o,this.markDirty()),new MarkView(this.mark,r,l)}domAtPos(e){return inlineDOMAtPos(this,e)}coordsAt(e,r){return coordsInChildren(this,e,r)}}function textCoords(n,e,r){let s=n.nodeValue.length;e>s&&(e=s);let o=e,a=e,l=0;e==0&&r<0||e==s&&r>=0?browser.chrome||browser.gecko||(e?(o--,l=1):a<s&&(a++,l=-1)):r<0?o--:a<s&&a++;let c=textRange(n,o,a).getClientRects();if(!c.length)return Rect0;let u=c[(l?l<0:r>=0)?0:c.length-1];return browser.safari&&!l&&u.width==0&&(u=Array.prototype.find.call(c,f=>f.width)||u),l?flattenRect(u,l<0):u||null}class WidgetView extends ContentView{constructor(e,r,s){super(),this.widget=e,this.length=r,this.side=s,this.prevWidget=null}static create(e,r,s){return new(e.customView||WidgetView)(e,r,s)}split(e){let r=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,r}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,r,s,o,a,l){return s&&(!(s instanceof WidgetView)||!this.widget.compare(s.widget)||e>0&&a<=0||r<this.length&&l<=0)?!1:(this.length=e+(s?s.length:0)+(this.length-r),!0)}become(e){return e.length==this.length&&e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Text.empty;let e=this;for(;e.parent;)e=e.parent;let{view:r}=e,s=r&&r.state.doc,o=this.posAtStart;return s?s.slice(o,o+this.length):Text.empty}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,r){let s=this.dom.getClientRects(),o=null;if(!s.length)return Rect0;for(let a=e>0?s.length-1:0;o=s[a],!(e>0?a==0:a==s.length-1||o.top<o.bottom);a+=e>0?-1:1);return this.length?o:flattenRect(o,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class CompositionView extends WidgetView{domAtPos(e){let{topView:r,text:s}=this.widget;return r?scanCompositionTree(e,0,r,s,(o,a)=>o.domAtPos(a),o=>new DOMPos(s,Math.min(o,s.nodeValue.length))):new DOMPos(s,Math.min(e,s.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,r){let{topView:s,text:o}=this.widget;return s?posFromDOMInCompositionTree(e,r,s,o):Math.min(r,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,r){let{topView:s,text:o}=this.widget;return s?scanCompositionTree(e,r,s,o,(a,l,c)=>a.coordsAt(l,c),(a,l)=>textCoords(o,a,l)):textCoords(o,e,r)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function scanCompositionTree(n,e,r,s,o,a){if(r instanceof MarkView){for(let l=r.dom.firstChild;l;l=l.nextSibling){let c=ContentView.get(l);if(!c)return a(n,e);let u=contains(l,s),f=c.length+(u?s.nodeValue.length:0);if(n<f||n==f&&c.getSide()<=0)return u?scanCompositionTree(n,e,c,s,o,a):o(c,n,e);n-=f}return o(r,r.length,-1)}else return r.dom==s?a(n,e):o(r,n,e)}function posFromDOMInCompositionTree(n,e,r,s){if(r instanceof MarkView)for(let o of r.children){let a=0,l=contains(o.dom,s);if(contains(o.dom,n))return a+(l?posFromDOMInCompositionTree(n,e,o,s):o.localPosFromDOM(n,e));a+=l?s.nodeValue.length:o.length}else if(r.dom==s)return Math.min(e,s.nodeValue.length);return r.localPosFromDOM(n,e)}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return DOMPos.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let r=this.dom.getBoundingClientRect(),s=inlineSiblingRect(this,this.side>0?-1:1);return s&&s.top<r.bottom&&s.bottom>r.top?{left:r.left,right:r.right,top:s.top,bottom:s.bottom}:r}get overrideDOMText(){return Text.empty}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineSiblingRect(n,e){let r=n.parent,s=r?r.children.indexOf(n):-1;for(;r&&s>=0;)if(e<0?s>0:s<r.children.length){let o=r.children[s+e];if(o instanceof TextView){let a=o.coordsAt(e<0?o.length:0,e);if(a)return a}s+=e}else if(r instanceof MarkView&&r.parent)s=r.parent.children.indexOf(r)+(e<0?0:1),r=r.parent;else{let o=r.dom.lastChild;if(o&&o.nodeName=="BR")return o.getClientRects()[0];break}}function inlineDOMAtPos(n,e){let r=n.dom,{children:s}=n,o=0;for(let a=0;o<s.length;o++){let l=s[o],c=a+l.length;if(!(c==a&&l.getSide()<=0)){if(e>a&&e<c&&l.dom.parentNode==r)return l.domAtPos(e-a);if(e<=a)break;a=c}}for(let a=o;a>0;a--){let l=s[a-1];if(l.dom.parentNode==r)return l.domAtPos(l.length)}for(let a=o;a<s.length;a++){let l=s[a];if(l.dom.parentNode==r)return l.domAtPos(0)}return new DOMPos(r,0)}function joinInlineInto(n,e,r){let s,{children:o}=n;r>0&&e instanceof MarkView&&o.length&&(s=o[o.length-1])instanceof MarkView&&s.mark.eq(e.mark)?joinInlineInto(s,e.children[0],r-1):(o.push(e),e.setParent(n)),n.length+=e.length}function coordsInChildren(n,e,r){let s=null,o=-1,a=null,l=-1;function c(f,d){for(let g=0,m=0;g<f.children.length&&m<=d;g++){let _=f.children[g],E=m+_.length;E>=d&&(_.children.length?c(_,d-m):!a&&(E>d||m==E&&_.getSide()>0)?(a=_,l=d-m):(m<d||m==E&&_.getSide()<0)&&(s=_,o=d-m)),m=E}}c(n,e);let u=(r<0?s:a)||s||a;return u?u.coordsAt(Math.max(0,u==s?o:l),r):fallbackRect(n)}function fallbackRect(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let r=clientRectsFor(e);return r[r.length-1]||null}function combineAttrs(n,e){for(let r in n)r=="class"&&e.class?e.class+=" "+n.class:r=="style"&&e.style?e.style+=";"+n.style:e[r]=n[r];return e}function attrsEq(n,e){if(n==e)return!0;if(!n||!e)return!1;let r=Object.keys(n),s=Object.keys(e);if(r.length!=s.length)return!1;for(let o of r)if(s.indexOf(o)==-1||n[o]!==e[o])return!1;return!0}function updateAttrs(n,e,r){let s=null;if(e)for(let o in e)r&&o in r||n.removeAttribute(s=o);if(r)for(let o in r)e&&e[o]==r[o]||n.setAttribute(s=o,r[o]);return!!s}class WidgetType{eq(e){return!1}updateDOM(e,r){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var BlockType=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,r,s,o){super(),this.startSide=e,this.endSide=r,this.widget=s,this.spec=o}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let r=e.side||0,s=!!e.block;return r+=s?r>0?3e8:-4e8:r>0?1e8:-1e8,new PointDecoration(e,r,r,s,e.widget||null,!1)}static replace(e){let r=!!e.block,s,o;if(e.isBlockGap)s=-5e8,o=4e8;else{let{start:a,end:l}=getInclusive(e,r);s=(a?r?-3e8:-1:5e8)-1,o=(l?r?2e8:1:-6e8)+1}return new PointDecoration(e,s,o,r,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,r=!1){return RangeSet.of(e,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:r,end:s}=getInclusive(e);super(r?-1:5e8,s?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&this.class==e.class&&attrsEq(this.attrs,e.attrs)}range(e,r=e){if(e>=r)throw new RangeError("Mark decorations may not be empty");return super.range(e,r)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,r=e){if(r!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,r)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,r,s,o,a,l){super(r,s,a,e),this.block=o,this.isReplace=l,this.mapMode=o?r<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide<this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,r=e){if(this.isReplace&&(e>r||e==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,r)}}PointDecoration.prototype.point=!0;function getInclusive(n,e=!1){let{inclusiveStart:r,inclusiveEnd:s}=n;return r==null&&(r=n.inclusive),s==null&&(s=n.inclusive),{start:r??e,end:s??e}}function widgetsEq(n,e){return n==e||!!(n&&e&&n.compare(e))}function addRange(n,e,r,s=0){let o=r.length-1;o>=0&&r[o]+s>=n?r[o]=Math.max(r[o],e):r.push(n,e)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,r,s,o,a,l){if(s){if(!(s instanceof LineView))return!1;this.dom||s.transferDOM(this)}return o&&this.setDeco(s?s.attrs:null),mergeChildrenInto(this,e,r,s?s.children:[],a,l),!0}split(e){let r=new LineView;if(r.breakAfter=this.breakAfter,this.length==0)return r;let{i:s,off:o}=this.childPos(e);o&&(r.append(this.children[s].split(o),0),this.children[s].merge(o,this.children[s].length,null,!1,0,0),s++);for(let a=s;a<this.children.length;a++)r.append(this.children[a],0);for(;s>0&&this.children[s-1].length==0;)this.children[--s].destroy();return this.children.length=s,this.markDirty(),this.length=e,r}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,r){joinInlineInto(this,e,r)}addLineDeco(e){let r=e.spec.attributes,s=e.spec.class;r&&(this.attrs=combineAttrs(r,this.attrs||{})),s&&(this.attrs=combineAttrs({class:s},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e,r){var s;this.dom?this.dirty&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,r);let o=this.dom.lastChild;for(;o&&ContentView.get(o)instanceof MarkView;)o=o.lastChild;if(!o||!this.length||o.nodeName!="BR"&&((s=ContentView.get(o))===null||s===void 0?void 0:s.isEditable)==!1&&(!browser.ios||!this.children.some(a=>a instanceof TextView))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let r of this.children){if(!(r instanceof TextView)||/[^ -~]/.test(r.text))return null;let s=clientRectsFor(r.dom);if(s.length!=1)return null;e+=s[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,r){return coordsInChildren(this,e,r)}become(e){return!1}get type(){return BlockType.Text}static find(e,r){for(let s=0,o=0;s<e.children.length;s++){let a=e.children[s],l=o+a.length;if(l>=r){if(a instanceof LineView)return a;if(l>r)break}o=l+a.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,r,s){super(),this.widget=e,this.length=r,this.type=s,this.breakAfter=0,this.prevWidget=null}merge(e,r,s,o,a,l){return s&&(!(s instanceof BlockWidgetView)||!this.widget.compare(s.widget)||e>0&&a<=0||r<this.length&&l<=0)?!1:(this.length=e+(s?s.length:0)+(this.length-r),!0)}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let r=this.length-e;this.length=e;let s=new BlockWidgetView(this.widget,r,this.type);return s.breakAfter=this.breakAfter,s}get children(){return noChildren}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ContentBuilder{constructor(e,r,s,o){this.doc=e,this.pos=r,this.end=s,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=r}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof BlockWidgetView&&e.type==BlockType.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,r,s){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:l,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let o=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(r.slice(r.length-s)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+o)),r),s),this.atCursorPos=!0,this.textOff+=o,e-=o,s=0}}span(e,r,s,o){this.buildText(r-e,s,o),this.pos=r,this.openStart<0&&(this.openStart=o)}point(e,r,s,o,a,l){if(this.disallowBlockEffectsFor[l]&&s instanceof PointDecoration){if(s.block)throw new RangeError("Block decorations may not be specified via plugins");if(r>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=r-e;if(s instanceof PointDecoration)if(s.block){let{type:u}=s;u==BlockType.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(s.widget||new NullWidget("div"),c,u))}else{let u=WidgetView.create(s.widget||new NullWidget("span"),c,c?0:s.startSide),f=this.atCursorPos&&!u.isEditable&&a<=o.length&&(e<r||s.startSide>0),d=!u.isEditable&&(e<r||a>o.length||s.startSide<=0),g=this.getLine();this.pendingBuffer==2&&!f&&(this.pendingBuffer=0),this.flushBuffer(o),f&&(g.append(wrapMarks(new WidgetBufferView(1),o),a),a=o.length+Math.max(0,a-o.length)),g.append(wrapMarks(u,o),a),this.atCursorPos=d,this.pendingBuffer=d?e<r||a>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(s);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=r),this.openStart<0&&(this.openStart=a)}static build(e,r,s,o,a){let l=new ContentBuilder(e,r,s,a);return l.openEnd=RangeSet.spans(o,r,s,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function wrapMarks(n,e){for(let r of e)n=new MarkView(r,[n],n.length);return n}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:n=>n.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:n=>n.some(e=>e)});class ScrollTarget{constructor(e,r="nearest",s="nearest",o=5,a=5){this.range=e,this.y=r,this.x=s,this.yMargin=o,this.xMargin=a}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const scrollIntoView$1=StateEffect.define({map:(n,e)=>n.map(e)});function logException(n,e,r){let s=n.facet(exceptionSink);s.length?s[0](e):window.onerror?window.onerror(String(e),r,void 0,void 0,e):r?console.error(r+":",e):console.error(e)}const editable=Facet.define({combine:n=>n.length?n[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(e,r,s,o){this.id=e,this.create=r,this.domEventHandlers=s,this.extension=o(this)}static define(e,r){const{eventHandlers:s,provide:o,decorations:a}=r||{};return new ViewPlugin(nextPluginID++,e,s,l=>{let c=[viewPlugin.of(l)];return a&&c.push(decorations.of(u=>{let f=u.plugin(l);return f?a(f):Decoration.none})),o&&c.push(o(l)),c})}static fromClass(e,r){return ViewPlugin.define(s=>new e(s),r)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(s){if(logException(r.state,s,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(r){logException(e.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(s){logException(e.state,s,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),atomicRanges=Facet.define(),scrollMargins=Facet.define(),styleModule=Facet.define();class ChangedRange{constructor(e,r,s,o){this.fromA=e,this.toA=r,this.fromB=s,this.toB=o}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let r=e.length,s=this;for(;r>0;r--){let o=e[r-1];if(!(o.fromA>s.toA)){if(o.toA<s.fromA)break;s=s.join(o),e.splice(r-1,1)}}return e.splice(r,0,s),e}static extendWithRanges(e,r){if(r.length==0)return e;let s=[];for(let o=0,a=0,l=0,c=0;;o++){let u=o==e.length?null:e[o],f=l-c,d=u?u.fromB:1e9;for(;a<r.length&&r[a]<d;){let g=r[a],m=r[a+1],_=Math.max(c,g),E=Math.min(d,m);if(_<=E&&new ChangedRange(_+f,E+f,_,E).addToSet(s),m>d)break;a+=2}if(!u)return s;new ChangedRange(u.fromA,u.toA,u.fromB,u.toB).addToSet(s),l=u.toA,c=u.toB}}}class ViewUpdate{constructor(e,r,s){this.view=e,this.state=r,this.transactions=s,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let a of s)this.changes=this.changes.compose(a.changes);let o=[];this.changes.iterChangedRanges((a,l,c,u)=>o.push(new ChangedRange(a,l,c,u))),this.changedRanges=o}static create(e,r,s){return new ViewUpdate(e,r,s)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Direction=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(n){let e=[];for(let r=0;r<n.length;r++)e.push(1<<+n[r]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),r=n.charCodeAt(1);Brackets[e]=r,Brackets[r]=-e}function charType(n){return n<=247?LowTypes[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?ArabicTypes[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{constructor(e,r,s){this.from=e,this.to=r,this.level=s}get dir(){return this.level%2?RTL:LTR}side(e,r){return this.dir==r==e?this.to:this.from}static find(e,r,s,o){let a=-1;for(let l=0;l<e.length;l++){let c=e[l];if(c.from<=r&&c.to>=r){if(c.level==s)return l;(a<0||(o!=0?o<0?c.from<r:c.to>r:e[a].level>c.level))&&(a=l)}}if(a<0)throw new RangeError("Index out of range");return a}}const types=[];function computeOrder(n,e){let r=n.length,s=e==LTR?1:2,o=e==LTR?2:1;if(!n||s==1&&!BidiRE.test(n))return trivialOrder(r);for(let l=0,c=s,u=s;l<r;l++){let f=charType(n.charCodeAt(l));f==512?f=c:f==8&&u==4&&(f=16),types[l]=f==4?2:f,f&7&&(u=f),c=f}for(let l=0,c=s,u=s;l<r;l++){let f=types[l];if(f==128)l<r-1&&c==types[l+1]&&c&24?f=types[l]=c:types[l]=256;else if(f==64){let d=l+1;for(;d<r&&types[d]==64;)d++;let g=l&&c==8||d<r&&types[d]==8?u==1?1:8:256;for(let m=l;m<d;m++)types[m]=g;l=d-1}else f==8&&u==1&&(types[l]=1);c=f,f&7&&(u=f)}for(let l=0,c=0,u=0,f,d,g;l<r;l++)if(d=Brackets[f=n.charCodeAt(l)])if(d<0){for(let m=c-3;m>=0;m-=3)if(BracketStack[m+1]==-d){let _=BracketStack[m+2],E=_&2?s:_&4?_&1?o:s:0;E&&(types[l]=types[BracketStack[m]]=E),c=m;break}}else{if(BracketStack.length==189)break;BracketStack[c++]=l,BracketStack[c++]=f,BracketStack[c++]=u}else if((g=types[l])==2||g==1){let m=g==s;u=m?0:1;for(let _=c-3;_>=0;_-=3){let E=BracketStack[_+2];if(E&2)break;if(m)BracketStack[_+2]|=2;else{if(E&4)break;BracketStack[_+2]|=4}}}for(let l=0;l<r;l++)if(types[l]==256){let c=l+1;for(;c<r&&types[c]==256;)c++;let u=(l?types[l-1]:s)==1,f=(c<r?types[c]:s)==1,d=u==f?u?1:2:s;for(let g=l;g<c;g++)types[g]=d;l=c-1}let a=[];if(s==1)for(let l=0;l<r;){let c=l,u=types[l++]!=1;for(;l<r&&u==(types[l]!=1);)l++;if(u)for(let f=l;f>c;){let d=f,g=types[--f]!=2;for(;f>c&&g==(types[f-1]!=2);)f--;a.push(new BidiSpan(f,d,g?2:1))}else a.push(new BidiSpan(c,l,0))}else for(let l=0;l<r;){let c=l,u=types[l++]==2;for(;l<r&&u==(types[l]==2);)l++;a.push(new BidiSpan(c,l,u?1:2))}return a}function trivialOrder(n){return[new BidiSpan(0,n,0)]}let movedOver="";function moveVisually(n,e,r,s,o){var a;let l=s.head-n.from,c=-1;if(l==0){if(!o||!n.length)return null;e[0].level!=r&&(l=e[0].side(!1,r),c=0)}else if(l==n.length){if(o)return null;let m=e[e.length-1];m.level!=r&&(l=m.side(!0,r),c=e.length-1)}c<0&&(c=BidiSpan.find(e,l,(a=s.bidiLevel)!==null&&a!==void 0?a:-1,s.assoc));let u=e[c];l==u.side(o,r)&&(u=e[c+=o?1:-1],l=u.side(!o,r));let f=o==(u.dir==r),d=findClusterBreak(n.text,l,f);if(movedOver=n.text.slice(Math.min(l,d),Math.max(l,d)),d!=u.side(o,r))return EditorSelection.cursor(d+n.from,f?-1:1,u.level);let g=c==(o?e.length-1:0)?null:e[c+(o?1:-1)];return!g&&u.level!=r?EditorSelection.cursor(o?n.to:n.from,o?-1:1,r):g&&g.level<u.level?EditorSelection.cursor(g.side(!o,r)+n.from,o?1:-1,g.level):EditorSelection.cursor(d+n.from,o?-1:1,u.level)}const LineBreakPlaceholder="￿";class DOMReader{constructor(e,r){this.points=e,this.text="",this.lineSeparator=r.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,r){if(!e)return this;let s=e.parentNode;for(let o=e;;){this.findPointBefore(s,o),this.readNode(o);let a=o.nextSibling;if(a==r)break;let l=ContentView.get(o),c=ContentView.get(a);(l&&c?l.breakAfter:(l?l.breakAfter:isBlockElement(o))||isBlockElement(a)&&(o.nodeName!="BR"||o.cmIgnore))&&this.lineBreak(),o=a}return this.findPointBefore(s,r),this}readTextNode(e){let r=e.nodeValue;for(let s of this.points)s.node==e&&(s.pos=this.text.length+Math.min(s.offset,r.length));for(let s=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,l=1,c;if(this.lineSeparator?(a=r.indexOf(this.lineSeparator,s),l=this.lineSeparator.length):(c=o.exec(r))&&(a=c.index,l=c[0].length),this.append(r.slice(s,a<0?r.length:a)),a<0)break;if(this.lineBreak(),l>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=l-1);s=a+l}}readNode(e){if(e.cmIgnore)return;let r=ContentView.get(e),s=r&&r.overrideDOMText;if(s!=null){this.findPointInside(e,s.length);for(let o=s.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,r){for(let s of this.points)s.node==e&&e.childNodes[s.offset]==r&&(s.pos=this.text.length)}findPointInside(e,r){for(let s of this.points)(e.nodeType==3?s.node==e:e.contains(s.node))&&(s.pos=this.text.length+Math.min(r,s.offset))}}function isBlockElement(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class DOMPoint{constructor(e,r){this.node=e,this.offset=r,this.pos=-1}}class DocView extends ContentView{constructor(e){super(),this.view=e,this.compositionDeco=Decoration.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:l,toA:c})=>c<this.minWidthFrom||l>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Decoration.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=computeCompositionDeco(this.view,e.changes)),(browser.ie||browser.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,o=this.updateDeco(),a=findChangedDeco(s,o,e.changes);return r=ChangedRange.extendWithRanges(r,a),this.dirty==0&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,r);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=browser.chrome||browser.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.dirty=0,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""});let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof BlockWidgetView&&a.widget instanceof BlockGapWidget&&o.push(a.dom);s.updateGaps(o)}updateChildren(e,r){let s=this.childCursor(r);for(let o=e.length-1;;o--){let a=o>=0?e[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:f}=a,{content:d,breakAtStart:g,openStart:m,openEnd:_}=ContentBuilder.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap),{i:E,off:A}=s.findPos(c,1),{i:b,off:v}=s.findPos(l,-1);replaceRange(this,b,v,E,A,d,g,m,_)}}updateSelection(e=!1,r=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(r||this.mayControlSelection()))return;let s=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.domAtPos(o.anchor),l=o.empty?a:this.domAtPos(o.head);if(browser.gecko&&o.empty&&betweenUneditable(a)){let u=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(u,a.node.childNodes[a.offset]||null)),a=l=new DOMPos(u,0),s=!0}let c=this.view.observer.selectionRange;(s||!c.focusNode||!isEquivalentPosition(a.node,a.offset,c.anchorNode,c.anchorOffset)||!isEquivalentPosition(l.node,l.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(c.focusNode)&&inUneditable(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=getSelection(this.view.root);if(u)if(o.empty){if(browser.gecko){let f=nextToUneditable(a.node,a.offset);if(f&&f!=3){let d=nearbyTextNode(a.node,a.offset,f==1?1:-1);d&&(a=new DOMPos(d,f==1?0:d.nodeValue.length))}}u.collapse(a.node,a.offset),o.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=o.bidiLevel)}else if(u.extend){u.collapse(a.node,a.offset);try{u.extend(l.node,l.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([a,l]=[l,a]),f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(f)}}),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new DOMPos(c.anchorNode,c.anchorOffset),this.impreciseHead=l.precise?null:new DOMPos(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,r=e.state.selection.main,s=getSelection(e.root),{anchorNode:o,anchorOffset:a}=e.observer.selectionRange;if(!s||!r.empty||!r.assoc||!s.modify)return;let l=LineView.find(this,r.head);if(!l)return;let c=l.posAtStart;if(r.head==c||r.head==c+l.length)return;let u=this.coordsAt(r.head,-1),f=this.coordsAt(r.head,1);if(!u||!f||u.bottom>f.top)return;let d=this.domAtPos(r.head+r.assoc);s.collapse(d.node,d.offset),s.modify("move",r.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=r.from&&s.collapse(o,a)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||hasSelection(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let r=e;r;){let s=ContentView.get(r);if(s&&s.rootView==this)return s;r=r.parentNode}return null}posFromDOM(e,r){let s=this.nearest(e);if(!s)throw new RangeError("Trying to find position for a DOM position outside of the document");return s.localPosFromDOM(e,r)+s.posAtStart}domAtPos(e){let{i:r,off:s}=this.childCursor().findPos(e,-1);for(;r<this.children.length-1;){let o=this.children[r];if(s<o.length||o instanceof LineView)break;r++,s=0}return this.children[r].domAtPos(s)}coordsAt(e,r){for(let s=this.length,o=this.children.length-1;;o--){let a=this.children[o],l=s-a.breakAfter-a.length;if(e>l||e==l&&a.type!=BlockType.WidgetBefore&&a.type!=BlockType.WidgetAfter&&(!o||r==2||this.children[o-1].breakAfter||this.children[o-1].type==BlockType.WidgetBefore&&r>-2))return a.coordsAt(e-l,r);s=l}}measureVisibleLineHeights(e){let r=[],{from:s,to:o}=e,a=this.view.contentDOM.clientWidth,l=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,u=this.view.textDirection==Direction.LTR;for(let f=0,d=0;d<this.children.length;d++){let g=this.children[d],m=f+g.length;if(m>o)break;if(f>=s){let _=g.dom.getBoundingClientRect();if(r.push(_.height),l){let E=g.dom.lastChild,A=E?clientRectsFor(E):[];if(A.length){let b=A[A.length-1],v=u?b.right-_.left:_.right-b.left;v>c&&(c=v,this.minWidth=a,this.minWidthFrom=f,this.minWidthTo=m)}}}f=m+g.breakAfter}return r}textDirectionAt(e){let{i:r}=this.childPos(e,1);return getComputedStyle(this.children[r].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let o of this.children)if(o instanceof LineView){let a=o.measureTextSize();if(a)return a}let e=document.createElement("div"),r,s;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=clientRectsFor(e.firstChild)[0];r=e.getBoundingClientRect().height,s=o?o.width/27:7,e.remove()}),{lineHeight:r,charWidth:s}}childCursor(e=this.length){let r=this.children.length;return r&&(e-=this.children[--r].length),new ChildCursor(this.children,e,r)}computeBlockGapDeco(){let e=[],r=this.view.viewState;for(let s=0,o=0;;o++){let a=o==r.viewports.length?null:r.viewports[o],l=a?a.from-1:this.length;if(l>s){let c=r.lineBlockAt(l).bottom-r.lineBlockAt(s).top;e.push(Decoration.replace({widget:new BlockGapWidget(c),block:!0,inclusive:!0,isBlockGap:!0}).range(s,l))}if(!a)break;s=a.to+1}return Decoration.set(e)}updateDeco(){let e=this.view.state.facet(decorations).map((r,s)=>(this.dynamicDecorationMap[s]=typeof r=="function")?r(this.view):r);for(let r=e.length;r<e.length+3;r++)this.dynamicDecorationMap[r]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:r}=e,s=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),o;if(!s)return;!r.empty&&(o=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(s={left:Math.min(s.left,o.left),top:Math.min(s.top,o.top),right:Math.max(s.right,o.right),bottom:Math.max(s.bottom,o.bottom)});let a=0,l=0,c=0,u=0;for(let d of this.view.state.facet(scrollMargins).map(g=>g(this.view)))if(d){let{left:g,right:m,top:_,bottom:E}=d;g!=null&&(a=Math.max(a,g)),m!=null&&(l=Math.max(l,m)),_!=null&&(c=Math.max(c,_)),E!=null&&(u=Math.max(u,E))}let f={left:s.left-a,top:s.top-c,right:s.right+l,bottom:s.bottom+u};scrollRectIntoView(this.view.scrollDOM,f,r.head<r.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Direction.LTR)}}function betweenUneditable(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function compositionSurroundingNode(n){let e=n.observer.selectionRange,r=e.focusNode&&nearbyTextNode(e.focusNode,e.focusOffset,0);if(!r)return null;let s=n.docView.nearest(r);if(!s)return null;if(s instanceof LineView){let o=r;for(;o.parentNode!=s.dom;)o=o.parentNode;let a=o.previousSibling;for(;a&&!ContentView.get(a);)a=a.previousSibling;let l=a?ContentView.get(a).posAtEnd:s.posAtStart;return{from:l,to:l,node:o,text:r}}else{for(;;){let{parent:a}=s;if(!a)return null;if(a instanceof LineView)break;s=a}let o=s.posAtStart;return{from:o,to:o+s.length,node:s.dom,text:r}}}function computeCompositionDeco(n,e){let r=compositionSurroundingNode(n);if(!r)return Decoration.none;let{from:s,to:o,node:a,text:l}=r,c=e.mapPos(s,1),u=Math.max(c,e.mapPos(o,-1)),{state:f}=n,d=a.nodeType==3?a.nodeValue:new DOMReader([],f).readRange(a.firstChild,null).text;if(u-c<d.length)if(f.doc.sliceString(c,Math.min(f.doc.length,c+d.length),LineBreakPlaceholder)==d)u=c+d.length;else if(f.doc.sliceString(Math.max(0,u-d.length),u,LineBreakPlaceholder)==d)c=u-d.length;else return Decoration.none;else if(f.doc.sliceString(c,u,LineBreakPlaceholder)!=d)return Decoration.none;let g=ContentView.get(a);return g instanceof CompositionView?g=g.widget.topView:g&&(g.parent=null),Decoration.set(Decoration.replace({widget:new CompositionWidget(a,l,g),inclusive:!0}).range(c,u))}class CompositionWidget extends WidgetType{constructor(e,r,s){super(),this.top=e,this.text=r,this.topView=s}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return CompositionView}}function nearbyTextNode(n,e,r){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0&&r<=0)n=n.childNodes[e-1],e=maxOffset(n);else if(n.nodeType==1&&e<n.childNodes.length&&r>=0)n=n.childNodes[e],e=0;else return null}}function nextToUneditable(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class DecorationComparator$1{constructor(){this.changes=[]}compareRange(e,r){addRange(e,r,this.changes)}comparePoint(e,r){addRange(e,r,this.changes)}}function findChangedDeco(n,e,r){let s=new DecorationComparator$1;return RangeSet.compare(n,e,r,s),s.changes}function inUneditable(n,e){for(let r=n;r&&r!=e;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function groupAt(n,e,r=1){let s=n.charCategorizer(e),o=n.doc.lineAt(e),a=e-o.from;if(o.length==0)return EditorSelection.cursor(e);a==0?r=1:a==o.length&&(r=-1);let l=a,c=a;r<0?l=findClusterBreak(o.text,a,!1):c=findClusterBreak(o.text,a);let u=s(o.text.slice(l,c));for(;l>0;){let f=findClusterBreak(o.text,l,!1);if(s(o.text.slice(f,l))!=u)break;l=f}for(;c<o.length;){let f=findClusterBreak(o.text,c);if(s(o.text.slice(c,f))!=u)break;c=f}return EditorSelection.range(l+o.from,c+o.from)}function getdx(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function getdy(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function yOverlap(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function upTop(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function upBot(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function domPosAtCoords(n,e,r){let s,o,a,l,c=!1,u,f,d,g;for(let E=n.firstChild;E;E=E.nextSibling){let A=clientRectsFor(E);for(let b=0;b<A.length;b++){let v=A[b];o&&yOverlap(o,v)&&(v=upTop(upBot(v,o.bottom),o.top));let M=getdx(e,v),V=getdy(r,v);if(M==0&&V==0)return E.nodeType==3?domPosInText(E,e,r):domPosAtCoords(E,e,r);if(!s||l>V||l==V&&a>M){s=E,o=v,a=M,l=V;let R=V?r<v.top?-1:1:M?e<v.left?-1:1:0;c=!R||(R>0?b<A.length-1:b>0)}M==0?r>v.bottom&&(!d||d.bottom<v.bottom)?(u=E,d=v):r<v.top&&(!g||g.top>v.top)&&(f=E,g=v):d&&yOverlap(d,v)?d=upBot(d,v.bottom):g&&yOverlap(g,v)&&(g=upTop(g,v.top))}}if(d&&d.bottom>=r?(s=u,o=d):g&&g.top<=r&&(s=f,o=g),!s)return{node:n,offset:0};let m=Math.max(o.left,Math.min(o.right,e));if(s.nodeType==3)return domPosInText(s,m,r);if(c&&s.contentEditable!="false")return domPosAtCoords(s,m,r);let _=Array.prototype.indexOf.call(n.childNodes,s)+(e>=(o.left+o.right)/2?1:0);return{node:n,offset:_}}function domPosInText(n,e,r){let s=n.nodeValue.length,o=-1,a=1e9,l=0;for(let c=0;c<s;c++){let u=textRange(n,c,c+1).getClientRects();for(let f=0;f<u.length;f++){let d=u[f];if(d.top==d.bottom)continue;l||(l=e-d.left);let g=(d.top>r?d.top-r:r-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&g<a){let m=e>=(d.left+d.right)/2,_=m;if((browser.chrome||browser.gecko)&&textRange(n,c).getBoundingClientRect().left==d.right&&(_=!m),g<=0)return{node:n,offset:c+(_?1:0)};o=c+(_?1:0),a=g}}}return{node:n,offset:o>-1?o:l>0?n.nodeValue.length:0}}function posAtCoords(n,e,r,s=-1){var o;let a=n.contentDOM.getBoundingClientRect(),l=a.top+n.viewState.paddingTop,c,{docHeight:u}=n.viewState,{x:f,y:d}=e,g=d-l;if(g<0)return 0;if(g>u)return n.state.doc.length;for(let V=n.defaultLineHeight/2,R=!1;c=n.elementAtHeight(g),c.type!=BlockType.Text;)for(;g=s>0?c.bottom+V:c.top-V,!(g>=0&&g<=u);){if(R)return r?null:0;R=!0,s=-s}d=l+g;let m=c.from;if(m<n.viewport.from)return n.viewport.from==0?0:r?null:posAtCoordsImprecise(n,a,c,f,d);if(m>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:r?null:posAtCoordsImprecise(n,a,c,f,d);let _=n.dom.ownerDocument,E=n.root.elementFromPoint?n.root:_,A=E.elementFromPoint(f,d);A&&!n.contentDOM.contains(A)&&(A=null),A||(f=Math.max(a.left+1,Math.min(a.right-1,f)),A=E.elementFromPoint(f,d),A&&!n.contentDOM.contains(A)&&(A=null));let b,v=-1;if(A&&((o=n.docView.nearest(A))===null||o===void 0?void 0:o.isEditable)!=!1){if(_.caretPositionFromPoint){let V=_.caretPositionFromPoint(f,d);V&&({offsetNode:b,offset:v}=V)}else if(_.caretRangeFromPoint){let V=_.caretRangeFromPoint(f,d);V&&({startContainer:b,startOffset:v}=V,(!n.contentDOM.contains(b)||browser.safari&&isSuspiciousSafariCaretResult(b,v,f)||browser.chrome&&isSuspiciousChromeCaretResult(b,v,f))&&(b=void 0))}}if(!b||!n.docView.dom.contains(b)){let V=LineView.find(n.docView,m);if(!V)return g>c.top+c.height/2?c.to:c.from;({node:b,offset:v}=domPosAtCoords(V.dom,f,d))}let M=n.docView.nearest(b);if(!M)return null;if(M.isWidget){let V=M.dom.getBoundingClientRect();return e.y<V.top||e.y<=V.bottom&&e.x<=(V.left+V.right)/2?M.posAtStart:M.posAtEnd}else return M.localPosFromDOM(b,v)+M.posAtStart}function posAtCoordsImprecise(n,e,r,s,o){let a=Math.round((s-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&r.height>n.defaultLineHeight*1.5){let c=Math.floor((o-r.top)/n.defaultLineHeight);a+=c*n.viewState.heightOracle.lineLength}let l=n.state.sliceDoc(r.from,r.to);return r.from+findColumn(l,a,n.state.tabSize)}function isSuspiciousSafariCaretResult(n,e,r){let s;if(n.nodeType!=3||e!=(s=n.nodeValue.length))return!1;for(let o=n.nextSibling;o;o=o.nextSibling)if(o.nodeType!=1||o.nodeName!="BR")return!1;return textRange(n,s-1,s).getBoundingClientRect().left>r}function isSuspiciousChromeCaretResult(n,e,r){if(e!=0)return!1;for(let o=n;;){let a=o.parentNode;if(!a||a.nodeType!=1||a.firstChild!=o)return!1;if(a.classList.contains("cm-line"))break;o=a}let s=n.nodeType==1?n.getBoundingClientRect():textRange(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return r-s.left>5}function moveToLineBoundary(n,e,r,s){let o=n.state.doc.lineAt(e.head),a=!s||!n.lineWrapping?null:n.coordsAtPos(e.assoc<0&&e.head>o.from?e.head-1:e.head);if(a){let u=n.dom.getBoundingClientRect(),f=n.textDirectionAt(o.from),d=n.posAtCoords({x:r==(f==Direction.LTR)?u.right-1:u.left+1,y:(a.top+a.bottom)/2});if(d!=null)return EditorSelection.cursor(d,r?-1:1)}let l=LineView.find(n.docView,e.head),c=l?r?l.posAtEnd:l.posAtStart:r?o.to:o.from;return EditorSelection.cursor(c,r?-1:1)}function moveByChar(n,e,r,s){let o=n.state.doc.lineAt(e.head),a=n.bidiSpans(o),l=n.textDirectionAt(o.from);for(let c=e,u=null;;){let f=moveVisually(o,a,l,c,r),d=movedOver;if(!f){if(o.number==(r?n.state.doc.lines:1))return c;d=`
`,o=n.state.doc.line(o.number+(r?1:-1)),a=n.bidiSpans(o),f=EditorSelection.cursor(r?o.from:o.to)}if(u){if(!u(d))return c}else{if(!s)return f;u=s(d)}c=f}}function byGroup(n,e,r){let s=n.state.charCategorizer(e),o=s(r);return a=>{let l=s(a);return o==CharCategory.Space&&(o=l),o==l}}function moveVertically(n,e,r,s){let o=e.head,a=r?1:-1;if(o==(r?n.state.doc.length:0))return EditorSelection.cursor(o,e.assoc);let l=e.goalColumn,c,u=n.contentDOM.getBoundingClientRect(),f=n.coordsAtPos(o),d=n.documentTop;if(f)l==null&&(l=f.left-u.left),c=a<0?f.top:f.bottom;else{let _=n.viewState.lineBlockAt(o);l==null&&(l=Math.min(u.right-u.left,n.defaultCharacterWidth*(o-_.from))),c=(a<0?_.top:_.bottom)+d}let g=u.left+l,m=s??n.defaultLineHeight>>1;for(let _=0;;_+=10){let E=c+(m+_)*a,A=posAtCoords(n,{x:g,y:E},!1,a);if(E<u.top||E>u.bottom||(a<0?A<o:A>o))return EditorSelection.cursor(A,e.assoc,void 0,l)}}function skipAtoms(n,e,r){let s=n.state.facet(atomicRanges).map(o=>o(n));for(;;){let o=!1;for(let a of s)a.between(r.from-1,r.from+1,(l,c,u)=>{r.from>l&&r.from<c&&(r=e.head>r.from?EditorSelection.cursor(l,1):EditorSelection.cursor(c,-1),o=!0)});if(!o)return r}}class InputState{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let r=(s,o)=>{this.ignoreDuringComposition(o)||o.type=="keydown"&&this.keydown(e,o)||(this.mustFlushObserver(o)&&e.observer.forceFlush(),this.runCustomHandlers(o.type,e,o)?o.preventDefault():s(e,o))};for(let s in handlers){let o=handlers[s];e.contentDOM.addEventListener(s,a=>{eventBelongsToEditor(e,a)&&r(o,a)},handlerOptions[s]),this.registeredEvents.push(s)}e.scrollDOM.addEventListener("mousedown",s=>{s.target==e.scrollDOM&&s.clientY>e.contentDOM.getBoundingClientRect().bottom&&r(handlers.mousedown,s)}),browser.chrome&&browser.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,r){var s;let o;this.customHandlers=[];for(let a of r)if(o=(s=a.update(e).spec)===null||s===void 0?void 0:s.domEventHandlers){this.customHandlers.push({plugin:a.value,handlers:o});for(let l in o)this.registeredEvents.indexOf(l)<0&&l!="scroll"&&(this.registeredEvents.push(l),e.contentDOM.addEventListener(l,c=>{eventBelongsToEditor(e,c)&&this.runCustomHandlers(l,e,c)&&c.preventDefault()}))}}runCustomHandlers(e,r,s){for(let o of this.customHandlers){let a=o.handlers[e];if(a)try{if(a.call(o.plugin,s,r)||s.defaultPrevented)return!0}catch(l){logException(r.state,l)}}return!1}runScrollHandlers(e,r){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let s of this.customHandlers){let o=s.handlers.scroll;if(o)try{o.call(s.plugin,r,e)}catch(a){logException(e.state,a)}}}keydown(e,r){if(this.lastKeyCode=r.keyCode,this.lastKeyTime=Date.now(),r.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(browser.android&&browser.chrome&&!r.synthetic&&(r.keyCode==13||r.keyCode==8))return e.observer.delayAndroidKey(r.key,r.keyCode),!0;let s;return browser.ios&&!r.synthetic&&!r.altKey&&!r.metaKey&&((s=PendingKeys.find(o=>o.keyCode==r.keyCode))&&!r.ctrlKey||EmacsyPendingKeys.indexOf(r.key)>-1&&r.ctrlKey&&!r.shiftKey)?(this.pendingIOSKey=s||r,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let r=this.pendingIOSKey;return r?(this.pendingIOSKey=void 0,dispatchKey(e.contentDOM,r.key,r.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:browser.safari&&!browser.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225];function dragScrollSpeed(n){return n*.7+8}class MouseSelection{constructor(e,r,s,o){this.view=e,this.style=s,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParent=scrollableParent(e.contentDOM);let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,r),this.dragMove=dragMovesSelection(e,r),this.dragging=isInPrimarySelection(e,r)&&getClickType(r)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var r;if(e.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=e);let s=0,o=0,a=((r=this.scrollParent)===null||r===void 0?void 0:r.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};e.clientX<=a.left?s=-dragScrollSpeed(a.left-e.clientX):e.clientX>=a.right&&(s=dragScrollSpeed(e.clientX-a.right)),e.clientY<=a.top?o=-dragScrollSpeed(a.top-e.clientY):e.clientY>=a.bottom&&(o=dragScrollSpeed(e.clientY-a.bottom)),this.setScrollSpeed(s,o)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,r){this.scrollSpeed={x:e,y:r},e||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(e){let r=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!r.eq(this.view.state.selection)||r.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(n,e){let r=n.state.facet(clickAddsSelectionRange);return r.length?r[0](e):browser.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(n,e){let r=n.state.facet(dragMovesSelection$1);return r.length?r[0](e):browser.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(n,e){let{main:r}=n.state.selection;if(r.empty)return!1;let s=getSelection(n.root);if(!s||s.rangeCount==0)return!0;let o=s.getRangeAt(0).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target,s;r!=n.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(s=ContentView.get(r))&&s.ignoreEvent(e))return!1;return!0}const handlers=Object.create(null),handlerOptions=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(n){let e=n.dom.parentNode;if(!e)return;let r=e.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{n.focus(),r.remove(),doPaste(n,r.value)},50)}function doPaste(n,e){let{state:r}=n,s,o=1,a=r.toText(e),l=a.lines==r.selection.ranges.length;if(lastLinewiseCopy!=null&&r.selection.ranges.every(u=>u.empty)&&lastLinewiseCopy==a.toString()){let u=-1;s=r.changeByRange(f=>{let d=r.doc.lineAt(f.from);if(d.from==u)return{range:f};u=d.from;let g=r.toText((l?a.line(o++).text:e)+r.lineBreak);return{changes:{from:d.from,insert:g},range:EditorSelection.cursor(f.from+g.length)}})}else l?s=r.changeByRange(u=>{let f=a.line(o++);return{changes:{from:u.from,to:u.to,insert:f.text},range:EditorSelection.cursor(u.from+f.length)}}):s=r.replaceSelection(a);n.dispatch(s,{userEvent:"input.paste",scrollIntoView:!0})}handlers.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27?n.inputState.lastEscPress=Date.now():modifierCodes.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)};handlers.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};handlers.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};handlerOptions.touchstart=handlerOptions.touchmove={passive:!0};handlers.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let r=null;for(let s of n.state.facet(mouseSelectionStyle))if(r=s(n,e),r)break;if(!r&&e.button==0&&(r=basicMouseSelection(n,e)),r){let s=n.root.activeElement!=n.contentDOM;n.inputState.startMouseSelection(new MouseSelection(n,e,r,s)),s&&n.observer.ignore(()=>focusPreventScroll(n.contentDOM)),n.inputState.mouseSelection&&n.inputState.mouseSelection.start(e)}};function rangeForClick(n,e,r,s){if(s==1)return EditorSelection.cursor(e,r);if(s==2)return groupAt(n.state,e,r);{let o=LineView.find(n.docView,e),a=n.state.doc.lineAt(o?o.posAtEnd:e),l=o?o.posAtStart:a.from,c=o?o.posAtEnd:a.to;return c<n.state.doc.length&&c==a.to&&c++,EditorSelection.range(l,c)}}let insideY=(n,e)=>n>=e.top&&n<=e.bottom,inside=(n,e,r)=>insideY(e,r)&&n>=r.left&&n<=r.right;function findPositionSide(n,e,r,s){let o=LineView.find(n.docView,e);if(!o)return 1;let a=e-o.posAtStart;if(a==0)return 1;if(a==o.length)return-1;let l=o.coordsAt(a,-1);if(l&&inside(r,s,l))return-1;let c=o.coordsAt(a,1);return c&&inside(r,s,c)?1:l&&insideY(s,l)?-1:1}function queryPos(n,e){let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:r,bias:findPositionSide(n,r,e.clientX,e.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(n){if(!BadMouseDetail)return n.detail;let e=lastMouseDown,r=lastMouseDownTime;return lastMouseDown=n,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||r>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(n,e){let r=queryPos(n,e),s=getClickType(e),o=n.state.selection;return{update(a){a.docChanged&&(r.pos=a.changes.mapPos(r.pos),o=o.map(a.changes))},get(a,l,c){let u=queryPos(n,a),f=rangeForClick(n,u.pos,u.bias,s);if(r.pos!=u.pos&&!l){let d=rangeForClick(n,r.pos,r.bias,s),g=Math.min(d.from,f.from),m=Math.max(d.to,f.to);f=g<f.from?EditorSelection.range(g,m):EditorSelection.range(m,g)}return l?o.replaceRange(o.main.extend(f.from,f.to)):c&&o.ranges.length>1&&o.ranges.some(d=>d.eq(f))?removeRange(o,f):c?o.addRange(f):EditorSelection.create([f])}}}function removeRange(n,e){for(let r=0;;r++)if(n.ranges[r].eq(e))return EditorSelection.create(n.ranges.slice(0,r).concat(n.ranges.slice(r+1)),n.mainIndex==r?0:n.mainIndex-(n.mainIndex>r?1:0))}handlers.dragstart=(n,e)=>{let{selection:{main:r}}=n.state,{mouseSelection:s}=n.inputState;s&&(s.dragging=r),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(r.from,r.to)),e.dataTransfer.effectAllowed="copyMove")};function dropText(n,e,r,s){if(!r)return;let o=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:a}=n.inputState,l=s&&a&&a.dragging&&a.dragMove?{from:a.dragging.from,to:a.dragging.to}:null,c={from:o,insert:r},u=n.state.changes(l?[l,c]:c);n.focus(),n.dispatch({changes:u,selection:{anchor:u.mapPos(o,-1),head:u.mapPos(o,1)},userEvent:l?"move.drop":"input.drop"})}handlers.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let r=e.dataTransfer.files;if(r&&r.length){e.preventDefault();let s=Array(r.length),o=0,a=()=>{++o==r.length&&dropText(n,e,s.filter(l=>l!=null).join(n.state.lineBreak),!1)};for(let l=0;l<r.length;l++){let c=new FileReader;c.onerror=a,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(s[l]=c.result),a()},c.readAsText(r[l])}}else dropText(n,e,e.dataTransfer.getData("Text"),!0)};handlers.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let r=brokenClipboardAPI?null:e.clipboardData;r?(doPaste(n,r.getData("text/plain")),e.preventDefault()):capturePaste(n)};function captureCopy(n,e){let r=n.dom.parentNode;if(!r)return;let s=r.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=e,s.focus(),s.selectionEnd=e.length,s.selectionStart=0,setTimeout(()=>{s.remove(),n.focus()},50)}function copiedRange(n){let e=[],r=[],s=!1;for(let o of n.selection.ranges)o.empty||(e.push(n.sliceDoc(o.from,o.to)),r.push(o));if(!e.length){let o=-1;for(let{from:a}of n.selection.ranges){let l=n.doc.lineAt(a);l.number>o&&(e.push(l.text),r.push({from:l.from,to:Math.min(n.doc.length,l.to+1)})),o=l.number}s=!0}return{text:e.join(n.lineBreak),ranges:r,linewise:s}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(n,e)=>{let{text:r,ranges:s,linewise:o}=copiedRange(n.state);if(!r&&!o)return;lastLinewiseCopy=o?r:null;let a=brokenClipboardAPI?null:e.clipboardData;a?(e.preventDefault(),a.clearData(),a.setData("text/plain",r)):captureCopy(n,r),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"})};const isFocusChange=Annotation.define();function focusChangeTransaction(n,e){let r=[];for(let s of n.facet(focusChangeEffect)){let o=s(n,e);o&&r.push(o)}return r?n.update({effects:r,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let r=focusChangeTransaction(n.state,e);r?n.dispatch(r):n.update([])}},10)}handlers.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),updateForFocusChange(n)};handlers.blur=n=>{n.observer.clearSelectionRange(),updateForFocusChange(n)};handlers.compositionstart=handlers.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)};handlers.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionFirstChange=null,browser.chrome&&browser.android&&n.observer.flushSoon(),setTimeout(()=>{n.inputState.composing<0&&n.docView.compositionDeco.size&&n.update([])},50)};handlers.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(n,e)=>{var r;let s;if(browser.chrome&&browser.android&&(s=PendingKeys.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let o=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,r){let s=this.doc.lineAt(r).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(s+=Math.max(0,Math.ceil((r-e-s*this.lineLength*.5)/this.lineLength))),this.lineHeight*s}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let r=!1;for(let s=0;s<e.length;s++){let o=e[s];o<0?s++:this.heightSamples[Math.floor(o*10)]||(r=!0,this.heightSamples[Math.floor(o*10)]=!0)}return r}refresh(e,r,s,o,a){let l=wrappingWhiteSpace.indexOf(e)>-1,c=Math.round(r)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=r,this.charWidth=s,this.lineLength=o,c){this.heightSamples={};for(let u=0;u<a.length;u++){let f=a[u];f<0?u++:this.heightSamples[Math.floor(f*10)]=!0}}return c}}class MeasuredHeights{constructor(e,r){this.from=e,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,r,s,o,a){this.from=e,this.length=r,this.top=s,this.height=o,this.type=a}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let r=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,r)}}var QueryType$1=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(e,r,s=2){this.length=e,this.height=r,this.flags=s}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,r){this.height!=r&&(Math.abs(this.height-r)>Epsilon&&(e.heightChanged=!0),this.height=r)}replace(e,r,s){return HeightMap.of(s)}decomposeLeft(e,r){r.push(this)}decomposeRight(e,r){r.push(this)}applyChanges(e,r,s,o){let a=this,l=s.doc;for(let c=o.length-1;c>=0;c--){let{fromA:u,toA:f,fromB:d,toB:g}=o[c],m=a.lineAt(u,QueryType$1.ByPosNoHeight,s.setDoc(r),0,0),_=m.to>=f?m:a.lineAt(f,QueryType$1.ByPosNoHeight,s,0,0);for(g+=_.to-f,f=_.to;c>0&&m.from<=o[c-1].toA;)u=o[c-1].fromA,d=o[c-1].fromB,c--,u<m.from&&(m=a.lineAt(u,QueryType$1.ByPosNoHeight,s,0,0));d+=m.from-u,u=m.from;let E=NodeBuilder.build(s.setDoc(l),e,d,g);a=a.replace(u,f,E)}return a.updateHeight(s,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(e.length==1)return e[0];let r=0,s=e.length,o=0,a=0;for(;;)if(r==s)if(o>a*2){let c=e[r-1];c.break?e.splice(--r,1,c.left,null,c.right):e.splice(--r,1,c.left,c.right),s+=1+c.break,o-=c.size}else if(a>o*2){let c=e[s];c.break?e.splice(s,1,c.left,null,c.right):e.splice(s,1,c.left,c.right),s+=2+c.break,a-=c.size}else break;else if(o<a){let c=e[r++];c&&(o+=c.size)}else{let c=e[--s];c&&(a+=c.size)}let l=0;return e[r-1]==null?(l=1,r--):e[r]==null&&(l=1,s++),new HeightMapBranch(HeightMap.of(e.slice(0,r)),l,HeightMap.of(e.slice(s)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,r,s){super(e,r),this.type=s}blockAt(e,r,s,o){return new BlockInfo(o,this.length,s,this.height,this.type)}lineAt(e,r,s,o,a){return this.blockAt(0,s,o,a)}forEachLine(e,r,s,o,a,l){e<=a+this.length&&r>=a&&l(this.blockAt(0,s,o,a))}updateHeight(e,r=0,s=!1,o){return o&&o.from<=r&&o.more&&this.setHeight(e,o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,r){super(e,r,BlockType.Text),this.collapsed=0,this.widgetHeight=0}replace(e,r,s){let o=s[0];return s.length==1&&(o instanceof HeightMapText||o instanceof HeightMapGap&&o.flags&4)&&Math.abs(this.length-o.length)<10?(o instanceof HeightMapGap?o=new HeightMapText(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):HeightMap.of(s)}updateHeight(e,r=0,s=!1,o){return o&&o.from<=r&&o.more?this.setHeight(e,o.heights[o.index++]):(s||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,r){let s=e.doc.lineAt(r).number,o=e.doc.lineAt(r+this.length).number,a=o-s+1,l,c=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*a);l=u/a,c=(this.height-u)/(this.length-a-1)}else l=this.height/a;return{firstLine:s,lastLine:o,perLine:l,perChar:c}}blockAt(e,r,s,o){let{firstLine:a,lastLine:l,perLine:c,perChar:u}=this.heightMetrics(r,o);if(r.lineWrapping){let f=o+Math.round(Math.max(0,Math.min(1,(e-s)/this.height))*this.length),d=r.doc.lineAt(f),g=c+d.length*u,m=Math.max(s,e-g/2);return new BlockInfo(d.from,d.length,m,g,BlockType.Text)}else{let f=Math.max(0,Math.min(l-a,Math.floor((e-s)/c))),{from:d,length:g}=r.doc.line(a+f);return new BlockInfo(d,g,s+c*f,c,BlockType.Text)}}lineAt(e,r,s,o,a){if(r==QueryType$1.ByHeight)return this.blockAt(e,s,o,a);if(r==QueryType$1.ByPosNoHeight){let{from:_,to:E}=s.doc.lineAt(e);return new BlockInfo(_,E-_,0,0,BlockType.Text)}let{firstLine:l,perLine:c,perChar:u}=this.heightMetrics(s,a),f=s.doc.lineAt(e),d=c+f.length*u,g=f.number-l,m=o+c*g+u*(f.from-a-g);return new BlockInfo(f.from,f.length,Math.max(o,Math.min(m,o+this.height-d)),d,BlockType.Text)}forEachLine(e,r,s,o,a,l){e=Math.max(e,a),r=Math.min(r,a+this.length);let{firstLine:c,perLine:u,perChar:f}=this.heightMetrics(s,a);for(let d=e,g=o;d<=r;){let m=s.doc.lineAt(d);if(d==e){let E=m.number-c;g+=u*E+f*(e-a-E)}let _=u+f*m.length;l(new BlockInfo(m.from,m.length,g,_,BlockType.Text)),g+=_,d=m.to+1}}replace(e,r,s){let o=this.length-r;if(o>0){let a=s[s.length-1];a instanceof HeightMapGap?s[s.length-1]=new HeightMapGap(a.length+o):s.push(null,new HeightMapGap(o-1))}if(e>0){let a=s[0];a instanceof HeightMapGap?s[0]=new HeightMapGap(e+a.length):s.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(s)}decomposeLeft(e,r){r.push(new HeightMapGap(e-1),null)}decomposeRight(e,r){r.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,r=0,s=!1,o){let a=r+this.length;if(o&&o.from<=r+this.length&&o.more){let l=[],c=Math.max(r,o.from),u=-1;for(o.from>r&&l.push(new HeightMapGap(o.from-r-1).updateHeight(e,r));c<=a&&o.more;){let d=e.doc.lineAt(c).length;l.length&&l.push(null);let g=o.heights[o.index++];u==-1?u=g:Math.abs(g-u)>=Epsilon&&(u=-2);let m=new HeightMapText(d,g);m.outdated=!1,l.push(m),c+=d+1}c<=a&&l.push(null,new HeightMapGap(a-c).updateHeight(e,c));let f=HeightMap.of(l);return(u<0||Math.abs(f.height-this.height)>=Epsilon||Math.abs(u-this.heightMetrics(e,r).perLine)>=Epsilon)&&(e.heightChanged=!0),f}else(s||this.outdated)&&(this.setHeight(e,e.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,r,s){super(e.length+r+s.length,e.height+s.height,r|(e.outdated||s.outdated?2:0)),this.left=e,this.right=s,this.size=e.size+s.size}get break(){return this.flags&1}blockAt(e,r,s,o){let a=s+this.left.height;return e<a?this.left.blockAt(e,r,s,o):this.right.blockAt(e,r,a,o+this.left.length+this.break)}lineAt(e,r,s,o,a){let l=o+this.left.height,c=a+this.left.length+this.break,u=r==QueryType$1.ByHeight?e<l:e<c,f=u?this.left.lineAt(e,r,s,o,a):this.right.lineAt(e,r,s,l,c);if(this.break||(u?f.to<c:f.from>c))return f;let d=r==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return u?f.join(this.right.lineAt(c,d,s,l,c)):this.left.lineAt(c,d,s,o,a).join(f)}forEachLine(e,r,s,o,a,l){let c=o+this.left.height,u=a+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,r,s,o,a,l),r>=u&&this.right.forEachLine(e,r,s,c,u,l);else{let f=this.lineAt(u,QueryType$1.ByPos,s,o,a);e<f.from&&this.left.forEachLine(e,f.from-1,s,o,a,l),f.to>=e&&f.from<=r&&l(f),r>f.to&&this.right.forEachLine(f.to+1,r,s,c,u,l)}}replace(e,r,s){let o=this.left.length+this.break;if(r<o)return this.balanced(this.left.replace(e,r,s),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,r-o,s));let a=[];e>0&&this.decomposeLeft(e,a);let l=a.length;for(let c of s)a.push(c);if(e>0&&mergeGaps(a,l-1),r<this.length){let c=a.length;this.decomposeRight(r,a),mergeGaps(a,c)}return HeightMap.of(a)}decomposeLeft(e,r){let s=this.left.length;if(e<=s)return this.left.decomposeLeft(e,r);r.push(this.left),this.break&&(s++,e>=s&&r.push(null)),e>s&&this.right.decomposeLeft(e-s,r)}decomposeRight(e,r){let s=this.left.length,o=s+this.break;if(e>=o)return this.right.decomposeRight(e-o,r);e<s&&this.left.decomposeRight(e,r),this.break&&e<o&&r.push(null),r.push(this.right)}balanced(e,r){return e.size>2*r.size||r.size>2*e.size?HeightMap.of(this.break?[e,null,r]:[e,r]):(this.left=e,this.right=r,this.height=e.height+r.height,this.outdated=e.outdated||r.outdated,this.size=e.size+r.size,this.length=e.length+this.break+r.length,this)}updateHeight(e,r=0,s=!1,o){let{left:a,right:l}=this,c=r+a.length+this.break,u=null;return o&&o.from<=r+a.length&&o.more?u=a=a.updateHeight(e,r,s,o):a.updateHeight(e,r,s),o&&o.from<=c+l.length&&o.more?u=l=l.updateHeight(e,c,s,o):l.updateHeight(e,c,s),u?this.balanced(a,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(n,e){let r,s;n[e]==null&&(r=n[e-1])instanceof HeightMapGap&&(s=n[e+1])instanceof HeightMapGap&&n.splice(e-1,3,new HeightMapGap(r.length+1+s.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,r){this.pos=e,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,r){if(this.lineStart>-1){let s=Math.min(r,this.lineEnd),o=this.nodes[this.nodes.length-1];o instanceof HeightMapText?o.length+=s-this.pos:(s>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(s-this.pos,-1)),this.writtenTo=s,r>s&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(e,r,s){if(e<r||s.heightRelevant){let o=s.widget?s.widget.estimatedHeight:0;o<0&&(o=this.oracle.lineHeight);let a=r-e;s.block?this.addBlock(new HeightMapBlock(a,o,s.type)):(a||o>=relevantWidgetHeight)&&this.addLineDeco(o,a)}else r>e&&this.span(e,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=r,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,r){let s=new HeightMapGap(r-e);return this.oracle.doc.lineAt(e).to==r&&(s.flags|=4),s}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let r=new HeightMapText(0,-1);return this.nodes.push(r),r}addBlock(e){this.enterLine(),e.type==BlockType.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=BlockType.WidgetBefore&&(this.covering=e)}addLineDeco(e,r){let s=this.ensureLine();s.length+=r,s.collapsed+=r,s.widgetHeight=Math.max(s.widgetHeight,e),this.writtenTo=this.pos=this.pos+r}finish(e){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let s=e;for(let o of this.nodes)o instanceof HeightMapText&&o.updateHeight(this.oracle,s),s+=o?o.length:1;return this.nodes}static build(e,r,s,o){let a=new NodeBuilder(s,e);return RangeSet.spans(r,s,o,a,0),a.finish(s)}}function heightRelevantDecoChanges(n,e,r){let s=new DecorationComparator;return RangeSet.compare(n,e,r,s,0),s.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,r,s,o){(e<r||s&&s.heightRelevant||o&&o.heightRelevant)&&addRange(e,r,this.changes,5)}}function visiblePixelRange(n,e){let r=n.getBoundingClientRect(),s=n.ownerDocument,o=s.defaultView||window,a=Math.max(0,r.left),l=Math.min(o.innerWidth,r.right),c=Math.max(0,r.top),u=Math.min(o.innerHeight,r.bottom);for(let f=n.parentNode;f&&f!=s.body;)if(f.nodeType==1){let d=f,g=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&g.overflow!="visible"){let m=d.getBoundingClientRect();a=Math.max(a,m.left),l=Math.min(l,m.right),c=Math.max(c,m.top),u=f==n.parentNode?m.bottom:Math.min(u,m.bottom)}f=g.position=="absolute"||g.position=="fixed"?d.offsetParent:d.parentNode}else if(f.nodeType==11)f=f.host;else break;return{left:a-r.left,right:Math.max(a,l)-r.left,top:c-(r.top+e),bottom:Math.max(c,u)-(r.top+e)}}function fullPixelRange(n,e){let r=n.getBoundingClientRect();return{left:0,right:r.right-r.left,top:e,bottom:r.bottom-(r.top+e)}}class LineGap{constructor(e,r,s){this.from=e,this.to=r,this.size=s}static same(e,r){if(e.length!=r.length)return!1;for(let s=0;s<e.length;s++){let o=e[s],a=r[s];if(o.from!=a.from||o.to!=a.to||o.size!=a.size)return!1}return!0}draw(e){return Decoration.replace({widget:new LineGapWidget(this.size,e)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,r){super(),this.size=e,this.vertical=r}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=e.facet(contentAttributes).some(s=>typeof s!="function"&&s.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(r),this.stateDeco=e.facet(decorations).filter(s=>typeof s!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(s=>s.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:r}=this.state.selection;for(let s=0;s<=1;s++){let o=s?r.head:r.anchor;if(!e.some(({from:a,to:l})=>o>=a&&o<=l)){let{from:a,to:l}=this.lineBlockAt(o);e.push(new Viewport(a,l))}}this.viewports=e.sort((s,o)=>s.from-o.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:scaleBlock(e,this.scaler))})}update(e,r=null){this.state=e.state;let s=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(f=>typeof f!="function");let o=e.changedRanges,a=ChangedRange.extendWithRanges(o,heightRelevantDecoChanges(s,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),l=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=l&&(e.flags|=2);let c=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(r&&(r.range.head<c.from||r.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,r));let u=!e.changes.empty||e.flags&2||c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let r=e.contentDOM,s=window.getComputedStyle(r),o=this.heightOracle,a=s.whiteSpace;this.defaultTextDirection=s.direction=="rtl"?Direction.RTL:Direction.LTR;let l=this.heightOracle.mustRefreshForWrapping(a),c=r.getBoundingClientRect(),u=l||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let f=0,d=0,g=parseInt(s.paddingTop)||0,m=parseInt(s.paddingBottom)||0;(this.paddingTop!=g||this.paddingBottom!=m)&&(this.paddingTop=g,this.paddingBottom=m,f|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,f|=8);let _=(this.printing?fullPixelRange:visiblePixelRange)(r,this.paddingTop),E=_.top-this.pixelViewport.top,A=_.bottom-this.pixelViewport.bottom;this.pixelViewport=_;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(u=!0)),!this.inView&&!this.scrollTarget)return 0;let v=c.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,f|=8),u){let V=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(V)&&(l=!0),l||o.lineWrapping&&Math.abs(v-this.contentDOMWidth)>o.charWidth){let{lineHeight:R,charWidth:L}=e.docView.measureTextSize();l=R>0&&o.refresh(a,R,L,v/L,V),l&&(e.docView.minWidth=0,f|=8)}E>0&&A>0?d=Math.max(E,A):E<0&&A<0&&(d=Math.min(E,A)),o.heightChanged=!1;for(let R of this.viewports){let L=R.from==this.viewport.from?V:e.docView.measureVisibleLineHeights(R);this.heightMap=(l?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,l,new MeasuredHeights(R.from,L))}o.heightChanged&&(f|=2)}let M=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return M&&(this.viewport=this.getViewport(d,this.scrollTarget)),this.updateForViewport(),(f&2||M)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),f|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),f}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,r){let s=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,a=this.heightOracle,{visibleTop:l,visibleBottom:c}=this,u=new Viewport(o.lineAt(l-s*1e3,QueryType$1.ByHeight,a,0,0).from,o.lineAt(c+(1-s)*1e3,QueryType$1.ByHeight,a,0,0).to);if(r){let{head:f}=r.range;if(f<u.from||f>u.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=o.lineAt(f,QueryType$1.ByPos,a,0,0),m;r.y=="center"?m=(g.top+g.bottom)/2-d/2:r.y=="start"||r.y=="nearest"&&f<u.from?m=g.top:m=g.bottom-d,u=new Viewport(o.lineAt(m-1e3/2,QueryType$1.ByHeight,a,0,0).from,o.lineAt(m+d+1e3/2,QueryType$1.ByHeight,a,0,0).to)}}return u}mapViewport(e,r){let s=r.mapPos(e.from,-1),o=r.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(s,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:r},s=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(r,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:c}=this;return(e==0||o<=l-Math.max(10,Math.min(-s,250)))&&(r==this.state.doc.length||a>=c+Math.max(10,Math.min(s,250)))&&o>l-2*1e3&&a<c+2*1e3}mapLineGaps(e,r){if(!e.length||r.empty)return e;let s=[];for(let o of e)r.touchesRange(o.from,o.to)||s.push(new LineGap(r.mapPos(o.from),r.mapPos(o.to),o.size));return s}ensureLineGaps(e,r){let s=this.heightOracle.lineWrapping,o=s?1e4:2e3,a=o>>1,l=o<<1;if(this.defaultTextDirection!=Direction.LTR&&!s)return[];let c=[],u=(f,d,g,m)=>{if(d-f<a)return;let _=this.state.selection.main,E=[_.from];_.empty||E.push(_.to);for(let b of E)if(b>f&&b<d){u(f,b-10,g,m),u(b+10,d,g,m);return}let A=find(e,b=>b.from>=g.from&&b.to<=g.to&&Math.abs(b.from-f)<a&&Math.abs(b.to-d)<a&&!E.some(v=>b.from<v&&b.to>v));if(!A){if(d<g.to&&r&&s&&r.visibleRanges.some(b=>b.from<=d&&b.to>=d)){let b=r.moveToLineBoundary(EditorSelection.cursor(d),!1,!0).head;b>f&&(d=b)}A=new LineGap(f,d,this.gapSize(g,f,d,m))}c.push(A)};for(let f of this.viewportLines){if(f.length<l)continue;let d=lineStructure(f.from,f.to,this.stateDeco);if(d.total<l)continue;let g=this.scrollTarget?this.scrollTarget.range.head:null,m,_;if(s){let E=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,A,b;if(g!=null){let v=findFraction(d,g),M=((this.visibleBottom-this.visibleTop)/2+E)/f.height;A=v-M,b=v+M}else A=(this.visibleTop-f.top-E)/f.height,b=(this.visibleBottom-f.top+E)/f.height;m=findPosition(d,A),_=findPosition(d,b)}else{let E=d.total*this.heightOracle.charWidth,A=o*this.heightOracle.charWidth,b,v;if(g!=null){let M=findFraction(d,g),V=((this.pixelViewport.right-this.pixelViewport.left)/2+A)/E;b=M-V,v=M+V}else b=(this.pixelViewport.left-A)/E,v=(this.pixelViewport.right+A)/E;m=findPosition(d,b),_=findPosition(d,v)}m>f.from&&u(f.from,m,f,d),_<f.to&&u(_,f.to,f,d)}return c}gapSize(e,r,s,o){let a=findFraction(o,s)-findFraction(o,r);return this.heightOracle.lineWrapping?e.height*a:o.total*this.heightOracle.charWidth*a}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(r=>r.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let r=[];RangeSet.spans(e,this.viewport.from,this.viewport.to,{span(o,a){r.push({from:o,to:a})},point(){}},20);let s=r.length!=this.visibleRanges.length||this.visibleRanges.some((o,a)=>o.from!=r[a].from||o.to!=r[a].to);return this.visibleRanges=r,s?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(r=>r.from<=e&&r.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,r){this.from=e,this.to=r}}function lineStructure(n,e,r){let s=[],o=n,a=0;return RangeSet.spans(r,n,e,{span(){},point(l,c){l>o&&(s.push({from:o,to:l}),a+=l-o),o=c}},20),o<e&&(s.push({from:o,to:e}),a+=e-o),{total:a,ranges:s}}function findPosition({total:n,ranges:e},r){if(r<=0)return e[0].from;if(r>=1)return e[e.length-1].to;let s=Math.floor(n*r);for(let o=0;;o++){let{from:a,to:l}=e[o],c=l-a;if(s<=c)return a+s;s-=c}}function findFraction(n,e){let r=0;for(let{from:s,to:o}of n.ranges){if(e<=o){r+=e-s;break}r+=o-s}return r/n.total}function find(n,e){for(let r of n)if(e(r))return r}const IdScaler={toDOM(n){return n},fromDOM(n){return n},scale:1};class BigScaler{constructor(e,r,s){let o=0,a=0,l=0;this.viewports=s.map(({from:c,to:u})=>{let f=r.lineAt(c,QueryType$1.ByPos,e,0,0).top,d=r.lineAt(u,QueryType$1.ByPos,e,0,0).bottom;return o+=d-f,{from:c,to:u,top:f,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-o)/(r.height-o);for(let c of this.viewports)c.domTop=l+(c.top-a)*this.scale,l=c.domBottom=c.domTop+(c.bottom-c.top),a=c.bottom}toDOM(e){for(let r=0,s=0,o=0;;r++){let a=r<this.viewports.length?this.viewports[r]:null;if(!a||e<a.top)return o+(e-s)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);s=a.bottom,o=a.domBottom}}fromDOM(e){for(let r=0,s=0,o=0;;r++){let a=r<this.viewports.length?this.viewports[r]:null;if(!a||e<a.domTop)return s+(e-o)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);s=a.bottom,o=a.domBottom}}}function scaleBlock(n,e){if(e.scale==1)return n;let r=e.toDOM(n.top),s=e.toDOM(n.bottom);return new BlockInfo(n.from,n.length,r,s-r,Array.isArray(n.type)?n.type.map(o=>scaleBlock(o,e)):n.type)}const theme=Facet.define({combine:n=>n.join(" ")}),darkTheme=Facet.define({combine:n=>n.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(n,e,r){return new StyleModule(e,{finish(s){return/&/.test(s)?s.replace(/&\w*/,o=>{if(o=="&")return n;if(!r||!r[o])throw new RangeError(`Unsupported selector: ${o}`);return r[o]}):n+" "+s}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs);class DOMChange{constructor(e,r,s,o){this.typeOver=o,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=e.docView.domBoundsAround(r,s,0))){let c=a||l?[]:selectionPoints(e),u=new DOMReader(c,e.state);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=selectionFromPoints(c,this.bounds.from)}else{let c=e.observer.selectionRange,u=a&&a.node==c.focusNode&&a.offset==c.focusOffset||!contains(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),f=l&&l.node==c.anchorNode&&l.offset==c.anchorOffset||!contains(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset);this.newSel=EditorSelection.single(f,u)}}}function applyDOMChange(n,e){let r,{newSel:s}=e,o=n.state.selection.main;if(e.bounds){let{from:a,to:l}=e.bounds,c=o.from,u=null;(n.inputState.lastKeyCode===8&&n.inputState.lastKeyTime>Date.now()-100||browser.android&&e.text.length<l-a)&&(c=o.to,u="end");let f=findDiff(n.state.doc.sliceString(a,l,LineBreakPlaceholder),e.text,c-a,u);f&&(browser.chrome&&n.inputState.lastKeyCode==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&f.toB--,r={from:a+f.from,to:a+f.toA,insert:Text.of(e.text.slice(f.from,f.toB).split(LineBreakPlaceholder))})}else s&&(!n.hasFocus&&n.state.facet(editable)||s.main.eq(o))&&(s=null);if(!r&&!s)return!1;if(!r&&e.typeOver&&!o.empty&&s&&s.main.empty?r={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,o.to)}:r&&r.from>=o.from&&r.to<=o.to&&(r.from!=o.from||r.to!=o.to)&&o.to-o.from-(r.to-r.from)<=4?r={from:o.from,to:o.to,insert:n.state.doc.slice(o.from,r.from).append(r.insert).append(n.state.doc.slice(r.to,o.to))}:(browser.mac||browser.android)&&r&&r.from==r.to&&r.from==o.head-1&&/^\. ?$/.test(r.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(s&&r.insert.length==2&&(s=EditorSelection.single(s.main.anchor-1,s.main.head-1)),r={from:o.from,to:o.to,insert:Text.of([" "])}):browser.chrome&&r&&r.from==r.to&&r.from==o.head&&r.insert.toString()==`
 `&&n.lineWrapping&&(s&&(s=EditorSelection.single(s.main.anchor-1,s.main.head-1)),r={from:o.from,to:o.to,insert:Text.of([" "])}),r){let a=n.state;if(browser.ios&&n.inputState.flushIOSKey(n)||browser.android&&(r.from==o.from&&r.to==o.to&&r.insert.length==1&&r.insert.lines==2&&dispatchKey(n.contentDOM,"Enter",13)||r.from==o.from-1&&r.to==o.to&&r.insert.length==0&&dispatchKey(n.contentDOM,"Backspace",8)||r.from==o.from&&r.to==o.to+1&&r.insert.length==0&&dispatchKey(n.contentDOM,"Delete",46)))return!0;let l=r.insert.toString();if(n.state.facet(inputHandler$1).some(f=>f(n,r.from,r.to,l)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let c;if(r.from>=o.from&&r.to<=o.to&&r.to-r.from>=(o.to-o.from)/3&&(!s||s.main.empty&&s.main.from==r.from+r.insert.length)&&n.inputState.composing<0){let f=o.from<r.from?a.sliceDoc(o.from,r.from):"",d=o.to>r.to?a.sliceDoc(r.to,o.to):"";c=a.replaceSelection(n.state.toText(f+r.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let f=a.changes(r),d=s&&!a.selection.main.eq(s.main)&&s.main.to<=f.newLength?s.main:void 0;if(a.selection.ranges.length>1&&n.inputState.composing>=0&&r.to<=o.to&&r.to>=o.to-10){let g=n.state.sliceDoc(r.from,r.to),m=compositionSurroundingNode(n)||n.state.doc.lineAt(o.head),_=o.to-r.to,E=o.to-o.from;c=a.changeByRange(A=>{if(A.from==o.from&&A.to==o.to)return{changes:f,range:d||A.map(f)};let b=A.to-_,v=b-g.length;if(A.to-A.from!=E||n.state.sliceDoc(v,b)!=g||m&&A.to>=m.from&&A.from<=m.to)return{range:A};let M=a.changes({from:v,to:b,insert:r.insert}),V=A.to-o.to;return{changes:M,range:d?EditorSelection.range(Math.max(0,d.anchor+V),Math.max(0,d.head+V)):A.map(M)}})}else c={changes:f,selection:d&&a.selection.replaceRange(d)}}let u="input.type";return n.composing&&(u+=".compose",n.inputState.compositionFirstChange&&(u+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(c,{scrollIntoView:!0,userEvent:u}),!0}else if(s&&!s.main.eq(o)){let a=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:s,scrollIntoView:a,userEvent:l}),!0}else return!1}function findDiff(n,e,r,s){let o=Math.min(n.length,e.length),a=0;for(;a<o&&n.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==o&&n.length==e.length)return null;let l=n.length,c=e.length;for(;l>0&&c>0&&n.charCodeAt(l-1)==e.charCodeAt(c-1);)l--,c--;if(s=="end"){let u=Math.max(0,a-Math.min(l,c));r-=l+u-a}if(l<a&&n.length<e.length){let u=r<=a&&r>=l?a-r:0;a-=u,c=a+(c-l),l=a}else if(c<a){let u=r<=a&&r>=c?a-r:0;a-=u,l=a+(l-c),c=a}return{from:a,toA:l,toB:c}}function selectionPoints(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:r,anchorOffset:s,focusNode:o,focusOffset:a}=n.observer.selectionRange;return r&&(e.push(new DOMPoint(r,s)),(o!=r||a!=s)&&e.push(new DOMPoint(o,a))),e}function selectionFromPoints(n,e){if(n.length==0)return null;let r=n[0].pos,s=n.length==2?n[1].pos:r;return r>-1&&s>-1?EditorSelection.single(r+e,s+e):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(r=>{for(let s of r)this.queue.push(s);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((r,s)=>r!=e[s]))){this.gapIntersection.disconnect();for(let r of e)this.gapIntersection.observe(r);this.gaps=e}}onSelectionChange(e){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:s}=this,o=this.selectionRange;if(s.state.facet(editable)?s.root.activeElement!=this.dom:!hasSelection(s.dom,o))return;let a=o.anchorNode&&s.docView.nearest(o.anchorNode);if(a&&a.ignoreEvent(e)){r||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!s.state.selection.main.empty&&o.focusNode&&isEquivalentPosition(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,r=browser.safari&&e.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection(e.root);if(!r||this.selectionRange.eq(r))return!1;let s=hasSelection(this.dom,r);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,r){this.selectionRange.set(e.node,e.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,r=null;for(let s=this.dom;s;)if(s.nodeType==1)!r&&e<this.scrollTargets.length&&this.scrollTargets[e]==s?e++:r||(r=this.scrollTargets.slice(0,e)),r&&r.push(s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;if(e<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,e)),r){for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);for(let s of this.scrollTargets=r)s.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,r){var s;if(!this.delayedAndroidKey){let o=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),!this.flush()&&a.force&&dispatchKey(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((s=this.delayedAndroidKey)===null||s===void 0)&&s.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let a of this.observer.takeRecords())e.push(a);e.length&&(this.queue=[]);let r=-1,s=-1,o=!1;for(let a of e){let l=this.readMutation(a);l&&(l.typeOver&&(o=!0),r==-1?{from:r,to:s}=l:(r=Math.min(l.from,r),s=Math.max(l.to,s)))}return{from:r,to:s,typeOver:o}}readChange(){let{from:e,to:r,typeOver:s}=this.processRecords(),o=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);return e<0&&!o?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new DOMChange(this.view,e,r,s))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let r=this.readChange();if(!r)return!1;let s=this.view.state,o=applyDOMChange(this.view,r);return this.view.state==s&&this.view.update([]),o}readMutation(e){let r=this.view.docView.nearest(e.target);if(!r||r.ignoreMutation(e))return null;if(r.markDirty(e.type=="attributes"),e.type=="attributes"&&(r.dirty|=4),e.type=="childList"){let s=findChild(r,e.previousSibling||e.target.previousSibling,-1),o=findChild(r,e.nextSibling||e.target.nextSibling,1);return{from:s?r.posAfter(s):r.posAtStart,to:o?r.posBefore(o):r.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,r,s,o;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(s=this.resizeScroll)===null||s===void 0||s.disconnect(),(o=this.resizeContent)===null||o===void 0||o.disconnect();for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(n,e,r){for(;e;){let s=ContentView.get(e);if(s&&s.parent==n)return s;let o=e.parentNode;e=o!=n.dom?o:r>0?e.nextSibling:e.previousSibling}return null}function safariSelectionRangeHack(n){let e=null;function r(u){u.preventDefault(),u.stopImmediatePropagation(),e=u.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),!e)return null;let s=e.startContainer,o=e.startOffset,a=e.endContainer,l=e.endOffset,c=n.docView.domAtPos(n.state.selection.main.anchor);return isEquivalentPosition(c.node,c.offset,a,l)&&([s,o,a,l]=[a,l,s,o]),{anchorNode:s,anchorOffset:o,focusNode:a,focusOffset:l}}class EditorView{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(r=>this.update([r])),this.dispatch=this.dispatch.bind(this),this._root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),this.plugins=this.state.facet(viewPlugin).map(r=>new PluginInstance(r));for(let r of this.plugins)r.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Transaction?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,s=!1,o,a=this.state;for(let m of e){if(m.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=m.state}if(this.destroyed){this.viewState.state=a;return}let l=this.hasFocus,c=0,u=null;e.some(m=>m.annotation(isFocusChange))?(this.inputState.notifiedFocused=l,c=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,u=focusChangeTransaction(a,l),u||(c=1));let f=this.observer.delayedAndroidKey,d=null;if(f?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(d=null)):this.observer.clear(),a.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(a);o=ViewUpdate.create(this,a,e),o.flags|=c;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(g&&(g=g.map(m.changes)),m.scrollIntoView){let{main:_}=m.state.selection;g=new ScrollTarget(_.empty?_:EditorSelection.cursor(_.head,_.head>_.anchor?-1:1))}for(let _ of m.effects)_.is(scrollIntoView$1)&&(g=_.value)}this.viewState.update(o,g),this.bidiCache=CachedOrder.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),r=this.docView.update(o),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(theme)!=o.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(r||s||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!o.empty)for(let m of this.state.facet(updateListener))m(o);(u||d)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),d&&!applyDOMChange(this,d)&&f.force&&dispatchKey(this.contentDOM,f.key,f.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let r=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map(s=>new PluginInstance(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView=new DocView(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(e){let r=e.startState.facet(viewPlugin),s=e.state.facet(viewPlugin);if(r!=s){let o=[];for(let a of s){let l=r.indexOf(a);if(l<0)o.push(new PluginInstance(a));else{let c=this.plugins[l];c.mustUpdate=e,o.push(c)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=o,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let o of this.plugins)o.mustUpdate=e;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let r=null,{scrollHeight:s,scrollTop:o,clientHeight:a}=this.scrollDOM,l=o>s-a-4?s:o;try{for(let c=0;;c++){this.updateState=1;let u=this.viewport,f=this.viewState.lineBlockAtHeight(l),d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let g=[];d&4||([this.measureRequests,g]=[g,this.measureRequests]);let m=g.map(b=>{try{return b.read(this)}catch(v){return logException(this.state,v),BadMeasure}}),_=ViewUpdate.create(this,this.state,[]),E=!1,A=!1;_.flags|=d,r?r.flags|=d:r=_,this.updateState=2,_.empty||(this.updatePlugins(_),this.inputState.update(_),this.updateAttrs(),E=this.docView.update(_));for(let b=0;b<g.length;b++)if(m[b]!=BadMeasure)try{let v=g[b];v.write&&v.write(m[b],this)}catch(v){logException(this.state,v)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,A=!0;else{let b=this.viewState.lineBlockAt(f.from).top-f.top;(b>1||b<-1)&&(this.scrollDOM.scrollTop+=b,A=!0)}if(E&&this.docView.updateSelection(!0),this.viewport.from==u.from&&this.viewport.to==u.to&&!A&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let c of this.state.facet(updateListener))c(r)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,r);let s=this.observer.ignore(()=>{let o=updateAttrs(this.contentDOM,this.contentAttrs,r),a=updateAttrs(this.dom,this.editorAttrs,e);return o||a});return this.editorAttrs=e,this.contentAttrs=r,s}showAnnouncements(e){let r=!0;for(let s of e)for(let o of s.effects)if(o.is(EditorView.announce)){r&&(this.announceDOM.textContent=""),r=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(styleModule),StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===e.key){this.measureRequests[r]=e;return}}this.measureRequests.push(e)}}plugin(e){let r=this.pluginMap.get(e);return(r===void 0||r&&r.spec!=e)&&this.pluginMap.set(e,r=this.plugins.find(s=>s.spec==e)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,r,s){return skipAtoms(this,e,moveByChar(this,e,r,s))}moveByGroup(e,r){return skipAtoms(this,e,moveByChar(this,e,r,s=>byGroup(this,e.head,s)))}moveToLineBoundary(e,r,s=!0){return moveToLineBoundary(this,e,r,s)}moveVertically(e,r,s){return skipAtoms(this,e,moveVertically(this,e,r,s))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,r=0){return this.docView.posFromDOM(e,r)}posAtCoords(e,r=!0){return this.readMeasured(),posAtCoords(this,e,r)}coordsAtPos(e,r=1){this.readMeasured();let s=this.docView.coordsAt(e,r);if(!s||s.left==s.right)return s;let o=this.state.doc.lineAt(e),a=this.bidiSpans(o),l=a[BidiSpan.find(a,e-o.from,-1,r)];return flattenRect(s,l.dir==Direction.LTR==r>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let r=this.textDirectionAt(e.from);for(let o of this.bidiCache)if(o.from==e.from&&o.dir==r)return o.order;let s=computeOrder(e.text,r);return this.bidiCache.push(new CachedOrder(e.from,e.to,r,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,r={}){return scrollIntoView$1.of(new ScrollTarget(typeof e=="number"?EditorSelection.cursor(e):e,r.y,r.x,r.yMargin,r.xMargin))}static domEventHandlers(e){return ViewPlugin.define(()=>({}),{eventHandlers:e})}static theme(e,r){let s=StyleModule.newName(),o=[theme.of(s),styleModule.of(buildTheme(`.${s}`,e))];return r&&r.dark&&o.push(darkTheme.of(!0)),o}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var r;let s=e.querySelector(".cm-content"),o=s&&ContentView.get(s)||ContentView.get(e);return((r=o==null?void 0:o.rootView)===null||r===void 0?void 0:r.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.atomicRanges=atomicRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,r,s,o){this.from=e,this.to=r,this.dir=s,this.order=o}static update(e,r){if(r.empty)return e;let s=[],o=e.length?e[e.length-1].dir:Direction.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let l=e[a];l.dir==o&&!r.touchesRange(l.from,l.to)&&s.push(new CachedOrder(r.mapPos(l.from,1),r.mapPos(l.to,-1),l.dir,l.order))}return s}}function attrsFromFacet(n,e,r){for(let s=n.state.facet(e),o=s.length-1;o>=0;o--){let a=s[o],l=typeof a=="function"?a(n):a;l&&combineAttrs(l,r)}return r}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(n,e){const r=n.split(/-(?!$)/);let s=r[r.length-1];s=="Space"&&(s=" ");let o,a,l,c;for(let u=0;u<r.length-1;++u){const f=r[u];if(/^(cmd|meta|m)$/i.test(f))c=!0;else if(/^a(lt)?$/i.test(f))o=!0;else if(/^(c|ctrl|control)$/i.test(f))a=!0;else if(/^s(hift)?$/i.test(f))l=!0;else if(/^mod$/i.test(f))e=="mac"?c=!0:a=!0;else throw new Error("Unrecognized modifier name: "+f)}return o&&(s="Alt-"+s),a&&(s="Ctrl-"+s),c&&(s="Meta-"+s),l&&(s="Shift-"+s),s}function modifiers(n,e,r){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),r!==!1&&e.shiftKey&&(n="Shift-"+n),n}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(n,e){return runHandlers(getKeymap(e.state),n,e,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(n){let e=n.facet(keymap),r=Keymaps.get(e);return r||Keymaps.set(e,r=buildKeymap(e.reduce((s,o)=>s.concat(o),[]))),r}function runScopeHandlers(n,e,r){return runHandlers(getKeymap(n.state),e,n,r)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(n,e=currentPlatform){let r=Object.create(null),s=Object.create(null),o=(l,c)=>{let u=s[l];if(u==null)s[l]=c;else if(u!=c)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},a=(l,c,u,f)=>{var d,g;let m=r[l]||(r[l]=Object.create(null)),_=c.split(/ (?!$)/).map(b=>normalizeKeyName(b,e));for(let b=1;b<_.length;b++){let v=_.slice(0,b).join(" ");o(v,!0),m[v]||(m[v]={preventDefault:!0,run:[M=>{let V=storedPrefix={view:M,prefix:v,scope:l};return setTimeout(()=>{storedPrefix==V&&(storedPrefix=null)},PrefixTimeout),!0}]})}let E=_.join(" ");o(E,!1);let A=m[E]||(m[E]={preventDefault:!1,run:((g=(d=m._any)===null||d===void 0?void 0:d.run)===null||g===void 0?void 0:g.slice())||[]});u&&A.run.push(u),f&&(A.preventDefault=!0)};for(let l of n){let c=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let f of c){let d=r[f]||(r[f]=Object.create(null));d._any||(d._any={preventDefault:!1,run:[]});for(let g in d)d[g].run.push(l.any)}let u=l[e]||l.key;if(u)for(let f of c)a(f,u,l.run,l.preventDefault),l.shift&&a(f,"Shift-"+u,l.shift,l.preventDefault)}return r}function runHandlers(n,e,r,s){let o=keyName(e),a=codePointAt(o,0),l=codePointSize(a)==o.length&&o!=" ",c="",u=!1;storedPrefix&&storedPrefix.view==r&&storedPrefix.scope==s&&(c=storedPrefix.prefix+" ",(u=modifierCodes.indexOf(e.keyCode)<0)&&(storedPrefix=null));let f=new Set,d=E=>{if(E){for(let A of E.run)if(!f.has(A)&&(f.add(A),A(r,e)))return!0;E.preventDefault&&(u=!0)}return!1},g=n[s],m,_;if(g){if(d(g[c+modifiers(o,e,!l)]))return!0;if(l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(browser.windows&&e.ctrlKey&&e.altKey)&&(m=base[e.keyCode])&&m!=o){if(d(g[c+modifiers(m,e,!0)]))return!0;if(e.shiftKey&&(_=shift[e.keyCode])!=o&&_!=m&&d(g[c+modifiers(_,e,!1)]))return!0}else if(l&&e.shiftKey&&d(g[c+modifiers(o,e,!0)]))return!0;if(d(g._any))return!0}return u}class RectangleMarker{constructor(e,r,s,o,a){this.className=e,this.left=r,this.top=s,this.width=o,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,r){return r.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,r,s){if(s.empty){let o=e.coordsAtPos(s.head,s.assoc||1);if(!o)return[];let a=getBase(e);return[new RectangleMarker(r,o.left-a.left,o.top-a.top,null,o.bottom-o.top)]}else return rectanglesForRange(e,r,s)}}function getBase(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Direction.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function wrappedLine(n,e,r){let s=EditorSelection.cursor(e);return{from:Math.max(r.from,n.moveToLineBoundary(s,!1,!0).from),to:Math.min(r.to,n.moveToLineBoundary(s,!0,!0).from),type:BlockType.Text}}function blockAt(n,e){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){for(let s of r.type)if(s.to>e||s.to==e&&(s.to==r.to||s.type==BlockType.Text))return s}return r}function rectanglesForRange(n,e,r){if(r.to<=n.viewport.from||r.from>=n.viewport.to)return[];let s=Math.max(r.from,n.viewport.from),o=Math.min(r.to,n.viewport.to),a=n.textDirection==Direction.LTR,l=n.contentDOM,c=l.getBoundingClientRect(),u=getBase(n),f=window.getComputedStyle(l.firstChild),d=c.left+parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)),g=c.right-parseInt(f.paddingRight),m=blockAt(n,s),_=blockAt(n,o),E=m.type==BlockType.Text?m:null,A=_.type==BlockType.Text?_:null;if(n.lineWrapping&&(E&&(E=wrappedLine(n,s,E)),A&&(A=wrappedLine(n,o,A))),E&&A&&E.from==A.from)return v(M(r.from,r.to,E));{let R=E?M(r.from,null,E):V(m,!1),L=A?M(null,r.to,A):V(_,!0),N=[];return(E||m).to<(A||_).from-1?N.push(b(d,R.bottom,g,L.top)):R.bottom<L.top&&n.elementAtHeight((R.bottom+L.top)/2).type==BlockType.Text&&(R.bottom=L.top=(R.bottom+L.top)/2),v(R).concat(N).concat(v(L))}function b(R,L,N,$){return new RectangleMarker(e,R-u.left,L-u.top-.01,N-R,$-L+.01)}function v({top:R,bottom:L,horizontal:N}){let $=[];for(let I=0;I<N.length;I+=2)$.push(b(N[I],R,N[I+1],L));return $}function M(R,L,N){let $=1e9,I=-1e9,H=[];function k(J,ne,ce,le,me){let fe=n.coordsAtPos(J,J==N.to?-2:2),ee=n.coordsAtPos(ce,ce==N.from?2:-2);$=Math.min(fe.top,ee.top,$),I=Math.max(fe.bottom,ee.bottom,I),me==Direction.LTR?H.push(a&&ne?d:fe.left,a&&le?g:ee.right):H.push(!a&&le?d:ee.left,!a&&ne?g:fe.right)}let q=R??N.from,G=L??N.to;for(let J of n.visibleRanges)if(J.to>q&&J.from<G)for(let ne=Math.max(J.from,q),ce=Math.min(J.to,G);;){let le=n.state.doc.lineAt(ne);for(let me of n.bidiSpans(le)){let fe=me.from+le.from,ee=me.to+le.from;if(fe>=ce)break;ee>ne&&k(Math.max(fe,ne),R==null&&fe<=q,Math.min(ee,ce),L==null&&ee>=G,me.dir)}if(ne=le.to+1,ne>=ce)break}return H.length==0&&k(q,R==null,G,L==null,n.textDirection),{top:$,bottom:I,horizontal:H}}function V(R,L){let N=c.top+(L?R.top:R.bottom);return{top:N,bottom:N,horizontal:[]}}}function sameMarker(n,e){return n.constructor==e.constructor&&n.eq(e)}class LayerView{constructor(e,r){this.view=e,this.layer=r,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,e)}update(e){e.startState.facet(layerOrder)!=e.state.facet(layerOrder)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let r=0,s=e.facet(layerOrder);for(;r<s.length&&s[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((r,s)=>!sameMarker(r,this.drawn[s]))){let r=this.dom.firstChild,s=0;for(let o of e)o.update&&r&&o.constructor&&this.drawn[s].constructor&&o.update(r,this.drawn[s])?(r=r.nextSibling,s++):this.dom.insertBefore(o.draw(),r);for(;r;){let o=r.nextSibling;r.remove(),r=o}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(n){return[ViewPlugin.define(e=>new LayerView(e,n)),layerOrder.of(n)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(n){return combineConfig(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,r)=>Math.min(e,r),drawRangeCursor:(e,r)=>e||r})}});function drawSelection(n={}){return[selectionConfig.of(n),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(n){return n.startState.facet(selectionConfig)!=n.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(n){let{state:e}=n,r=e.facet(selectionConfig),s=[];for(let o of e.selection.ranges){let a=o==e.selection.main;if(o.empty?!a||CanHidePrimary:r.drawRangeCursor){let l=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=o.empty?o:EditorSelection.cursor(o.head,o.head>o.anchor?-1:1);for(let u of RectangleMarker.forRange(n,l,c))s.push(u)}}return s},update(n,e){n.transactions.some(s=>s.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=configChanged(n);return r&&setBlinkRate(n.state,e),n.docChanged||n.selectionSet||r},mount(n,e){setBlinkRate(e.state,n)},class:"cm-cursorLayer"});function setBlinkRate(n,e){e.style.animationDuration=n.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:RectangleMarker.forRange(n,"cm-selectionBackground",e)).reduce((e,r)=>e.concat(r))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||configChanged(n)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map(n,e){return n==null?null:e.mapPos(n)}}),dropCursorPos=StateField.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((r,s)=>s.is(setDropCursorPos)?s.value:r,n)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let r=n.state.field(dropCursorPos);r==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(dropCursorPos)!=r||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(dropCursorPos),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let r=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-r.left+this.view.scrollDOM.scrollLeft,top:e.top-r.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(dropCursorPos)!=n&&this.view.dispatch({effects:setDropCursorPos.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(n,e,r,s,o){e.lastIndex=0;for(let a=n.iterRange(r,s),l=r,c;!a.next().done;l+=a.value.length)if(!a.lineBreak)for(;c=e.exec(a.value);)o(l+c.index,c)}function matchRanges(n,e){let r=n.visibleRanges;if(r.length==1&&r[0].from==n.viewport.from&&r[0].to==n.viewport.to)return r;let s=[];for(let{from:o,to:a}of r)o=Math.max(n.state.doc.lineAt(o).from,o-e),a=Math.min(n.state.doc.lineAt(a).to,a+e),s.length&&s[s.length-1].to>=o?s[s.length-1].to=a:s.push({from:o,to:a});return s}class MatchDecorator{constructor(e){const{regexp:r,decoration:s,decorate:o,boundary:a,maxLength:l=1e3}=e;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,o)this.addMatch=(c,u,f,d)=>o(d,f,f+c[0].length,c,u);else if(typeof s=="function")this.addMatch=(c,u,f,d)=>{let g=s(c,u,f);g&&d(f,f+c[0].length,g)};else if(s)this.addMatch=(c,u,f,d)=>d(f,f+c[0].length,s);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=l}createDeco(e){let r=new RangeSetBuilder,s=r.add.bind(r);for(let{from:o,to:a}of matchRanges(e,this.maxLength))iterMatches(e.state.doc,this.regexp,o,a,(l,c)=>this.addMatch(c,e,l,s));return r.finish()}updateDeco(e,r){let s=1e9,o=-1;return e.docChanged&&e.changes.iterChanges((a,l,c,u)=>{u>e.view.viewport.from&&c<e.view.viewport.to&&(s=Math.min(c,s),o=Math.max(u,o))}),e.viewportChanged||o-s>1e3?this.createDeco(e.view):o>-1?this.updateRange(e.view,r.map(e.changes),s,o):r}updateRange(e,r,s,o){for(let a of e.visibleRanges){let l=Math.max(a.from,s),c=Math.min(a.to,o);if(c>l){let u=e.state.doc.lineAt(l),f=u.to<c?e.state.doc.lineAt(c):u,d=Math.max(a.from,u.from),g=Math.min(a.to,f.to);if(this.boundary){for(;l>u.from;l--)if(this.boundary.test(u.text[l-1-u.from])){d=l;break}for(;c<f.to;c++)if(this.boundary.test(f.text[c-f.from])){g=c;break}}let m=[],_,E=(A,b,v)=>m.push(v.range(A,b));if(u==f)for(this.regexp.lastIndex=d-u.from;(_=this.regexp.exec(u.text))&&_.index<g-u.from;)this.addMatch(_,e,_.index+u.from,E);else iterMatches(e.state.doc,this.regexp,d,g,(A,b)=>this.addMatch(b,e,A,E));r=r.update({filterFrom:d,filterTo:g,filter:(A,b)=>A<d||b>g,add:m})}}return r}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var n;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let e=document.body.style;_supportsTabSize=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(n){let e=combineConfig(n,{render:null,specialChars:Specials,addSpecialChars:null});return(e.replaceTabs=!supportsTabSize())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,UnicodeRegexpSupport)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,UnicodeRegexpSupport)),e}});function highlightSpecialChars(n={}){return[specialCharConfig.of(n),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new MatchDecorator({regexp:n.specialChars,decoration:(e,r,s)=>{let{doc:o}=r.state,a=codePointAt(e[0],0);if(a==9){let l=o.lineAt(s),c=r.state.tabSize,u=countColumn(l.text,c,s-l.from);return Decoration.replace({widget:new TabWidget((c-u%c)*this.view.defaultCharacterWidth)})}return this.decorationCache[a]||(this.decorationCache[a]=Decoration.replace({widget:new SpecialCharWidget(n,a)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(specialCharConfig);n.startState.facet(specialCharConfig)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const DefaultPlaceholder="•";function placeholder$1(n){return n>=32?DefaultPlaceholder:n==10?"␤":String.fromCharCode(9216+n)}class SpecialCharWidget extends WidgetType{constructor(e,r){super(),this.options=e,this.code=r}eq(e){return e.code==this.code}toDOM(e){let r=placeholder$1(this.code),s=e.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,s,r);if(o)return o;let a=document.createElement("span");return a.textContent=r,a.title=s,a.setAttribute("aria-label",s),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,r=[];for(let s of n.state.selection.ranges){let o=n.lineBlockAt(s.head);o.from>e&&(r.push(lineDeco.range(o.from)),e=o.from)}return Decoration.set(r)}},{decorations:n=>n.decorations});class Placeholder extends WidgetType{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}ignoreEvent(){return!1}}function placeholder(n){return ViewPlugin.fromClass(class{constructor(e){this.view=e,this.placeholder=Decoration.set([Decoration.widget({widget:new Placeholder(n),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:e=>e.decorations})}const MaxOff=2e3;function rectangleFor(n,e,r){let s=Math.min(e.line,r.line),o=Math.max(e.line,r.line),a=[];if(e.off>MaxOff||r.off>MaxOff||e.col<0||r.col<0){let l=Math.min(e.off,r.off),c=Math.max(e.off,r.off);for(let u=s;u<=o;u++){let f=n.doc.line(u);f.length<=c&&a.push(EditorSelection.range(f.from+l,f.to+c))}}else{let l=Math.min(e.col,r.col),c=Math.max(e.col,r.col);for(let u=s;u<=o;u++){let f=n.doc.line(u),d=findColumn(f.text,l,n.tabSize,!0);if(d<0)a.push(EditorSelection.cursor(f.to));else{let g=findColumn(f.text,c,n.tabSize);a.push(EditorSelection.range(f.from+d,f.from+g))}}}return a}function absoluteColumn(n,e){let r=n.coordsAtPos(n.viewport.from);return r?Math.round(Math.abs((r.left-e)/n.defaultCharacterWidth)):-1}function getPos(n,e){let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),s=n.state.doc.lineAt(r),o=r-s.from,a=o>MaxOff?-1:o==s.length?absoluteColumn(n,e.clientX):countColumn(s.text,n.state.tabSize,r-s.from);return{line:s.number,col:a,off:o}}function rectangleSelectionStyle(n,e){let r=getPos(n,e),s=n.state.selection;return r?{update(o){if(o.docChanged){let a=o.changes.mapPos(o.startState.doc.line(r.line).from),l=o.state.doc.lineAt(a);r={line:l.number,col:r.col,off:Math.min(r.off,l.length)},s=s.map(o.changes)}},get(o,a,l){let c=getPos(n,o);if(!c)return s;let u=rectangleFor(n.state,r,c);return u.length?l?EditorSelection.create(u.concat(s.ranges)):EditorSelection.create(u):s}}:null}function rectangularSelection(n){let e=(n==null?void 0:n.eventFilter)||(r=>r.altKey&&r.button==0);return EditorView.mouseSelectionStyle.of((r,s)=>e(s)?rectangleSelectionStyle(r,s):null)}const keys={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(n={}){let[e,r]=keys[n.key||"Alt"],s=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.isDown=!1}set(o){this.isDown!=o&&(this.isDown=o,this.view.update([]))}},{eventHandlers:{keydown(o){this.set(o.keyCode==e||r(o))},keyup(o){(o.keyCode==e||!r(o))&&this.set(!1)},mousemove(o){this.set(r(o))}}});return[s,EditorView.contentAttributes.of(o=>{var a;return!((a=o.plugin(s))===null||a===void 0)&&a.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(e,r,s){this.facet=r,this.createTooltipView=s,this.input=e.state.facet(r),this.tooltips=this.input.filter(o=>o),this.tooltipViews=this.tooltips.map(s)}update(e){var r;let s=e.state.facet(this.facet),o=s.filter(l=>l);if(s===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let a=[];for(let l=0;l<o.length;l++){let c=o[l],u=-1;if(c){for(let f=0;f<this.tooltips.length;f++){let d=this.tooltips[f];d&&d.create==c.create&&(u=f)}if(u<0)a[l]=this.createTooltipView(c);else{let f=a[l]=this.tooltipViews[u];f.update&&f.update(e)}}}for(let l of this.tooltipViews)a.indexOf(l)<0&&(l.dom.remove(),(r=l.destroy)===null||r===void 0||r.call(l));return this.input=s,this.tooltips=o,this.tooltipViews=a,!0}}function windowSpace(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const tooltipConfig=Facet.define({combine:n=>{var e,r,s;return{position:browser.ios?"absolute":((e=n.find(o=>o.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((r=n.find(o=>o.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((s=n.find(o=>o.tooltipSpace))===null||s===void 0?void 0:s.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(tooltipConfig);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(n,showTooltip,r=>this.createTooltip(r)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let r=e||n.geometryChanged,s=n.state.facet(tooltipConfig);if(s.position!=this.position){this.position=s.position;for(let o of this.manager.tooltipViews)o.dom.style.position=this.position;r=!0}if(s.parent!=this.parent){this.parent&&this.container.remove(),this.parent=s.parent,this.createContainer();for(let o of this.manager.tooltipViews)this.container.appendChild(o.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",e.dom.appendChild(r)}return e.dom.style.position=this.position,e.dom.style.top=Outside,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,r)=>{let s=this.manager.tooltipViews[r];return s.getCoords?s.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view)}}writeMeasure(n){var e;let{editor:r,space:s}=n,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,f=n.pos[a],d=n.size[a];if(!f||f.bottom<=Math.max(r.top,s.top)||f.top>=Math.min(r.bottom,s.bottom)||f.right<Math.max(r.left,s.left)-.1||f.left>Math.min(r.right,s.right)+.1){u.style.top=Outside;continue}let g=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,m=g?7:0,_=d.right-d.left,E=(e=knownHeight.get(c))!==null&&e!==void 0?e:d.bottom-d.top,A=c.offset||noOffset,b=this.view.textDirection==Direction.LTR,v=d.width>s.right-s.left?b?s.left:s.right-d.width:b?Math.min(f.left-(g?14:0)+A.x,s.right-_):Math.max(s.left,f.left-_+(g?14:0)-A.x),M=!!l.above;!l.strictSide&&(M?f.top-(d.bottom-d.top)-A.y<s.top:f.bottom+(d.bottom-d.top)+A.y>s.bottom)&&M==s.bottom-f.bottom>f.top-s.top&&(M=!M);let V=(M?f.top-s.top:s.bottom-f.bottom)-m;if(V<E&&c.resize!==!1){if(V<this.view.defaultLineHeight){u.style.top=Outside;continue}knownHeight.set(c,E),u.style.height=(E=V)+"px"}else u.style.height&&(u.style.height="");let R=M?f.top-E-m-A.y:f.bottom+m+A.y,L=v+_;if(c.overlap!==!0)for(let N of o)N.left<L&&N.right>v&&N.top<R+E&&N.bottom>R&&(R=M?N.top-E-2-m:N.bottom+m+2);this.position=="absolute"?(u.style.top=R-n.parent.top+"px",u.style.left=v-n.parent.left+"px"):(u.style.top=R+"px",u.style.left=v+"px"),g&&(g.style.left=`${f.left+(b?A.x:-A.x)-(v+14-7)}px`),c.overlap!==!0&&o.push({left:v,top:R,right:L,bottom:R+E}),u.classList.toggle("cm-tooltip-above",M),u.classList.toggle("cm-tooltip-below",!M),c.positioned&&c.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Outside}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define();class HoverTooltipHost{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(e,showHoverTooltip,r=>this.createHostedView(r))}static create(e){return new HoverTooltipHost(e)}createHostedView(e){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(r.dom),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let r of this.manager.tooltipViews)r.mount&&r.mount(e);this.mounted=!0}positioned(e){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(e)}update(e){this.manager.update(e)}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],n=>{let e=n.facet(showHoverTooltip).filter(r=>r);return e.length===0?null:{pos:Math.min(...e.map(r=>r.pos)),end:Math.max(...e.filter(r=>r.end!=null).map(r=>r.end)),create:HoverTooltipHost.create,above:e[0].above,arrow:e.some(r=>r.arrow)}});class HoverPlugin{constructor(e,r,s,o,a){this.view=e,this.source=r,this.field=s,this.setHover=o,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,r=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(r==null)return;let s=this.view.coordsAtPos(r);if(s==null||e.y<s.top||e.y>s.bottom||e.x<s.left-this.view.defaultCharacterWidth||e.x>s.right+this.view.defaultCharacterWidth)return;let o=this.view.bidiSpans(this.view.state.doc.lineAt(r)).find(c=>c.from<=r&&c.to>=r),a=o&&o.dir==Direction.RTL?-1:1,l=this.source(this.view,r,e.x<s.left?-a:a);if(l!=null&&l.then){let c=this.pending={pos:r};l.then(u=>{this.pending==c&&(this.pending=null,u&&this.view.dispatch({effects:this.setHover.of(u)}))},u=>logException(this.view.state,u,"hover tooltip"))}else l&&this.view.dispatch({effects:this.setHover.of(l)})}mousemove(e){var r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let s=this.active;if(s&&!isInTooltip(this.lastMove.target)||this.pending){let{pos:o}=s||this.pending,a=(r=s==null?void 0:s.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!isOverRange(this.view,o,a,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!isInTooltip(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function isInTooltip(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function isOverRange(n,e,r,s,o,a){let l=document.createRange(),c=n.domAtPos(e),u=n.domAtPos(r);l.setEnd(u.node,u.offset),l.setStart(c.node,c.offset);let f=l.getClientRects();l.detach();for(let d=0;d<f.length;d++){let g=f[d];if(Math.max(g.top-o,o-g.bottom,g.left-s,s-g.right)<=a)return!0}return!1}function hoverTooltip(n,e={}){let r=StateEffect.define(),s=StateField.define({create(){return null},update(o,a){if(o&&(e.hideOnChange&&(a.docChanged||a.selection)||e.hideOn&&e.hideOn(a,o)))return null;if(o&&a.docChanged){let l=a.changes.mapPos(o.pos,-1,MapMode.TrackDel);if(l==null)return null;let c=Object.assign(Object.create(null),o);c.pos=l,o.end!=null&&(c.end=a.changes.mapPos(o.end)),o=c}for(let l of a.effects)l.is(r)&&(o=l.value),l.is(closeHoverTooltipEffect)&&(o=null);return o},provide:o=>showHoverTooltip.from(o)});return[s,ViewPlugin.define(o=>new HoverPlugin(o,n,s,r,e.hoverTime||300)),showHoverTooltipHost]}function getTooltip(n,e){let r=n.plugin(tooltipPlugin);if(!r)return null;let s=r.manager.tooltips.indexOf(e);return s<0?null:r.manager.tooltipViews[s]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(n){let e,r;for(let s of n)e=e||s.topContainer,r=r||s.bottomContainer;return{topContainer:e,bottomContainer:r}}});function getPanel(n,e){let r=n.plugin(panelPlugin),s=r?r.specs.indexOf(e):-1;return s>-1?r.panels[s]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(n){this.input=n.state.facet(showPanel),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(n));let e=n.state.facet(panelConfig);this.top=new PanelGroup(n,!0,e.topContainer),this.bottom=new PanelGroup(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(n){let e=n.state.facet(panelConfig);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new PanelGroup(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=n.state.facet(showPanel);if(r!=this.input){let s=r.filter(u=>u),o=[],a=[],l=[],c=[];for(let u of s){let f=this.specs.indexOf(u),d;f<0?(d=u(n.view),c.push(d)):(d=this.panels[f],d.update&&d.update(n)),o.push(d),(d.top?a:l).push(d)}this.specs=s,this.panels=o,this.top.sync(a),this.bottom.sync(l);for(let u of c)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let s of this.panels)s.update&&s.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>EditorView.scrollMargins.of(e=>{let r=e.plugin(n);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class PanelGroup{constructor(e,r,s){this.view=e,this.top=r,this.container=s,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let r of this.panels)r.destroy&&e.indexOf(r)<0&&r.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let e=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;e!=r.dom;)e=rm(e);e=e.nextSibling}else this.dom.insertBefore(r.dom,e);for(;e;)e=rm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rm(n){let e=n.nextSibling;return n.remove(),e}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(n){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),n))]}const unfixGutters=Facet.define({combine:n=>n.some(e=>e)});function gutters(n){let e=[gutterView];return n&&n.fixed===!1&&e.push(unfixGutters.of(!0)),e}const gutterView=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(activeGutters).map(e=>new SingleGutterView(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,r=n.view.viewport,s=Math.min(e.to,r.to)-Math.max(e.from,r.from);this.syncGutters(s<(r.to-r.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let r=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),s=[],o=this.gutters.map(a=>new UpdateContext(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks){let l;if(Array.isArray(a.type)){for(let c of a.type)if(c.type==BlockType.Text){l=c;break}}else l=a.type==BlockType.Text?a:void 0;if(l){s.length&&(s=[]),advanceCursor(r,s,a.from);for(let c of o)c.line(this.view,l,s)}}for(let a of o)a.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(activeGutters),r=n.state.facet(activeGutters),s=n.docChanged||n.heightChanged||n.viewportChanged||!RangeSet.eq(n.startState.facet(gutterLineClass),n.state.facet(gutterLineClass),n.view.viewport.from,n.view.viewport.to);if(e==r)for(let o of this.gutters)o.update(n)&&(s=!0);else{s=!0;let o=[];for(let a of r){let l=e.indexOf(a);l<0?o.push(new SingleGutterView(this.view,a)):(this.gutters[l].update(n),o.push(this.gutters[l]))}for(let a of this.gutters)a.dom.remove(),o.indexOf(a)<0&&a.destroy();for(let a of o)this.dom.appendChild(a.dom);this.gutters=o}return s}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>EditorView.scrollMargins.of(e=>{let r=e.plugin(n);return!r||r.gutters.length==0||!r.fixed?null:e.textDirection==Direction.LTR?{left:r.dom.offsetWidth}:{right:r.dom.offsetWidth}})});function asArray(n){return Array.isArray(n)?n:[n]}function advanceCursor(n,e,r){for(;n.value&&n.from<=r;)n.from==r&&e.push(n.value),n.next()}class UpdateContext{constructor(e,r,s){this.gutter=e,this.height=s,this.i=0,this.cursor=RangeSet.iter(e.markers,r.from)}line(e,r,s){let o=[];advanceCursor(this.cursor,o,r.from),s.length&&(o=o.concat(s));let a=this.gutter.config.lineMarker(e,r,o);a&&o.unshift(a);let l=this.gutter;if(o.length==0&&!l.config.renderEmptyElements)return;let c=r.top-this.height;if(this.i==l.elements.length){let u=new GutterElement(e,r.height,c,o);l.elements.push(u),l.dom.appendChild(u.dom)}else l.elements[this.i].update(e,r.height,c,o);this.height=r.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let r=e.elements.pop();e.dom.removeChild(r.dom),r.destroy()}}}class SingleGutterView{constructor(e,r){this.view=e,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let s in r.domEventHandlers)this.dom.addEventListener(s,o=>{let a=o.target,l;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let u=a.getBoundingClientRect();l=(u.top+u.bottom)/2}else l=o.clientY;let c=e.lineBlockAtHeight(l-e.documentTop);r.domEventHandlers[s](e,c,o)&&o.preventDefault()});this.markers=asArray(r.markers(e)),r.initialSpacer&&(this.spacer=new GutterElement(e,0,0,[r.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let r=this.markers;if(this.markers=asArray(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let o=this.config.updateSpacer(this.spacer.markers[0],e);o!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[o])}let s=e.view.viewport;return!RangeSet.eq(this.markers,r,s.from,s.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class GutterElement{constructor(e,r,s,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,r,s,o)}update(e,r,s,o){this.height!=r&&(this.dom.style.height=(this.height=r)+"px"),this.above!=s&&(this.dom.style.marginTop=(this.above=s)?s+"px":""),sameMarkers(this.markers,o)||this.setMarkers(e,o)}setMarkers(e,r){let s="cm-gutterElement",o=this.dom.firstChild;for(let a=0,l=0;;){let c=l,u=a<r.length?r[a++]:null,f=!1;if(u){let d=u.elementClass;d&&(s+=" "+d);for(let g=l;g<this.markers.length;g++)if(this.markers[g].compare(u)){c=g,f=!0;break}}else c=this.markers.length;for(;l<c;){let d=this.markers[l++];if(d.toDOM){d.destroy(o);let g=o.nextSibling;o.remove(),o=g}}if(!u)break;u.toDOM&&(f?o=o.nextSibling:this.dom.insertBefore(u.toDOM(e),o)),f&&l++}this.dom.className=s,this.markers=r}destroy(){this.setMarkers(null,[])}}function sameMarkers(n,e){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!n[r].compare(e[r]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine(n){return combineConfig(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,r){let s=Object.assign({},e);for(let o in r){let a=s[o],l=r[o];s[o]=a?(c,u,f)=>a(c,u,f)||l(c,u,f):l}return s}})}});class NumberMarker extends GutterMarker{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(n,e){return n.state.facet(lineNumberConfig).formatNumber(e,n.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(lineNumberMarkers)},lineMarker(e,r,s){return s.some(o=>o.toDOM)?null:new NumberMarker(formatNumber(e,e.state.doc.lineAt(r.from).number))},lineMarkerChange:e=>e.startState.facet(lineNumberConfig)!=e.state.facet(lineNumberConfig),initialSpacer(e){return new NumberMarker(formatNumber(e,maxLineNumber(e.state.doc.lines)))},updateSpacer(e,r){let s=formatNumber(r.view,maxLineNumber(r.view.state.doc.lines));return s==e.number?e:new NumberMarker(s)},domEventHandlers:n.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(n={}){return[lineNumberConfig.of(n),gutters(),lineNumberGutter]}function maxLineNumber(n){let e=9;for(;e<n;)e=e*10+9;return e}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],n=>{let e=[],r=-1;for(let s of n.selection.ranges){let o=n.doc.lineAt(s.head).from;o>r&&(r=o,e.push(activeLineGutterMarker.range(o)))}return RangeSet.of(e)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,r){this.from=e,this.to=r}}class NodeProp{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=NodeType.match(e)),r=>{let s=e(r);return s===void 0?null:[this,s]}}}NodeProp.closedBy=new NodeProp({deserialize:n=>n.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:n=>n.split(" ")});NodeProp.group=new NodeProp({deserialize:n=>n.split(" ")});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});const noProps=Object.create(null);class NodeType{constructor(e,r,s,o=0){this.name=e,this.props=r,this.id=s,this.flags=o}static define(e){let r=e.props&&e.props.length?Object.create(null):noProps,s=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),o=new NodeType(e.name||"",r,e.id,s);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(o)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[a[0].id]=a[1]}}return o}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let r=this.prop(NodeProp.group);return r?r.indexOf(e)>-1:!1}return this.id==e}static match(e){let r=Object.create(null);for(let s in e)for(let o of s.split(" "))r[o]=e[s];return s=>{for(let o=s.prop(NodeProp.group),a=-1;a<(o?o.length:0);a++){let l=r[a<0?s.name:o[a]];if(l)return l}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(e){this.types=e;for(let r=0;r<e.length;r++)if(e[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let r=[];for(let s of this.types){let o=null;for(let a of e){let l=a(s);l&&(o||(o=Object.assign({},s.props)),o[l[0].id]=l[1])}r.push(o?new NodeType(s.name,o,s.id,s.flags):s)}return new NodeSet(r)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(e,r,s,o,a){if(this.type=e,this.children=r,this.positions=s,this.length=o,this.props=null,a&&a.length){this.props=Object.create(null);for(let[l,c]of a)this.props[typeof l=="number"?l:l.id]=c}}toString(){let e=this.prop(NodeProp.mounted);if(e&&!e.overlay)return e.tree.toString();let r="";for(let s of this.children){let o=s.toString();o&&(r&&(r+=","),r+=o)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,r=0,s=0){let o=CachedNode.get(this)||this.topNode,a=new TreeCursor(o);return a.moveTo(e,r),CachedNode.set(this,a._tree),a}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,r=0){let s=resolveNode(CachedNode.get(this)||this.topNode,e,r,!1);return CachedNode.set(this,s),s}resolveInner(e,r=0){let s=resolveNode(CachedInnerNode.get(this)||this.topNode,e,r,!0);return CachedInnerNode.set(this,s),s}iterate(e){let{enter:r,leave:s,from:o=0,to:a=this.length}=e;for(let l=this.cursor((e.mode||0)|IterMode.IncludeAnonymous);;){let c=!1;if(l.from<=a&&l.to>=o&&(l.type.isAnonymous||r(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&s&&!l.type.isAnonymous&&s(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let r in this.props)e.push([+r,this.props[r]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(r,s,o)=>new Tree(this.type,r,s,o,this.propValues),e.makeTree||((r,s,o)=>new Tree(NodeType.none,r,s,o)))}static build(e){return buildTree(e)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,r){this.buffer=e,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,r,s){this.buffer=e,this.length=r,this.set=s}get type(){return NodeType.none}toString(){let e=[];for(let r=0;r<this.buffer.length;)e.push(this.childString(r)),r=this.buffer[r+3];return e.join(",")}childString(e){let r=this.buffer[e],s=this.buffer[e+3],o=this.set.types[r],a=o.name;if(/\W/.test(a)&&!o.isError&&(a=JSON.stringify(a)),e+=4,s==e)return a;let l=[];for(;e<s;)l.push(this.childString(e)),e=this.buffer[e+3];return a+"("+l.join(",")+")"}findChild(e,r,s,o,a){let{buffer:l}=this,c=-1;for(let u=e;u!=r&&!(checkSide(a,o,l[u+1],l[u+2])&&(c=u,s>0));u=l[u+3]);return c}slice(e,r,s){let o=this.buffer,a=new Uint16Array(r-e),l=0;for(let c=e,u=0;c<r;){a[u++]=o[c++],a[u++]=o[c++]-s;let f=a[u++]=o[c++]-s;a[u++]=o[c++]-e,l=Math.max(l,f)}return new TreeBuffer(a,l,this.set)}}function checkSide(n,e,r,s){switch(n){case-2:return r<e;case-1:return s>=e&&r<e;case 0:return r<e&&s>e;case 1:return r<=e&&s>e;case 2:return s>e;case 4:return!0}}function enterUnfinishedNodesBefore(n,e){let r=n.childBefore(e);for(;r;){let s=r.lastChild;if(!s||s.to!=r.to)break;s.type.isError&&s.from==s.to?(n=r,r=s.prevSibling):r=s}return n}function resolveNode(n,e,r,s){for(var o;n.from==n.to||(r<1?n.from>=e:n.from>e)||(r>-1?n.to<=e:n.to<e);){let l=!s&&n instanceof TreeNode&&n.index<0?null:n.parent;if(!l)return n;n=l}let a=s?0:IterMode.IgnoreOverlays;if(s)for(let l=n,c=l.parent;c;l=c,c=l.parent)l instanceof TreeNode&&l.index<0&&((o=c.enter(e,r,a))===null||o===void 0?void 0:o.from)!=l.from&&(n=c);for(;;){let l=n.enter(e,r,a);if(!l)return n;n=l}}class TreeNode{constructor(e,r,s,o){this._tree=e,this.from=r,this.index=s,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,r,s,o,a=0){for(let l=this;;){for(let{children:c,positions:u}=l._tree,f=r>0?c.length:-1;e!=f;e+=r){let d=c[e],g=u[e]+l.from;if(checkSide(o,s,g,g+d.length)){if(d instanceof TreeBuffer){if(a&IterMode.ExcludeBuffers)continue;let m=d.findChild(0,d.buffer.length,r,s-g,o);if(m>-1)return new BufferNode(new BufferContext(l,d,e,g),null,m)}else if(a&IterMode.IncludeAnonymous||!d.type.isAnonymous||hasChild(d)){let m;if(!(a&IterMode.IgnoreMounts)&&d.props&&(m=d.prop(NodeProp.mounted))&&!m.overlay)return new TreeNode(m.tree,g,e,l);let _=new TreeNode(d,g,e,l);return a&IterMode.IncludeAnonymous||!_.type.isAnonymous?_:_.nextChild(r<0?d.children.length-1:0,r,s,o)}}}if(a&IterMode.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+r:e=r<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,r,s=0){let o;if(!(s&IterMode.IgnoreOverlays)&&(o=this._tree.prop(NodeProp.mounted))&&o.overlay){let a=e-this.from;for(let{from:l,to:c}of o.overlay)if((r>0?l<=a:l<a)&&(r<0?c>=a:c>a))return new TreeNode(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,r,s)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new TreeCursor(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,r=0){return resolveNode(this,e,r,!1)}resolveInner(e,r=0){return resolveNode(this,e,r,!0)}enterUnfinishedNodesBefore(e){return enterUnfinishedNodesBefore(this,e)}getChild(e,r=null,s=null){let o=getChildren(this,e,r,s);return o.length?o[0]:null}getChildren(e,r=null,s=null){return getChildren(this,e,r,s)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return matchNodeContext(this,e)}}function getChildren(n,e,r,s){let o=n.cursor(),a=[];if(!o.firstChild())return a;if(r!=null){for(;!o.type.is(r);)if(!o.nextSibling())return a}for(;;){if(s!=null&&o.type.is(s))return a;if(o.type.is(e)&&a.push(o.node),!o.nextSibling())return s==null?a:[]}}function matchNodeContext(n,e,r=e.length-1){for(let s=n.parent;r>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}class BufferContext{constructor(e,r,s,o){this.parent=e,this.buffer=r,this.index=s,this.start=o}}class BufferNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,r,s){this.context=e,this._parent=r,this.index=s,this.type=e.buffer.set.types[e.buffer.buffer[s]]}child(e,r,s){let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],e,r-this.context.start,s);return a<0?null:new BufferNode(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,r,s=0){if(s&IterMode.ExcludeBuffers)return null;let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],r>0?1:-1,e-this.context.start,r);return a<0?null:new BufferNode(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,r=e.buffer[this.index+3];return r<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(r,this.index,-1,0,4))}cursor(e=0){return new TreeCursor(this,e)}get tree(){return null}toTree(){let e=[],r=[],{buffer:s}=this.context,o=this.index+4,a=s.buffer[this.index+3];if(a>o){let l=s.buffer[this.index+1];e.push(s.slice(o,a,l)),r.push(0)}return new Tree(this.type,e,r,this.to-this.from)}resolve(e,r=0){return resolveNode(this,e,r,!1)}resolveInner(e,r=0){return resolveNode(this,e,r,!0)}enterUnfinishedNodesBefore(e){return enterUnfinishedNodesBefore(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,r=null,s=null){let o=getChildren(this,e,r,s);return o.length?o[0]:null}getChildren(e,r=null,s=null){return getChildren(this,e,r,s)}get node(){return this}matchContext(e){return matchNodeContext(this,e)}}class TreeCursor{get name(){return this.type.name}constructor(e,r=0){if(this.mode=r,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let s=e._parent;s;s=s._parent)this.stack.unshift(s.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,r){this.index=e;let{start:s,buffer:o}=this.buffer;return this.type=r||o.set.types[o.buffer[e]],this.from=s+o.buffer[e+1],this.to=s+o.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,r,s){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,r,s,this.mode));let{buffer:o}=this.buffer,a=o.findChild(this.index+4,o.buffer[this.index+3],e,r-this.buffer.start,s);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,r,s=this.mode){return this.buffer?s&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,r):this.yield(this._tree.enter(e,r,s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:r}=this.buffer,s=this.stack.length-1;if(e<0){let o=s<0?0:this.stack[s]+4;if(this.index!=o)return this.yieldBuf(r.findChild(o,this.index,-1,0,4))}else{let o=r.buffer[this.index+3];if(o<(s<0?r.buffer.length:r.buffer[this.stack[s]+3]))return this.yieldBuf(o)}return s<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let r,s,{buffer:o}=this;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(o.buffer.buffer[a+3]<this.index)return!1;({index:r,parent:s}=o)}else({index:r,_parent:s}=this._tree);for(;s;{index:r,_parent:s}=s)if(r>-1)for(let a=r+e,l=e<0?-1:s._tree.children.length;a!=l;a+=e){let c=s._tree.children[a];if(this.mode&IterMode.IncludeAnonymous||c instanceof TreeBuffer||!c.type.isAnonymous||hasChild(c))return!1}return!0}move(e,r){if(r&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,r=0){for(;(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,r););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,r=null,s=0;if(e&&e.context==this.buffer){e:for(let o=this.index,a=this.stack.length;a>=0;){for(let l=e;l;l=l._parent)if(l.index==o){if(o==this.index)return l;r=l,s=a+1;break e}o=this.stack[--a]}}for(let o=s;o<this.stack.length;o++)r=new BufferNode(this.buffer,r,this.stack[o]);return this.bufferNode=new BufferNode(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,r){for(let s=0;;){let o=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){s++;continue}this.type.isAnonymous||(o=!0)}for(;o&&r&&r(this),o=this.type.isAnonymous,!this.nextSibling();){if(!s)return;this.parent(),s--,o=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node,e);let{buffer:r}=this.buffer,{types:s}=r.set;for(let o=e.length-1,a=this.stack.length-1;o>=0;a--){if(a<0)return matchNodeContext(this.node,e,o);let l=s[r.buffer[this.stack[a]]];if(!l.isAnonymous){if(e[o]&&e[o]!=l.name)return!1;o--}}return!0}}function hasChild(n){return n.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree(n){var e;let{buffer:r,nodeSet:s,maxBufferLength:o=DefaultBufferLength,reused:a=[],minRepeatType:l=s.types.length}=n,c=Array.isArray(r)?new FlatBufferCursor(r,r.length):r,u=s.types,f=0,d=0;function g(R,L,N,$,I){let{id:H,start:k,end:q,size:G}=c,J=d;for(;G<0;)if(c.next(),G==-1){let fe=a[H];N.push(fe),$.push(k-R);return}else if(G==-3){f=H;return}else if(G==-4){d=H;return}else throw new RangeError(`Unrecognized record size: ${G}`);let ne=u[H],ce,le,me=k-R;if(q-k<=o&&(le=A(c.pos-L,I))){let fe=new Uint16Array(le.size-le.skip),ee=c.pos-le.size,K=fe.length;for(;c.pos>ee;)K=b(le.start,fe,K);ce=new TreeBuffer(fe,q-le.start,s),me=le.start-R}else{let fe=c.pos-G;c.next();let ee=[],K=[],he=H>=l?H:-1,ge=0,be=q;for(;c.pos>fe;)he>=0&&c.id==he&&c.size>=0?(c.end<=be-o&&(_(ee,K,k,ge,c.end,be,he,J),ge=ee.length,be=c.end),c.next()):g(k,fe,ee,K,he);if(he>=0&&ge>0&&ge<ee.length&&_(ee,K,k,ge,k,be,he,J),ee.reverse(),K.reverse(),he>-1&&ge>0){let Se=m(ne);ce=balanceRange(ne,ee,K,0,ee.length,0,q-k,Se,Se)}else ce=E(ne,ee,K,q-k,J-q)}N.push(ce),$.push(me)}function m(R){return(L,N,$)=>{let I=0,H=L.length-1,k,q;if(H>=0&&(k=L[H])instanceof Tree){if(!H&&k.type==R&&k.length==$)return k;(q=k.prop(NodeProp.lookAhead))&&(I=N[H]+k.length+q)}return E(R,L,N,$,I)}}function _(R,L,N,$,I,H,k,q){let G=[],J=[];for(;R.length>$;)G.push(R.pop()),J.push(L.pop()+N-I);R.push(E(s.types[k],G,J,H-I,q-H)),L.push(I-N)}function E(R,L,N,$,I=0,H){if(f){let k=[NodeProp.contextHash,f];H=H?[k].concat(H):[k]}if(I>25){let k=[NodeProp.lookAhead,I];H=H?[k].concat(H):[k]}return new Tree(R,L,N,$,H)}function A(R,L){let N=c.fork(),$=0,I=0,H=0,k=N.end-o,q={size:0,start:0,skip:0};e:for(let G=N.pos-R;N.pos>G;){let J=N.size;if(N.id==L&&J>=0){q.size=$,q.start=I,q.skip=H,H+=4,$+=4,N.next();continue}let ne=N.pos-J;if(J<0||ne<G||N.start<k)break;let ce=N.id>=l?4:0,le=N.start;for(N.next();N.pos>ne;){if(N.size<0)if(N.size==-3)ce+=4;else break e;else N.id>=l&&(ce+=4);N.next()}I=le,$+=J,H+=ce}return(L<0||$==R)&&(q.size=$,q.start=I,q.skip=H),q.size>4?q:void 0}function b(R,L,N){let{id:$,start:I,end:H,size:k}=c;if(c.next(),k>=0&&$<l){let q=N;if(k>4){let G=c.pos-(k-4);for(;c.pos>G;)N=b(R,L,N)}L[--N]=q,L[--N]=H-R,L[--N]=I-R,L[--N]=$}else k==-3?f=$:k==-4&&(d=$);return N}let v=[],M=[];for(;c.pos>0;)g(n.start||0,n.bufferStart||0,v,M,-1);let V=(e=n.length)!==null&&e!==void 0?e:v.length?M[0]+v[0].length:0;return new Tree(u[n.topID],v.reverse(),M.reverse(),V)}const nodeSizeCache=new WeakMap;function nodeSize(n,e){if(!n.isAnonymous||e instanceof TreeBuffer||e.type!=n)return 1;let r=nodeSizeCache.get(e);if(r==null){r=1;for(let s of e.children){if(s.type!=n||!(s instanceof Tree)){r=1;break}r+=nodeSize(n,s)}nodeSizeCache.set(e,r)}return r}function balanceRange(n,e,r,s,o,a,l,c,u){let f=0;for(let E=s;E<o;E++)f+=nodeSize(n,e[E]);let d=Math.ceil(f*1.5/8),g=[],m=[];function _(E,A,b,v,M){for(let V=b;V<v;){let R=V,L=A[V],N=nodeSize(n,E[V]);for(V++;V<v;V++){let $=nodeSize(n,E[V]);if(N+$>=d)break;N+=$}if(V==R+1){if(N>d){let $=E[R];_($.children,$.positions,0,$.children.length,A[R]+M);continue}g.push(E[R])}else{let $=A[V-1]+E[V-1].length-L;g.push(balanceRange(n,E,A,R,V,L,$,null,u))}m.push(L+M-a)}}return _(e,r,s,o,0),(c||u)(g,m,l)}class TreeFragment{constructor(e,r,s,o,a=!1,l=!1){this.from=e,this.to=r,this.tree=s,this.offset=o,this.open=(a?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,r=[],s=!1){let o=[new TreeFragment(0,e.length,e,0,!1,s)];for(let a of r)a.to>e.length&&o.push(a);return o}static applyChanges(e,r,s=128){if(!r.length)return e;let o=[],a=1,l=e.length?e[0]:null;for(let c=0,u=0,f=0;;c++){let d=c<r.length?r[c]:null,g=d?d.fromA:1e9;if(g-u>=s)for(;l&&l.from<g;){let m=l;if(u>=m.from||g<=m.to||f){let _=Math.max(m.from,u)-f,E=Math.min(m.to,g)-f;m=_>=E?null:new TreeFragment(_,E,m.tree,m.offset+f,c>0,!!d)}if(m&&o.push(m),l.to>g)break;l=a<e.length?e[a++]:null}if(!d)break;u=d.toA,f=d.toA-d.toB}return o}}class Parser{startParse(e,r,s){return typeof e=="string"&&(e=new StringInput(e)),s=s?s.length?s.map(o=>new Range(o.from,o.to)):[new Range(0,0)]:[new Range(0,e.length)],this.createParse(e,r||[],s)}parse(e,r,s){let o=this.startParse(e,r,s);for(;;){let a=o.advance();if(a)return a}}}class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,r){return this.string.slice(e,r)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(e,r,s){this.set=e,this.base=r,this.modified=s,this.id=nextTagID++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let r=new Tag([],null,[]);if(r.set.push(r),e)for(let s of e.set)r.set.push(s);return r}static defineModifier(){let e=new Modifier;return r=>r.modified.indexOf(e)>-1?r:Modifier.get(r.base||r,r.modified.concat(e).sort((s,o)=>s.id-o.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(e,r){if(!r.length)return e;let s=r[0].instances.find(c=>c.base==e&&sameArray(r,c.modified));if(s)return s;let o=[],a=new Tag(o,e,r);for(let c of r)c.instances.push(a);let l=powerSet(r);for(let c of e.set)if(!c.modified.length)for(let u of l)o.push(Modifier.get(c,u));return a}}function sameArray(n,e){return n.length==e.length&&n.every((r,s)=>r==e[s])}function powerSet(n){let e=[[]];for(let r=0;r<n.length;r++)for(let s=0,o=e.length;s<o;s++)e.push(e[s].concat(n[r]));return e.sort((r,s)=>s.length-r.length)}function styleTags(n){let e=Object.create(null);for(let r in n){let s=n[r];Array.isArray(s)||(s=[s]);for(let o of r.split(" "))if(o){let a=[],l=2,c=o;for(let g=0;;){if(c=="..."&&g>0&&g+3==o.length){l=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!m)throw new RangeError("Invalid path: "+o);if(a.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),g+=m[0].length,g==o.length)break;let _=o[g++];if(g==o.length&&_=="!"){l=0;break}if(_!="/")throw new RangeError("Invalid path: "+o);c=o.slice(g)}let u=a.length-1,f=a[u];if(!f)throw new RangeError("Invalid path: "+o);let d=new Rule(s,l,u>0?a.slice(0,u):null);e[f]=d.sort(e[f])}}return ruleNodeProp.add(e)}const ruleNodeProp=new NodeProp;class Rule{constructor(e,r,s,o){this.tags=e,this.mode=r,this.context=s,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(n,e){let r=Object.create(null);for(let a of n)if(!Array.isArray(a.tag))r[a.tag.id]=a.class;else for(let l of a.tag)r[l.id]=a.class;let{scope:s,all:o=null}=e||{};return{style:a=>{let l=o;for(let c of a)for(let u of c.set){let f=r[u.id];if(f){l=l?l+" "+f:f;break}}return l},scope:s}}function highlightTags(n,e){let r=null;for(let s of n){let o=s.style(e);o&&(r=r?r+" "+o:o)}return r}function highlightTree(n,e,r,s=0,o=n.length){let a=new HighlightBuilder(s,Array.isArray(e)?e:[e],r);a.highlightRange(n.cursor(),s,o,"",a.highlighters),a.flush(o)}class HighlightBuilder{constructor(e,r,s){this.at=e,this.highlighters=r,this.span=s,this.class=""}startSpan(e,r){r!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=r)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,r,s,o,a){let{type:l,from:c,to:u}=e;if(c>=s||u<=r)return;l.isTop&&(a=this.highlighters.filter(_=>!_.scope||_.scope(l)));let f=o,d=getStyleTags(e)||Rule.empty,g=highlightTags(a,d.tags);if(g&&(f&&(f+=" "),f+=g,d.mode==1&&(o+=(o?" ":"")+g)),this.startSpan(e.from,f),d.opaque)return;let m=e.tree&&e.tree.prop(NodeProp.mounted);if(m&&m.overlay){let _=e.node.enter(m.overlay[0].from+c,1),E=this.highlighters.filter(b=>!b.scope||b.scope(m.tree.type)),A=e.firstChild();for(let b=0,v=c;;b++){let M=b<m.overlay.length?m.overlay[b]:null,V=M?M.from+c:u,R=Math.max(r,v),L=Math.min(s,V);if(R<L&&A)for(;e.from<L&&(this.highlightRange(e,R,L,o,a),this.startSpan(Math.min(L,e.to),f),!(e.to>=V||!e.nextSibling())););if(!M||V>s)break;v=M.to+c,v>r&&(this.highlightRange(_.cursor(),Math.max(r,M.from+c),Math.min(s,v),o,E),this.startSpan(v,f))}A&&e.parent()}else if(e.firstChild()){do if(!(e.to<=r)){if(e.from>=s)break;this.highlightRange(e,r,s,o,a),this.startSpan(Math.min(s,e.to),f)}while(e.nextSibling());e.parent()}}}function getStyleTags(n){let e=n.type.prop(ruleNodeProp);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags$1={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags$1.link,class:"tok-link"},{tag:tags$1.heading,class:"tok-heading"},{tag:tags$1.emphasis,class:"tok-emphasis"},{tag:tags$1.strong,class:"tok-strong"},{tag:tags$1.keyword,class:"tok-keyword"},{tag:tags$1.atom,class:"tok-atom"},{tag:tags$1.bool,class:"tok-bool"},{tag:tags$1.url,class:"tok-url"},{tag:tags$1.labelName,class:"tok-labelName"},{tag:tags$1.inserted,class:"tok-inserted"},{tag:tags$1.deleted,class:"tok-deleted"},{tag:tags$1.literal,class:"tok-literal"},{tag:tags$1.string,class:"tok-string"},{tag:tags$1.number,class:"tok-number"},{tag:[tags$1.regexp,tags$1.escape,tags$1.special(tags$1.string)],class:"tok-string2"},{tag:tags$1.variableName,class:"tok-variableName"},{tag:tags$1.local(tags$1.variableName),class:"tok-variableName tok-local"},{tag:tags$1.definition(tags$1.variableName),class:"tok-variableName tok-definition"},{tag:tags$1.special(tags$1.variableName),class:"tok-variableName2"},{tag:tags$1.definition(tags$1.propertyName),class:"tok-propertyName tok-definition"},{tag:tags$1.typeName,class:"tok-typeName"},{tag:tags$1.namespace,class:"tok-namespace"},{tag:tags$1.className,class:"tok-className"},{tag:tags$1.macroName,class:"tok-macroName"},{tag:tags$1.propertyName,class:"tok-propertyName"},{tag:tags$1.operator,class:"tok-operator"},{tag:tags$1.comment,class:"tok-comment"},{tag:tags$1.meta,class:"tok-meta"},{tag:tags$1.invalid,class:"tok-invalid"},{tag:tags$1.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(n){return Facet.define({combine:n?e=>e.concat(n):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(e,r,s=[],o=""){this.data=e,this.name=o,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=r,this.extension=[language.of(this),EditorState.languageData.of((a,l,c)=>{let u=topNodeAt(a,l,c),f=u.type.prop(languageDataProp);if(!f)return[];let d=a.facet(f),g=u.type.prop(sublanguageProp);if(g){let m=u.resolve(l-u.from,c);for(let _ of g)if(_.test(m,a)){let E=a.facet(_.facet);return _.type=="replace"?E:E.concat(d)}}return d})].concat(s)}isActiveAt(e,r,s=-1){return topNodeAt(e,r,s).type.prop(languageDataProp)==this.data}findRegions(e){let r=e.facet(language);if((r==null?void 0:r.data)==this.data)return[{from:0,to:e.doc.length}];if(!r||!r.allowsNesting)return[];let s=[],o=(a,l)=>{if(a.prop(languageDataProp)==this.data){s.push({from:l,to:l+a.length});return}let c=a.prop(NodeProp.mounted);if(c){if(c.tree.prop(languageDataProp)==this.data){if(c.overlay)for(let u of c.overlay)s.push({from:u.from+l,to:u.to+l});else s.push({from:l,to:l+a.length});return}else if(c.overlay){let u=s.length;if(o(c.tree,c.overlay[0].from+l),s.length>u)return}}for(let u=0;u<a.children.length;u++){let f=a.children[u];f instanceof Tree&&o(f,a.positions[u]+l)}};return o(syntaxTree(e),0),s}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(n,e,r){let s=n.facet(language),o=syntaxTree(n).topNode;if(!s||s.allowsNesting)for(let a=o;a;a=a.enter(e,r,IterMode.ExcludeBuffers))a.type.isTop&&(o=a);return o}class LRLanguage extends Language{constructor(e,r,s){super(e,r,[],s),this.parser=r}static define(e){let r=defineLanguageFacet(e.languageData);return new LRLanguage(r,e.parser.configure({props:[languageDataProp.add(s=>s.isTop?r:void 0)]}),e.name)}configure(e,r){return new LRLanguage(this.data,this.parser.configure(e),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(n){let e=n.field(Language.state,!1);return e?e.tree:Tree.empty}class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,r){let s=this.cursorPos-this.string.length;return e<s||r>=this.cursorPos?this.doc.sliceString(e,r):this.string.slice(e-s,r-s)}}let currentContext=null;class ParseContext{constructor(e,r,s=[],o,a,l,c,u){this.parser=e,this.state=r,this.fragments=s,this.tree=o,this.treeLen=a,this.viewport=l,this.skipped=c,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,r,s){return new ParseContext(e,r,[],Tree.empty,0,s,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=Tree.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof e=="number"){let o=Date.now()+e;e=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,r;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=e,this.tree=r,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let r=currentContext;currentContext=this;try{return e()}finally{currentContext=r}}withoutTempSkipped(e){for(let r;r=this.tempSkipped.pop();)e=cutFragments(e,r.from,r.to);return e}changes(e,r){let{fragments:s,tree:o,treeLen:a,viewport:l,skipped:c}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((f,d,g,m)=>u.push({fromA:f,toA:d,fromB:g,toB:m})),s=TreeFragment.applyChanges(s,u),o=Tree.empty,a=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){c=[];for(let f of this.skipped){let d=e.mapPos(f.from,1),g=e.mapPos(f.to,-1);d<g&&c.push({from:d,to:g})}}}return new ParseContext(this.parser,r,s,o,a,l,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let r=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:o,to:a}=this.skipped[s];o<e.to&&a>e.from&&(this.fragments=cutFragments(this.fragments,o,a),this.skipped.splice(s--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,r){this.skipped.push({from:e,to:r})}static getSkippingParser(e){return new class extends Parser{createParse(r,s,o){let a=o[0].from,l=o[o.length-1].to;return{parsedPos:a,advance(){let u=currentContext;if(u){for(let f of o)u.tempSkipped.push(f);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=l,new Tree(NodeType.none,[],[],l-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let r=this.fragments;return this.treeLen>=e&&r.length&&r[0].from==0&&r[0].to>=e}static get(){return currentContext}}function cutFragments(n,e,r){return TreeFragment.applyChanges(n,[{fromA:e,toA:r,fromB:e,toB:r}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(e.changes,e.state),s=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,s)||r.takeTree(),new LanguageState(r)}static init(e){let r=Math.min(3e3,e.doc.length),s=ParseContext.create(e.facet(language).parser,e,{from:0,to:r});return s.work(20,r)||s.takeTree(),new LanguageState(s)}}Language.state=StateField.define({create:LanguageState.init,update(n,e){for(let r of e.effects)if(r.is(Language.setState))return r.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):n.apply(e)}});let requestIdle=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(requestIdle=n=>{let e=-1,r=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(r):cancelIdleCallback(e)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let r=this.view.state.field(Language.state).context;(r.updateViewport(e.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:e}=this.view,r=e.field(Language.state);(r.tree!=r.context.tree||!r.context.isDone(e.doc.length))&&(this.working=requestIdle(this.work))}work(e){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:s,viewport:{to:o}}=this.view,a=s.field(Language.state);if(a.tree==a.context.tree&&a.context.isDone(o+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),c=a.context.treeLen<o&&s.doc.length>o+1e3,u=a.context.work(()=>isInputPending&&isInputPending()||Date.now()>l,o+(c?0:1e5));this.chunkBudget-=Date.now()-r,(u||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(a.context))})),this.chunkBudget>0&&!(u&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(r=>logException(this.view.state,r)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(n){return n.length?n[0]:null},enables:n=>[Language.state,parseWorker,EditorView.contentAttributes.compute([n],e=>{let r=e.facet(n);return r&&r.name?{"data-language":r.name}:{}})]});class LanguageSupport{constructor(e,r=[]){this.language=e,this.support=r,this.extension=[e,r]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(r=>r!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function getIndentUnit(n){let e=n.facet(indentUnit);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function indentString(n,e){let r="",s=n.tabSize,o=n.facet(indentUnit)[0];if(o=="	"){for(;e>=s;)r+="	",e-=s;o=" "}for(let a=0;a<e;a++)r+=o;return r}function getIndentation(n,e){n instanceof EditorState&&(n=new IndentContext(n));for(let s of n.state.facet(indentService)){let o=s(n,e);if(o!==void 0)return o}let r=syntaxTree(n.state);return r?syntaxIndentation(n,r,e):null}class IndentContext{constructor(e,r={}){this.state=e,this.options=r,this.unit=getIndentUnit(e)}lineAt(e,r=1){let s=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:a}=this.options;return o!=null&&o>=s.from&&o<=s.to?a&&o==e?{text:"",from:e}:(r<0?o<e:o<=e)?{text:s.text.slice(o-s.from),from:o}:{text:s.text.slice(0,o-s.from),from:s.from}:s}textAfterPos(e,r=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:s,from:o}=this.lineAt(e,r);return s.slice(e-o,Math.min(s.length,e+100-o))}column(e,r=1){let{text:s,from:o}=this.lineAt(e,r),a=this.countColumn(s,e-o),l=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return l>-1&&(a+=l-this.countColumn(s,s.search(/\S|$/))),a}countColumn(e,r=e.length){return countColumn(e,this.state.tabSize,r)}lineIndent(e,r=1){let{text:s,from:o}=this.lineAt(e,r),a=this.options.overrideIndentation;if(a){let l=a(o);if(l>-1)return l}return this.countColumn(s,s.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(n,e,r){return indentFrom(e.resolveInner(r).enterUnfinishedNodesBefore(r),r,n)}function ignoreClosed(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function indentStrategy(n){let e=n.type.prop(indentNodeProp);if(e)return e;let r=n.firstChild,s;if(r&&(s=r.type.prop(NodeProp.closedBy))){let o=n.lastChild,a=o&&s.indexOf(o.name)>-1;return l=>delimitedStrategy(l,!0,1,void 0,a&&!ignoreClosed(l)?o.from:void 0)}return n.parent==null?topIndent:null}function indentFrom(n,e,r){for(;n;n=n.parent){let s=indentStrategy(n);if(s)return s(TreeIndentContext.create(r,e,n))}return null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,r,s){super(e.state,e.options),this.base=e,this.pos=r,this.node=s}static create(e,r,s){return new TreeIndentContext(e,r,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let r=this.node.resolve(e.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(isParent(r,this.node))break;e=this.state.doc.lineAt(r.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?indentFrom(e,this.pos,this.base):0}}function isParent(n,e){for(let r=e;r;r=r.parent)if(n==r)return!0;return!1}function bracketedAligned(n){let e=n.node,r=e.childAfter(e.from),s=e.lastChild;if(!r)return null;let o=n.options.simulateBreak,a=n.state.doc.lineAt(r.from),l=o==null||o<=a.from?a.to:Math.min(a.to,o);for(let c=r.to;;){let u=e.childAfter(c);if(!u||u==s)return null;if(!u.type.isSkipped)return u.from<l?r:null;c=u.to}}function delimitedStrategy(n,e,r,s,o){let a=n.textAfter,l=a.match(/^\s*/)[0].length,c=s&&a.slice(l,l+s.length)==s||o==n.pos+l,u=e?bracketedAligned(n):null;return u?c?n.column(u.from):n.column(u.to):n.baseIndent+(c?0:n.unit*r)}function continuedIndent({except:n,units:e=1}={}){return r=>{let s=n&&n.test(r.textAfter);return r.baseIndent+(s?0:e*r.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let r=n.newDoc,{head:s}=n.newSelection.main,o=r.lineAt(s);if(s>o.from+DontIndentBeyond)return n;let a=r.sliceString(o.from,s);if(!e.some(f=>f.test(a)))return n;let{state:l}=n,c=-1,u=[];for(let{head:f}of l.selection.ranges){let d=l.doc.lineAt(f);if(d.from==c)continue;c=d.from;let g=getIndentation(l,d.from);if(g==null)continue;let m=/^\s*/.exec(d.text)[0],_=indentString(l,g);m!=_&&u.push({from:d.from,to:d.from+m.length,insert:_})}return u.length?[n,{changes:u,sequential:!0}]:n})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(n){let e=n.firstChild,r=n.lastChild;return e&&e.to<r.from?{from:e.to,to:r.type.isError?n.to:r.from}:null}function syntaxFolding(n,e,r){let s=syntaxTree(n);if(s.length<r)return null;let o=s.resolveInner(r,1),a=null;for(let l=o;l;l=l.parent){if(l.to<=r||l.from>r)continue;if(a&&l.from<e)break;let c=l.type.prop(foldNodeProp);if(c&&(l.to<s.length-50||s.length==n.doc.length||!isUnfinished(l))){let u=c(l,n);u&&u.from<=r&&u.from>=e&&u.to>r&&(a=u)}}return a}function isUnfinished(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function foldable(n,e,r){for(let s of n.facet(foldService)){let o=s(n,e,r);if(o)return o}return syntaxFolding(n,e,r)}function mapRange(n,e){let r=e.mapPos(n.from,1),s=e.mapPos(n.to,-1);return r>=s?void 0:{from:r,to:s}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(n){let e=[];for(let{head:r}of n.state.selection.ranges)e.some(s=>s.from<=r&&s.to>=r)||e.push(n.lineBlockAt(r));return e}const foldState=StateField.define({create(){return Decoration.none},update(n,e){n=n.map(e.changes);for(let r of e.effects)r.is(foldEffect)&&!foldExists(n,r.value.from,r.value.to)?n=n.update({add:[foldWidget.range(r.value.from,r.value.to)]}):r.is(unfoldEffect)&&(n=n.update({filter:(s,o)=>r.value.from!=s||r.value.to!=o,filterFrom:r.value.from,filterTo:r.value.to}));if(e.selection){let r=!1,{head:s}=e.selection.main;n.between(s,s,(o,a)=>{o<s&&a>s&&(r=!0)}),r&&(n=n.update({filterFrom:s,filterTo:s,filter:(o,a)=>a<=s||o>=s}))}return n},provide:n=>EditorView.decorations.from(n),toJSON(n,e){let r=[];return n.between(0,e.doc.length,(s,o)=>{r.push(s,o)}),r},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let r=0;r<n.length;){let s=n[r++],o=n[r++];if(typeof s!="number"||typeof o!="number")throw new RangeError("Invalid JSON for fold state");e.push(foldWidget.range(s,o))}return Decoration.set(e,!0)}});function findFold(n,e,r){var s;let o=null;return(s=n.field(foldState,!1))===null||s===void 0||s.between(e,r,(a,l)=>{(!o||o.from>a)&&(o={from:a,to:l})}),o}function foldExists(n,e,r){let s=!1;return n.between(e,e,(o,a)=>{o==e&&a==r&&(s=!0)}),s}function maybeEnable(n,e){return n.field(foldState,!1)?e:e.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=n=>{for(let e of selectedLines(n)){let r=foldable(n.state,e.from,e.to);if(r)return n.dispatch({effects:maybeEnable(n.state,[foldEffect.of(r),announceFold(n,r)])}),!0}return!1},unfoldCode=n=>{if(!n.state.field(foldState,!1))return!1;let e=[];for(let r of selectedLines(n)){let s=findFold(n.state,r.from,r.to);s&&e.push(unfoldEffect.of(s),announceFold(n,s,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function announceFold(n,e,r=!0){let s=n.state.doc.lineAt(e.from).number,o=n.state.doc.lineAt(e.to).number;return EditorView.announce.of(`${n.state.phrase(r?"Folded lines":"Unfolded lines")} ${s} ${n.state.phrase("to")} ${o}.`)}const foldAll=n=>{let{state:e}=n,r=[];for(let s=0;s<e.doc.length;){let o=n.lineBlockAt(s),a=foldable(e,o.from,o.to);a&&r.push(foldEffect.of(a)),s=(a?n.lineBlockAt(a.to):o).to+1}return r.length&&n.dispatch({effects:maybeEnable(n.state,r)}),!!r.length},unfoldAll=n=>{let e=n.state.field(foldState,!1);if(!e||!e.size)return!1;let r=[];return e.between(0,n.state.doc.length,(s,o)=>{r.push(unfoldEffect.of({from:s,to:o}))}),n.dispatch({effects:r}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,placeholderText:"…"},foldConfig=Facet.define({combine(n){return combineConfig(n,defaultConfig)}});function codeFolding(n){let e=[foldState,baseTheme$1$2];return n&&e.push(foldConfig.of(n)),e}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(n){let{state:e}=n,r=e.facet(foldConfig),s=a=>{let l=n.lineBlockAt(n.posAtDOM(a.target)),c=findFold(n.state,l.from,l.to);c&&n.dispatch({effects:unfoldEffect.of(c)}),a.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,s);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",e.phrase("folded code")),o.title=e.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=s,o}}}),foldGutterDefaults={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(e,r){super(),this.config=e,this.open=r}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=e.state.phrase(this.open?"Fold line":"Unfold line"),r}}function foldGutter(n={}){let e=Object.assign(Object.assign({},foldGutterDefaults),n),r=new FoldMarker(e,!0),s=new FoldMarker(e,!1),o=ViewPlugin.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(language)!=l.state.facet(language)||l.startState.field(foldState,!1)!=l.state.field(foldState,!1)||syntaxTree(l.startState)!=syntaxTree(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let c=new RangeSetBuilder;for(let u of l.viewportLineBlocks){let f=findFold(l.state,u.from,u.to)?s:foldable(l.state,u.from,u.to)?r:null;f&&c.add(u.from,u.from,f)}return c.finish()}}),{domEventHandlers:a}=e;return[o,gutter({class:"cm-foldGutter",markers(l){var c;return((c=l.plugin(o))===null||c===void 0?void 0:c.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(e,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(l,c,u)=>{if(a.click&&a.click(l,c,u))return!0;let f=findFold(l.state,c.from,c.to);if(f)return l.dispatch({effects:unfoldEffect.of(f)}),!0;let d=foldable(l.state,c.from,c.to);return d?(l.dispatch({effects:foldEffect.of(d)}),!0):!1}})}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(e,r){this.specs=e;let s;function o(c){let u=StyleModule.newName();return(s||(s=Object.create(null)))["."+u]=c,u}const a=typeof r.all=="string"?r.all:r.all?o(r.all):void 0,l=r.scope;this.scope=l instanceof Language?c=>c.prop(languageDataProp)==l.data:l?c=>c==l:void 0,this.style=tagHighlighter(e.map(c=>({tag:c.tag,class:c.class||o(Object.assign({},c,{tag:null}))})),{all:a}).style,this.module=s?new StyleModule(s):null,this.themeType=r.themeType}static define(e,r){return new HighlightStyle(e,r||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(n){return n.length?[n[0]]:null}});function getHighlighters(n){let e=n.facet(highlighterFacet);return e.length?e:n.facet(fallbackHighlighter)}function syntaxHighlighting(n,e){let r=[treeHighlighter],s;return n instanceof HighlightStyle&&(n.module&&r.push(EditorView.styleModule.of(n.module)),s=n.themeType),e!=null&&e.fallback?r.push(fallbackHighlighter.of(n)):s?r.push(highlighterFacet.computeN([EditorView.darkTheme],o=>o.facet(EditorView.darkTheme)==(s=="dark")?[n]:[])):r.push(highlighterFacet.of(n)),r}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state))}update(e){let r=syntaxTree(e.state),s=getHighlighters(e.state),o=s!=getHighlighters(e.startState);r.length<e.view.viewport.to&&!o&&r.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(r!=this.tree||e.viewportChanged||o)&&(this.tree=r,this.decorations=this.buildDeco(e.view,s))}buildDeco(e,r){if(!r||!this.tree.length)return Decoration.none;let s=new RangeSetBuilder;for(let{from:o,to:a}of e.visibleRanges)highlightTree(this.tree,r,(l,c,u)=>{s.add(l,c,this.markCache[u]||(this.markCache[u]=Decoration.mark({class:u})))},o,a);return s.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:n=>n.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags$1.meta,color:"#404740"},{tag:tags$1.link,textDecoration:"underline"},{tag:tags$1.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags$1.emphasis,fontStyle:"italic"},{tag:tags$1.strong,fontWeight:"bold"},{tag:tags$1.strikethrough,textDecoration:"line-through"},{tag:tags$1.keyword,color:"#708"},{tag:[tags$1.atom,tags$1.bool,tags$1.url,tags$1.contentSeparator,tags$1.labelName],color:"#219"},{tag:[tags$1.literal,tags$1.inserted],color:"#164"},{tag:[tags$1.string,tags$1.deleted],color:"#a11"},{tag:[tags$1.regexp,tags$1.escape,tags$1.special(tags$1.string)],color:"#e40"},{tag:tags$1.definition(tags$1.variableName),color:"#00f"},{tag:tags$1.local(tags$1.variableName),color:"#30a"},{tag:[tags$1.typeName,tags$1.namespace],color:"#085"},{tag:tags$1.className,color:"#167"},{tag:[tags$1.special(tags$1.variableName),tags$1.macroName],color:"#256"},{tag:tags$1.definition(tags$1.propertyName),color:"#00c"},{tag:tags$1.comment,color:"#940"},{tag:tags$1.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(n){return combineConfig(n,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(n){let e=[],r=n.matched?matchingMark:nonmatchingMark;return e.push(r.range(n.start.from,n.start.to)),n.end&&e.push(r.range(n.end.from,n.end.to)),e}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let r=[],s=e.state.facet(bracketMatchingConfig);for(let o of e.state.selection.ranges){if(!o.empty)continue;let a=matchBrackets(e.state,o.head,-1,s)||o.head>0&&matchBrackets(e.state,o.head-1,1,s)||s.afterCursor&&(matchBrackets(e.state,o.head,1,s)||o.head<e.state.doc.length&&matchBrackets(e.state,o.head+1,-1,s));a&&(r=r.concat(s.renderMatch(a,e.state)))}return Decoration.set(r,!0)},provide:n=>EditorView.decorations.from(n)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(n={}){return[bracketMatchingConfig.of(n),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(n,e,r){let s=n.prop(e<0?NodeProp.openedBy:NodeProp.closedBy);if(s)return s;if(n.name.length==1){let o=r.indexOf(n.name);if(o>-1&&o%2==(e<0?1:0))return[r[o+e]]}return null}function findHandle(n){let e=n.type.prop(bracketMatchingHandle);return e?e(n.node):n}function matchBrackets(n,e,r,s={}){let o=s.maxScanDistance||DefaultScanDist,a=s.brackets||DefaultBrackets,l=syntaxTree(n),c=l.resolveInner(e,r);for(let u=c;u;u=u.parent){let f=matchingNodes(u.type,r,a);if(f&&u.from<u.to){let d=findHandle(u);if(d&&(r>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return matchMarkedBrackets(n,e,r,u,d,f,a)}}return matchPlainBrackets(n,e,r,l,c.type,o,a)}function matchMarkedBrackets(n,e,r,s,o,a,l){let c=s.parent,u={from:o.from,to:o.to},f=0,d=c==null?void 0:c.cursor();if(d&&(r<0?d.childBefore(s.from):d.childAfter(s.to)))do if(r<0?d.to<=s.from:d.from>=s.to){if(f==0&&a.indexOf(d.type.name)>-1&&d.from<d.to){let g=findHandle(d);return{start:u,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(matchingNodes(d.type,r,l))f++;else if(matchingNodes(d.type,-r,l)){if(f==0){let g=findHandle(d);return{start:u,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}f--}}while(r<0?d.prevSibling():d.nextSibling());return{start:u,matched:!1}}function matchPlainBrackets(n,e,r,s,o,a,l){let c=r<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),u=l.indexOf(c);if(u<0||u%2==0!=r>0)return null;let f={from:r<0?e-1:e,to:r>0?e+1:e},d=n.doc.iterRange(e,r>0?n.doc.length:0),g=0;for(let m=0;!d.next().done&&m<=a;){let _=d.value;r<0&&(m+=_.length);let E=e+m*r;for(let A=r>0?0:_.length-1,b=r>0?_.length:-1;A!=b;A+=r){let v=l.indexOf(_[A]);if(!(v<0||s.resolveInner(E+A,1).type!=o))if(v%2==0==r>0)g++;else{if(g==1)return{start:f,end:{from:E+A,to:E+A+1},matched:v>>1==u>>1};g--}}r>0&&(m+=_.length)}return d.done?{start:f,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],defaultTable=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[n]=createTokenType(noTokens,e);function warnForPart(n,e){warned.indexOf(n)>-1||(warned.push(n),console.warn(e))}function createTokenType(n,e){let r=null;for(let a of e.split(".")){let l=n[a]||tags$1[a];l?typeof l=="function"?r?r=l(r):warnForPart(a,`Modifier ${a} used at start of tag`):r?warnForPart(a,`Tag ${a} used as modifier`):r=l:warnForPart(a,`Unknown highlighting tag ${a}`)}if(!r)return 0;let s=e.replace(/ /g,"_"),o=NodeType.define({id:typeArray.length,name:s,props:[styleTags({[s]:r})]});return typeArray.push(o),o.id}const toggleComment=n=>{let{state:e}=n,r=e.doc.lineAt(e.selection.main.head),s=getConfig(n.state,r.from);return s.line?toggleLineComment(n):s.block?toggleBlockCommentByLine(n):!1};function command(n,e){return({state:r,dispatch:s})=>{if(r.readOnly)return!1;let o=n(e,r);return o?(s(r.update(o)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((n,e)=>changeBlockComment(n,e,selectedLineRanges(e)),0);function getConfig(n,e){let r=n.languageDataAt("commentTokens",e);return r.length?r[0]:{}}const SearchMargin=50;function findBlockComment(n,{open:e,close:r},s,o){let a=n.sliceDoc(s-SearchMargin,s),l=n.sliceDoc(o,o+SearchMargin),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,f=a.length-c;if(a.slice(f-e.length,f)==e&&l.slice(u,u+r.length)==r)return{open:{pos:s-c,margin:c&&1},close:{pos:o+u,margin:u&&1}};let d,g;o-s<=2*SearchMargin?d=g=n.sliceDoc(s,o):(d=n.sliceDoc(s,s+SearchMargin),g=n.sliceDoc(o-SearchMargin,o));let m=/^\s*/.exec(d)[0].length,_=/\s*$/.exec(g)[0].length,E=g.length-_-r.length;return d.slice(m,m+e.length)==e&&g.slice(E,E+r.length)==r?{open:{pos:s+m+e.length,margin:/\s/.test(d.charAt(m+e.length))?1:0},close:{pos:o-_-r.length,margin:/\s/.test(g.charAt(E-1))?1:0}}:null}function selectedLineRanges(n){let e=[];for(let r of n.selection.ranges){let s=n.doc.lineAt(r.from),o=r.to<=s.to?s:n.doc.lineAt(r.to),a=e.length-1;a>=0&&e[a].to>s.from?e[a].to=o.to:e.push({from:s.from,to:o.to})}return e}function changeBlockComment(n,e,r=e.selection.ranges){let s=r.map(a=>getConfig(e,a.from).block);if(!s.every(a=>a))return null;let o=r.map((a,l)=>findBlockComment(e,s[l],a.from,a.to));if(n!=2&&!o.every(a=>a))return{changes:e.changes(r.map((a,l)=>o[l]?[]:[{from:a.from,insert:s[l].open+" "},{from:a.to,insert:" "+s[l].close}]))};if(n!=1&&o.some(a=>a)){let a=[];for(let l=0,c;l<o.length;l++)if(c=o[l]){let u=s[l],{open:f,close:d}=c;a.push({from:f.pos-u.open.length,to:f.pos+f.margin},{from:d.pos-d.margin,to:d.pos+u.close.length})}return{changes:a}}return null}function changeLineComment(n,e,r=e.selection.ranges){let s=[],o=-1;for(let{from:a,to:l}of r){let c=s.length,u=1e9;for(let f=a;f<=l;){let d=e.doc.lineAt(f);if(d.from>o&&(a==l||l>d.from)){o=d.from;let g=getConfig(e,d.from).line;if(!g)continue;let m=/^\s*/.exec(d.text)[0].length,_=m==d.length,E=d.text.slice(m,m+g.length)==g?m:-1;m<d.text.length&&m<u&&(u=m),s.push({line:d,comment:E,token:g,indent:m,empty:_,single:!1})}f=d.to+1}if(u<1e9)for(let f=c;f<s.length;f++)s[f].indent<s[f].line.text.length&&(s[f].indent=u);s.length==c+1&&(s[c].single=!0)}if(n!=2&&s.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:c,token:u,indent:f,empty:d,single:g}of s)(g||!d)&&a.push({from:c.from+f,insert:u+" "});let l=e.changes(a);return{changes:l,selection:e.selection.map(l,1)}}else if(n!=1&&s.some(a=>a.comment>=0)){let a=[];for(let{line:l,comment:c,token:u}of s)if(c>=0){let f=l.from+c,d=f+u.length;l.text[d-l.from]==" "&&d++,a.push({from:f,to:d})}return{changes:a}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(n){return combineConfig(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,r)=>(s,o)=>e(s,o)||r(s,o)})}});function changeEnd(n){let e=0;return n.iterChangedRanges((r,s)=>e=s),e}const historyField_=StateField.define({create(){return HistoryState.empty},update(n,e){let r=e.state.facet(historyConfig),s=e.annotation(fromHistory);if(s){let u=e.docChanged?EditorSelection.single(changeEnd(e.changes)):void 0,f=HistEvent.fromTransaction(e,u),d=s.side,g=d==0?n.undone:n.done;return f?g=updateBranch(g,g.length,r.minDepth,f):g=addSelection(g,e.startState.selection),new HistoryState(d==0?s.rest:g,d==0?g:s.rest)}let o=e.annotation(isolateHistory);if((o=="full"||o=="before")&&(n=n.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let a=HistEvent.fromTransaction(e),l=e.annotation(Transaction.time),c=e.annotation(Transaction.userEvent);return a?n=n.addChanges(a,l,c,r,e):e.selection&&(n=n.addSelection(e.startState.selection,l,c,r.newGroupDelay)),(o=="full"||o=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new HistoryState(n.done.map(HistEvent.fromJSON),n.undone.map(HistEvent.fromJSON))}});function history(n={}){return[historyField_,historyConfig.of(n),EditorView.domEventHandlers({beforeinput(e,r){let s=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;return s?(e.preventDefault(),s(r)):!1}})]}function cmd(n,e){return function({state:r,dispatch:s}){if(!e&&r.readOnly)return!1;let o=r.field(historyField_,!1);if(!o)return!1;let a=o.pop(n,r,e);return a?(s(a),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,r,s,o,a){this.changes=e,this.effects=r,this.mapped=s,this.startSelection=o,this.selectionsAfter=a}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,r,s;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(s=this.startSelection)===null||s===void 0?void 0:s.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,r){let s=none$1;for(let o of e.startState.facet(invertedEffects)){let a=o(e);a.length&&(s=s.concat(a))}return!s.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),s,void 0,r||e.startState.selection,none$1)}static selection(e){return new HistEvent(void 0,none$1,void 0,void 0,e)}}function updateBranch(n,e,r,s){let o=e+1>r+20?e-r-1:0,a=n.slice(o,e);return a.push(s),a}function isAdjacent(n,e){let r=[],s=!1;return n.iterChangedRanges((o,a)=>r.push(o,a)),e.iterChangedRanges((o,a,l,c)=>{for(let u=0;u<r.length;){let f=r[u++],d=r[u++];c>=f&&l<=d&&(s=!0)}}),s}function eqSelectionShape(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((r,s)=>r.empty!=e.ranges[s].empty).length===0}function conc(n,e){return n.length?e.length?n.concat(e):n:e}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(n,e){if(n.length){let r=n[n.length-1],s=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-MaxSelectionsPerEvent));return s.length&&s[s.length-1].eq(e)?n:(s.push(e),updateBranch(n,n.length-1,1e9,r.setSelAfter(s)))}else return[HistEvent.selection([e])]}function popSelection(n){let e=n[n.length-1],r=n.slice();return r[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),r}function addMappingToBranch(n,e){if(!n.length)return n;let r=n.length,s=none$1;for(;r;){let o=mapEvent(n[r-1],e,s);if(o.changes&&!o.changes.empty||o.effects.length){let a=n.slice(0,r);return a[r-1]=o,a}else e=o.mapped,r--,s=o.selectionsAfter}return s.length?[HistEvent.selection(s)]:none$1}function mapEvent(n,e,r){let s=conc(n.selectionsAfter.length?n.selectionsAfter.map(c=>c.map(e)):none$1,r);if(!n.changes)return HistEvent.selection(s);let o=n.changes.map(e),a=e.mapDesc(n.changes,!0),l=n.mapped?n.mapped.composeDesc(a):a;return new HistEvent(o,StateEffect.mapEffects(n.effects,e),l,n.startSelection.map(a),s)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,r,s=0,o=void 0){this.done=e,this.undone=r,this.prevTime=s,this.prevUserEvent=o}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,r,s,o,a){let l=this.done,c=l[l.length-1];return c&&c.changes&&!c.changes.empty&&e.changes&&(!s||joinableUserEvent.test(s))&&(!c.selectionsAfter.length&&r-this.prevTime<o.newGroupDelay&&o.joinToEvent(a,isAdjacent(c.changes,e.changes))||s=="input.type.compose")?l=updateBranch(l,l.length-1,o.minDepth,new HistEvent(e.changes.compose(c.changes),conc(e.effects,c.effects),c.mapped,c.startSelection,none$1)):l=updateBranch(l,l.length,o.minDepth,e),new HistoryState(l,none$1,r,s)}addSelection(e,r,s,o){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return a.length>0&&r-this.prevTime<o&&s==this.prevUserEvent&&s&&/^select($|\.)/.test(s)&&eqSelectionShape(a[a.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,r,s)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,r,s){let o=e==0?this.done:this.undone;if(o.length==0)return null;let a=o[o.length-1];if(s&&a.selectionsAfter.length)return r.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(o)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let l=o.length==1?none$1:o.slice(0,o.length-1);return a.mapped&&(l=addMappingToBranch(l,a.mapped)),r.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:fromHistory.of({side:e,rest:l}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(n,e){return EditorSelection.create(n.ranges.map(e),n.mainIndex)}function setSel(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:n,dispatch:e},r){let s=updateSel(n.selection,r);return s.eq(n.selection)?!1:(e(setSel(n,s)),!0)}function rangeEnd(n,e){return EditorSelection.cursor(e?n.to:n.from)}function cursorByChar(n,e){return moveSel(n,r=>r.empty?n.moveByChar(r,e):rangeEnd(r,e))}function ltrAtCursor(n){return n.textDirectionAt(n.state.selection.main.head)==Direction.LTR}const cursorCharLeft=n=>cursorByChar(n,!ltrAtCursor(n)),cursorCharRight=n=>cursorByChar(n,ltrAtCursor(n));function cursorByGroup(n,e){return moveSel(n,r=>r.empty?n.moveByGroup(r,e):rangeEnd(r,e))}const cursorGroupLeft=n=>cursorByGroup(n,!ltrAtCursor(n)),cursorGroupRight=n=>cursorByGroup(n,ltrAtCursor(n));function interestingNode(n,e,r){if(e.type.prop(r))return!0;let s=e.to-e.from;return s&&(s>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(n,e,r){let s=syntaxTree(n).resolveInner(e.head),o=r?NodeProp.closedBy:NodeProp.openedBy;for(let u=e.head;;){let f=r?s.childAfter(u):s.childBefore(u);if(!f)break;interestingNode(n,f,o)?s=f:u=r?f.to:f.from}let a=s.type.prop(o),l,c;return a&&(l=r?matchBrackets(n,s.from,1):matchBrackets(n,s.to,-1))&&l.matched?c=r?l.end.to:l.end.from:c=r?s.to:s.from,EditorSelection.cursor(c,r?-1:1)}const cursorSyntaxLeft=n=>moveSel(n,e=>moveBySyntax(n.state,e,!ltrAtCursor(n))),cursorSyntaxRight=n=>moveSel(n,e=>moveBySyntax(n.state,e,ltrAtCursor(n)));function cursorByLine(n,e){return moveSel(n,r=>{if(!r.empty)return rangeEnd(r,e);let s=n.moveVertically(r,e);return s.head!=r.head?s:n.moveToLineBoundary(r,e)})}const cursorLineUp=n=>cursorByLine(n,!1),cursorLineDown=n=>cursorByLine(n,!0);function pageInfo(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,r=0,s=0,o;if(e){for(let a of n.state.facet(EditorView.scrollMargins)){let l=a(n);l!=null&&l.top&&(r=Math.max(l==null?void 0:l.top,r)),l!=null&&l.bottom&&(s=Math.max(l==null?void 0:l.bottom,s))}o=n.scrollDOM.clientHeight-r-s}else o=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:s,selfScroll:e,height:Math.max(n.defaultLineHeight,o-5)}}function cursorByPage(n,e){let r=pageInfo(n),{state:s}=n,o=updateSel(s.selection,l=>l.empty?n.moveVertically(l,e,r.height):rangeEnd(l,e));if(o.eq(s.selection))return!1;let a;if(r.selfScroll){let l=n.coordsAtPos(s.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),u=c.top+r.marginTop,f=c.bottom-r.marginBottom;l&&l.top>u&&l.bottom<f&&(a=EditorView.scrollIntoView(o.main.head,{y:"start",yMargin:l.top-u}))}return n.dispatch(setSel(s,o),{effects:a}),!0}const cursorPageUp=n=>cursorByPage(n,!1),cursorPageDown=n=>cursorByPage(n,!0);function moveByLineBoundary(n,e,r){let s=n.lineBlockAt(e.head),o=n.moveToLineBoundary(e,r);if(o.head==e.head&&o.head!=(r?s.to:s.from)&&(o=n.moveToLineBoundary(e,r,!1)),!r&&o.head==s.from&&s.length){let a=/^\s*/.exec(n.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;a&&e.head!=s.from+a&&(o=EditorSelection.cursor(s.from+a))}return o}const cursorLineBoundaryForward=n=>moveSel(n,e=>moveByLineBoundary(n,e,!0)),cursorLineBoundaryBackward=n=>moveSel(n,e=>moveByLineBoundary(n,e,!1)),cursorLineBoundaryLeft=n=>moveSel(n,e=>moveByLineBoundary(n,e,!ltrAtCursor(n))),cursorLineBoundaryRight=n=>moveSel(n,e=>moveByLineBoundary(n,e,ltrAtCursor(n))),cursorLineStart=n=>moveSel(n,e=>EditorSelection.cursor(n.lineBlockAt(e.head).from,1)),cursorLineEnd=n=>moveSel(n,e=>EditorSelection.cursor(n.lineBlockAt(e.head).to,-1));function toMatchingBracket(n,e,r){let s=!1,o=updateSel(n.selection,a=>{let l=matchBrackets(n,a.head,-1)||matchBrackets(n,a.head,1)||a.head>0&&matchBrackets(n,a.head-1,1)||a.head<n.doc.length&&matchBrackets(n,a.head+1,-1);if(!l||!l.end)return a;s=!0;let c=l.start.from==a.head?l.end.to:l.end.from;return r?EditorSelection.range(a.anchor,c):EditorSelection.cursor(c)});return s?(e(setSel(n,o)),!0):!1}const cursorMatchingBracket=({state:n,dispatch:e})=>toMatchingBracket(n,e,!1);function extendSel(n,e){let r=updateSel(n.state.selection,s=>{let o=e(s);return EditorSelection.range(s.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return r.eq(n.state.selection)?!1:(n.dispatch(setSel(n.state,r)),!0)}function selectByChar(n,e){return extendSel(n,r=>n.moveByChar(r,e))}const selectCharLeft=n=>selectByChar(n,!ltrAtCursor(n)),selectCharRight=n=>selectByChar(n,ltrAtCursor(n));function selectByGroup(n,e){return extendSel(n,r=>n.moveByGroup(r,e))}const selectGroupLeft=n=>selectByGroup(n,!ltrAtCursor(n)),selectGroupRight=n=>selectByGroup(n,ltrAtCursor(n)),selectSyntaxLeft=n=>extendSel(n,e=>moveBySyntax(n.state,e,!ltrAtCursor(n))),selectSyntaxRight=n=>extendSel(n,e=>moveBySyntax(n.state,e,ltrAtCursor(n)));function selectByLine(n,e){return extendSel(n,r=>n.moveVertically(r,e))}const selectLineUp=n=>selectByLine(n,!1),selectLineDown=n=>selectByLine(n,!0);function selectByPage(n,e){return extendSel(n,r=>n.moveVertically(r,e,pageInfo(n).height))}const selectPageUp=n=>selectByPage(n,!1),selectPageDown=n=>selectByPage(n,!0),selectLineBoundaryForward=n=>extendSel(n,e=>moveByLineBoundary(n,e,!0)),selectLineBoundaryBackward=n=>extendSel(n,e=>moveByLineBoundary(n,e,!1)),selectLineBoundaryLeft=n=>extendSel(n,e=>moveByLineBoundary(n,e,!ltrAtCursor(n))),selectLineBoundaryRight=n=>extendSel(n,e=>moveByLineBoundary(n,e,ltrAtCursor(n))),selectLineStart=n=>extendSel(n,e=>EditorSelection.cursor(n.lineBlockAt(e.head).from)),selectLineEnd=n=>extendSel(n,e=>EditorSelection.cursor(n.lineBlockAt(e.head).to)),cursorDocStart=({state:n,dispatch:e})=>(e(setSel(n,{anchor:0})),!0),cursorDocEnd=({state:n,dispatch:e})=>(e(setSel(n,{anchor:n.doc.length})),!0),selectDocStart=({state:n,dispatch:e})=>(e(setSel(n,{anchor:n.selection.main.anchor,head:0})),!0),selectDocEnd=({state:n,dispatch:e})=>(e(setSel(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),selectAll=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),selectLine=({state:n,dispatch:e})=>{let r=selectedLineBlocks(n).map(({from:s,to:o})=>EditorSelection.range(s,Math.min(o+1,n.doc.length)));return e(n.update({selection:EditorSelection.create(r),userEvent:"select"})),!0},selectParentSyntax=({state:n,dispatch:e})=>{let r=updateSel(n.selection,s=>{var o;let a=syntaxTree(n).resolveInner(s.head,1);for(;!(a.from<s.from&&a.to>=s.to||a.to>s.to&&a.from<=s.from||!(!((o=a.parent)===null||o===void 0)&&o.parent));)a=a.parent;return EditorSelection.range(a.to,a.from)});return e(setSel(n,r)),!0},simplifySelection=({state:n,dispatch:e})=>{let r=n.selection,s=null;return r.ranges.length>1?s=EditorSelection.create([r.main]):r.main.empty||(s=EditorSelection.create([EditorSelection.cursor(r.main.head)])),s?(e(setSel(n,s)),!0):!1};function deleteBy(n,e){if(n.state.readOnly)return!1;let r="delete.selection",{state:s}=n,o=s.changeByRange(a=>{let{from:l,to:c}=a;if(l==c){let u=e(l);u<l?(r="delete.backward",u=skipAtomic(n,u,!1)):u>l&&(r="delete.forward",u=skipAtomic(n,u,!0)),l=Math.min(l,u),c=Math.max(c,u)}else l=skipAtomic(n,l,!1),c=skipAtomic(n,c,!0);return l==c?{range:a}:{changes:{from:l,to:c},range:EditorSelection.cursor(l)}});return o.changes.empty?!1:(n.dispatch(s.update(o,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?EditorView.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(n,e,r){if(n instanceof EditorView)for(let s of n.state.facet(EditorView.atomicRanges).map(o=>o(n)))s.between(e,e,(o,a)=>{o<e&&a>e&&(e=r?a:o)});return e}const deleteByChar=(n,e)=>deleteBy(n,r=>{let{state:s}=n,o=s.doc.lineAt(r),a,l;if(!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=countColumn(a,s.tabSize),u=c%getIndentUnit(s)||getIndentUnit(s);for(let f=0;f<u&&a[a.length-1-f]==" ";f++)r--;l=r}else l=findClusterBreak(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)&&(l+=e?1:-1);return l}),deleteCharBackward=n=>deleteByChar(n,!1),deleteCharForward=n=>deleteByChar(n,!0),deleteByGroup=(n,e)=>deleteBy(n,r=>{let s=r,{state:o}=n,a=o.doc.lineAt(s),l=o.charCategorizer(s);for(let c=null;;){if(s==(e?a.to:a.from)){s==r&&a.number!=(e?o.doc.lines:1)&&(s+=e?1:-1);break}let u=findClusterBreak(a.text,s-a.from,e)+a.from,f=a.text.slice(Math.min(s,u)-a.from,Math.max(s,u)-a.from),d=l(f);if(c!=null&&d!=c)break;(f!=" "||s!=r)&&(c=d),s=u}return s}),deleteGroupBackward=n=>deleteByGroup(n,!1),deleteGroupForward=n=>deleteByGroup(n,!0),deleteToLineEnd=n=>deleteBy(n,e=>{let r=n.lineBlockAt(e).to;return e<r?r:Math.min(n.state.doc.length,e+1)}),deleteToLineStart=n=>deleteBy(n,e=>{let r=n.lineBlockAt(e).from;return e>r?r:Math.max(0,e-1)}),splitLine=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=n.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:Text.of(["",""])},range:EditorSelection.cursor(s.from)}));return e(n.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=n.changeByRange(s=>{if(!s.empty||s.from==0||s.from==n.doc.length)return{range:s};let o=s.from,a=n.doc.lineAt(o),l=o==a.from?o-1:findClusterBreak(a.text,o-a.from,!1)+a.from,c=o==a.to?o+1:findClusterBreak(a.text,o-a.from,!0)+a.from;return{changes:{from:l,to:c,insert:n.doc.slice(o,c).append(n.doc.slice(l,o))},range:EditorSelection.cursor(c)}});return r.changes.empty?!1:(e(n.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(n){let e=[],r=-1;for(let s of n.selection.ranges){let o=n.doc.lineAt(s.from),a=n.doc.lineAt(s.to);if(!s.empty&&s.to==a.from&&(a=n.doc.lineAt(s.to-1)),r>=o.number){let l=e[e.length-1];l.to=a.to,l.ranges.push(s)}else e.push({from:o.from,to:a.to,ranges:[s]});r=a.number+1}return e}function moveLine(n,e,r){if(n.readOnly)return!1;let s=[],o=[];for(let a of selectedLineBlocks(n)){if(r?a.to==n.doc.length:a.from==0)continue;let l=n.doc.lineAt(r?a.to+1:a.from-1),c=l.length+1;if(r){s.push({from:a.to,to:l.to},{from:a.from,insert:l.text+n.lineBreak});for(let u of a.ranges)o.push(EditorSelection.range(Math.min(n.doc.length,u.anchor+c),Math.min(n.doc.length,u.head+c)))}else{s.push({from:l.from,to:a.from},{from:a.to,insert:n.lineBreak+l.text});for(let u of a.ranges)o.push(EditorSelection.range(u.anchor-c,u.head-c))}}return s.length?(e(n.update({changes:s,scrollIntoView:!0,selection:EditorSelection.create(o,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:n,dispatch:e})=>moveLine(n,e,!1),moveLineDown=({state:n,dispatch:e})=>moveLine(n,e,!0);function copyLine(n,e,r){if(n.readOnly)return!1;let s=[];for(let o of selectedLineBlocks(n))r?s.push({from:o.from,insert:n.doc.slice(o.from,o.to)+n.lineBreak}):s.push({from:o.to,insert:n.lineBreak+n.doc.slice(o.from,o.to)});return e(n.update({changes:s,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:n,dispatch:e})=>copyLine(n,e,!1),copyLineDown=({state:n,dispatch:e})=>copyLine(n,e,!0),deleteLine=n=>{if(n.state.readOnly)return!1;let{state:e}=n,r=e.changes(selectedLineBlocks(e).map(({from:o,to:a})=>(o>0?o--:a<e.doc.length&&a++,{from:o,to:a}))),s=updateSel(e.selection,o=>n.moveVertically(o,!0)).map(r);return n.dispatch({changes:r,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let r=syntaxTree(n).resolveInner(e),s=r.childBefore(e),o=r.childAfter(e),a;return s&&o&&s.to<=e&&o.from>=e&&(a=s.type.prop(NodeProp.closedBy))&&a.indexOf(o.name)>-1&&n.doc.lineAt(s.to).from==n.doc.lineAt(o.from).from?{from:s.to,to:o.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(n){return({state:e,dispatch:r})=>{if(e.readOnly)return!1;let s=e.changeByRange(o=>{let{from:a,to:l}=o,c=e.doc.lineAt(a),u=!n&&a==l&&isBetweenBrackets(e,a);n&&(a=l=(l<=c.to?c:e.doc.lineAt(l)).to);let f=new IndentContext(e,{simulateBreak:a,simulateDoubleBreak:!!u}),d=getIndentation(f,a);for(d==null&&(d=/^\s*/.exec(e.doc.lineAt(a).text)[0].length);l<c.to&&/\s/.test(c.text[l-c.from]);)l++;u?{from:a,to:l}=u:a>c.from&&a<c.from+100&&!/\S/.test(c.text.slice(0,a))&&(a=c.from);let g=["",indentString(e,d)];return u&&g.push(indentString(e,f.lineIndent(c.from,-1))),{changes:{from:a,to:l,insert:Text.of(g)},range:EditorSelection.cursor(a+1+g[1].length)}});return r(e.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(n,e){let r=-1;return n.changeByRange(s=>{let o=[];for(let l=s.from;l<=s.to;){let c=n.doc.lineAt(l);c.number>r&&(s.empty||s.to>c.from)&&(e(c,o,s),r=c.number),l=c.to+1}let a=n.changes(o);return{changes:o,range:EditorSelection.range(a.mapPos(s.anchor,1),a.mapPos(s.head,1))}})}const indentSelection=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=Object.create(null),s=new IndentContext(n,{overrideIndentation:a=>{let l=r[a];return l??-1}}),o=changeBySelectedLine(n,(a,l,c)=>{let u=getIndentation(s,a.from);if(u==null)return;/\S/.test(a.text)||(u=0);let f=/^\s*/.exec(a.text)[0],d=indentString(n,u);(f!=d||c.from<a.from+f.length)&&(r[a.from]=u,l.push({from:a.from,to:a.from+f.length,insert:d}))});return o.changes.empty||e(n.update(o,{userEvent:"indent"})),!0},indentMore=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(changeBySelectedLine(n,(r,s)=>{s.push({from:r.from,insert:n.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(changeBySelectedLine(n,(r,s)=>{let o=/^\s*/.exec(r.text)[0];if(!o)return;let a=countColumn(o,n.tabSize),l=0,c=indentString(n,Math.max(0,a-getIndentUnit(n)));for(;l<o.length&&l<c.length&&o.charCodeAt(l)==c.charCodeAt(l);)l++;s.push({from:r.from+l,to:r.from+o.length,insert:c.slice(l)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteToLineStart},{mac:"Mod-Delete",run:deleteToLineEnd}].concat(emacsStyleKeymap.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};function crelt(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){var o=r[s];typeof o=="string"?n.setAttribute(s,o):o!=null&&(n[s]=o)}e++}for(;e<arguments.length;e++)add(n,arguments[e]);return n}function add(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var r=0;r<e.length;r++)add(n,e[r]);else throw new RangeError("Unsupported child node: "+e)}const basicNormalize=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class SearchCursor{constructor(e,r,s=0,o=e.length,a,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(s,o),this.bufferStart=s,this.normalize=a?c=>a(basicNormalize(c)):basicNormalize,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let r=fromCodePoint(e),s=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(e);let o=this.normalize(r);for(let a=0,l=s;;a++){let c=o.charCodeAt(a),u=this.match(c,l);if(u)return this.value=u,this;if(a==o.length-1)break;l==s&&a<r.length&&r.charCodeAt(a)==c&&l++}}}match(e,r){let s=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],l=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?s={from:this.matches[o+1],to:r+1}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:r,to:r+1}:this.matches.push(1,r)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferPos)&&(s=null),s}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(e,r,s,o=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new MultilineRegExpCursor(e,r,s,o,a);this.re=new RegExp(r,baseFlags+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.iter=e.iter();let l=e.lineAt(o);this.curLineStart=l.from,this.matchPos=toCharEnd(e,o),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let s=this.curLineStart+r.index,o=s+r[0].length;if(this.matchPos=toCharEnd(this.text,o+(s==o?1:0)),s==this.curLineStart+this.curLine.length&&this.nextLine(),(s<o||s>this.value.to)&&(!this.test||this.test(s,o,r)))return this.value={from:s,to:o,match:r},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(e,r){this.from=e,this.text=r}get to(){return this.from+this.text.length}static get(e,r,s){let o=flattened.get(e);if(!o||o.from>=s||o.to<=r){let c=new FlattenedDoc(r,e.sliceString(r,s));return flattened.set(e,c),c}if(o.from==r&&o.to==s)return o;let{text:a,from:l}=o;return l>r&&(a=e.sliceString(r,l)+a,l=r),o.to<s&&(a+=e.sliceString(o.to,s)),flattened.set(e,new FlattenedDoc(l,a)),new FlattenedDoc(r,a.slice(r-l,s-l))}}class MultilineRegExpCursor{constructor(e,r,s,o,a){this.text=e,this.to=a,this.done=!1,this.value=empty,this.matchPos=toCharEnd(e,o),this.re=new RegExp(r,baseFlags+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.flat=FlattenedDoc.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==e&&(this.re.lastIndex=e+1,r=this.re.exec(this.flat.text)),r){let s=this.flat.from+r.index,o=s+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(s,o,r)))return this.value={from:s,to:o,match:r},this.matchPos=toCharEnd(this.text,o+(s==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(n){try{return new RegExp(n,baseFlags),!0}catch{return!1}}function toCharEnd(n,e){if(e>=n.length)return e;let r=n.lineAt(e),s;for(;e<r.to&&(s=r.text.charCodeAt(e-r.from))>=56320&&s<57344;)e++;return e}function createLineDialog(n){let e=crelt("input",{class:"cm-textfield",name:"line"}),r=crelt("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:dialogEffect.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),s())},onsubmit:o=>{o.preventDefault(),s()}},crelt("label",n.state.phrase("Go to line"),": ",e)," ",crelt("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function s(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!o)return;let{state:a}=n,l=a.doc.lineAt(a.selection.main.head),[,c,u,f,d]=o,g=f?+f.slice(1):0,m=u?+u:l.number;if(u&&d){let E=m/100;c&&(E=E*(c=="-"?-1:1)+l.number/a.doc.lines),m=Math.round(a.doc.lines*E)}else u&&c&&(m=m*(c=="-"?-1:1)+l.number);let _=a.doc.line(Math.max(1,Math.min(a.doc.lines,m)));n.dispatch({effects:dialogEffect.of(!1),selection:EditorSelection.cursor(_.from+Math.max(0,Math.min(g,_.length))),scrollIntoView:!0}),n.focus()}return{dom:r}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(n,e){for(let r of e.effects)r.is(dialogEffect)&&(n=r.value);return n},provide:n=>showPanel.from(n,e=>e?createLineDialog:null)}),gotoLine=n=>{let e=getPanel(n,createLineDialog);if(!e){let r=[dialogEffect.of(!0)];n.state.field(dialogField,!1)==null&&r.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),n.dispatch({effects:r}),e=getPanel(n,createLineDialog)}return e&&e.dom.querySelector("input").focus(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(n){return combineConfig(n,defaultHighlightOptions,{highlightWordAroundCursor:(e,r)=>e||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(n){let e=[defaultTheme,matchHighlighter];return n&&e.push(highlightConfig.of(n)),e}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(n,e,r,s){return(r==0||n(e.sliceDoc(r-1,r))!=CharCategory.Word)&&(s==e.doc.length||n(e.sliceDoc(s,s+1))!=CharCategory.Word)}function insideWord(n,e,r,s){return n(e.sliceDoc(r,r+1))==CharCategory.Word&&n(e.sliceDoc(s-1,s))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(highlightConfig),{state:r}=n,s=r.selection;if(s.ranges.length>1)return Decoration.none;let o=s.main,a,l=null;if(o.empty){if(!e.highlightWordAroundCursor)return Decoration.none;let u=r.wordAt(o.head);if(!u)return Decoration.none;l=r.charCategorizer(o.head),a=r.sliceDoc(u.from,u.to)}else{let u=o.to-o.from;if(u<e.minSelectionLength||u>200)return Decoration.none;if(e.wholeWords){if(a=r.sliceDoc(o.from,o.to),l=r.charCategorizer(o.head),!(insideWordBoundaries(l,r,o.from,o.to)&&insideWord(l,r,o.from,o.to)))return Decoration.none}else if(a=r.sliceDoc(o.from,o.to).trim(),!a)return Decoration.none}let c=[];for(let u of n.visibleRanges){let f=new SearchCursor(r.doc,a,u.from,u.to);for(;!f.next().done;){let{from:d,to:g}=f.value;if((!l||insideWordBoundaries(l,r,d,g))&&(o.empty&&d<=o.from&&g>=o.to?c.push(mainMatchDeco.range(d,g)):(d>=o.to||g<=o.from)&&c.push(matchDeco.range(d,g)),c.length>e.maxMatches))return Decoration.none}}return Decoration.set(c)}},{decorations:n=>n.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:n,dispatch:e})=>{let{selection:r}=n,s=EditorSelection.create(r.ranges.map(o=>n.wordAt(o.head)||EditorSelection.cursor(o.head)),r.mainIndex);return s.eq(r)?!1:(e(n.update({selection:s})),!0)};function findNextOccurrence(n,e){let{main:r,ranges:s}=n.selection,o=n.wordAt(r.head),a=o&&o.from==r.from&&o.to==r.to;for(let l=!1,c=new SearchCursor(n.doc,e,s[s.length-1].to);;)if(c.next(),c.done){if(l)return null;c=new SearchCursor(n.doc,e,0,Math.max(0,s[s.length-1].from-1)),l=!0}else{if(l&&s.some(u=>u.from==c.value.from))continue;if(a){let u=n.wordAt(c.value.from);if(!u||u.from!=c.value.from||u.to!=c.value.to)continue}return c.value}}const selectNextOccurrence=({state:n,dispatch:e})=>{let{ranges:r}=n.selection;if(r.some(a=>a.from===a.to))return selectWord({state:n,dispatch:e});let s=n.sliceDoc(r[0].from,r[0].to);if(n.selection.ranges.some(a=>n.sliceDoc(a.from,a.to)!=s))return!1;let o=findNextOccurrence(n,s);return o?(e(n.update({selection:n.selection.addRange(EditorSelection.range(o.from,o.to),!1),effects:EditorView.scrollIntoView(o.to)})),!0):!1},searchConfigFacet=Facet.define({combine(n){return combineConfig(n,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new SearchPanel(e)})}});class SearchQuery{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(r,s)=>s=="n"?`
`:s=="r"?"\r":s=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(e,r=0,s){let o=e.doc?e:EditorState.create({doc:e});return s==null&&(s=o.doc.length),this.regexp?regexpCursor(this,o,r,s):stringCursor(this,o,r,s)}}class QueryType{constructor(e){this.spec=e}}function stringCursor(n,e,r,s){return new SearchCursor(e.doc,n.unquoted,r,s,n.caseSensitive?void 0:o=>o.toLowerCase(),n.wholeWord?stringWordTest(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function stringWordTest(n,e){return(r,s,o,a)=>((a>r||a+o.length<s)&&(a=Math.max(0,r-2),o=n.sliceString(a,Math.min(n.length,s+2))),(e(charBefore(o,r-a))!=CharCategory.Word||e(charAfter(o,r-a))!=CharCategory.Word)&&(e(charAfter(o,s-a))!=CharCategory.Word||e(charBefore(o,s-a))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(e){super(e)}nextMatch(e,r,s){let o=stringCursor(this.spec,e,s,e.doc.length).nextOverlapping();return o.done&&(o=stringCursor(this.spec,e,0,r).nextOverlapping()),o.done?null:o.value}prevMatchInRange(e,r,s){for(let o=s;;){let a=Math.max(r,o-1e4-this.spec.unquoted.length),l=stringCursor(this.spec,e,a,o),c=null;for(;!l.nextOverlapping().done;)c=l.value;if(c)return c;if(a==r)return null;o-=1e4}}prevMatch(e,r,s){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,s,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,r){let s=stringCursor(this.spec,e,0,e.doc.length),o=[];for(;!s.next().done;){if(o.length>=r)return null;o.push(s.value)}return o}highlight(e,r,s,o){let a=stringCursor(this.spec,e,Math.max(0,r-this.spec.unquoted.length),Math.min(s+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}}function regexpCursor(n,e,r,s){return new RegExpCursor(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?regexpWordTest(e.charCategorizer(e.selection.main.head)):void 0},r,s)}function charBefore(n,e){return n.slice(findClusterBreak(n,e,!1),e)}function charAfter(n,e){return n.slice(e,findClusterBreak(n,e))}function regexpWordTest(n){return(e,r,s)=>!s[0].length||(n(charBefore(s.input,s.index))!=CharCategory.Word||n(charAfter(s.input,s.index))!=CharCategory.Word)&&(n(charAfter(s.input,s.index+s[0].length))!=CharCategory.Word||n(charBefore(s.input,s.index+s[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(e,r,s){let o=regexpCursor(this.spec,e,s,e.doc.length).next();return o.done&&(o=regexpCursor(this.spec,e,0,r).next()),o.done?null:o.value}prevMatchInRange(e,r,s){for(let o=1;;o++){let a=Math.max(r,s-o*1e4),l=regexpCursor(this.spec,e,a,s),c=null;for(;!l.next().done;)c=l.value;if(c&&(a==r||c.from>a+10))return c;if(a==r)return null}}prevMatch(e,r,s){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,s,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(r,s)=>s=="$"?"$":s=="&"?e.match[0]:s!="0"&&+s<e.match.length?e.match[s]:r))}matchAll(e,r){let s=regexpCursor(this.spec,e,0,e.doc.length),o=[];for(;!s.next().done;){if(o.length>=r)return null;o.push(s.value)}return o}highlight(e,r,s,o){let a=regexpCursor(this.spec,e,Math.max(0,r-250),Math.min(s+250,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(n){return new SearchState(defaultQuery(n).create(),null)},update(n,e){for(let r of e.effects)r.is(setSearchQuery)?n=new SearchState(r.value.create(),n.panel):r.is(togglePanel$1)&&(n=new SearchState(n.query,r.value?createSearchPanel:null));return n},provide:n=>showPanel.from(n,e=>e.panel)});class SearchState{constructor(e,r){this.query=e,this.panel=r}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(searchState))}update(n){let e=n.state.field(searchState);(e!=n.startState.field(searchState)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Decoration.none;let{view:r}=this,s=new RangeSetBuilder;for(let o=0,a=r.visibleRanges,l=a.length;o<l;o++){let{from:c,to:u}=a[o];for(;o<l-1&&u>a[o+1].from-2*250;)u=a[++o].to;n.highlight(r.state,c,u,(f,d)=>{let g=r.state.selection.ranges.some(m=>m.from==f&&m.to==d);s.add(f,d,g?selectedMatchMark:matchMark)})}return s.finish()}},{decorations:n=>n.decorations});function searchCommand(n){return e=>{let r=e.state.field(searchState,!1);return r&&r.query.spec.valid?n(e,r):openSearchPanel(e)}}const findNext=searchCommand((n,{query:e})=>{let{to:r}=n.state.selection.main,s=e.nextMatch(n.state,r,r);return s?(n.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:announceMatch(n,s),userEvent:"select.search"}),!0):!1}),findPrevious=searchCommand((n,{query:e})=>{let{state:r}=n,{from:s}=r.selection.main,o=e.prevMatch(r,s,s);return o?(n.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0,effects:announceMatch(n,o),userEvent:"select.search"}),!0):!1}),selectMatches=searchCommand((n,{query:e})=>{let r=e.matchAll(n.state,1e3);return!r||!r.length?!1:(n.dispatch({selection:EditorSelection.create(r.map(s=>EditorSelection.range(s.from,s.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:n,dispatch:e})=>{let r=n.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:s,to:o}=r.main,a=[],l=0;for(let c=new SearchCursor(n.doc,n.sliceDoc(s,o));!c.next().done;){if(a.length>1e3)return!1;c.value.from==s&&(l=a.length),a.push(EditorSelection.range(c.value.from,c.value.to))}return e(n.update({selection:EditorSelection.create(a,l),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((n,{query:e})=>{let{state:r}=n,{from:s,to:o}=r.selection.main;if(r.readOnly)return!1;let a=e.nextMatch(r,s,s);if(!a)return!1;let l=[],c,u,f=[];if(a.from==s&&a.to==o&&(u=r.toText(e.getReplacement(a)),l.push({from:a.from,to:a.to,insert:u}),a=e.nextMatch(r,a.from,a.to),f.push(EditorView.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(s).number)+"."))),a){let d=l.length==0||l[0].from>=a.to?0:a.to-a.from-u.length;c={anchor:a.from-d,head:a.to-d},f.push(announceMatch(n,a))}return n.dispatch({changes:l,selection:c,scrollIntoView:!!c,effects:f,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((n,{query:e})=>{if(n.state.readOnly)return!1;let r=e.matchAll(n.state,1e9).map(o=>{let{from:a,to:l}=o;return{from:a,to:l,insert:e.getReplacement(o)}});if(!r.length)return!1;let s=n.state.phrase("replaced $ matches",r.length)+".";return n.dispatch({changes:r,effects:EditorView.announce.of(s),userEvent:"input.replace.all"}),!0});function createSearchPanel(n){return n.state.facet(searchConfigFacet).createPanel(n)}function defaultQuery(n,e){var r,s,o,a;let l=n.selection.main,c=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!c)return e;let u=n.facet(searchConfigFacet);return new SearchQuery({search:((r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(s=e==null?void 0:e.caseSensitive)!==null&&s!==void 0?s:u.caseSensitive,literal:(o=e==null?void 0:e.literal)!==null&&o!==void 0?o:u.literal,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:u.wholeWord})}const openSearchPanel=n=>{let e=n.state.field(searchState,!1);if(e&&e.panel){let r=getPanel(n,createSearchPanel);if(!r)return!1;let s=r.dom.querySelector("[main-field]");if(s&&s!=n.root.activeElement){let o=defaultQuery(n.state,e.query.spec);o.valid&&n.dispatch({effects:setSearchQuery.of(o)}),s.focus(),s.select()}}else n.dispatch({effects:[togglePanel$1.of(!0),e?setSearchQuery.of(defaultQuery(n.state,e.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=n=>{let e=n.state.field(searchState,!1);if(!e||!e.panel)return!1;let r=getPanel(n,createSearchPanel);return r&&r.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(e){this.view=e;let r=this.query=e.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:r.search,placeholder:phrase(e,"Find"),"aria-label":phrase(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:r.replace,placeholder:phrase(e,"Replace"),"aria-label":phrase(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function s(o,a,l){return crelt("button",{class:"cm-button",name:o,onclick:a,type:"button"},l)}this.dom=crelt("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,s("next",()=>findNext(e),[phrase(e,"next")]),s("prev",()=>findPrevious(e),[phrase(e,"previous")]),s("select",()=>selectMatches(e),[phrase(e,"all")]),crelt("label",null,[this.caseField,phrase(e,"match case")]),crelt("label",null,[this.reField,phrase(e,"regexp")]),crelt("label",null,[this.wordField,phrase(e,"by word")]),...e.state.readOnly?[]:[crelt("br"),this.replaceField,s("replace",()=>replaceNext(e),[phrase(e,"replace")]),s("replaceAll",()=>replaceAll(e),[phrase(e,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(e),"aria-label":phrase(e,"close"),type:"button"},["×"])])}commit(){let e=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:setSearchQuery.of(e)}))}keydown(e){runScopeHandlers(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),replaceNext(this.view))}update(e){for(let r of e.transactions)for(let s of r.effects)s.is(setSearchQuery)&&!s.value.eq(this.query)&&this.setQuery(s.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(n,e){return n.state.phrase(e)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(n,{from:e,to:r}){let s=n.state.doc.lineAt(e),o=n.state.doc.lineAt(r).to,a=Math.max(s.from,e-AnnounceMargin),l=Math.min(o,r+AnnounceMargin),c=n.state.sliceDoc(a,l);if(a!=s.from){for(let u=0;u<AnnounceMargin;u++)if(!Break.test(c[u+1])&&Break.test(c[u])){c=c.slice(u);break}}if(l!=o){for(let u=c.length-1;u>c.length-AnnounceMargin;u--)if(!Break.test(c[u-1])&&Break.test(c[u])){c=c.slice(0,u);break}}return EditorView.announce.of(`${n.state.phrase("current match")}. ${c} ${n.state.phrase("on line")} ${s.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.lowest(searchHighlighter),baseTheme$2];class CompletionContext{constructor(e,r,s){this.state=e,this.pos=r,this.explicit=s,this.abortListeners=[]}tokenBefore(e){let r=syntaxTree(this.state).resolveInner(this.pos,-1);for(;r&&e.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(e){let r=this.state.doc.lineAt(this.pos),s=Math.max(r.from,this.pos-250),o=r.text.slice(s-r.from,this.pos-r.from),a=o.search(ensureAnchor(e,!1));return a<0?null:{from:s+a,to:this.pos,text:o.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,r){e=="abort"&&this.abortListeners&&this.abortListeners.push(r)}}function toSet(n){let e=Object.keys(n).join(""),r=/\w/.test(e);return r&&(e=e.replace(/\w/g,"")),`[${r?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(n){let e=Object.create(null),r=Object.create(null);for(let{label:o}of n){e[o[0]]=!0;for(let a=1;a<o.length;a++)r[o[a]]=!0}let s=toSet(e)+toSet(r)+"*$";return[new RegExp("^"+s),new RegExp(s)]}function completeFromList(n){let e=n.map(o=>typeof o=="string"?{label:o}:o),[r,s]=e.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return o=>{let a=o.matchBefore(s);return a||o.explicit?{from:a?a.from:o.pos,options:e,validFor:r}:null}}class Option{constructor(e,r,s){this.completion=e,this.source=r,this.match=s}}function cur(n){return n.selection.main.head}function ensureAnchor(n,e){var r;let{source:s}=n,o=e&&s[0]!="^",a=s[s.length-1]!="$";return!o&&!a?n:new RegExp(`${o?"^":""}(?:${s})${a?"$":""}`,(r=n.flags)!==null&&r!==void 0?r:n.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(n,e,r,s){return Object.assign(Object.assign({},n.changeByRange(o=>{if(o==n.selection.main)return{changes:{from:r,to:s,insert:e},range:EditorSelection.cursor(r+e.length)};let a=s-r;return!o.empty||a&&n.sliceDoc(o.from-a,o.from)!=n.sliceDoc(r,s)?{range:o}:{changes:{from:o.from-a,to:o.from,insert:e},range:EditorSelection.cursor(o.from-a+e.length)}})),{userEvent:"input.complete"})}function applyCompletion(n,e){const r=e.completion.apply||e.completion.label;let s=e.source;typeof r=="string"?n.dispatch(Object.assign(Object.assign({},insertCompletionText(n.state,r,s.from,s.to)),{annotations:pickedCompletion.of(e.completion)})):r(n,e.completion,s.from,s.to)}const SourceCache=new WeakMap;function asSource(n){if(!Array.isArray(n))return n;let e=SourceCache.get(n);return e||SourceCache.set(n,e=completeFromList(n)),e}class FuzzyMatcher{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let r=0;r<e.length;){let s=codePointAt(e,r),o=codePointSize(s);this.chars.push(s);let a=e.slice(r,r+o),l=a.toUpperCase();this.folded.push(codePointAt(l==a?a.toLowerCase():l,0)),r+=o}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:r,folded:s,any:o,precise:a,byWord:l}=this;if(r.length==1){let M=codePointAt(e,0),V=codePointSize(M),R=V==e.length?0:-100;if(M!=r[0])if(M==s[0])R+=-200;else return null;return[R,0,V]}let c=e.indexOf(this.pattern);if(c==0)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let u=r.length,f=0;if(c<0){for(let M=0,V=Math.min(e.length,200);M<V&&f<u;){let R=codePointAt(e,M);(R==r[f]||R==s[f])&&(o[f++]=M),M+=codePointSize(R)}if(f<u)return null}let d=0,g=0,m=!1,_=0,E=-1,A=-1,b=/[a-z]/.test(e),v=!0;for(let M=0,V=Math.min(e.length,200),R=0;M<V&&g<u;){let L=codePointAt(e,M);c<0&&(d<u&&L==r[d]&&(a[d++]=M),_<u&&(L==r[_]||L==s[_]?(_==0&&(E=M),A=M+1,_++):_=0));let N,$=L<255?L>=48&&L<=57||L>=97&&L<=122?2:L>=65&&L<=90?1:0:(N=fromCodePoint(L))!=N.toLowerCase()?1:N!=N.toUpperCase()?2:0;(!M||$==1&&b||R==0&&$!=0)&&(r[g]==L||s[g]==L&&(m=!0)?l[g++]=M:l.length&&(v=!1)),R=$,M+=codePointSize(L)}return g==u&&l[0]==0&&v?this.result(-100+(m?-200:0),l,e):_==u&&E==0?[-200-e.length+(A==e.length?0:-100),0,A]:c>-1?[-700-e.length,c,c+this.pattern.length]:_==u?[-200+-700-e.length,E,A]:g==u?this.result(-100+(m?-200:0)+-700+(v?0:-1100),l,e):r.length==2?null:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,r,s){let o=[e-s.length],a=1;for(let l of r){let c=l+(this.astral?codePointSize(codePointAt(s,l)):1);a>1&&o[a-1]==l?o[a-1]=c:(o[a++]=l,o[a++]=c)}return o}}const completionConfig=Facet.define({combine(n){return combineConfig(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,r)=>e.label.localeCompare(r.label),interactionDelay:75},{defaultKeymap:(e,r)=>e&&r,closeOnBlur:(e,r)=>e&&r,icons:(e,r)=>e&&r,tooltipClass:(e,r)=>s=>joinClass(e(s),r(s)),optionClass:(e,r)=>s=>joinClass(e(s),r(s)),addToOptions:(e,r)=>e.concat(r)})}});function joinClass(n,e){return n?e?n+" "+e:n:e}function optionContent(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(r){let s=document.createElement("div");return s.classList.add("cm-completionIcon"),r.type&&s.classList.add(...r.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),s.setAttribute("aria-hidden","true"),s},position:20}),e.push({render(r,s,o){let a=document.createElement("span");a.className="cm-completionLabel";let{label:l}=r,c=0;for(let u=1;u<o.length;){let f=o[u++],d=o[u++];f>c&&a.appendChild(document.createTextNode(l.slice(c,f)));let g=a.appendChild(document.createElement("span"));g.appendChild(document.createTextNode(l.slice(f,d))),g.className="cm-completionMatchedText",c=d}return c<l.length&&a.appendChild(document.createTextNode(l.slice(c))),a},position:50},{render(r){if(!r.detail)return null;let s=document.createElement("span");return s.className="cm-completionDetail",s.textContent=r.detail,s},position:80}),e.sort((r,s)=>r.position-s.position).map(r=>r.render)}function rangeAroundSelected(n,e,r){if(n<=r)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let o=Math.floor(e/r);return{from:o*r,to:(o+1)*r}}let s=Math.floor((n-e)/r);return{from:n-(s+1)*r,to:n-s*r}}class CompletionTooltip{constructor(e,r){this.view=e,this.stateField=r,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:c=>this.positionInfo(c),key:this},this.space=null,this.currentClass="";let s=e.state.field(r),{options:o,selected:a}=s.open,l=e.state.facet(completionConfig);this.optionContent=optionContent(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=rangeAroundSelected(o.length,a,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{for(let u=c.target,f;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(f=/-(\d+)$/.exec(u.id))&&+f[1]<o.length){applyCompletion(e,o[+f[1]]),c.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(o,s.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){var r,s,o;let a=e.state.field(this.stateField),l=e.startState.field(this.stateField);this.updateTooltipClass(e.state),a!=l&&(this.updateSel(),((r=a.open)===null||r===void 0?void 0:r.disabled)!=((s=l.open)===null||s===void 0?void 0:s.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((o=a.open)===null||o===void 0)&&o.disabled)))}updateTooltipClass(e){let r=this.tooltipClass(e);if(r!=this.currentClass){for(let s of this.currentClass.split(" "))s&&this.dom.classList.remove(s);for(let s of r.split(" "))s&&this.dom.classList.add(s);this.currentClass=r}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),r=e.open;if((r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=rangeAroundSelected(r.options.length,r.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(r.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(r.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:s}=r.options[r.selected],{info:o}=s;if(!o)return;let a=typeof o=="string"?document.createTextNode(o):o(s);if(!a)return;"then"in a?a.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l)}).catch(l=>logException(this.view.state,l,"completion info")):this.addInfoPane(a)}}addInfoPane(e){let r=this.info=document.createElement("div");r.className="cm-tooltip cm-completionInfo",r.appendChild(e),this.dom.appendChild(r),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let r=null;for(let s=this.list.firstChild,o=this.range.from;s;s=s.nextSibling,o++)o==e?s.hasAttribute("aria-selected")||(s.setAttribute("aria-selected","true"),r=s):s.hasAttribute("aria-selected")&&s.removeAttribute("aria-selected");return r&&scrollIntoView(this.list,r),r}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let r=this.dom.getBoundingClientRect(),s=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),a=this.space;if(!a){let E=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:E.innerWidth,bottom:E.innerHeight}}if(o.top>Math.min(a.bottom,r.bottom)-10||o.bottom<Math.max(a.top,r.top)+10)return null;let l=this.view.textDirection==Direction.RTL,c=l,u=!1,f,d="",g="",m=r.left-a.left,_=a.right-r.right;if(c&&m<Math.min(s.width,_)?c=!1:!c&&_<Math.min(s.width,m)&&(c=!0),s.width<=(c?m:_))d=Math.max(a.top,Math.min(o.top,a.bottom-s.height))-r.top+"px",f=Math.min(400,c?m:_)+"px";else{u=!0,f=Math.min(400,(l?r.right:a.right-r.left)-30)+"px";let E=a.bottom-r.bottom;E>=s.height||E>r.top?d=o.bottom-r.top+"px":g=r.bottom-o.top+"px"}return{top:d,bottom:g,maxWidth:f,class:u?l?"left-narrow":"right-narrow":c?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,r,s){const o=document.createElement("ul");o.id=r,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let a=s.from;a<s.to;a++){let{completion:l,match:c}=e[a];const u=o.appendChild(document.createElement("li"));u.id=r+"-"+a,u.setAttribute("role","option");let f=this.optionClass(l);f&&(u.className=f);for(let d of this.optionContent){let g=d(l,this.view.state,c);g&&u.appendChild(g)}}return s.from&&o.classList.add("cm-completionListIncompleteTop"),s.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}}function completionTooltip(n){return e=>new CompletionTooltip(e,n)}function scrollIntoView(n,e){let r=n.getBoundingClientRect(),s=e.getBoundingClientRect();s.top<r.top?n.scrollTop-=r.top-s.top:s.bottom>r.bottom&&(n.scrollTop+=s.bottom-r.bottom)}function score(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function sortOptions(n,e){let r=[],s=0;for(let c of n)if(c.hasResult())if(c.result.filter===!1){let u=c.result.getMatch;for(let f of c.result.options){let d=[1e9-s++];if(u)for(let g of u(f))d.push(g);r.push(new Option(f,c,d))}}else{let u=new FuzzyMatcher(e.sliceDoc(c.from,c.to)),f;for(let d of c.result.options)(f=u.match(d.label))&&(d.boost!=null&&(f[0]+=d.boost),r.push(new Option(d,c,f)))}let o=[],a=null,l=e.facet(completionConfig).compareCompletions;for(let c of r.sort((u,f)=>f.match[0]-u.match[0]||l(u.completion,f.completion)))!a||a.label!=c.completion.label||a.detail!=c.completion.detail||a.type!=null&&c.completion.type!=null&&a.type!=c.completion.type||a.apply!=c.completion.apply?o.push(c):score(c.completion)>score(a)&&(o[o.length-1]=c),a=c.completion;return o}class CompletionDialog{constructor(e,r,s,o,a,l){this.options=e,this.attrs=r,this.tooltip=s,this.timestamp=o,this.selected=a,this.disabled=l}setSelected(e,r){return e==this.selected||e>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(r,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,r,s,o,a){let l=sortOptions(e,r);if(!l.length)return o&&e.some(u=>u.state==1)?new CompletionDialog(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let c=r.facet(completionConfig).selectOnOpen?0:-1;if(o&&o.selected!=c&&o.selected!=-1){let u=o.options[o.selected].completion;for(let f=0;f<l.length;f++)if(l[f].completion==u){c=f;break}}return new CompletionDialog(l,makeAttrs(s,c),{pos:e.reduce((u,f)=>f.hasResult()?Math.min(u,f.from):u,1e8),create:completionTooltip(completionState),above:a.aboveCursor},o?o.timestamp:Date.now(),c,!1)}map(e){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor(e,r,s){this.active=e,this.id=r,this.open=s}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:r}=e,s=r.facet(completionConfig),a=(s.override||r.languageDataAt("autocomplete",cur(r)).map(asSource)).map(c=>(this.active.find(f=>f.source==c)||new ActiveSource(c,this.active.some(f=>f.state!=0)?1:0)).update(e,s));a.length==this.active.length&&a.every((c,u)=>c==this.active[u])&&(a=this.active);let l=this.open;l&&e.docChanged&&(l=l.map(e.changes)),e.selection||a.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!sameResults(a,this.active)?l=CompletionDialog.build(a,r,this.id,l,s):l&&l.disabled&&!a.some(c=>c.state==1)&&(l=null),!l&&a.every(c=>c.state!=1)&&a.some(c=>c.hasResult())&&(a=a.map(c=>c.hasResult()?new ActiveSource(c.source,0):c));for(let c of e.effects)c.is(setSelectedEffect)&&(l=l&&l.setSelected(c.value,this.id));return a==this.active&&l==this.open?this:new CompletionState(a,this.id,l)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults(n,e){if(n==e)return!0;for(let r=0,s=0;;){for(;r<n.length&&!n[r].hasResult;)r++;for(;s<e.length&&!e[s].hasResult;)s++;let o=r==n.length,a=s==e.length;if(o||a)return o==a;if(n[r++].result!=e[s++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs(n,e){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(r["aria-activedescendant"]=n+"-"+e),r}const none=[];function getUserEvent(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor(e,r,s=-1){this.source=e,this.state=r,this.explicitPos=s}hasResult(){return!1}update(e,r){let s=getUserEvent(e),o=this;s?o=o.handleUserEvent(e,s,r):e.docChanged?o=o.handleChange(e):e.selection&&o.state!=0&&(o=new ActiveSource(o.source,0));for(let a of e.effects)if(a.is(startCompletionEffect))o=new ActiveSource(o.source,1,a.value?cur(e.state):-1);else if(a.is(closeCompletionEffect))o=new ActiveSource(o.source,0);else if(a.is(setActiveEffect))for(let l of a.value)l.source==o.source&&(o=l);return o}handleUserEvent(e,r,s){return r=="delete"||!s.activateOnTyping?this.map(e.changes):new ActiveSource(this.source,1)}handleChange(e){return e.changes.touchesRange(cur(e.startState))?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,e.mapPos(this.explicitPos))}}class ActiveResult extends ActiveSource{constructor(e,r,s,o,a){super(e,2,r),this.result=s,this.from=o,this.to=a}hasResult(){return!0}handleUserEvent(e,r,s){var o;let a=e.changes.mapPos(this.from),l=e.changes.mapPos(this.to,1),c=cur(e.state);if((this.explicitPos<0?c<=a:c<this.from)||c>l||r=="delete"&&cur(e.startState)==this.from)return new ActiveSource(this.source,r=="input"&&s.activateOnTyping?1:0);let u=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),f;return checkValid(this.result.validFor,e.state,a,l)?new ActiveResult(this.source,u,this.result,a,l):this.result.update&&(f=this.result.update(this.result,a,l,new CompletionContext(e.state,c,u>=0)))?new ActiveResult(this.source,u,f,f.from,(o=f.to)!==null&&o!==void 0?o:cur(e.state)):new ActiveSource(this.source,1,u)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function checkValid(n,e,r,s){if(!n)return!1;let o=e.sliceDoc(r,s);return typeof n=="function"?n(o,r,s,e):ensureAnchor(n,!0).test(o)}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define(),setActiveEffect=StateEffect.define({map(n,e){return n.map(r=>r.map(e))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(n,e){return n.update(e)},provide:n=>[showTooltip.from(n,e=>e.tooltip),EditorView.contentAttributes.from(n,e=>e.attrs)]});function moveCompletionSelection(n,e="option"){return r=>{let s=r.state.field(completionState,!1);if(!s||!s.open||s.open.disabled||Date.now()-s.open.timestamp<r.state.facet(completionConfig).interactionDelay)return!1;let o=1,a;e=="page"&&(a=getTooltip(r,s.open.tooltip))&&(o=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:l}=s.open.options,c=s.open.selected>-1?s.open.selected+o*(n?1:-1):n?0:l-1;return c<0?c=e=="page"?0:l-1:c>=l&&(c=e=="page"?l-1:0),r.dispatch({effects:setSelectedEffect.of(c)}),!0}}const acceptCompletion=n=>{let e=n.state.field(completionState,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<n.state.facet(completionConfig).interactionDelay?!1:(e.open.disabled||applyCompletion(n,e.open.options[e.open.selected]),!0)},startCompletion=n=>n.state.field(completionState,!1)?(n.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=n=>{let e=n.state.field(completionState,!1);return!e||!e.active.some(r=>r.state!=0)?!1:(n.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(e,r){this.active=e,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const DebounceTime=50,MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(completionState).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(completionState);if(!n.selectionSet&&!n.docChanged&&n.startState.field(completionState)==e)return;let r=n.transactions.some(s=>(s.selection||s.docChanged)&&!getUserEvent(s));for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.updates.length+n.transactions.length>MaxUpdateCount&&Date.now()-o.time>MinAbortTime){for(let a of o.context.abortListeners)try{a()}catch(l){logException(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(s=>s.state==1&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),DebounceTime):-1,this.composing!=0)for(let s of n.transactions)getUserEvent(s)=="input"?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(completionState);for(let r of e.active)r.state==1&&!this.running.some(s=>s.active.source==r.source)&&this.startQuery(r)}startQuery(n){let{state:e}=this.view,r=cur(e),s=new CompletionContext(e,r,n.explicitPos==r),o=new RunningQuery(n,s);this.running.push(o),Promise.resolve(n.source(s)).then(a=>{o.context.aborted||(o.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,a)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),DebounceTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],r=this.view.state.facet(completionConfig);for(let s=0;s<this.running.length;s++){let o=this.running[s];if(o.done===void 0)continue;if(this.running.splice(s--,1),o.done){let l=new ActiveResult(o.active.source,o.active.explicitPos,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:cur(o.updates.length?o.updates[0].startState:this.view.state));for(let c of o.updates)l=l.update(c,r);if(l.hasResult()){e.push(l);continue}}let a=this.view.state.field(completionState).active.find(l=>l.source==o.active.source);if(a&&a.state==1)if(o.done==null){let l=new ActiveSource(o.active.source,0);for(let c of o.updates)l=l.update(c,r);l.state!=1&&e.push(l)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:setActiveEffect.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(completionState,!1);n&&n.tooltip&&this.view.state.facet(completionConfig).closeOnBlur&&this.view.dispatch({effects:closeCompletionEffect.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(n,e){let r=e.mapPos(n,-1,MapMode.TrackAfter);return r??void 0}}),skipBracketEffect=StateEffect.define({map(n,e){return e.mapPos(n)}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(n,e){if(e.selection){let r=e.state.doc.lineAt(e.selection.main.head).from,s=e.startState.doc.lineAt(e.startState.selection.main.head).from;r!=e.changes.mapPos(s,-1)&&(n=RangeSet.empty)}n=n.map(e.changes);for(let r of e.effects)r.is(closeBracketEffect)?n=n.update({add:[closedBracket.range(r.value,r.value+1)]}):r.is(skipBracketEffect)&&(n=n.update({filter:s=>s!=r.value}));return n}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(n){for(let e=0;e<definedClosing.length;e+=2)if(definedClosing.charCodeAt(e)==n)return definedClosing.charAt(e+1);return fromCodePoint(n<128?n:n+1)}function config(n,e){return n.languageDataAt("closeBrackets",e)[0]||defaults}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((n,e,r,s)=>{if((android?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let o=n.state.selection.main;if(s.length>2||s.length==2&&codePointSize(codePointAt(s,0))==1||e!=o.from||r!=o.to)return!1;let a=insertBracket(n.state,s);return a?(n.dispatch(a),!0):!1}),deleteBracketPair=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let s=config(n,n.selection.main.head).brackets||defaults.brackets,o=null,a=n.changeByRange(l=>{if(l.empty){let c=prevChar(n.doc,l.head);for(let u of s)if(u==c&&nextChar(n.doc,l.head)==closing(codePointAt(u,0)))return{changes:{from:l.head-u.length,to:l.head+u.length},range:EditorSelection.cursor(l.head-u.length)}}return{range:o=l}});return o||e(n.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(n,e){let r=config(n,n.selection.main.head),s=r.brackets||defaults.brackets;for(let o of s){let a=closing(codePointAt(o,0));if(e==o)return a==o?handleSame(n,o,s.indexOf(o+o+o)>-1,r):handleOpen(n,o,a,r.before||defaults.before);if(e==a&&closedBracketAt(n,n.selection.main.from))return handleClose(n,o,a)}return null}function closedBracketAt(n,e){let r=!1;return n.field(bracketState).between(0,n.doc.length,s=>{s==e&&(r=!0)}),r}function nextChar(n,e){let r=n.sliceString(e,e+2);return r.slice(0,codePointSize(codePointAt(r,0)))}function prevChar(n,e){let r=n.sliceString(e-2,e);return codePointSize(codePointAt(r,0))==r.length?r:r.slice(1)}function handleOpen(n,e,r,s){let o=null,a=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:r,from:l.to}],effects:closeBracketEffect.of(l.to+e.length),range:EditorSelection.range(l.anchor+e.length,l.head+e.length)};let c=nextChar(n.doc,l.head);return!c||/\s/.test(c)||s.indexOf(c)>-1?{changes:{insert:e+r,from:l.head},effects:closeBracketEffect.of(l.head+e.length),range:EditorSelection.cursor(l.head+e.length)}:{range:o=l}});return o?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(n,e,r){let s=null,o=n.selection.ranges.map(a=>a.empty&&nextChar(n.doc,a.head)==r?EditorSelection.cursor(a.head+r.length):s=a);return s?null:n.update({selection:EditorSelection.create(o,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:a})=>skipBracketEffect.of(a))})}function handleSame(n,e,r,s){let o=s.stringPrefixes||defaults.stringPrefixes,a=null,l=n.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:e,from:c.to}],effects:closeBracketEffect.of(c.to+e.length),range:EditorSelection.range(c.anchor+e.length,c.head+e.length)};let u=c.head,f=nextChar(n.doc,u),d;if(f==e){if(nodeStart(n,u))return{changes:{insert:e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)};if(closedBracketAt(n,u)){let g=r&&n.sliceDoc(u,u+e.length*3)==e+e+e;return{range:EditorSelection.cursor(u+e.length*(g?3:1)),effects:skipBracketEffect.of(u)}}}else{if(r&&n.sliceDoc(u-2*e.length,u)==e+e&&(d=canStartStringAt(n,u-2*e.length,o))>-1&&nodeStart(n,d))return{changes:{insert:e+e+e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)};if(n.charCategorizer(u)(f)!=CharCategory.Word&&canStartStringAt(n,u,o)>-1&&!probablyInString(n,u,e,o))return{changes:{insert:e+e,from:u},effects:closeBracketEffect.of(u+e.length),range:EditorSelection.cursor(u+e.length)}}return{range:a=c}});return a?null:n.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(n,e){let r=syntaxTree(n).resolveInner(e+1);return r.parent&&r.from==e}function probablyInString(n,e,r,s){let o=syntaxTree(n).resolveInner(e,-1),a=s.reduce((l,c)=>Math.max(l,c.length),0);for(let l=0;l<5;l++){let c=n.sliceDoc(o.from,Math.min(o.to,o.from+r.length+a)),u=c.indexOf(r);if(!u||u>-1&&s.indexOf(c.slice(0,u))>-1){let d=o.firstChild;for(;d&&d.from==o.from&&d.to-d.from>r.length+u;){if(n.sliceDoc(d.to-r.length,d.to)==r)return!1;d=d.firstChild}return!0}let f=o.to==e&&o.parent;if(!f)break;o=f}return!1}function canStartStringAt(n,e,r){let s=n.charCategorizer(e);if(s(n.sliceDoc(e-1,e))!=CharCategory.Word)return e;for(let o of r){let a=e-o.length;if(n.sliceDoc(a,e)==o&&s(n.sliceDoc(a-1,a))!=CharCategory.Word)return a}return-1}function autocompletion(n={}){return[completionState,completionConfig.of(n),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],n=>n.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(e,r,s){this.from=e,this.to=r,this.diagnostic=s}}class LintState{constructor(e,r,s){this.diagnostics=e,this.panel=r,this.selected=s}static init(e,r,s){let o=e,a=s.facet(lintConfig).markerFilter;a&&(o=a(o));let l=Decoration.set(o.map(c=>c.from==c.to||c.from==c.to-1&&s.doc.lineAt(c.from).to==c.from?Decoration.widget({widget:new DiagnosticWidget(c),diagnostic:c}).range(c.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+c.severity},diagnostic:c}).range(c.from,c.to)),!0);return new LintState(l,r,findDiagnostic(l))}}function findDiagnostic(n,e=null,r=0){let s=null;return n.between(r,1e9,(o,a,{spec:l})=>{if(!(e&&l.diagnostic!=e))return s=new SelectedDiagnostic(o,a,l.diagnostic),!1}),s}function hideTooltip(n,e){return!!(n.effects.some(r=>r.is(setDiagnosticsEffect))||n.changes.touchesRange(e.pos))}function maybeEnableLint(n,e){return n.field(lintState,!1)?e:e.concat(StateEffect.appendConfig.of([lintState,EditorView.decorations.compute([lintState],r=>{let{selected:s,panel:o}=r.field(lintState);return!s||!o||s.from==s.to?Decoration.none:Decoration.set([activeMark.range(s.from,s.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme]))}function setDiagnostics(n,e){return{effects:maybeEnableLint(n,[setDiagnosticsEffect.of(e)])}}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(n,e){if(e.docChanged){let r=n.diagnostics.map(e.changes),s=null;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);s=findDiagnostic(r,n.selected.diagnostic,o)||findDiagnostic(r,null,o)}n=new LintState(r,n.panel,s)}for(let r of e.effects)r.is(setDiagnosticsEffect)?n=LintState.init(r.value,n.panel,e.state):r.is(togglePanel)?n=new LintState(n.diagnostics,r.value?LintPanel.open:null,n.selected):r.is(movePanelSelection)&&(n=new LintState(n.diagnostics,n.panel,r.value));return n},provide:n=>[showPanel.from(n,e=>e.panel),EditorView.decorations.from(n,e=>e.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(n,e,r){let{diagnostics:s}=n.state.field(lintState),o=[],a=2e8,l=0;s.between(e-(r<0?1:0),e+(r>0?1:0),(u,f,{spec:d})=>{e>=u&&e<=f&&(u==f||(e>u||r>0)&&(e<f||r<0))&&(o.push(d.diagnostic),a=Math.min(u,a),l=Math.max(f,l))});let c=n.state.facet(lintConfig).tooltipFilter;return c&&(o=c(o)),o.length?{pos:a,end:l,above:n.state.doc.lineAt(a).to<l,create(){return{dom:diagnosticsTooltip(n,o)}}}:null}function diagnosticsTooltip(n,e){return crelt("ul",{class:"cm-tooltip-lint"},e.map(r=>renderDiagnostic(n,r,!1)))}const openLintPanel=n=>{let e=n.state.field(lintState,!1);(!e||!e.panel)&&n.dispatch({effects:maybeEnableLint(n.state,[togglePanel.of(!0)])});let r=getPanel(n,LintPanel.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=n=>{let e=n.state.field(lintState,!1);return!e||!e.panel?!1:(n.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=n=>{let e=n.state.field(lintState,!1);if(!e)return!1;let r=n.state.selection.main,s=e.diagnostics.iter(r.to+1);return!s.value&&(s=e.diagnostics.iter(0),!s.value||s.from==r.from&&s.to==r.to)?!1:(n.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintPlugin=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(lintConfig);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:r}=e.facet(lintConfig);Promise.all(r.map(s=>Promise.resolve(s(this.view)))).then(s=>{let o=s.reduce((a,l)=>a.concat(l));this.view.state.doc==e.doc&&this.view.dispatch(setDiagnostics(this.view.state,o))},s=>{logException(this.view.state,s)})}}update(n){let e=n.state.facet(lintConfig);(n.docChanged||e!=n.startState.facet(lintConfig)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),lintConfig=Facet.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},combineConfig(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,r)=>e?r?s=>e(s)||r(s):e:r}))},enables:lintPlugin});function assignKeys(n){let e=[];if(n)e:for(let{name:r}of n){for(let s=0;s<r.length;s++){let o=r[s];if(/[a-zA-Z]/.test(o)&&!e.some(a=>a.toLowerCase()==o.toLowerCase())){e.push(o);continue e}}e.push("")}return e}function renderDiagnostic(n,e,r){var s;let o=r?assignKeys(e.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},crelt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(s=e.actions)===null||s===void 0?void 0:s.map((a,l)=>{let c=!1,u=m=>{if(m.preventDefault(),c)return;c=!0;let _=findDiagnostic(n.state.field(lintState).diagnostics,e);_&&a.apply(n,_.from,_.to)},{name:f}=a,d=o[l]?f.indexOf(o[l]):-1,g=d<0?f:[f.slice(0,d),crelt("u",f.slice(d,d+1)),f.slice(d+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:u,onmousedown:u,"aria-label":` Action: ${f}${d<0?"":` (access key "${o[l]})"`}.`},g)}),e.source&&crelt("div",{class:"cm-diagnosticSource"},e.source))}class DiagnosticWidget extends WidgetType{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(e,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(e,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(e){this.view=e,this.items=[];let r=o=>{if(o.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],l=assignKeys(a.actions);for(let c=0;c<l.length;c++)if(l[c].toUpperCase().charCodeAt(0)==o.keyCode){let u=findDiagnostic(this.view.state.field(lintState).diagnostics,a);u&&a.actions[c].apply(e,u.from,u.to)}}else return;o.preventDefault()},s=o=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(o.target)&&this.moveSelection(a)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:s}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(lintState).selected;if(!e)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==e.diagnostic)return r;return-1}update(){let{diagnostics:e,selected:r}=this.view.state.field(lintState),s=0,o=!1,a=null;for(e.between(0,this.view.state.doc.length,(l,c,{spec:u})=>{let f=-1,d;for(let g=s;g<this.items.length;g++)if(this.items[g].diagnostic==u.diagnostic){f=g;break}f<0?(d=new PanelItem(this.view,u.diagnostic),this.items.splice(s,0,d),o=!0):(d=this.items[f],f>s&&(this.items.splice(s,f-s),o=!0)),r&&d.diagnostic==r.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),a=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),s++});s<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:c})=>{l.top<c.top?this.list.scrollTop-=c.top-l.top:l.bottom>c.bottom&&(this.list.scrollTop+=l.bottom-c.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let e=this.list.firstChild;function r(){let s=e;e=s.nextSibling,s.remove()}for(let s of this.items)if(s.dom.parentNode==this.list){for(;e!=s.dom;)r();e=s.dom.nextSibling}else this.list.insertBefore(s.dom,e);for(;e;)r()}moveSelection(e){if(this.selectedIndex<0)return;let r=this.view.state.field(lintState),s=findDiagnostic(r.diagnostics,this.items[e].diagnostic);s&&this.view.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:movePanelSelection.of(s)})}static open(e){return new LintPanel(e)}}function svg(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function underline(n){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),basicSetup=(()=>[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),history(),foldGutter(),drawSelection(),dropCursor(),EditorState.allowMultipleSelections.of(!0),indentOnInput(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),crosshairCursor(),highlightActiveLine(),highlightSelectionMatches(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...searchKeymap,...historyKeymap,...foldKeymap,...completionKeymap,...lintKeymap])])();/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var h=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[basicSetup]}),y=Symbol("vue-codemirror-global-config"),O,j=function(n){var e=n.onUpdate,r=n.onChange,s=n.onFocus,o=n.onBlur,a=function(l,c){var u={};for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&c.indexOf(f)<0&&(u[f]=l[f]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var d=0;for(f=Object.getOwnPropertySymbols(l);d<f.length;d++)c.indexOf(f[d])<0&&Object.prototype.propertyIsEnumerable.call(l,f[d])&&(u[f[d]]=l[f[d]])}return u}(n,["onUpdate","onChange","onFocus","onBlur"]);return EditorState.create({doc:a.doc,selection:a.selection,extensions:(Array.isArray(a.extensions)?a.extensions:[a.extensions]).concat([EditorView.updateListener.of(function(l){e(l),l.docChanged&&r(l.state.doc.toString(),l),l.focusChanged&&(l.view.hasFocus?s(l):o(l))})])})},S=function(n){var e=new Compartment;return{compartment:e,run:function(r){e.get(n.state)?n.dispatch({effects:e.reconfigure(r)}):n.dispatch({effects:StateEffect.appendConfig.of(e.of(r))})}}},x=function(n,e){var r=S(n),s=r.compartment,o=r.run;return function(a){var l=s.get(n.state);o(a??l!==e?e:[])}},C={type:Boolean,default:void 0},D={autofocus:C,disabled:C,indentWithTab:C,tabSize:Number,placeholder:String,style:Object,autoDestroy:C,phrases:Object,root:Object,extensions:Array,selection:Object},U={modelValue:{type:String,default:""}},w=Object.assign(Object.assign({},D),U);(function(n){n.Change="change",n.Update="update",n.Focus="focus",n.Blur="blur",n.Ready="ready",n.ModelUpdate="update:modelValue"})(O||(O={}));var z={};z[O.Change]=function(n,e){return!0},z[O.Update]=function(n){return!0},z[O.Focus]=function(n){return!0},z[O.Blur]=function(n){return!0},z[O.Ready]=function(n){return!0};var B={};B[O.ModelUpdate]=z[O.Change];var F=Object.assign(Object.assign({},z),B),P=defineComponent({name:"VueCodemirror",props:Object.assign({},w),emits:Object.assign({},F),setup:function(n,e){var r=shallowRef(),s=shallowRef(),o=shallowRef(),a=Object.assign(Object.assign({},h),inject(y,{})),l=computed(function(){var c={};return Object.keys(toRaw(n)).forEach(function(u){var f;u!=="modelValue"&&(c[u]=(f=n[u])!==null&&f!==void 0?f:a[u])}),c});return onMounted(function(){var c;s.value=j({doc:n.modelValue,selection:l.value.selection,extensions:(c=a.extensions)!==null&&c!==void 0?c:[],onFocus:function(f){return e.emit(O.Focus,f)},onBlur:function(f){return e.emit(O.Blur,f)},onUpdate:function(f){return e.emit(O.Update,f)},onChange:function(f,d){f!==n.modelValue&&(e.emit(O.Change,f,d),e.emit(O.ModelUpdate,f,d))}}),o.value=function(f){return new EditorView(Object.assign({},f))}({state:s.value,parent:r.value,root:l.value.root});var u=function(f){var d=function(){return f.state.doc.toString()},g=S(f).run,m=x(f,[EditorView.editable.of(!1),EditorState.readOnly.of(!0)]),_=x(f,keymap.of([indentWithTab])),E=S(f).run,A=S(f).run,b=S(f).run,v=S(f).run;return{focus:function(){return f.focus()},getDoc:d,setDoc:function(M){M!==d()&&f.dispatch({changes:{from:0,to:f.state.doc.length,insert:M}})},reExtensions:g,toggleDisabled:m,toggleIndentWithTab:_,setTabSize:function(M){E([EditorState.tabSize.of(M),indentUnit.of(" ".repeat(M))])},setPhrases:function(M){A([EditorState.phrases.of(M)])},setPlaceholder:function(M){b(placeholder(M))},setStyle:function(M){M===void 0&&(M={}),v(EditorView.theme({"&":Object.assign({},M)}))}}}(o.value);watch(function(){return n.modelValue},function(f){f!==u.getDoc()&&u.setDoc(f)}),watch(function(){return n.extensions},function(f){return u.reExtensions(f||[])},{immediate:!0}),watch(function(){return l.value.disabled},function(f){return u.toggleDisabled(f)},{immediate:!0}),watch(function(){return l.value.indentWithTab},function(f){return u.toggleIndentWithTab(f)},{immediate:!0}),watch(function(){return l.value.tabSize},function(f){return u.setTabSize(f)},{immediate:!0}),watch(function(){return l.value.phrases},function(f){return u.setPhrases(f||{})},{immediate:!0}),watch(function(){return l.value.placeholder},function(f){return u.setPlaceholder(f)},{immediate:!0}),watch(function(){return l.value.style},function(f){return u.setStyle(f)},{immediate:!0}),l.value.autofocus&&u.focus(),e.emit(O.Ready,{state:s.value,view:o.value,container:r.value})}),onBeforeUnmount(function(){l.value.autoDestroy&&o.value&&function(c){c.destroy()}(o.value)}),function(){return h$1("div",{class:"v-codemirror",style:{display:"contents"},ref:r})}}}),T=P;const Edit_vue_vue_type_style_index_0_lang="",_sfc_main$7={components:{Screen,Node,Edge,Codemirror:T},data(){return{graph:new Graph,selection:null,editText:"/* click on a node or edge to start editing */"}},methods:{select(n){if(this.selection=n,!this.selection){this.editText="/* click on a node or edge to start editing */";return}const e={...n};delete e.pathd,e.html&&(e.html=`
`+pretty(e.html)+`
`),this.editText=stringify$1(e,null,2).replace(/\\n/g,`
`).replace(/html: '([^]*)\s'/g,"html: `$1\n`")},applyChanges(){if(this.selection)try{const edit=eval("("+this.editText+")");Object.assign(this.selection,edit),this.$nextTick(()=>{this.$refs.node.forEach(n=>{n.fitContent()})})}catch(n){console.log("TODO invalid code")}},isSelected(n){return this.selection&&this.selection.id===n.id},blockEvents(n){var r;const e=n.path||((r=n.composedPath)==null?void 0:r.call(n));if(e!=null&&e.find(s=>{var o;return(o=s.classList)==null?void 0:o.contains("no-drag")})){const s=this.$refs.screen.panzoom;s.options.preventMouseEventsDefault=!1,document.addEventListener("mouseup",()=>{s.options.preventMouseEventsDefault=!0},{once:!0}),n.stopPropagation()}e!=null&&e.find(s=>{var o;return(o=s.classList)==null?void 0:o.contains("no-wheel")})&&n.stopPropagation()}},mounted(){this.graph.createNode({id:"a",html:"<h5>A</h5>"}),this.graph.createNode({id:"b",x:200,y:200,textSelect:!1,useDrag:!0,html:"<div><h4>B</h4><p>Subtitle</p><button>Yo</button></div>"}),this.graph.createNode({id:"c",x:-100,y:150,textSelect:!1,useDrag:!0,html:'<div> <h4>okay</h4> <textarea type="text" class="no-drag">Some text here</textarea><br/><select class="no-drag" name="cars" id="cars"><option value="volvo">Volvo</option><option value="saab">Saab</option><option value="mercedes">Mercedes</option><option value="audi">Audi</option></select></div>'}),this.graph.createNode({id:"d",x:340,textSelect:!1,useDrag:!0,html:"<div>Okay</div>"}),this.graph.createEdge({id:"a:b",from:"a",to:"b",toAnchor:{x:"50%",y:"50%",snap:"rect"},type:"smooth"}),this.graph.createEdge({id:"c:d",from:"c",to:"d",type:"smooth"}),this.$nextTick(()=>{this.$refs.screen.zoomNodes(this.graph.nodes,{scale:1})})},watch:{editText:"applyChanges"}},_hoisted_1$7={class:"demo",id:"edit-demo"},_hoisted_2$7=["onClick"],_hoisted_3$7=["innerHTML","onClick"],_hoisted_4$7={class:"sidebar"};function _sfc_render$7(n,e,r,s,o,a){const l=resolveComponent("edge"),c=resolveComponent("node"),u=resolveComponent("screen"),f=resolveComponent("codemirror");return openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",{class:"viewport",onClick:e[0]||(e[0]=d=>a.select(null)),onMousedownCapture:e[1]||(e[1]=(...d)=>a.blockEvents&&a.blockEvents(...d)),onWheelCapture:e[2]||(e[2]=(...d)=>a.blockEvents&&a.blockEvents(...d))},[createVNode(u,{ref:"screen"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.edges,d=>(openBlock(),createElementBlock("g",{onClick:withModifiers(g=>a.select(d),["stop"]),key:d.id},[createVNode(l,{class:normalizeClass(o.selection&&o.selection.id===d.id&&"selected"),data:d,nodes:o.graph.nodes},null,8,["class","data","nodes"])],8,_hoisted_2$7))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.nodes,d=>(openBlock(),createElementBlock("g",{key:d.id},[createVNode(c,{data:d,ref_for:!0,ref:"node",class:normalizeClass(a.isSelected(d)&&"selected"),textSelect:d.textSelect,useDrag:d.useDrag},{default:withCtx(()=>[createBaseVNode("div",{innerHTML:d.html,onClick:withModifiers(g=>a.select(d),["stop"])},null,8,_hoisted_3$7)]),_:2},1032,["data","class","textSelect","useDrag"])]))),128))]),_:1},512)],32),createBaseVNode("div",_hoisted_4$7,[createVNode(f,{modelValue:o.editText,"onUpdate:modelValue":e[3]||(e[3]=d=>o.editText=d),options:{mode:"text/javascript",theme:"default",lineWrapping:!0,scrollbarStyle:null,styleActiveLine:!0,line:!0},style:{"font-size":"13.3333px","font-family":"monospace","-webkit-text-size-adjust":"100%",height:"100%"}},null,8,["modelValue"])])])}const Edit=_export_sfc(_sfc_main$7,[["render",_sfc_render$7]]),Ports_vue_vue_type_style_index_0_scoped_4c6b8f97_lang="",Ports_vue_vue_type_style_index_1_lang="",_sfc_main$6={components:{Screen,Node,Edge,Port},data(){return{graph:new Graph,connecting:null,mousePrev:{x:0,y:0},zoom:1}},methods:{startConnect(n,{input:e,output:r},s){if(this.connecting)return;const o=this.$refs.port.find(l=>l.id===`${n.id}:${e||r}`),a=e&&this.getInputEdges(n,e).reverse()[0];a?(a.active=!0,this.connecting={node:this.graph.nodes.find(l=>e?a.from===l.id:a.to===l.id),input:r,output:e}):(this.graph.createEdge({from:n.id,to:n.id,fromPort:e||r,toPort:e||r,fromAnchor:{...o.offset},toAnchor:{...o.offset},active:!0,type:"hsmooth"}),this.connecting={node:n,input:e,output:r}),this.mousePrev={x:s.clientX,y:s.clientY},this.zoom=this.$refs.screen.panzoom.getZoom()},createConnect(n,{input:e,output:r}){this.connecting&&(this.isValidConnection({node:n,input:e,output:r},this.connecting)?(e?(this.activeEdge.to=n.id,this.activeEdge.toPort=e):r&&(this.activeEdge.from=n.id,this.activeEdge.fromPort=r),this.stopConnect()):this.cancelConnect())},cancelConnect(){this.connecting&&(this.graph.removeEdge(this.activeEdge),this.stopConnect())},stopConnect(){this.activeEdge&&(this.activeEdge.active=!1),this.$nextTick(()=>{this.connecting=null})},isValidConnection(n,e){return n&&e&&n.node&&e.node&&n.node!==e.node&&(n.input&&e.output||e.input&&n.output)},getInputEdges(n,e){return this.graph.edges.filter(r=>r.to===n.id&&r.toPort===e)},getOutputEdges(n,e){return this.graph.edges.filter(r=>r.from===n.id&&r.fromPort===e)},onmousemove(n){if(this.connecting){const e={x:(n.clientX-this.mousePrev.x)/this.zoom,y:(n.clientY-this.mousePrev.y)/this.zoom},r=this.connecting.input?this.activeEdge.fromAnchor:this.activeEdge.toAnchor;r.x+=e.x,r.y+=e.y,this.mousePrev={x:n.clientX,y:n.clientY}}}},computed:{activeEdge:n=>n.graph.edges.find(e=>e.active)},mounted(){window.ports=this,this.graph.createNode({id:"a",inputs:["i1"],outputs:["o1","o2","o3","o4"]}),this.graph.createNode({id:"b",inputs:["i1","i2"],outputs:["o1","o2"]}),this.graph.createNode({id:"c",inputs:["i1","i2"],outputs:["o1","o2"]}),this.graph.createNode({id:"d",inputs:["i1","i2"],outputs:["o1","o2"]}),this.graph.createEdge({from:"a",to:"b",fromPort:"o1",toPort:"i1",active:!1,type:"hsmooth"}),this.graph.createEdge({from:"a",to:"c",fromPort:"o1",toPort:"i1",active:!1,type:"hsmooth"}),this.graph.createEdge({from:"c",to:"d",fromPort:"o1",toPort:"i1",active:!1,type:"hsmooth"}),this.$nextTick(()=>{this.graph.graphNodes({spacing:75}),this.$refs.screen.zoomNodes(this.graph.nodes,{scale:1})}),document.addEventListener("mouseup",this.cancelConnect),document.addEventListener("mousemove",this.onmousemove)},beforeDestroy(){document.removeEventListener("mouseup",this.cancelConnect),document.removeEventListener("mousemove",this.onmousemove)}},_withScopeId$2=n=>(pushScopeId("data-v-4c6b8f97"),n=n(),popScopeId(),n),_hoisted_1$6={class:"demo",id:"ports-demo"},_hoisted_2$6={class:"viewport"},_hoisted_3$6={class:"node-header"},_hoisted_4$6={style:{"border-bottom":"none"}},_hoisted_5$6=["onMousedown","onMouseup"],_hoisted_6$5={style:{"border-bottom":"none"}},_hoisted_7$4=["onMousedown","onMouseup"],_hoisted_8$3=_withScopeId$2(()=>createBaseVNode("div",{class:"sidebar"},null,-1));function _sfc_render$6(n,e,r,s,o,a){const l=resolveComponent("edge"),c=resolveComponent("port"),u=resolveComponent("node"),f=resolveComponent("screen");return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$6,[createVNode(f,{ref:"screen"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.edges,d=>(openBlock(),createBlock(l,{data:d,nodes:o.graph.nodes,key:d.id},null,8,["data","nodes"]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.nodes,d=>(openBlock(),createBlock(u,{data:d,ref_for:!0,ref:"node",key:d.id},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$6,[createBaseVNode("strong",null,toDisplayString(d.id),1)]),createBaseVNode("table",null,[createBaseVNode("td",_hoisted_4$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.inputs,g=>(openBlock(),createElementBlock("tr",{key:d.id+":"+g},[createVNode(c,{ref_for:!0,ref:"port",id:d.id+":"+g,edgesTo:a.getInputEdges(d,g)},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["port-inner",a.getInputEdges(d,g).length&&"connected"]),onMousedown:withModifiers(m=>a.startConnect(d,{input:g},m),["prevent","stop"]),onMouseup:withModifiers(m=>a.createConnect(d,{input:g}),["prevent","stop"])},null,42,_hoisted_5$6)]),_:2},1032,["id","edgesTo"]),createTextVNode(" "+toDisplayString(g.slice(1)),1)]))),128))]),createBaseVNode("td",_hoisted_6$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.outputs,g=>(openBlock(),createElementBlock("tr",{key:d.id+":"+g},[createTextVNode(toDisplayString(g.slice(1))+" ",1),createVNode(c,{ref_for:!0,ref:"port",id:d.id+":"+g,edgesFrom:a.getOutputEdges(d,g)},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["port-inner",a.getOutputEdges(d,g).length&&"connected"]),onMousedown:withModifiers(m=>a.startConnect(d,{output:g},m),["prevent","stop"]),onMouseup:withModifiers(m=>a.createConnect(d,{output:g}),["prevent","stop"])},null,42,_hoisted_7$4)]),_:2},1032,["id","edgesFrom"])]))),128))])])]),_:2},1032,["data"]))),128))]),_:1},512)]),_hoisted_8$3])}const Ports=_export_sfc(_sfc_main$6,[["render",_sfc_render$6],["__scopeId","data-v-4c6b8f97"]]),Labels_vue_vue_type_style_index_0_lang="",_sfc_main$5={components:{Screen,Node,Edge,VLabel},data(){return{graph:new Graph,perc:50,offsetX:0,offsetY:0,align:"center",rotate:!1,connector:!0,contents:'<small style="padding: 10px">Label</small>'}},methods:{resizeLabel(){this.$refs.label.$refs.node.fitContent()},onDrag(n){this.offsetX+=n.x||0,this.offsetY+=n.y||0,this.offsetX=Math.max(Math.min(this.offsetX,100),-100),this.offsetY=Math.max(Math.min(this.offsetY,100),-100)}},mounted(){this.graph.createNode("A"),this.graph.createNode({id:"B",x:450,y:100}),this.graph.createEdge({from:"A",to:"B",fromAnchor:"right",toAnchor:"left",type:"smooth"}),this.$nextTick(()=>{this.$refs.screen.zoomNodes(this.graph.nodes)})}},_hoisted_1$5={class:"demo"},_hoisted_2$5={class:"viewport"},_hoisted_3$5=["innerHTML"],_hoisted_4$5={class:"sidebar"},_hoisted_5$5=createBaseVNode("div",null,"Align",-1),_hoisted_6$4=createStaticVNode('<option value="center">center</option><option value="top">top</option><option value="top-left">top-left</option><option value="top-right">top-right</option><option value="left">left</option><option value="right">right</option><option value="bottom">bottom</option><option value="bottom-left">bottom-left</option><option value="bottom-right">bottom-right</option>',9),_hoisted_15$1=[_hoisted_6$4],_hoisted_16$1=createBaseVNode("span",null,"Rotate",-1),_hoisted_17=createBaseVNode("span",null,"Connector",-1);function _sfc_render$5(n,e,r,s,o,a){const l=resolveComponent("edge"),c=resolveComponent("node"),u=resolveComponent("v-label"),f=resolveComponent("screen");return openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$5,[createVNode(f,{ref:"screen"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.edges,d=>(openBlock(),createBlock(l,{data:d,nodes:o.graph.nodes,key:d.id},null,8,["data","nodes"]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.nodes,d=>(openBlock(),createBlock(c,{data:d,ref_for:!0,ref:"node",key:d.id},null,8,["data"]))),128)),o.graph.edges.length?(openBlock(),createBlock(u,{key:0,edge:o.graph.edges[0],perc:parseInt(o.perc),offset:{x:parseInt(o.offsetX),y:parseInt(o.offsetY)},align:o.align,rotate:o.rotate,connector:o.connector,useDrag:!0,ref:"label",onDrag:a.onDrag},{default:withCtx(()=>[createBaseVNode("div",{innerHTML:o.contents},null,8,_hoisted_3$5)]),_:1},8,["edge","perc","offset","align","rotate","connector","onDrag"])):createCommentVNode("",!0)]),_:1},512)]),createBaseVNode("div",_hoisted_4$5,[withDirectives(createBaseVNode("textarea",{rows:"3","onUpdate:modelValue":e[0]||(e[0]=d=>o.contents=d),onInput:e[1]||(e[1]=(...d)=>a.resizeLabel&&a.resizeLabel(...d))},null,544),[[vModelText,o.contents]]),createBaseVNode("div",null,"Position "+toDisplayString(o.perc),1),withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":e[2]||(e[2]=d=>o.perc=d),min:"0",max:"100"},null,512),[[vModelText,o.perc]]),createBaseVNode("div",null,"Offset { x : "+toDisplayString(parseInt(o.offsetX))+", y: "+toDisplayString(parseInt(o.offsetY))+" }",1),withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":e[3]||(e[3]=d=>o.offsetX=d),min:"-100",max:"100"},null,512),[[vModelText,o.offsetX]]),withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":e[4]||(e[4]=d=>o.offsetY=d),min:"-100",max:"100"},null,512),[[vModelText,o.offsetY]]),_hoisted_5$5,withDirectives(createBaseVNode("select",{"onUpdate:modelValue":e[5]||(e[5]=d=>o.align=d)},_hoisted_15$1,512),[[vModelSelect,o.align]]),createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=d=>o.rotate=d)},null,512),[[vModelCheckbox,o.rotate]]),_hoisted_16$1]),createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=d=>o.connector=d)},null,512),[[vModelCheckbox,o.connector]]),_hoisted_17])])])}const Labels=_export_sfc(_sfc_main$5,[["render",_sfc_render$5]]);var stats_minExports={},stats_min={get exports(){return stats_minExports},set exports(n){stats_minExports=n}};(function(n,e){(function(r,s){n.exports=s()})(commonjsGlobal,function(){var r=function(){function s(_){return l.appendChild(_.dom),_}function o(_){for(var E=0;E<l.children.length;E++)l.children[E].style.display=E===_?"block":"none";a=_}var a=0,l=document.createElement("div");l.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",l.addEventListener("click",function(_){_.preventDefault(),o(++a%l.children.length)},!1);var c=(performance||Date).now(),u=c,f=0,d=s(new r.Panel("FPS","#0ff","#002")),g=s(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var m=s(new r.Panel("MB","#f08","#201"));return o(0),{REVISION:16,dom:l,addPanel:s,showPanel:o,begin:function(){c=(performance||Date).now()},end:function(){f++;var _=(performance||Date).now();if(g.update(_-c,200),_>u+1e3&&(d.update(1e3*f/(_-u),100),u=_,f=0,m)){var E=performance.memory;m.update(E.usedJSHeapSize/1048576,E.jsHeapSizeLimit/1048576)}return _},update:function(){c=this.end()},domElement:l,setMode:o}};return r.Panel=function(s,o,a){var l=1/0,c=0,u=Math.round,f=u(window.devicePixelRatio||1),d=80*f,g=48*f,m=3*f,_=2*f,E=3*f,A=15*f,b=74*f,v=30*f,M=document.createElement("canvas");M.width=d,M.height=g,M.style.cssText="width:80px;height:48px";var V=M.getContext("2d");return V.font="bold "+9*f+"px Helvetica,Arial,sans-serif",V.textBaseline="top",V.fillStyle=a,V.fillRect(0,0,d,g),V.fillStyle=o,V.fillText(s,m,_),V.fillRect(E,A,b,v),V.fillStyle=a,V.globalAlpha=.9,V.fillRect(E,A,b,v),{dom:M,update:function(R,L){l=Math.min(l,R),c=Math.max(c,R),V.fillStyle=a,V.globalAlpha=1,V.fillRect(0,0,d,A),V.fillStyle=o,V.fillText(u(R)+" "+s+" ("+u(l)+"-"+u(c)+")",m,_),V.drawImage(M,E+f,A,b-f,v,E,A,b-f,v),V.fillRect(E+b-f,A,f,v),V.fillStyle=a,V.globalAlpha=.9,V.fillRect(E+b-f,A,f,u((1-R/L)*v))}}},r})})(stats_min);const Stats=stats_minExports,Benchmark_vue_vue_type_style_index_0_lang="",_sfc_main$4={components:{Screen,Node,Edge},data(){return{graph:new Graph,nodeCount:100}},methods:{makeGraph(){this.graph.reset(),this.graph.createNode("0");for(let n=1;n<this.nodeCount;n++){const e=this.graph.nodes[Math.round(Math.random()*(this.graph.nodes.length-1))],r=this.graph.createNode({id:String(n),x:Math.random()*this.nodeCount*12,y:Math.random()*this.nodeCount*12});this.graph.createEdge(e,r,{type:"smooth"})}this.$refs.screen.zoomNodes(this.graph.nodes)}},mounted(){this.makeGraph();const n=new Stats;n.setMode(1),n.domElement.style.setProperty("position","relative"),this.$refs.fps.appendChild(n.domElement);function e(){n.begin(),requestAnimationFrame(()=>{n.end(),e()})}e()},watch:{nodeCount:"makeGraph"}},_hoisted_1$4={class:"demo",id:"benchmark-demo"},_hoisted_2$4={class:"viewport"},_hoisted_3$4={class:"sidebar"},_hoisted_4$4={ref:"fps",style:{"margin-bottom":"10px"}},_hoisted_5$4=createBaseVNode("span",null,"Node Count",-1);function _sfc_render$4(n,e,r,s,o,a){const l=resolveComponent("edge"),c=resolveComponent("node"),u=resolveComponent("screen");return openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$4,[createVNode(u,{ref:"screen"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.edges,f=>(openBlock(),createBlock(l,{data:f,nodes:o.graph.nodes,key:f.id},null,8,["data","nodes"]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.nodes,f=>(openBlock(),createBlock(c,{data:f,ref_for:!0,ref:"node",key:f.id},null,8,["data"]))),128))]),_:1},512)]),createBaseVNode("div",_hoisted_3$4,[createBaseVNode("div",_hoisted_4$4,null,512),_hoisted_5$4,withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=f=>o.nodeCount=f),step:"25"},null,512),[[vModelText,o.nodeCount]])])])}const Benchpress=_export_sfc(_sfc_main$4,[["render",_sfc_render$4]]);var css$1={},commentre=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,parse=function(n,e){e=e||{};var r=1,s=1;function o(ee){var K=ee.match(/\n/g);K&&(r+=K.length);var he=ee.lastIndexOf(`
`);s=~he?ee.length-he:s+ee.length}function a(){var ee={line:r,column:s};return function(K){return K.position=new l(ee),E(),K}}function l(ee){this.start=ee,this.end={line:r,column:s},this.source=e.source}l.prototype.content=n;var c=[];function u(ee){var K=new Error(e.source+":"+r+":"+s+": "+ee);if(K.reason=ee,K.filename=e.source,K.line=r,K.column=s,K.source=n,e.silent)c.push(K);else throw K}function f(){var ee=m();return{type:"stylesheet",stylesheet:{source:e.source,rules:ee,parsingErrors:c}}}function d(){return _(/^{\s*/)}function g(){return _(/^}/)}function m(){var ee,K=[];for(E(),A(K);n.length&&n.charAt(0)!="}"&&(ee=me()||fe());)ee!==!1&&(K.push(ee),A(K));return K}function _(ee){var K=ee.exec(n);if(K){var he=K[0];return o(he),n=n.slice(he.length),K}}function E(){_(/^\s*/)}function A(ee){var K;for(ee=ee||[];K=b();)K!==!1&&ee.push(K);return ee}function b(){var ee=a();if(!(n.charAt(0)!="/"||n.charAt(1)!="*")){for(var K=2;n.charAt(K)!=""&&(n.charAt(K)!="*"||n.charAt(K+1)!="/");)++K;if(K+=2,n.charAt(K-1)==="")return u("End of comment missing");var he=n.slice(2,K-2);return s+=2,o(he),n=n.slice(K),s+=2,ee({type:"comment",comment:he})}}function v(){var ee=_(/^([^{]+)/);if(ee)return trim(ee[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(K){return K.replace(/,/g,"‌")}).split(/\s*(?![^(]*\)),\s*/).map(function(K){return K.replace(/\u200C/g,",")})}function M(){var ee=a(),K=_(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(K){if(K=trim(K[0]),!_(/^:\s*/))return u("property missing ':'");var he=_(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),ge=ee({type:"declaration",property:K.replace(commentre,""),value:he?trim(he[0]).replace(commentre,""):""});return _(/^[;\s]*/),ge}}function V(){var ee=[];if(!d())return u("missing '{'");A(ee);for(var K;K=M();)K!==!1&&(ee.push(K),A(ee));return g()?ee:u("missing '}'")}function R(){for(var ee,K=[],he=a();ee=_(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)K.push(ee[1]),_(/^,\s*/);if(K.length)return he({type:"keyframe",values:K,declarations:V()})}function L(){var ee=a(),he=_(/^@([-\w]+)?keyframes\s*/);if(he){var K=he[1],he=_(/^([-\w]+)\s*/);if(!he)return u("@keyframes missing name");var ge=he[1];if(!d())return u("@keyframes missing '{'");for(var be,Se=A();be=R();)Se.push(be),Se=Se.concat(A());return g()?ee({type:"keyframes",name:ge,vendor:K,keyframes:Se}):u("@keyframes missing '}'")}}function N(){var ee=a(),K=_(/^@supports *([^{]+)/);if(K){var he=trim(K[1]);if(!d())return u("@supports missing '{'");var ge=A().concat(m());return g()?ee({type:"supports",supports:he,rules:ge}):u("@supports missing '}'")}}function $(){var ee=a(),K=_(/^@host\s*/);if(K){if(!d())return u("@host missing '{'");var he=A().concat(m());return g()?ee({type:"host",rules:he}):u("@host missing '}'")}}function I(){var ee=a(),K=_(/^@media *([^{]+)/);if(K){var he=trim(K[1]);if(!d())return u("@media missing '{'");var ge=A().concat(m());return g()?ee({type:"media",media:he,rules:ge}):u("@media missing '}'")}}function H(){var ee=a(),K=_(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(K)return ee({type:"custom-media",name:trim(K[1]),media:trim(K[2])})}function k(){var ee=a(),K=_(/^@page */);if(K){var he=v()||[];if(!d())return u("@page missing '{'");for(var ge=A(),be;be=M();)ge.push(be),ge=ge.concat(A());return g()?ee({type:"page",selectors:he,declarations:ge}):u("@page missing '}'")}}function q(){var ee=a(),K=_(/^@([-\w]+)?document *([^{]+)/);if(K){var he=trim(K[1]),ge=trim(K[2]);if(!d())return u("@document missing '{'");var be=A().concat(m());return g()?ee({type:"document",document:ge,vendor:he,rules:be}):u("@document missing '}'")}}function G(){var ee=a(),K=_(/^@font-face\s*/);if(K){if(!d())return u("@font-face missing '{'");for(var he=A(),ge;ge=M();)he.push(ge),he=he.concat(A());return g()?ee({type:"font-face",declarations:he}):u("@font-face missing '}'")}}var J=le("import"),ne=le("charset"),ce=le("namespace");function le(ee){var K=new RegExp("^@"+ee+"\\s*([^;]+);");return function(){var he=a(),ge=_(K);if(ge){var be={type:ee};return be[ee]=ge[1].trim(),he(be)}}}function me(){if(n[0]=="@")return L()||I()||H()||N()||J()||ne()||ce()||q()||k()||$()||G()}function fe(){var ee=a(),K=v();return K?(A(),ee({type:"rule",selectors:K,declarations:V()})):u("selector missing")}return addParent(f())};function trim(n){return n?n.replace(/^\s+|\s+$/g,""):""}function addParent(n,e){var r=n&&typeof n.type=="string",s=r?n:e;for(var o in n){var a=n[o];Array.isArray(a)?a.forEach(function(l){addParent(l,s)}):a&&typeof a=="object"&&addParent(a,s)}return r&&Object.defineProperty(n,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null}),n}var compiler=Compiler$2;function Compiler$2(n){this.options=n||{}}Compiler$2.prototype.emit=function(n){return n};Compiler$2.prototype.visit=function(n){return this[n.type](n)};Compiler$2.prototype.mapVisit=function(n,e){var r="";e=e||"";for(var s=0,o=n.length;s<o;s++)r+=this.visit(n[s]),e&&s<o-1&&(r+=this.emit(e));return r};var inherits_browserExports={},inherits_browser={get exports(){return inherits_browserExports},set exports(n){inherits_browserExports=n}};typeof Object.create=="function"?inherits_browser.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,r){if(r){e.super_=r;var s=function(){};s.prototype=r.prototype,e.prototype=new s,e.prototype.constructor=e}};var Base$1=compiler,inherits$1=inherits_browserExports,compress=Compiler$1;function Compiler$1(n){Base$1.call(this,n)}inherits$1(Compiler$1,Base$1);Compiler$1.prototype.compile=function(n){return n.stylesheet.rules.map(this.visit,this).join("")};Compiler$1.prototype.comment=function(n){return this.emit("",n.position)};Compiler$1.prototype.import=function(n){return this.emit("@import "+n.import+";",n.position)};Compiler$1.prototype.media=function(n){return this.emit("@media "+n.media,n.position)+this.emit("{")+this.mapVisit(n.rules)+this.emit("}")};Compiler$1.prototype.document=function(n){var e="@"+(n.vendor||"")+"document "+n.document;return this.emit(e,n.position)+this.emit("{")+this.mapVisit(n.rules)+this.emit("}")};Compiler$1.prototype.charset=function(n){return this.emit("@charset "+n.charset+";",n.position)};Compiler$1.prototype.namespace=function(n){return this.emit("@namespace "+n.namespace+";",n.position)};Compiler$1.prototype.supports=function(n){return this.emit("@supports "+n.supports,n.position)+this.emit("{")+this.mapVisit(n.rules)+this.emit("}")};Compiler$1.prototype.keyframes=function(n){return this.emit("@"+(n.vendor||"")+"keyframes "+n.name,n.position)+this.emit("{")+this.mapVisit(n.keyframes)+this.emit("}")};Compiler$1.prototype.keyframe=function(n){var e=n.declarations;return this.emit(n.values.join(","),n.position)+this.emit("{")+this.mapVisit(e)+this.emit("}")};Compiler$1.prototype.page=function(n){var e=n.selectors.length?n.selectors.join(", "):"";return this.emit("@page "+e,n.position)+this.emit("{")+this.mapVisit(n.declarations)+this.emit("}")};Compiler$1.prototype["font-face"]=function(n){return this.emit("@font-face",n.position)+this.emit("{")+this.mapVisit(n.declarations)+this.emit("}")};Compiler$1.prototype.host=function(n){return this.emit("@host",n.position)+this.emit("{")+this.mapVisit(n.rules)+this.emit("}")};Compiler$1.prototype["custom-media"]=function(n){return this.emit("@custom-media "+n.name+" "+n.media+";",n.position)};Compiler$1.prototype.rule=function(n){var e=n.declarations;return e.length?this.emit(n.selectors.join(","),n.position)+this.emit("{")+this.mapVisit(e)+this.emit("}"):""};Compiler$1.prototype.declaration=function(n){return this.emit(n.property+":"+n.value,n.position)+this.emit(";")};var Base=compiler,inherits=inherits_browserExports,identity=Compiler;function Compiler(n){n=n||{},Base.call(this,n),this.indentation=n.indent}inherits(Compiler,Base);Compiler.prototype.compile=function(n){return this.stylesheet(n)};Compiler.prototype.stylesheet=function(n){return this.mapVisit(n.stylesheet.rules,`

`)};Compiler.prototype.comment=function(n){return this.emit(this.indent()+"/*"+n.comment+"*/",n.position)};Compiler.prototype.import=function(n){return this.emit("@import "+n.import+";",n.position)};Compiler.prototype.media=function(n){return this.emit("@media "+n.media,n.position)+this.emit(` {
`+this.indent(1))+this.mapVisit(n.rules,`

`)+this.emit(this.indent(-1)+`
}`)};Compiler.prototype.document=function(n){var e="@"+(n.vendor||"")+"document "+n.document;return this.emit(e,n.position)+this.emit(`  {
`+this.indent(1))+this.mapVisit(n.rules,`

`)+this.emit(this.indent(-1)+`
}`)};Compiler.prototype.charset=function(n){return this.emit("@charset "+n.charset+";",n.position)};Compiler.prototype.namespace=function(n){return this.emit("@namespace "+n.namespace+";",n.position)};Compiler.prototype.supports=function(n){return this.emit("@supports "+n.supports,n.position)+this.emit(` {
`+this.indent(1))+this.mapVisit(n.rules,`

`)+this.emit(this.indent(-1)+`
}`)};Compiler.prototype.keyframes=function(n){return this.emit("@"+(n.vendor||"")+"keyframes "+n.name,n.position)+this.emit(` {
`+this.indent(1))+this.mapVisit(n.keyframes,`
`)+this.emit(this.indent(-1)+"}")};Compiler.prototype.keyframe=function(n){var e=n.declarations;return this.emit(this.indent())+this.emit(n.values.join(", "),n.position)+this.emit(` {
`+this.indent(1))+this.mapVisit(e,`
`)+this.emit(this.indent(-1)+`
`+this.indent()+`}
`)};Compiler.prototype.page=function(n){var e=n.selectors.length?n.selectors.join(", ")+" ":"";return this.emit("@page "+e,n.position)+this.emit(`{
`)+this.emit(this.indent(1))+this.mapVisit(n.declarations,`
`)+this.emit(this.indent(-1))+this.emit(`
}`)};Compiler.prototype["font-face"]=function(n){return this.emit("@font-face ",n.position)+this.emit(`{
`)+this.emit(this.indent(1))+this.mapVisit(n.declarations,`
`)+this.emit(this.indent(-1))+this.emit(`
}`)};Compiler.prototype.host=function(n){return this.emit("@host",n.position)+this.emit(` {
`+this.indent(1))+this.mapVisit(n.rules,`

`)+this.emit(this.indent(-1)+`
}`)};Compiler.prototype["custom-media"]=function(n){return this.emit("@custom-media "+n.name+" "+n.media+";",n.position)};Compiler.prototype.rule=function(n){var e=this.indent(),r=n.declarations;return r.length?this.emit(n.selectors.map(function(s){return e+s}).join(`,
`),n.position)+this.emit(` {
`)+this.emit(this.indent(1))+this.mapVisit(r,`
`)+this.emit(this.indent(-1))+this.emit(`
`+this.indent()+"}"):""};Compiler.prototype.declaration=function(n){return this.emit(this.indent())+this.emit(n.property+": "+n.value,n.position)+this.emit(";")};Compiler.prototype.indent=function(n){return this.level=this.level||1,n!=null?(this.level+=n,""):Array(this.level).join(this.indentation||"  ")};var sourceMapSupportExports={},sourceMapSupport={get exports(){return sourceMapSupportExports},set exports(n){sourceMapSupportExports=n}},sourceMap={},sourceMapGenerator={},base64Vlq={},base64={},hasRequiredBase64;function requireBase64(){if(hasRequiredBase64)return base64;hasRequiredBase64=1;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return base64.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},base64.decode=function(e){var r=65,s=90,o=97,a=122,l=48,c=57,u=43,f=47,d=26,g=52;return r<=e&&e<=s?e-r:o<=e&&e<=a?e-o+d:l<=e&&e<=c?e-l+g:e==u?62:e==f?63:-1},base64}var hasRequiredBase64Vlq;function requireBase64Vlq(){if(hasRequiredBase64Vlq)return base64Vlq;hasRequiredBase64Vlq=1;var n=requireBase64(),e=5,r=1<<e,s=r-1,o=r;function a(c){return c<0?(-c<<1)+1:(c<<1)+0}function l(c){var u=(c&1)===1,f=c>>1;return u?-f:f}return base64Vlq.encode=function(u){var f="",d,g=a(u);do d=g&s,g>>>=e,g>0&&(d|=o),f+=n.encode(d);while(g>0);return f},base64Vlq.decode=function(u,f,d){var g=u.length,m=0,_=0,E,A;do{if(f>=g)throw new Error("Expected more digits in base 64 VLQ value.");if(A=n.decode(u.charCodeAt(f++)),A===-1)throw new Error("Invalid base64 digit: "+u.charAt(f-1));E=!!(A&o),A&=s,m=m+(A<<_),_+=e}while(E);d.value=l(m),d.rest=f},base64Vlq}var util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(n){function e(R,L,N){if(L in R)return R[L];if(arguments.length===3)return N;throw new Error('"'+L+'" is a required argument.')}n.getArg=e;var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,s=/^data:.+\,.+$/;function o(R){var L=R.match(r);return L?{scheme:L[1],auth:L[2],host:L[3],port:L[4],path:L[5]}:null}n.urlParse=o;function a(R){var L="";return R.scheme&&(L+=R.scheme+":"),L+="//",R.auth&&(L+=R.auth+"@"),R.host&&(L+=R.host),R.port&&(L+=":"+R.port),R.path&&(L+=R.path),L}n.urlGenerate=a;function l(R){var L=R,N=o(R);if(N){if(!N.path)return R;L=N.path}for(var $=n.isAbsolute(L),I=L.split(/\/+/),H,k=0,q=I.length-1;q>=0;q--)H=I[q],H==="."?I.splice(q,1):H===".."?k++:k>0&&(H===""?(I.splice(q+1,k),k=0):(I.splice(q,2),k--));return L=I.join("/"),L===""&&(L=$?"/":"."),N?(N.path=L,a(N)):L}n.normalize=l;function c(R,L){R===""&&(R="."),L===""&&(L=".");var N=o(L),$=o(R);if($&&(R=$.path||"/"),N&&!N.scheme)return $&&(N.scheme=$.scheme),a(N);if(N||L.match(s))return L;if($&&!$.host&&!$.path)return $.host=L,a($);var I=L.charAt(0)==="/"?L:l(R.replace(/\/+$/,"")+"/"+L);return $?($.path=I,a($)):I}n.join=c,n.isAbsolute=function(R){return R.charAt(0)==="/"||r.test(R)};function u(R,L){R===""&&(R="."),R=R.replace(/\/$/,"");for(var N=0;L.indexOf(R+"/")!==0;){var $=R.lastIndexOf("/");if($<0||(R=R.slice(0,$),R.match(/^([^\/]+:\/)?\/*$/)))return L;++N}return Array(N+1).join("../")+L.substr(R.length+1)}n.relative=u;var f=function(){var R=Object.create(null);return!("__proto__"in R)}();function d(R){return R}function g(R){return _(R)?"$"+R:R}n.toSetString=f?d:g;function m(R){return _(R)?R.slice(1):R}n.fromSetString=f?d:m;function _(R){if(!R)return!1;var L=R.length;if(L<9||R.charCodeAt(L-1)!==95||R.charCodeAt(L-2)!==95||R.charCodeAt(L-3)!==111||R.charCodeAt(L-4)!==116||R.charCodeAt(L-5)!==111||R.charCodeAt(L-6)!==114||R.charCodeAt(L-7)!==112||R.charCodeAt(L-8)!==95||R.charCodeAt(L-9)!==95)return!1;for(var N=L-10;N>=0;N--)if(R.charCodeAt(N)!==36)return!1;return!0}function E(R,L,N){var $=b(R.source,L.source);return $!==0||($=R.originalLine-L.originalLine,$!==0)||($=R.originalColumn-L.originalColumn,$!==0||N)||($=R.generatedColumn-L.generatedColumn,$!==0)||($=R.generatedLine-L.generatedLine,$!==0)?$:b(R.name,L.name)}n.compareByOriginalPositions=E;function A(R,L,N){var $=R.generatedLine-L.generatedLine;return $!==0||($=R.generatedColumn-L.generatedColumn,$!==0||N)||($=b(R.source,L.source),$!==0)||($=R.originalLine-L.originalLine,$!==0)||($=R.originalColumn-L.originalColumn,$!==0)?$:b(R.name,L.name)}n.compareByGeneratedPositionsDeflated=A;function b(R,L){return R===L?0:R===null?1:L===null?-1:R>L?1:-1}function v(R,L){var N=R.generatedLine-L.generatedLine;return N!==0||(N=R.generatedColumn-L.generatedColumn,N!==0)||(N=b(R.source,L.source),N!==0)||(N=R.originalLine-L.originalLine,N!==0)||(N=R.originalColumn-L.originalColumn,N!==0)?N:b(R.name,L.name)}n.compareByGeneratedPositionsInflated=v;function M(R){return JSON.parse(R.replace(/^\)]}'[^\n]*\n/,""))}n.parseSourceMapInput=M;function V(R,L,N){if(L=L||"",R&&(R[R.length-1]!=="/"&&L[0]!=="/"&&(R+="/"),L=R+L),N){var $=o(N);if(!$)throw new Error("sourceMapURL could not be parsed");if($.path){var I=$.path.lastIndexOf("/");I>=0&&($.path=$.path.substring(0,I+1))}L=c(a($),L)}return l(L)}n.computeSourceURL=V}(util)),util}var arraySet={},hasRequiredArraySet;function requireArraySet(){if(hasRequiredArraySet)return arraySet;hasRequiredArraySet=1;var n=requireUtil(),e=Object.prototype.hasOwnProperty,r=typeof Map<"u";function s(){this._array=[],this._set=r?new Map:Object.create(null)}return s.fromArray=function(a,l){for(var c=new s,u=0,f=a.length;u<f;u++)c.add(a[u],l);return c},s.prototype.size=function(){return r?this._set.size:Object.getOwnPropertyNames(this._set).length},s.prototype.add=function(a,l){var c=r?a:n.toSetString(a),u=r?this.has(a):e.call(this._set,c),f=this._array.length;(!u||l)&&this._array.push(a),u||(r?this._set.set(a,f):this._set[c]=f)},s.prototype.has=function(a){if(r)return this._set.has(a);var l=n.toSetString(a);return e.call(this._set,l)},s.prototype.indexOf=function(a){if(r){var l=this._set.get(a);if(l>=0)return l}else{var c=n.toSetString(a);if(e.call(this._set,c))return this._set[c]}throw new Error('"'+a+'" is not in the set.')},s.prototype.at=function(a){if(a>=0&&a<this._array.length)return this._array[a];throw new Error("No element indexed by "+a)},s.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=s,arraySet}var mappingList={},hasRequiredMappingList;function requireMappingList(){if(hasRequiredMappingList)return mappingList;hasRequiredMappingList=1;var n=requireUtil();function e(s,o){var a=s.generatedLine,l=o.generatedLine,c=s.generatedColumn,u=o.generatedColumn;return l>a||l==a&&u>=c||n.compareByGeneratedPositionsInflated(s,o)<=0}function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return r.prototype.unsortedForEach=function(o,a){this._array.forEach(o,a)},r.prototype.add=function(o){e(this._last,o)?(this._last=o,this._array.push(o)):(this._sorted=!1,this._array.push(o))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(n.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=r,mappingList}var hasRequiredSourceMapGenerator;function requireSourceMapGenerator(){if(hasRequiredSourceMapGenerator)return sourceMapGenerator;hasRequiredSourceMapGenerator=1;var n=requireBase64Vlq(),e=requireUtil(),r=requireArraySet().ArraySet,s=requireMappingList().MappingList;function o(a){a||(a={}),this._file=e.getArg(a,"file",null),this._sourceRoot=e.getArg(a,"sourceRoot",null),this._skipValidation=e.getArg(a,"skipValidation",!1),this._sources=new r,this._names=new r,this._mappings=new s,this._sourcesContents=null}return o.prototype._version=3,o.fromSourceMap=function(l){var c=l.sourceRoot,u=new o({file:l.file,sourceRoot:c});return l.eachMapping(function(f){var d={generated:{line:f.generatedLine,column:f.generatedColumn}};f.source!=null&&(d.source=f.source,c!=null&&(d.source=e.relative(c,d.source)),d.original={line:f.originalLine,column:f.originalColumn},f.name!=null&&(d.name=f.name)),u.addMapping(d)}),l.sources.forEach(function(f){var d=f;c!==null&&(d=e.relative(c,f)),u._sources.has(d)||u._sources.add(d);var g=l.sourceContentFor(f);g!=null&&u.setSourceContent(f,g)}),u},o.prototype.addMapping=function(l){var c=e.getArg(l,"generated"),u=e.getArg(l,"original",null),f=e.getArg(l,"source",null),d=e.getArg(l,"name",null);this._skipValidation||this._validateMapping(c,u,f,d),f!=null&&(f=String(f),this._sources.has(f)||this._sources.add(f)),d!=null&&(d=String(d),this._names.has(d)||this._names.add(d)),this._mappings.add({generatedLine:c.line,generatedColumn:c.column,originalLine:u!=null&&u.line,originalColumn:u!=null&&u.column,source:f,name:d})},o.prototype.setSourceContent=function(l,c){var u=l;this._sourceRoot!=null&&(u=e.relative(this._sourceRoot,u)),c!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[e.toSetString(u)]=c):this._sourcesContents&&(delete this._sourcesContents[e.toSetString(u)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},o.prototype.applySourceMap=function(l,c,u){var f=c;if(c==null){if(l.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);f=l.file}var d=this._sourceRoot;d!=null&&(f=e.relative(d,f));var g=new r,m=new r;this._mappings.unsortedForEach(function(_){if(_.source===f&&_.originalLine!=null){var E=l.originalPositionFor({line:_.originalLine,column:_.originalColumn});E.source!=null&&(_.source=E.source,u!=null&&(_.source=e.join(u,_.source)),d!=null&&(_.source=e.relative(d,_.source)),_.originalLine=E.line,_.originalColumn=E.column,E.name!=null&&(_.name=E.name))}var A=_.source;A!=null&&!g.has(A)&&g.add(A);var b=_.name;b!=null&&!m.has(b)&&m.add(b)},this),this._sources=g,this._names=m,l.sources.forEach(function(_){var E=l.sourceContentFor(_);E!=null&&(u!=null&&(_=e.join(u,_)),d!=null&&(_=e.relative(d,_)),this.setSourceContent(_,E))},this)},o.prototype._validateMapping=function(l,c,u,f){if(c&&typeof c.line!="number"&&typeof c.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(l&&"line"in l&&"column"in l&&l.line>0&&l.column>=0&&!c&&!u&&!f)){if(l&&"line"in l&&"column"in l&&c&&"line"in c&&"column"in c&&l.line>0&&l.column>=0&&c.line>0&&c.column>=0&&u)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:l,source:u,original:c,name:f}))}},o.prototype._serializeMappings=function(){for(var l=0,c=1,u=0,f=0,d=0,g=0,m="",_,E,A,b,v=this._mappings.toArray(),M=0,V=v.length;M<V;M++){if(E=v[M],_="",E.generatedLine!==c)for(l=0;E.generatedLine!==c;)_+=";",c++;else if(M>0){if(!e.compareByGeneratedPositionsInflated(E,v[M-1]))continue;_+=","}_+=n.encode(E.generatedColumn-l),l=E.generatedColumn,E.source!=null&&(b=this._sources.indexOf(E.source),_+=n.encode(b-g),g=b,_+=n.encode(E.originalLine-1-f),f=E.originalLine-1,_+=n.encode(E.originalColumn-u),u=E.originalColumn,E.name!=null&&(A=this._names.indexOf(E.name),_+=n.encode(A-d),d=A)),m+=_}return m},o.prototype._generateSourcesContent=function(l,c){return l.map(function(u){if(!this._sourcesContents)return null;c!=null&&(u=e.relative(c,u));var f=e.toSetString(u);return Object.prototype.hasOwnProperty.call(this._sourcesContents,f)?this._sourcesContents[f]:null},this)},o.prototype.toJSON=function(){var l={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(l.file=this._file),this._sourceRoot!=null&&(l.sourceRoot=this._sourceRoot),this._sourcesContents&&(l.sourcesContent=this._generateSourcesContent(l.sources,l.sourceRoot)),l},o.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=o,sourceMapGenerator}var sourceMapConsumer={},binarySearch={},hasRequiredBinarySearch;function requireBinarySearch(){return hasRequiredBinarySearch||(hasRequiredBinarySearch=1,function(n){n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2;function e(r,s,o,a,l,c){var u=Math.floor((s-r)/2)+r,f=l(o,a[u],!0);return f===0?u:f>0?s-u>1?e(u,s,o,a,l,c):c==n.LEAST_UPPER_BOUND?s<a.length?s:-1:u:u-r>1?e(r,u,o,a,l,c):c==n.LEAST_UPPER_BOUND?u:r<0?-1:r}n.search=function(s,o,a,l){if(o.length===0)return-1;var c=e(-1,o.length,s,o,a,l||n.GREATEST_LOWER_BOUND);if(c<0)return-1;for(;c-1>=0&&a(o[c],o[c-1],!0)===0;)--c;return c}}(binarySearch)),binarySearch}var quickSort={},hasRequiredQuickSort;function requireQuickSort(){if(hasRequiredQuickSort)return quickSort;hasRequiredQuickSort=1;function n(s,o,a){var l=s[o];s[o]=s[a],s[a]=l}function e(s,o){return Math.round(s+Math.random()*(o-s))}function r(s,o,a,l){if(a<l){var c=e(a,l),u=a-1;n(s,c,l);for(var f=s[l],d=a;d<l;d++)o(s[d],f)<=0&&(u+=1,n(s,u,d));n(s,u+1,d);var g=u+1;r(s,o,a,g-1),r(s,o,g+1,l)}}return quickSort.quickSort=function(s,o){r(s,o,0,s.length-1)},quickSort}var hasRequiredSourceMapConsumer;function requireSourceMapConsumer(){if(hasRequiredSourceMapConsumer)return sourceMapConsumer;hasRequiredSourceMapConsumer=1;var n=requireUtil(),e=requireBinarySearch(),r=requireArraySet().ArraySet,s=requireBase64Vlq(),o=requireQuickSort().quickSort;function a(f,d){var g=f;return typeof f=="string"&&(g=n.parseSourceMapInput(f)),g.sections!=null?new u(g,d):new l(g,d)}a.fromSourceMap=function(f,d){return l.fromSourceMap(f,d)},a.prototype._version=3,a.prototype.__generatedMappings=null,Object.defineProperty(a.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),a.prototype.__originalMappings=null,Object.defineProperty(a.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),a.prototype._charIsMappingSeparator=function(d,g){var m=d.charAt(g);return m===";"||m===","},a.prototype._parseMappings=function(d,g){throw new Error("Subclasses must implement _parseMappings")},a.GENERATED_ORDER=1,a.ORIGINAL_ORDER=2,a.GREATEST_LOWER_BOUND=1,a.LEAST_UPPER_BOUND=2,a.prototype.eachMapping=function(d,g,m){var _=g||null,E=m||a.GENERATED_ORDER,A;switch(E){case a.GENERATED_ORDER:A=this._generatedMappings;break;case a.ORIGINAL_ORDER:A=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var b=this.sourceRoot;A.map(function(v){var M=v.source===null?null:this._sources.at(v.source);return M=n.computeSourceURL(b,M,this._sourceMapURL),{source:M,generatedLine:v.generatedLine,generatedColumn:v.generatedColumn,originalLine:v.originalLine,originalColumn:v.originalColumn,name:v.name===null?null:this._names.at(v.name)}},this).forEach(d,_)},a.prototype.allGeneratedPositionsFor=function(d){var g=n.getArg(d,"line"),m={source:n.getArg(d,"source"),originalLine:g,originalColumn:n.getArg(d,"column",0)};if(m.source=this._findSourceIndex(m.source),m.source<0)return[];var _=[],E=this._findMapping(m,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions,e.LEAST_UPPER_BOUND);if(E>=0){var A=this._originalMappings[E];if(d.column===void 0)for(var b=A.originalLine;A&&A.originalLine===b;)_.push({line:n.getArg(A,"generatedLine",null),column:n.getArg(A,"generatedColumn",null),lastColumn:n.getArg(A,"lastGeneratedColumn",null)}),A=this._originalMappings[++E];else for(var v=A.originalColumn;A&&A.originalLine===g&&A.originalColumn==v;)_.push({line:n.getArg(A,"generatedLine",null),column:n.getArg(A,"generatedColumn",null),lastColumn:n.getArg(A,"lastGeneratedColumn",null)}),A=this._originalMappings[++E]}return _},sourceMapConsumer.SourceMapConsumer=a;function l(f,d){var g=f;typeof f=="string"&&(g=n.parseSourceMapInput(f));var m=n.getArg(g,"version"),_=n.getArg(g,"sources"),E=n.getArg(g,"names",[]),A=n.getArg(g,"sourceRoot",null),b=n.getArg(g,"sourcesContent",null),v=n.getArg(g,"mappings"),M=n.getArg(g,"file",null);if(m!=this._version)throw new Error("Unsupported version: "+m);A&&(A=n.normalize(A)),_=_.map(String).map(n.normalize).map(function(V){return A&&n.isAbsolute(A)&&n.isAbsolute(V)?n.relative(A,V):V}),this._names=r.fromArray(E.map(String),!0),this._sources=r.fromArray(_,!0),this._absoluteSources=this._sources.toArray().map(function(V){return n.computeSourceURL(A,V,d)}),this.sourceRoot=A,this.sourcesContent=b,this._mappings=v,this._sourceMapURL=d,this.file=M}l.prototype=Object.create(a.prototype),l.prototype.consumer=a,l.prototype._findSourceIndex=function(f){var d=f;if(this.sourceRoot!=null&&(d=n.relative(this.sourceRoot,d)),this._sources.has(d))return this._sources.indexOf(d);var g;for(g=0;g<this._absoluteSources.length;++g)if(this._absoluteSources[g]==f)return g;return-1},l.fromSourceMap=function(d,g){var m=Object.create(l.prototype),_=m._names=r.fromArray(d._names.toArray(),!0),E=m._sources=r.fromArray(d._sources.toArray(),!0);m.sourceRoot=d._sourceRoot,m.sourcesContent=d._generateSourcesContent(m._sources.toArray(),m.sourceRoot),m.file=d._file,m._sourceMapURL=g,m._absoluteSources=m._sources.toArray().map(function(N){return n.computeSourceURL(m.sourceRoot,N,g)});for(var A=d._mappings.toArray().slice(),b=m.__generatedMappings=[],v=m.__originalMappings=[],M=0,V=A.length;M<V;M++){var R=A[M],L=new c;L.generatedLine=R.generatedLine,L.generatedColumn=R.generatedColumn,R.source&&(L.source=E.indexOf(R.source),L.originalLine=R.originalLine,L.originalColumn=R.originalColumn,R.name&&(L.name=_.indexOf(R.name)),v.push(L)),b.push(L)}return o(m.__originalMappings,n.compareByOriginalPositions),m},l.prototype._version=3,Object.defineProperty(l.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function c(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}l.prototype._parseMappings=function(d,g){for(var m=1,_=0,E=0,A=0,b=0,v=0,M=d.length,V=0,R={},L={},N=[],$=[],I,H,k,q,G;V<M;)if(d.charAt(V)===";")m++,V++,_=0;else if(d.charAt(V)===",")V++;else{for(I=new c,I.generatedLine=m,q=V;q<M&&!this._charIsMappingSeparator(d,q);q++);if(H=d.slice(V,q),k=R[H],k)V+=H.length;else{for(k=[];V<q;)s.decode(d,V,L),G=L.value,V=L.rest,k.push(G);if(k.length===2)throw new Error("Found a source, but no line and column");if(k.length===3)throw new Error("Found a source and line, but no column");R[H]=k}I.generatedColumn=_+k[0],_=I.generatedColumn,k.length>1&&(I.source=b+k[1],b+=k[1],I.originalLine=E+k[2],E=I.originalLine,I.originalLine+=1,I.originalColumn=A+k[3],A=I.originalColumn,k.length>4&&(I.name=v+k[4],v+=k[4])),$.push(I),typeof I.originalLine=="number"&&N.push(I)}o($,n.compareByGeneratedPositionsDeflated),this.__generatedMappings=$,o(N,n.compareByOriginalPositions),this.__originalMappings=N},l.prototype._findMapping=function(d,g,m,_,E,A){if(d[m]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+d[m]);if(d[_]<0)throw new TypeError("Column must be greater than or equal to 0, got "+d[_]);return e.search(d,g,E,A)},l.prototype.computeColumnSpans=function(){for(var d=0;d<this._generatedMappings.length;++d){var g=this._generatedMappings[d];if(d+1<this._generatedMappings.length){var m=this._generatedMappings[d+1];if(g.generatedLine===m.generatedLine){g.lastGeneratedColumn=m.generatedColumn-1;continue}}g.lastGeneratedColumn=1/0}},l.prototype.originalPositionFor=function(d){var g={generatedLine:n.getArg(d,"line"),generatedColumn:n.getArg(d,"column")},m=this._findMapping(g,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositionsDeflated,n.getArg(d,"bias",a.GREATEST_LOWER_BOUND));if(m>=0){var _=this._generatedMappings[m];if(_.generatedLine===g.generatedLine){var E=n.getArg(_,"source",null);E!==null&&(E=this._sources.at(E),E=n.computeSourceURL(this.sourceRoot,E,this._sourceMapURL));var A=n.getArg(_,"name",null);return A!==null&&(A=this._names.at(A)),{source:E,line:n.getArg(_,"originalLine",null),column:n.getArg(_,"originalColumn",null),name:A}}}return{source:null,line:null,column:null,name:null}},l.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(d){return d==null}):!1},l.prototype.sourceContentFor=function(d,g){if(!this.sourcesContent)return null;var m=this._findSourceIndex(d);if(m>=0)return this.sourcesContent[m];var _=d;this.sourceRoot!=null&&(_=n.relative(this.sourceRoot,_));var E;if(this.sourceRoot!=null&&(E=n.urlParse(this.sourceRoot))){var A=_.replace(/^file:\/\//,"");if(E.scheme=="file"&&this._sources.has(A))return this.sourcesContent[this._sources.indexOf(A)];if((!E.path||E.path=="/")&&this._sources.has("/"+_))return this.sourcesContent[this._sources.indexOf("/"+_)]}if(g)return null;throw new Error('"'+_+'" is not in the SourceMap.')},l.prototype.generatedPositionFor=function(d){var g=n.getArg(d,"source");if(g=this._findSourceIndex(g),g<0)return{line:null,column:null,lastColumn:null};var m={source:g,originalLine:n.getArg(d,"line"),originalColumn:n.getArg(d,"column")},_=this._findMapping(m,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions,n.getArg(d,"bias",a.GREATEST_LOWER_BOUND));if(_>=0){var E=this._originalMappings[_];if(E.source===m.source)return{line:n.getArg(E,"generatedLine",null),column:n.getArg(E,"generatedColumn",null),lastColumn:n.getArg(E,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=l;function u(f,d){var g=f;typeof f=="string"&&(g=n.parseSourceMapInput(f));var m=n.getArg(g,"version"),_=n.getArg(g,"sections");if(m!=this._version)throw new Error("Unsupported version: "+m);this._sources=new r,this._names=new r;var E={line:-1,column:0};this._sections=_.map(function(A){if(A.url)throw new Error("Support for url field in sections not implemented.");var b=n.getArg(A,"offset"),v=n.getArg(b,"line"),M=n.getArg(b,"column");if(v<E.line||v===E.line&&M<E.column)throw new Error("Section offsets must be ordered and non-overlapping.");return E=b,{generatedOffset:{generatedLine:v+1,generatedColumn:M+1},consumer:new a(n.getArg(A,"map"),d)}})}return u.prototype=Object.create(a.prototype),u.prototype.constructor=a,u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){for(var f=[],d=0;d<this._sections.length;d++)for(var g=0;g<this._sections[d].consumer.sources.length;g++)f.push(this._sections[d].consumer.sources[g]);return f}}),u.prototype.originalPositionFor=function(d){var g={generatedLine:n.getArg(d,"line"),generatedColumn:n.getArg(d,"column")},m=e.search(g,this._sections,function(E,A){var b=E.generatedLine-A.generatedOffset.generatedLine;return b||E.generatedColumn-A.generatedOffset.generatedColumn}),_=this._sections[m];return _?_.consumer.originalPositionFor({line:g.generatedLine-(_.generatedOffset.generatedLine-1),column:g.generatedColumn-(_.generatedOffset.generatedLine===g.generatedLine?_.generatedOffset.generatedColumn-1:0),bias:d.bias}):{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(d){return d.consumer.hasContentsOfAllSources()})},u.prototype.sourceContentFor=function(d,g){for(var m=0;m<this._sections.length;m++){var _=this._sections[m],E=_.consumer.sourceContentFor(d,!0);if(E)return E}if(g)return null;throw new Error('"'+d+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(d){for(var g=0;g<this._sections.length;g++){var m=this._sections[g];if(m.consumer._findSourceIndex(n.getArg(d,"source"))!==-1){var _=m.consumer.generatedPositionFor(d);if(_){var E={line:_.line+(m.generatedOffset.generatedLine-1),column:_.column+(m.generatedOffset.generatedLine===_.line?m.generatedOffset.generatedColumn-1:0)};return E}}}return{line:null,column:null}},u.prototype._parseMappings=function(d,g){this.__generatedMappings=[],this.__originalMappings=[];for(var m=0;m<this._sections.length;m++)for(var _=this._sections[m],E=_.consumer._generatedMappings,A=0;A<E.length;A++){var b=E[A],v=_.consumer._sources.at(b.source);v=n.computeSourceURL(_.consumer.sourceRoot,v,this._sourceMapURL),this._sources.add(v),v=this._sources.indexOf(v);var M=null;b.name&&(M=_.consumer._names.at(b.name),this._names.add(M),M=this._names.indexOf(M));var V={source:v,generatedLine:b.generatedLine+(_.generatedOffset.generatedLine-1),generatedColumn:b.generatedColumn+(_.generatedOffset.generatedLine===b.generatedLine?_.generatedOffset.generatedColumn-1:0),originalLine:b.originalLine,originalColumn:b.originalColumn,name:M};this.__generatedMappings.push(V),typeof V.originalLine=="number"&&this.__originalMappings.push(V)}o(this.__generatedMappings,n.compareByGeneratedPositionsDeflated),o(this.__originalMappings,n.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=u,sourceMapConsumer}var sourceNode={},hasRequiredSourceNode;function requireSourceNode(){if(hasRequiredSourceNode)return sourceNode;hasRequiredSourceNode=1;var n=requireSourceMapGenerator().SourceMapGenerator,e=requireUtil(),r=/(\r?\n)/,s=10,o="$$$isSourceNode$$$";function a(l,c,u,f,d){this.children=[],this.sourceContents={},this.line=l??null,this.column=c??null,this.source=u??null,this.name=d??null,this[o]=!0,f!=null&&this.add(f)}return a.fromStringWithSourceMap=function(c,u,f){var d=new a,g=c.split(r),m=0,_=function(){var M=R(),V=R()||"";return M+V;function R(){return m<g.length?g[m++]:void 0}},E=1,A=0,b=null;return u.eachMapping(function(M){if(b!==null)if(E<M.generatedLine)v(b,_()),E++,A=0;else{var V=g[m]||"",R=V.substr(0,M.generatedColumn-A);g[m]=V.substr(M.generatedColumn-A),A=M.generatedColumn,v(b,R),b=M;return}for(;E<M.generatedLine;)d.add(_()),E++;if(A<M.generatedColumn){var V=g[m]||"";d.add(V.substr(0,M.generatedColumn)),g[m]=V.substr(M.generatedColumn),A=M.generatedColumn}b=M},this),m<g.length&&(b&&v(b,_()),d.add(g.splice(m).join(""))),u.sources.forEach(function(M){var V=u.sourceContentFor(M);V!=null&&(f!=null&&(M=e.join(f,M)),d.setSourceContent(M,V))}),d;function v(M,V){if(M===null||M.source===void 0)d.add(V);else{var R=f?e.join(f,M.source):M.source;d.add(new a(M.originalLine,M.originalColumn,R,V,M.name))}}},a.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(u){this.add(u)},this);else if(c[o]||typeof c=="string")c&&this.children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this},a.prototype.prepend=function(c){if(Array.isArray(c))for(var u=c.length-1;u>=0;u--)this.prepend(c[u]);else if(c[o]||typeof c=="string")this.children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this},a.prototype.walk=function(c){for(var u,f=0,d=this.children.length;f<d;f++)u=this.children[f],u[o]?u.walk(c):u!==""&&c(u,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(c){var u,f,d=this.children.length;if(d>0){for(u=[],f=0;f<d-1;f++)u.push(this.children[f]),u.push(c);u.push(this.children[f]),this.children=u}return this},a.prototype.replaceRight=function(c,u){var f=this.children[this.children.length-1];return f[o]?f.replaceRight(c,u):typeof f=="string"?this.children[this.children.length-1]=f.replace(c,u):this.children.push("".replace(c,u)),this},a.prototype.setSourceContent=function(c,u){this.sourceContents[e.toSetString(c)]=u},a.prototype.walkSourceContents=function(c){for(var u=0,f=this.children.length;u<f;u++)this.children[u][o]&&this.children[u].walkSourceContents(c);for(var d=Object.keys(this.sourceContents),u=0,f=d.length;u<f;u++)c(e.fromSetString(d[u]),this.sourceContents[d[u]])},a.prototype.toString=function(){var c="";return this.walk(function(u){c+=u}),c},a.prototype.toStringWithSourceMap=function(c){var u={code:"",line:1,column:0},f=new n(c),d=!1,g=null,m=null,_=null,E=null;return this.walk(function(A,b){u.code+=A,b.source!==null&&b.line!==null&&b.column!==null?((g!==b.source||m!==b.line||_!==b.column||E!==b.name)&&f.addMapping({source:b.source,original:{line:b.line,column:b.column},generated:{line:u.line,column:u.column},name:b.name}),g=b.source,m=b.line,_=b.column,E=b.name,d=!0):d&&(f.addMapping({generated:{line:u.line,column:u.column}}),g=null,d=!1);for(var v=0,M=A.length;v<M;v++)A.charCodeAt(v)===s?(u.line++,u.column=0,v+1===M?(g=null,d=!1):d&&f.addMapping({source:b.source,original:{line:b.line,column:b.column},generated:{line:u.line,column:u.column},name:b.name})):u.column++}),this.walkSourceContents(function(A,b){f.setSourceContent(A,b)}),{code:u.code,map:f}},sourceNode.SourceNode=a,sourceNode}var hasRequiredSourceMap;function requireSourceMap(){return hasRequiredSourceMap||(hasRequiredSourceMap=1,sourceMap.SourceMapGenerator=requireSourceMapGenerator().SourceMapGenerator,sourceMap.SourceMapConsumer=requireSourceMapConsumer().SourceMapConsumer,sourceMap.SourceNode=requireSourceNode().SourceNode),sourceMap}var sourceMapResolveExports={},sourceMapResolve={get exports(){return sourceMapResolveExports},set exports(n){sourceMapResolveExports=n}},sourceMapUrlExports={},sourceMapUrl={get exports(){return sourceMapUrlExports},set exports(n){sourceMapUrlExports=n}},hasRequiredSourceMapUrl;function requireSourceMapUrl(){return hasRequiredSourceMapUrl||(hasRequiredSourceMapUrl=1,function(n,e){(function(r,s){n.exports=s()})(commonjsGlobal,function(){var r=/[#@] sourceMappingURL=([^\s'"]*)/,s=RegExp(`(?:/\\*(?:\\s*\r?
(?://)?)?(?:`+r.source+")\\s*\\*/|//(?:"+r.source+"))\\s*");return{regex:s,_innerRegex:r,getFrom:function(o){var a=o.match(s);return a?a[1]||a[2]||"":null},existsIn:function(o){return s.test(o)},removeFrom:function(o){return o.replace(s,"")},insertBefore:function(o,a){var l=o.match(s);return l?o.slice(0,l.index)+a+o.slice(l.index):o+a}}})}(sourceMapUrl)),sourceMapUrlExports}var resolveUrlExports={},resolveUrl={get exports(){return resolveUrlExports},set exports(n){resolveUrlExports=n}},hasRequiredResolveUrl;function requireResolveUrl(){return hasRequiredResolveUrl||(hasRequiredResolveUrl=1,function(n,e){(function(r,s){n.exports=s()})(commonjsGlobal,function(){function r(){var s=arguments.length;if(s===0)throw new Error("resolveUrl requires at least one argument; got none.");var o=document.createElement("base");if(o.href=arguments[0],s===1)return o.href;var a=document.getElementsByTagName("head")[0];a.insertBefore(o,a.firstChild);for(var l=document.createElement("a"),c,u=1;u<s;u++)l.href=arguments[u],c=l.href,o.href=c;return a.removeChild(o),c}return r})}(resolveUrl)),resolveUrlExports}var hasRequiredSourceMapResolve;function requireSourceMapResolve(){return hasRequiredSourceMapResolve||(hasRequiredSourceMapResolve=1,function(n,e){(function(r,s){{var o=requireSourceMapUrl(),a=requireResolveUrl();n.exports=s(o,a)}})(commonjsGlobal,function(r,s){function o(L,N,$){setImmediate(function(){L(N,$)})}function a(L,N){try{return JSON.parse(L.replace(/^\)\]\}'/,""))}catch($){throw $.sourceMapData=N,$}}function l(L,N,$){var I=N;try{return String(L(I))}catch(H){throw H.sourceMapData=$,H}}function c(L,N,$,I){var H;try{H=E(L,N)}catch(q){return o(I,q)}if(!H||H.map)return o(I,null,H);var k=H.url;$(k,function(q,G){if(q)return q.sourceMapData=H,I(q);H.map=String(G);try{H.map=a(H.map,H)}catch(J){return I(J)}I(null,H)})}function u(L,N,$){var I=E(L,N);return!I||I.map||(I.map=l($,I.url,I),I.map=a(I.map,I)),I}var f=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,d=/^(?:application|text)\/json$/,g="utf-8";function m(L){for(var N=atob(L),$=N.length,I=new Uint8Array($),H=0;H<$;H++)I[H]=N.charCodeAt(H);return I}function _(L){if(typeof TextDecoder>"u"||typeof Uint8Array>"u")return atob(L);var N=m(L),$=new TextDecoder(g,{fatal:!0});return $.decode(N)}function E(L,N){var $=r.getFrom(L);if(!$)return null;var I=$.match(f);if(I){var H=I[1]||"text/plain",k=I[2]||"",q=I[3]||"",G={sourceMappingURL:$,url:null,sourcesRelativeTo:N,map:q};if(!d.test(H)){var J=new Error("Unuseful data uri mime type: "+H);throw J.sourceMapData=G,J}try{G.map=a(k===";base64"?_(q):decodeURIComponent(q),G)}catch(ce){throw ce.sourceMapData=G,ce}return G}var ne=s(N,$);return{sourceMappingURL:$,url:ne,sourcesRelativeTo:ne,map:null}}function A(L,N,$,I,H){typeof I=="function"&&(H=I,I={});var k=L.sources?L.sources.length:0,q={sourcesResolved:[],sourcesContent:[]};if(k===0){o(H,null,q);return}var G=function(){k--,k===0&&H(null,q)};M(L,N,I,function(J,ne,ce){if(q.sourcesResolved[ce]=J,typeof ne=="string")q.sourcesContent[ce]=ne,o(G,null);else{var le=J;$(le,function(me,fe){q.sourcesContent[ce]=me||String(fe),G()})}})}function b(L,N,$,I){var H={sourcesResolved:[],sourcesContent:[]};return!L.sources||L.sources.length===0||M(L,N,I,function(k,q,G){if(H.sourcesResolved[G]=k,$!==null)if(typeof q=="string")H.sourcesContent[G]=q;else{var J=k;try{H.sourcesContent[G]=String($(J))}catch(ne){H.sourcesContent[G]=ne}}}),H}var v=/\/?$/;function M(L,N,$,I){$=$||{};for(var H,k,q,G=0,J=L.sources.length;G<J;G++)q=null,typeof $.sourceRoot=="string"?q=$.sourceRoot:typeof L.sourceRoot=="string"&&$.sourceRoot!==!1&&(q=L.sourceRoot),q===null||q===""?H=s(N,L.sources[G]):H=s(N,q.replace(v,"/"),L.sources[G]),k=(L.sourcesContent||[])[G],I(H,k,G)}function V(L,N,$,I,H){if(typeof I=="function"&&(H=I,I={}),L===null){var k=N,q={sourceMappingURL:null,url:k,sourcesRelativeTo:k,map:null},G=k;$(G,function(ne,ce){if(ne)return ne.sourceMapData=q,H(ne);q.map=String(ce);try{q.map=a(q.map,q)}catch(le){return H(le)}J(q)})}else c(L,N,$,function(ne,ce){if(ne)return H(ne);if(!ce)return H(null,null);J(ce)});function J(ne){A(ne.map,ne.sourcesRelativeTo,$,I,function(ce,le){if(ce)return H(ce);ne.sourcesResolved=le.sourcesResolved,ne.sourcesContent=le.sourcesContent,H(null,ne)})}}function R(L,N,$,I){var H;if(L===null){var k=N;H={sourceMappingURL:null,url:k,sourcesRelativeTo:k,map:null},H.map=l($,k,H),H.map=a(H.map,H)}else if(H=u(L,N,$),!H)return null;var q=b(H.map,H.sourcesRelativeTo,$,I);return H.sourcesResolved=q.sourcesResolved,H.sourcesContent=q.sourcesContent,H}return{resolveSourceMap:c,resolveSourceMapSync:u,resolveSources:A,resolveSourcesSync:b,resolve:V,resolveSync:R,parseMapToJSON:a}})}(sourceMapResolve)),sourceMapResolveExports}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);var urix_1,hasRequiredUrix;function requireUrix(){if(hasRequiredUrix)return urix_1;hasRequiredUrix=1;var n=require$$4;function e(r){return n.sep==="\\"?r.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):r}return urix_1=e,urix_1}var hasRequiredSourceMapSupport;function requireSourceMapSupport(){return hasRequiredSourceMapSupport||(hasRequiredSourceMapSupport=1,function(n,e){var r=requireSourceMap().SourceMapGenerator,s=requireSourceMap().SourceMapConsumer,o=requireSourceMapResolve(),a=requireUrix(),l=require$$4,c=require$$4;n.exports=u;function u(f){f._comment=f.comment,f.map=new r,f.position={line:1,column:1},f.files={};for(var d in e)f[d]=e[d]}e.updatePosition=function(f){var d=f.match(/\n/g);d&&(this.position.line+=d.length);var g=f.lastIndexOf(`
`);this.position.column=~g?f.length-g:this.position.column+f.length},e.emit=function(f,d){if(d){var g=a(d.source||"source.css");this.map.addMapping({source:g,generated:{line:this.position.line,column:Math.max(this.position.column-1,0)},original:{line:d.start.line,column:d.start.column-1}}),this.addFile(g,d)}return this.updatePosition(f),f},e.addFile=function(f,d){typeof d.content=="string"&&(Object.prototype.hasOwnProperty.call(this.files,f)||(this.files[f]=d.content))},e.applySourceMaps=function(){Object.keys(this.files).forEach(function(f){var d=this.files[f];if(this.map.setSourceContent(f,d),this.options.inputSourcemaps!==!1){var g=o.resolveSync(d,f,l.readFileSync);if(g){var m=new s(g.map),_=g.sourcesRelativeTo;this.map.applySourceMap(m,f,a(c.dirname(_)))}}},this)},e.comment=function(f){return/^# sourceMappingURL=/.test(f.comment)?this.emit("",f.position):this._comment(f)}}(sourceMapSupport,sourceMapSupportExports)),sourceMapSupportExports}var Compressed=compress,Identity=identity,stringify=function(n,e){e=e||{};var r=e.compress?new Compressed(e):new Identity(e);if(e.sourcemap){var s=requireSourceMapSupport();s(r);var a=r.compile(n);r.applySourceMaps();var o=e.sourcemap==="generator"?r.map:r.map.toJSON();return{code:a,map:o}}var a=r.compile(n);return a};css$1.parse=parse;css$1.stringify=stringify;var cssParse=css$1.parse;class Stack{constructor(e,r,s,o,a,l,c,u,f,d=0,g){this.p=e,this.stack=r,this.state=s,this.reducePos=o,this.pos=a,this.score=l,this.buffer=c,this.bufferBase=u,this.curContext=f,this.lookAhead=d,this.parent=g}toString(){return`[${this.stack.filter((e,r)=>r%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,r,s=0){let o=e.parser.context;return new Stack(e,[],r,s,s,0,[],0,o?new StackContext(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,r){this.stack.push(this.state,r,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var r;let s=e>>19,o=e&65535,{parser:a}=this.p,l=a.dynamicPrecedence(o);if(l&&(this.score+=l),s==0){this.pushState(a.getGoto(this.state,o,!0),this.reducePos),o<a.minRepeatTerm&&this.storeNode(o,this.reducePos,this.reducePos,4,!0),this.reduceContext(o,this.reducePos);return}let c=this.stack.length-(s-1)*3-(e&262144?6:0),u=c?this.stack[c-2]:this.p.ranges[0].from,f=this.reducePos-u;f>=2e3&&!(!((r=this.p.parser.nodeSet.types[o])===null||r===void 0)&&r.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=f));let d=c?this.stack[c-1]:0,g=this.bufferBase+this.buffer.length-d;if(o<a.minRepeatTerm||e&131072){let m=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(o,u,m,g+4,!0)}if(e&262144)this.state=this.stack[c];else{let m=this.stack[c-3];this.state=a.getGoto(m,o,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(o,u)}storeNode(e,r,s,o=4,a=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let l=this,c=this.buffer.length;if(c==0&&l.parent&&(c=l.bufferBase-l.parent.bufferBase,l=l.parent),c>0&&l.buffer[c-4]==0&&l.buffer[c-1]>-1){if(r==s)return;if(l.buffer[c-2]>=r){l.buffer[c-2]=s;return}}}if(!a||this.pos==s)this.buffer.push(e,r,s,o);else{let l=this.buffer.length;if(l>0&&this.buffer[l-4]!=0)for(;l>0&&this.buffer[l-2]>s;)this.buffer[l]=this.buffer[l-4],this.buffer[l+1]=this.buffer[l-3],this.buffer[l+2]=this.buffer[l-2],this.buffer[l+3]=this.buffer[l-1],l-=4,o>4&&(o-=4);this.buffer[l]=e,this.buffer[l+1]=r,this.buffer[l+2]=s,this.buffer[l+3]=o}}shift(e,r,s){let o=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=s,this.shiftContext(r,o),r<=this.p.parser.maxNode&&this.buffer.push(r,o,s,4);else{let a=e,{parser:l}=this.p;(s>this.pos||r<=l.maxNode)&&(this.pos=s,l.stateFlag(a,1)||(this.reducePos=s)),this.pushState(a,o),this.shiftContext(r,o),r<=l.maxNode&&this.buffer.push(r,o,s,4)}}apply(e,r,s){e&65536?this.reduce(e):this.shift(e,r,s)}useNode(e,r){let s=this.p.reused.length-1;(s<0||this.p.reused[s]!=e)&&(this.p.reused.push(e),s++);let o=this.pos;this.reducePos=this.pos=o+e.length,this.pushState(r,o),this.buffer.push(s,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,r=e.buffer.length;for(;r>0&&e.buffer[r-2]>e.reducePos;)r-=4;let s=e.buffer.slice(r),o=e.bufferBase+r;for(;e&&o==e.bufferBase;)e=e.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,s,o,this.curContext,this.lookAhead,e)}recoverByDelete(e,r){let s=e<=this.p.parser.maxNode;s&&this.storeNode(e,this.pos,r,4),this.storeNode(0,this.pos,r,s?8:4),this.pos=this.reducePos=r,this.score-=190}canShift(e){for(let r=new SimulatedStack(this);;){let s=this.p.parser.stateSlot(r.state,4)||this.p.parser.hasAction(r.state,e);if(s==0)return!1;if(!(s&65536))return!0;r.reduce(s)}}recoverByInsert(e){if(this.stack.length>=300)return[];let r=this.p.parser.nextStates(this.state);if(r.length>4<<1||this.stack.length>=120){let o=[];for(let a=0,l;a<r.length;a+=2)(l=r[a+1])!=this.state&&this.p.parser.hasAction(l,e)&&o.push(r[a],l);if(this.stack.length<120)for(let a=0;o.length<4<<1&&a<r.length;a+=2){let l=r[a+1];o.some((c,u)=>u&1&&c==l)||o.push(r[a],l)}r=o}let s=[];for(let o=0;o<r.length&&s.length<4;o+=2){let a=r[o+1];if(a==this.state)continue;let l=this.split();l.pushState(a,this.pos),l.storeNode(0,l.pos,l.pos,4,!0),l.shiftContext(r[o],this.pos),l.score-=200,s.push(l)}return s}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:r}=this.p;if(!r.validAction(this.state,e)){let s=e>>19,o=e&65535,a=this.stack.length-s*3;if(a<0||r.getGoto(this.stack[a],o,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let r=0;r<this.stack.length;r+=3)if(this.stack[r]!=e.stack[r])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,r){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(r)))}reduceContext(e,r){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(r)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let r=new StackContext(this.curContext.tracker,e);r.hash!=this.curContext.hash&&this.emitContext(),this.curContext=r}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(e,r){this.tracker=e,this.context=r,this.hash=e.strict?e.hash(r):0}}var Recover;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth",n[n.MinBigReduction=2e3]="MinBigReduction"})(Recover||(Recover={}));class SimulatedStack{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let r=e&65535,s=e>>19;s==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(s-1)*3;let o=this.start.p.parser.getGoto(this.stack[this.base-3],r,!0);this.state=o}}class StackBufferCursor{constructor(e,r,s){this.stack=e,this.pos=r,this.index=s,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,r=e.bufferBase+e.buffer.length){return new StackBufferCursor(e,r,r-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(n,e=Uint16Array){if(typeof n!="string")return n;let r=null;for(let s=0,o=0;s<n.length;){let a=0;for(;;){let l=n.charCodeAt(s++),c=!1;if(l==126){a=65535;break}l>=92&&l--,l>=34&&l--;let u=l-32;if(u>=46&&(u-=46,c=!0),a+=u,c)break;a*=46}r?r[o++]=a:r=new e(a)}return r}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(e,r){this.input=e,this.ranges=r,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=r[0].from,this.range=r[0],this.end=r[r.length-1].to,this.readNext()}resolveOffset(e,r){let s=this.range,o=this.rangeIndex,a=this.pos+e;for(;a<s.from;){if(!o)return null;let l=this.ranges[--o];a-=s.from-l.to,s=l}for(;r<0?a>s.to:a>=s.to;){if(o==this.ranges.length-1)return null;let l=this.ranges[++o];a+=l.from-s.to,s=l}return a}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let r of this.ranges)if(r.to>e)return Math.max(e,r.from);return this.end}peek(e){let r=this.chunkOff+e,s,o;if(r>=0&&r<this.chunk.length)s=this.pos+e,o=this.chunk.charCodeAt(r);else{let a=this.resolveOffset(e,1);if(a==null)return-1;if(s=a,s>=this.chunk2Pos&&s<this.chunk2Pos+this.chunk2.length)o=this.chunk2.charCodeAt(s-this.chunk2Pos);else{let l=this.rangeIndex,c=this.range;for(;c.to<=s;)c=this.ranges[++l];this.chunk2=this.input.chunk(this.chunk2Pos=s),s+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-s)),o=this.chunk2.charCodeAt(0)}}return s>=this.token.lookAhead&&(this.token.lookAhead=s+1),o}acceptToken(e,r=0){let s=r?this.resolveOffset(r,-1):this.pos;if(s==null||s<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=s}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:r}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=r,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),r=this.pos+e.length;this.chunk=r>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,r){if(r?(this.token=r,r.start=e,r.lookAhead=e+1,r.value=r.extended=-1):this.token=nullToken,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,r){if(e>=this.chunkPos&&r<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,r-this.chunkPos);if(e>=this.chunk2Pos&&r<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,r-this.chunk2Pos);if(e>=this.range.from&&r<=this.range.to)return this.input.read(e,r);let s="";for(let o of this.ranges){if(o.from>=r)break;o.to>e&&(s+=this.input.read(Math.max(o.from,e),Math.min(o.to,r)))}return s}}class TokenGroup{constructor(e,r){this.data=e,this.id=r}token(e,r){let{parser:s}=r.p;readToken(this.data,e,r,this.id,s.data,s.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(e,r={}){this.token=e,this.contextual=!!r.contextual,this.fallback=!!r.fallback,this.extend=!!r.extend}}function readToken(n,e,r,s,o,a){let l=0,c=1<<s,{dialect:u}=r.p.parser;e:for(;c&n[l];){let f=n[l+1];for(let _=l+3;_<f;_+=2)if((n[_+1]&c)>0){let E=n[_];if(u.allows(E)&&(e.token.value==-1||e.token.value==E||overrides(E,e.token.value,o,a))){e.acceptToken(E);break}}let d=e.next,g=0,m=n[l+2];if(e.next<0&&m>g&&n[f+m*3-3]==65535&&n[f+m*3-3]==65535){l=n[f+m*3-1];continue e}for(;g<m;){let _=g+m>>1,E=f+_+(_<<1),A=n[E],b=n[E+1]||65536;if(d<A)m=_;else if(d>=b)g=_+1;else{l=n[E+2],e.advance();continue e}}break}}function findOffset(n,e,r){for(let s=e,o;(o=n[s])!=65535;s++)if(o==r)return s-e;return-1}function overrides(n,e,r,s){let o=findOffset(r,s,e);return o<0||findOffset(r,s,n)<o}const verbose=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let stackIDs=null;var Safety;(function(n){n[n.Margin=25]="Margin"})(Safety||(Safety={}));function cutAt(n,e,r){let s=n.cursor(IterMode.IncludeAnonymous);for(s.moveTo(e);;)if(!(r<0?s.childBefore(e):s.childAfter(e)))for(;;){if((r<0?s.to<e:s.from>e)&&!s.type.isError)return r<0?Math.max(0,Math.min(s.to-1,e-25)):Math.min(n.length,Math.max(s.from+1,e+25));if(r<0?s.prevSibling():s.nextSibling())break;if(!s.parent())return r<0?0:n.length}}class FragmentCursor{constructor(e,r){this.fragments=e,this.nodeSet=r,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cutAt(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cutAt(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let r=this.trees.length-1;if(r<0)return this.nextFragment(),null;let s=this.trees[r],o=this.index[r];if(o==s.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=s.children[o],l=this.start[r]+s.positions[o];if(l>e)return this.nextStart=l,null;if(a instanceof Tree){if(l==e){if(l<this.safeFrom)return null;let c=l+a.length;if(c<=this.safeTo){let u=a.prop(NodeProp.lookAhead);if(!u||c+u<this.fragment.to)return a}}this.index[r]++,l+a.length>=Math.max(this.safeFrom,e)&&(this.trees.push(a),this.start.push(l),this.index.push(0))}else this.index[r]++,this.nextStart=l+a.length}}}class TokenCache{constructor(e,r){this.stream=r,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(s=>new CachedToken)}getActions(e){let r=0,s=null,{parser:o}=e.p,{tokenizers:a}=o,l=o.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,u=0;for(let f=0;f<a.length;f++){if(!(1<<f&l))continue;let d=a[f],g=this.tokens[f];if(!(s&&!d.fallback)&&((d.contextual||g.start!=e.pos||g.mask!=l||g.context!=c)&&(this.updateCachedToken(g,d,e),g.mask=l,g.context=c),g.lookAhead>g.end+25&&(u=Math.max(g.lookAhead,u)),g.value!=0)){let m=r;if(g.extended>-1&&(r=this.addActions(e,g.extended,g.end,r)),r=this.addActions(e,g.value,g.end,r),!d.extend&&(s=g,r>m))break}}for(;this.actions.length>r;)this.actions.pop();return u&&e.setLookAhead(u),!s&&e.pos==this.stream.end&&(s=new CachedToken,s.value=e.p.parser.eofTerm,s.start=s.end=e.pos,r=this.addActions(e,s.value,s.end,r)),this.mainToken=s,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let r=new CachedToken,{pos:s,p:o}=e;return r.start=s,r.end=Math.min(s+1,o.stream.end),r.value=s==o.stream.end?o.parser.eofTerm:0,r}updateCachedToken(e,r,s){let o=this.stream.clipPos(s.pos);if(r.token(this.stream.reset(o,e),s),e.value>-1){let{parser:a}=s.p;for(let l=0;l<a.specialized.length;l++)if(a.specialized[l]==e.value){let c=a.specializers[l](this.stream.read(e.start,e.end),s);if(c>=0&&s.p.parser.dialect.allows(c>>1)){c&1?e.extended=c>>1:e.value=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(o+1)}putAction(e,r,s,o){for(let a=0;a<o;a+=3)if(this.actions[a]==e)return o;return this.actions[o++]=e,this.actions[o++]=r,this.actions[o++]=s,o}addActions(e,r,s,o){let{state:a}=e,{parser:l}=e.p,{data:c}=l;for(let u=0;u<2;u++)for(let f=l.stateSlot(a,u?2:1);;f+=3){if(c[f]==65535)if(c[f+1]==1)f=pair(c,f+2);else{o==0&&c[f+1]==2&&(o=this.putAction(pair(c,f+2),r,s,o));break}c[f]==r&&(o=this.putAction(pair(c,f+1),r,s,o))}return o}}var Rec;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo",n[n.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",n[n.MaxStackCount=12]="MaxStackCount"})(Rec||(Rec={}));class Parse{constructor(e,r,s,o){this.parser=e,this.input=r,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(r,o),this.tokens=new TokenCache(e,this.stream),this.topTerm=e.top[1];let{from:a}=o[0];this.stacks=[Stack.start(this,e.top[0],a)],this.fragments=s.length&&this.stream.end-a>e.bufferLength*4?new FragmentCursor(s,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,r=this.minStackPos,s=this.stacks=[],o,a;if(this.bigReductionCount>300&&e.length==1){let[l]=e;for(;l.forceReduce()&&l.stack.length&&l.stack[l.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let l=0;l<e.length;l++){let c=e[l];for(;;){if(this.tokens.mainToken=null,c.pos>r)s.push(c);else{if(this.advanceStack(c,s,e))continue;{o||(o=[],a=[]),o.push(c);let u=this.tokens.getMainToken(c);a.push(u.value,u.end)}}break}}if(!s.length){let l=o&&findFinished(o);if(l)return this.stackToTree(l);if(this.parser.strict)throw verbose&&o&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&o){let l=this.stoppedAt!=null&&o[0].pos>this.stoppedAt?o[0]:this.runRecovery(o,a,s);if(l)return this.stackToTree(l.forceAll())}if(this.recovering){let l=this.recovering==1?1:this.recovering*3;if(s.length>l)for(s.sort((c,u)=>u.score-c.score);s.length>l;)s.pop();s.some(c=>c.reducePos>r)&&this.recovering--}else if(s.length>1){e:for(let l=0;l<s.length-1;l++){let c=s[l];for(let u=l+1;u<s.length;u++){let f=s[u];if(c.sameState(f)||c.buffer.length>500&&f.buffer.length>500)if((c.score-f.score||c.buffer.length-f.buffer.length)>0)s.splice(u--,1);else{s.splice(l--,1);continue e}}}s.length>12&&s.splice(12,s.length-12)}this.minStackPos=s[0].pos;for(let l=1;l<s.length;l++)s[l].pos<this.minStackPos&&(this.minStackPos=s[l].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,r,s){let o=e.pos,{parser:a}=this,l=verbose?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&o>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let f=e.curContext&&e.curContext.tracker.strict,d=f?e.curContext.hash:0;for(let g=this.fragments.nodeAt(o);g;){let m=this.parser.nodeSet.types[g.type.id]==g.type?a.getGoto(e.state,g.type.id):-1;if(m>-1&&g.length&&(!f||(g.prop(NodeProp.contextHash)||0)==d))return e.useNode(g,m),verbose&&console.log(l+this.stackID(e)+` (via reuse of ${a.getName(g.type.id)})`),!0;if(!(g instanceof Tree)||g.children.length==0||g.positions[0]>0)break;let _=g.children[0];if(_ instanceof Tree&&g.positions[0]==0)g=_;else break}}let c=a.stateSlot(e.state,4);if(c>0)return e.reduce(c),verbose&&console.log(l+this.stackID(e)+` (via always-reduce ${a.getName(c&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let f=0;f<u.length;){let d=u[f++],g=u[f++],m=u[f++],_=f==u.length||!s,E=_?e:e.split();if(E.apply(d,g,m),verbose&&console.log(l+this.stackID(E)+` (via ${d&65536?`reduce of ${a.getName(d&65535)}`:"shift"} for ${a.getName(g)} @ ${o}${E==e?"":", split"})`),_)return!0;E.pos>o?r.push(E):s.push(E)}return!1}advanceFully(e,r){let s=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>s)return pushStackDedup(e,r),!0}}runRecovery(e,r,s){let o=null,a=!1;for(let l=0;l<e.length;l++){let c=e[l],u=r[l<<1],f=r[(l<<1)+1],d=verbose?this.stackID(c)+" -> ":"";if(c.deadEnd&&(a||(a=!0,c.restart(),verbose&&console.log(d+this.stackID(c)+" (restarted)"),this.advanceFully(c,s))))continue;let g=c.split(),m=d;for(let _=0;g.forceReduce()&&_<10&&(verbose&&console.log(m+this.stackID(g)+" (via force-reduce)"),!this.advanceFully(g,s));_++)verbose&&(m=this.stackID(g)+" -> ");for(let _ of c.recoverByInsert(u))verbose&&console.log(d+this.stackID(_)+" (via recover-insert)"),this.advanceFully(_,s);this.stream.end>c.pos?(f==c.pos&&(f++,u=0),c.recoverByDelete(u,f),verbose&&console.log(d+this.stackID(c)+` (via recover-delete ${this.parser.getName(u)})`),pushStackDedup(c,s)):(!o||o.score<c.score)&&(o=c)}return o}stackToTree(e){return e.close(),Tree.build({buffer:StackBufferCursor.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let r=(stackIDs||(stackIDs=new WeakMap)).get(e);return r||stackIDs.set(e,r=String.fromCodePoint(this.nextStackID++)),r+e}}function pushStackDedup(n,e){for(let r=0;r<e.length;r++){let s=e[r];if(s.pos==n.pos&&s.sameState(n)){e[r].score<n.score&&(e[r]=n);return}}e.push(n)}class Dialect{constructor(e,r,s){this.source=e,this.flags=r,this.disabled=s}allows(e){return!this.disabled||this.disabled[e]==0}}class LRParser extends Parser{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let r=e.nodeNames.split(" ");this.minRepeatTerm=r.length;for(let c=0;c<e.repeatNodeCount;c++)r.push("");let s=Object.keys(e.topRules).map(c=>e.topRules[c][1]),o=[];for(let c=0;c<r.length;c++)o.push([]);function a(c,u,f){o[c].push([u,u.deserialize(String(f))])}if(e.nodeProps)for(let c of e.nodeProps){let u=c[0];typeof u=="string"&&(u=NodeProp[u]);for(let f=1;f<c.length;){let d=c[f++];if(d>=0)a(d,u,c[f++]);else{let g=c[f+-d];for(let m=-d;m>0;m--)a(c[f++],u,g);f++}}}this.nodeSet=new NodeSet(r.map((c,u)=>NodeType.define({name:u>=this.minRepeatTerm?void 0:c,id:u,props:o[u],top:s.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let l=decodeArray(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(e.states,Uint32Array),this.data=decodeArray(e.stateData),this.goto=decodeArray(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new TokenGroup(l,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,r,s){let o=new Parse(this,e,r,s);for(let a of this.wrappers)o=a(o,e,r,s);return o}getGoto(e,r,s=!1){let o=this.goto;if(r>=o[0])return-1;for(let a=o[r+1];;){let l=o[a++],c=l&1,u=o[a++];if(c&&s)return u;for(let f=a+(l>>1);a<f;a++)if(o[a]==e)return u;if(c)return-1}}hasAction(e,r){let s=this.data;for(let o=0;o<2;o++)for(let a=this.stateSlot(e,o?2:1),l;;a+=3){if((l=s[a])==65535)if(s[a+1]==1)l=s[a=pair(s,a+2)];else{if(s[a+1]==2)return pair(s,a+2);break}if(l==r||l==0)return pair(s,a+1)}return 0}stateSlot(e,r){return this.states[e*6+r]}stateFlag(e,r){return(this.stateSlot(e,0)&r)>0}validAction(e,r){if(r==this.stateSlot(e,4))return!0;for(let s=this.stateSlot(e,1);;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=pair(this.data,s+2);else return!1;if(r==pair(this.data,s+1))return!0}}nextStates(e){let r=[];for(let s=this.stateSlot(e,1);;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=pair(this.data,s+2);else break;if(!(this.data[s+2]&1)){let o=this.data[s+1];r.some((a,l)=>l&1&&a==o)||r.push(this.data[s],o)}}return r}configure(e){let r=Object.assign(Object.create(LRParser.prototype),this);if(e.props&&(r.nodeSet=this.nodeSet.extend(...e.props)),e.top){let s=this.topRules[e.top];if(!s)throw new RangeError(`Invalid top rule name ${e.top}`);r.top=s}return e.tokenizers&&(r.tokenizers=this.tokenizers.map(s=>{let o=e.tokenizers.find(a=>a.from==s);return o?o.to:s})),e.specializers&&(r.specializers=this.specializers.slice(),r.specializerSpecs=this.specializerSpecs.map((s,o)=>{let a=e.specializers.find(c=>c.from==s.external);if(!a)return s;let l=Object.assign(Object.assign({},s),{external:a.to});return r.specializers[o]=getSpecializer(l),l})),e.contextTracker&&(r.context=e.contextTracker),e.dialect&&(r.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(r.strict=e.strict),e.wrap&&(r.wrappers=r.wrappers.concat(e.wrap)),e.bufferLength!=null&&(r.bufferLength=e.bufferLength),r}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let r=this.dynamicPrecedences;return r==null?0:r[e]||0}parseDialect(e){let r=Object.keys(this.dialects),s=r.map(()=>!1);if(e)for(let a of e.split(" ")){let l=r.indexOf(a);l>=0&&(s[l]=!0)}let o=null;for(let a=0;a<r.length;a++)if(!s[a])for(let l=this.dialects[r[a]],c;(c=this.data[l++])!=65535;)(o||(o=new Uint8Array(this.maxTerm+1)))[c]=1;return new Dialect(e,s,o)}static deserialize(e){return new LRParser(e)}}function pair(n,e){return n[e]|n[e+1]<<16}function findFinished(n){let e=null;for(let r of n){let s=r.p.stoppedAt;(r.pos==r.p.stream.end||s!=null&&r.pos>s)&&r.p.parser.stateFlag(r.state,2)&&(!e||e.score<r.score)&&(e=r)}return e}function getSpecializer(n){if(n.external){let e=n.extend?1:0;return(r,s)=>n.external(r,s)<<1|e}return n.get}const descendantOp=94,Unit=1,callee=95,identifier$1=96,VariableName=2,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],colon=58,parenL=40,underscore=95,bracketL=91,dash=45,period=46,hash=35,percent=37;function isAlpha(n){return n>=65&&n<=90||n>=97&&n<=122||n>=161}function isDigit(n){return n>=48&&n<=57}const identifiers=new ExternalTokenizer((n,e)=>{for(let r=!1,s=0,o=0;;o++){let{next:a}=n;if(isAlpha(a)||a==dash||a==underscore||r&&isDigit(a))!r&&(a!=dash||o>0)&&(r=!0),s===o&&a==dash&&s++,n.advance();else{r&&n.acceptToken(a==parenL?callee:s==2&&e.canShift(VariableName)?VariableName:identifier$1);break}}}),descendant=new ExternalTokenizer(n=>{if(space.includes(n.peek(-1))){let{next:e}=n;(isAlpha(e)||e==underscore||e==hash||e==period||e==bracketL||e==colon||e==dash)&&n.acceptToken(descendantOp)}}),unitToken=new ExternalTokenizer(n=>{if(!space.includes(n.peek(-1))){let{next:e}=n;if(e==percent&&(n.advance(),n.acceptToken(Unit)),isAlpha(e)){do n.advance();while(isAlpha(n.next));n.acceptToken(Unit)}}}),cssHighlighting=styleTags({"AtKeyword import charset namespace keyframes media supports":tags$1.definitionKeyword,"from to selector":tags$1.keyword,NamespaceName:tags$1.namespace,KeyframeName:tags$1.labelName,TagName:tags$1.tagName,ClassName:tags$1.className,PseudoClassName:tags$1.constant(tags$1.className),IdName:tags$1.labelName,"FeatureName PropertyName":tags$1.propertyName,AttributeName:tags$1.attributeName,NumberLiteral:tags$1.number,KeywordQuery:tags$1.keyword,UnaryQueryOp:tags$1.operatorKeyword,"CallTag ValueName":tags$1.atom,VariableName:tags$1.variableName,Callee:tags$1.operatorKeyword,Unit:tags$1.unit,"UniversalSelector NestingSelector":tags$1.definitionOperator,MatchOp:tags$1.compareOperator,"ChildOp SiblingOp, LogicOp":tags$1.logicOperator,BinOp:tags$1.arithmeticOperator,Important:tags$1.modifier,Comment:tags$1.blockComment,ParenthesizedContent:tags$1.special(tags$1.name),ColorLiteral:tags$1.color,StringLiteral:tags$1.string,":":tags$1.punctuation,"PseudoOp #":tags$1.derefOperator,"; ,":tags$1.separator,"( )":tags$1.paren,"[ ]":tags$1.squareBracket,"{ }":tags$1.brace}),spec_callee={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,"nth-last-of-type":32,dir:32,"host-context":32,url:60,"url-prefix":60,domain:60,regexp:60,selector:134},spec_AtKeyword={__proto__:null,"@import":114,"@media":138,"@charset":142,"@namespace":146,"@keyframes":152,"@supports":164},spec_identifier={__proto__:null,not:128,only:128,from:158,to:160},parser=LRParser.deserialize({version:14,states:"7WQYQ[OOO#_Q[OOOOQP'#Cd'#CdOOQP'#Cc'#CcO#fQ[O'#CfO$YQXO'#CaO$aQ[O'#ChO$lQ[O'#DPO$qQ[O'#DTOOQP'#Ed'#EdO$vQdO'#DeO%bQ[O'#DrO$vQdO'#DtO%sQ[O'#DvO&OQ[O'#DyO&TQ[O'#EPO&cQ[O'#EROOQS'#Ec'#EcOOQS'#ET'#ETQYQ[OOO&jQXO'#CdO'_QWO'#DaO'dQWO'#EjO'oQ[O'#EjQOQWOOOOQP'#Cg'#CgOOQP,59Q,59QO#fQ[O,59QO'yQ[O'#EWO(eQWO,58{O(mQ[O,59SO$lQ[O,59kO$qQ[O,59oO'yQ[O,59sO'yQ[O,59uO'yQ[O,59vO(xQ[O'#D`OOQS,58{,58{OOQP'#Ck'#CkOOQO'#C}'#C}OOQP,59S,59SO)PQWO,59SO)UQWO,59SOOQP'#DR'#DROOQP,59k,59kOOQO'#DV'#DVO)ZQ`O,59oOOQS'#Cp'#CpO$vQdO'#CqO)cQvO'#CsO*pQtO,5:POOQO'#Cx'#CxO)UQWO'#CwO+UQWO'#CyOOQS'#Eg'#EgOOQO'#Dh'#DhO+ZQ[O'#DoO+iQWO'#EkO&TQ[O'#DmO+wQWO'#DpOOQO'#El'#ElO(hQWO,5:^O+|QpO,5:`OOQS'#Dx'#DxO,UQWO,5:bO,ZQ[O,5:bOOQO'#D{'#D{O,cQWO,5:eO,hQWO,5:kO,pQWO,5:mOOQS-E8R-E8RO$vQdO,59{O,xQ[O'#EYO-VQWO,5;UO-VQWO,5;UOOQP1G.l1G.lO-|QXO,5:rOOQO-E8U-E8UOOQS1G.g1G.gOOQP1G.n1G.nO)PQWO1G.nO)UQWO1G.nOOQP1G/V1G/VO.ZQ`O1G/ZO.tQXO1G/_O/[QXO1G/aO/rQXO1G/bO0YQWO,59zO0_Q[O'#DOO0fQdO'#CoOOQP1G/Z1G/ZO$vQdO1G/ZO0mQpO,59]OOQS,59_,59_O$vQdO,59aO0uQWO1G/kOOQS,59c,59cO0zQ!bO,59eO1SQWO'#DhO1_QWO,5:TO1dQWO,5:ZO&TQ[O,5:VO&TQ[O'#EZO1lQWO,5;VO1wQWO,5:XO'yQ[O,5:[OOQS1G/x1G/xOOQS1G/z1G/zOOQS1G/|1G/|O2YQWO1G/|O2_QdO'#D|OOQS1G0P1G0POOQS1G0V1G0VOOQS1G0X1G0XO2mQtO1G/gOOQO,5:t,5:tO3TQ[O,5:tOOQO-E8W-E8WO3bQWO1G0pOOQP7+$Y7+$YOOQP7+$u7+$uO$vQdO7+$uOOQS1G/f1G/fO3mQXO'#EiO3tQWO,59jO3yQtO'#EUO4nQdO'#EfO4xQWO,59ZO4}QpO7+$uOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%V7+%VO5VQWO1G/PO$vQdO1G/oOOQO1G/u1G/uOOQO1G/q1G/qO5[QWO,5:uOOQO-E8X-E8XO5jQXO1G/vOOQS7+%h7+%hO5qQYO'#CsO(hQWO'#E[O5yQdO,5:hOOQS,5:h,5:hO6XQtO'#EXO$vQdO'#EXO7VQdO7+%ROOQO7+%R7+%ROOQO1G0`1G0`O7jQpO<<HaO7rQWO,5;TOOQP1G/U1G/UOOQS-E8S-E8SO$vQdO'#EVO7zQWO,5;QOOQT1G.u1G.uOOQP<<Ha<<HaOOQS7+$k7+$kO8SQdO7+%ZOOQO7+%b7+%bOOQS,5:v,5:vOOQS-E8Y-E8YOOQS1G0S1G0SO8ZQtO,5:sOOQS-E8V-E8VOOQO<<Hm<<HmOOQPAN={AN={O9XQdO,5:qOOQO-E8T-E8TOOQO<<Hu<<Hu",stateData:"9i~O#UOSROS~OUXOXXO]UO^UOtVOxWO!Y`O!ZYO!gZO!i[O!k]O!n^O!t_O#SQO#XSO~OQeOUXOXXO]UO^UOtVOxWO!Y`O!ZYO!gZO!i[O!k]O!n^O!t_O#SdO#XSO~O#P#^P~P!ZO#SiO~O]nO^nOplOtoOxpO|qO!PsO#QrO#XkO~O!RtO~P#kO`zO#RwO#SvO~O#S{O~O#S}O~OQ!WOb!QOf!WOh!WOn!VO#R!TO#S!PO#[!RO~Ob!YO!b![O!e!]O#S!XO!R#_P~Oh!bOn!VO#S!aO~O#S!dO~Ob!YO!b![O!e!]O#S!XO~O!W#_P~P%bO]WX]!UX^WXpWXtWXxWX|WX!PWX!RWX#QWX#XWX~O]!iO~O!W!jO#P#^X!Q#^X~O#P#^X!Q#^X~P!ZOUXOXXO]UO^UOtVOxWO#SQO#XSO~OplO!RtO~O`!sO#RwO#SvO~O!Q#^P~P!ZOb!zO~Ob!{O~Ov!|Oz!}O~OP#PObgXjgX!WgX!bgX!egX#SgXagXQgXfgXhgXngXpgX!VgX#PgX#RgX#[gXvgX!QgX~Ob!YOj#QO!b![O!e!]O#S!XO!W#_P~Ob#TO~Ob!YO!b![O!e!]O#S#UO~Op#YO!`#XO!R#_X!W#_X~Ob#]O~Oj#QO!W#_O~O!W#`O~Oh#aOn!VO~O!R#bO~O!RtO!`#XO~O!RtO!W#eO~O!W!|X#P!|X!Q!|X~P!ZO!W!jO#P#^a!Q#^a~O]nO^nOtoOxpO|qO!PsO#QrO#XkO~Op!za!R!zaa!za~P-bOv#lOz#mO~O]nO^nOtoOxpO#XkO~Op{i|{i!P{i!R{i#Q{ia{i~P.cOp}i|}i!P}i!R}i#Q}ia}i~P.cOp!Oi|!Oi!P!Oi!R!Oi#Q!Oia!Oi~P.cO!Q#nO~Oa#]P~P'yOa#YP~P$vOa#uOj#QO~O!W#wO~Oh#xOo#xO~O]!^Xa![X!`![X~O]#yO~Oa#zO!`#XO~Op#YO!R#_a!W#_a~O!`#XOp!aa!R!aa!W!aaa!aa~O!W$PO~O!Q$TO!q$RO!r$RO#[$QO~Oj#QOp$VO!V$XO!W!Ti#P!Ti!Q!Ti~P$vO!W!|a#P!|a!Q!|a~P!ZO!W!jO#P#^i!Q#^i~Oa#]X~P#kOa$]O~Oj#QOQ!xXa!xXb!xXf!xXh!xXn!xXp!xX#R!xX#S!xX#[!xX~Op$_Oa#YX~P$vOa$aO~Oj#QOv$bO~Oa$cO~O!`#XOp!}a!R!}a!W!}a~Oa$eO~P-bOP#PO!RgX~O!Q$hO!q$RO!r$RO#[$QO~Oj#QOQ!{Xb!{Xf!{Xh!{Xn!{Xp!{X!V!{X!W!{X#P!{X#R!{X#S!{X#[!{X!Q!{X~Op$VO!V$kO!W!Tq#P!Tq!Q!Tq~P$vOj#QOv$lO~OplOa#]a~Op$_Oa#Ya~Oa$oO~P$vOj#QOQ!{ab!{af!{ah!{an!{ap!{a!V!{a!W!{a#P!{a#R!{a#S!{a#[!{a!Q!{a~Oa!yap!ya~P$vOo#[j!Pj~",goto:",`#aPPPPP#bP#k#zP#k$Z#kPP$aPPP$g$p$pP%SP$pP$p%j%|PPP&f&l#kP&rP#kP&xP#kP#k#kPPP'O'b'oPP#bPP'v'v(Q'vP'vP'v'vP#bP#bP#bP(T#bP(W(ZPP#bP#bP(^(m({)R)])c)m)sPPPPPP)y*SP*o*rP+h+k+q+z_aOPcgt!j#hkXOPcglqrst!j!z#]#hkROPcglqrst!j!z#]#hQjSR!mkQxUR!qnQ!qzQ#S!UR#k!sq!WY[!Q!i!{!}#Q#f#m#r#y$V$W$_$d$mp!WY[!Q!i!{!}#Q#f#m#r#y$V$W$_$d$mT$R#b$Sq!UY[!Q!i!{!}#Q#f#m#r#y$V$W$_$d$mp!WY[!Q!i!{!}#Q#f#m#r#y$V$W$_$d$mQ!b]R#a!cQyUR!rnQ!qyR#k!rQ|VR!toQ!OWR!upQuTQ!pmQ#^!_Q#d!fQ#e!gR$f$RSfPtQ!lgQ#g!jR$Y#hZePgt!j#ha!^Z_`!S!Y![#X#YR#V!YR!c]R!e^R#c!eQcOSgPtU!hcg#hR#h!jQ#r!{U$^#r$d$mQ$d#yR$m$_Q$`#rR$n$`QmTS!om$[R$[#oQ$W#fR$j$WQ!kfS#i!k#jR#j!lQ#Z!ZR#}#ZQ$S#bR$g$S_bOPcgt!j#h^TOPcgt!j#hQ!nlQ!vqQ!wrQ!xsQ#o!zR$O#]R#s!{Q!SYQ!`[Q#O!QQ#f!i[#q!{#r#y$_$d$mQ#t!}Q#v#QS$U#f$WQ$Z#mR$i$VR#p!zQhPR!ytQ!_ZQ!g`R#R!SU!ZZ`!SQ!f_Q#W!YQ#[![Q#{#XR#|#Y",nodeNames:"⚠ Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent , PseudoClassName ArgList IdSelector # IdName ] AttributeSelector [ AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList from to SupportsStatement supports AtRule Styles",maxTerm:108,nodeProps:[["openedBy",17,"(",48,"{"],["closedBy",18,")",49,"}"]],propSources:[cssHighlighting],skippedNodes:[0,3],repeatNodeCount:8,tokenData:"Lq~R!^OX$}X^%u^p$}pq%uqr)Xrs.Rst/utu6duv$}vw7^wx7oxy9^yz9oz{9t{|:_|}?Q}!O?c!O!P@Q!P!Q@i!Q![Cu![!]Dp!]!^El!^!_$}!_!`E}!`!aF`!a!b$}!b!cG[!c!}$}!}#OHt#O#P$}#P#QIV#Q#R6d#R#T$}#T#UIh#U#c$}#c#dJy#d#o$}#o#pK`#p#q6d#q#rKq#r#sLS#s#y$}#y#z%u#z$f$}$f$g%u$g#BY$}#BY#BZ%u#BZ$IS$}$IS$I_%u$I_$I|$}$I|$JO%u$JO$JT$}$JT$JU%u$JU$KV$}$KV$KW%u$KW&FU$}&FU&FV%u&FV;'S$};'S;=`Lk<%lO$}W%QSOy%^z;'S%^;'S;=`%o<%lO%^W%cSoWOy%^z;'S%^;'S;=`%o<%lO%^W%rP;=`<%l%^~%zh#U~OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^~'mh#U~oWOX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^^)[UOy%^z#]%^#]#^)n#^;'S%^;'S;=`%o<%lO%^^)sUoWOy%^z#a%^#a#b*V#b;'S%^;'S;=`%o<%lO%^^*[UoWOy%^z#d%^#d#e*n#e;'S%^;'S;=`%o<%lO%^^*sUoWOy%^z#c%^#c#d+V#d;'S%^;'S;=`%o<%lO%^^+[UoWOy%^z#f%^#f#g+n#g;'S%^;'S;=`%o<%lO%^^+sUoWOy%^z#h%^#h#i,V#i;'S%^;'S;=`%o<%lO%^^,[UoWOy%^z#T%^#T#U,n#U;'S%^;'S;=`%o<%lO%^^,sUoWOy%^z#b%^#b#c-V#c;'S%^;'S;=`%o<%lO%^^-[UoWOy%^z#h%^#h#i-n#i;'S%^;'S;=`%o<%lO%^^-uS!VUoWOy%^z;'S%^;'S;=`%o<%lO%^~.UWOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o<%lO.R~.sOh~~.vRO;'S.R;'S;=`/P;=`O.R~/SXOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o;=`<%l.R<%lO.R~/rP;=`<%l.R_/zYtPOy%^z!Q%^!Q![0j![!c%^!c!i0j!i#T%^#T#Z0j#Z;'S%^;'S;=`%o<%lO%^^0oYoWOy%^z!Q%^!Q![1_![!c%^!c!i1_!i#T%^#T#Z1_#Z;'S%^;'S;=`%o<%lO%^^1dYoWOy%^z!Q%^!Q![2S![!c%^!c!i2S!i#T%^#T#Z2S#Z;'S%^;'S;=`%o<%lO%^^2ZYfUoWOy%^z!Q%^!Q![2y![!c%^!c!i2y!i#T%^#T#Z2y#Z;'S%^;'S;=`%o<%lO%^^3QYfUoWOy%^z!Q%^!Q![3p![!c%^!c!i3p!i#T%^#T#Z3p#Z;'S%^;'S;=`%o<%lO%^^3uYoWOy%^z!Q%^!Q![4e![!c%^!c!i4e!i#T%^#T#Z4e#Z;'S%^;'S;=`%o<%lO%^^4lYfUoWOy%^z!Q%^!Q![5[![!c%^!c!i5[!i#T%^#T#Z5[#Z;'S%^;'S;=`%o<%lO%^^5aYoWOy%^z!Q%^!Q![6P![!c%^!c!i6P!i#T%^#T#Z6P#Z;'S%^;'S;=`%o<%lO%^^6WSfUoWOy%^z;'S%^;'S;=`%o<%lO%^Y6gUOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^Y7QSzQoWOy%^z;'S%^;'S;=`%o<%lO%^X7cSXPOy%^z;'S%^;'S;=`%o<%lO%^~7rWOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W<%lO7o~8_RO;'S7o;'S;=`8h;=`O7o~8kXOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W;=`<%l7o<%lO7o~9ZP;=`<%l7o_9cSbVOy%^z;'S%^;'S;=`%o<%lO%^~9tOa~_9{UUPjSOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^_:fWjS!PPOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^^;TUoWOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^^;nYoW#[UOy%^z!Q%^!Q![;g![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^^<cYoWOy%^z{%^{|=R|}%^}!O=R!O!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^^=WUoWOy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^^=qUoW#[UOy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^^>[[oW#[UOy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^_?VSpVOy%^z;'S%^;'S;=`%o<%lO%^^?hWjSOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^_@VU#XPOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^~@nTjSOy%^z{@}{;'S%^;'S;=`%o<%lO%^~ASUoWOy@}yzAfz{Bm{;'S@};'S;=`Co<%lO@}~AiTOzAfz{Ax{;'SAf;'S;=`Bg<%lOAf~A{VOzAfz{Ax{!PAf!P!QBb!Q;'SAf;'S;=`Bg<%lOAf~BgOR~~BjP;=`<%lAf~BrWoWOy@}yzAfz{Bm{!P@}!P!QC[!Q;'S@};'S;=`Co<%lO@}~CcSoWR~Oy%^z;'S%^;'S;=`%o<%lO%^~CrP;=`<%l@}^Cz[#[UOy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^XDuU]POy%^z![%^![!]EX!];'S%^;'S;=`%o<%lO%^XE`S^PoWOy%^z;'S%^;'S;=`%o<%lO%^_EqS!WVOy%^z;'S%^;'S;=`%o<%lO%^YFSSzQOy%^z;'S%^;'S;=`%o<%lO%^XFeU|POy%^z!`%^!`!aFw!a;'S%^;'S;=`%o<%lO%^XGOS|PoWOy%^z;'S%^;'S;=`%o<%lO%^XG_WOy%^z!c%^!c!}Gw!}#T%^#T#oGw#o;'S%^;'S;=`%o<%lO%^XHO[!YPoWOy%^z}%^}!OGw!O!Q%^!Q![Gw![!c%^!c!}Gw!}#T%^#T#oGw#o;'S%^;'S;=`%o<%lO%^XHySxPOy%^z;'S%^;'S;=`%o<%lO%^^I[SvUOy%^z;'S%^;'S;=`%o<%lO%^XIkUOy%^z#b%^#b#cI}#c;'S%^;'S;=`%o<%lO%^XJSUoWOy%^z#W%^#W#XJf#X;'S%^;'S;=`%o<%lO%^XJmS!`PoWOy%^z;'S%^;'S;=`%o<%lO%^XJ|UOy%^z#f%^#f#gJf#g;'S%^;'S;=`%o<%lO%^XKeS!RPOy%^z;'S%^;'S;=`%o<%lO%^_KvS!QVOy%^z;'S%^;'S;=`%o<%lO%^ZLXU!PPOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^WLnP;=`<%l$}",tokenizers:[descendant,unitToken,identifiers,0,1,2,3],topRules:{StyleSheet:[0,4],Styles:[1,84]},specialized:[{term:95,get:n=>spec_callee[n]||-1},{term:56,get:n=>spec_AtKeyword[n]||-1},{term:96,get:n=>spec_identifier[n]||-1}],tokenPrec:1123});let _properties=null;function properties(){if(!_properties&&typeof document=="object"&&document.body){let{style:n}=document.body,e=[],r=new Set;for(let s in n)s!="cssText"&&s!="cssFloat"&&typeof n[s]=="string"&&(/[A-Z]/.test(s)&&(s=s.replace(/[A-Z]/g,o=>"-"+o.toLowerCase())),r.has(s)||(e.push(s),r.add(s)));_properties=e.sort().map(s=>({type:"property",label:s}))}return _properties||[]}const pseudoClasses=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(n=>({type:"class",label:n})),values=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(n=>({type:"keyword",label:n})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(n=>({type:"constant",label:n}))),tags=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(n=>({type:"type",label:n})),identifier=/^[\w-]*/,cssCompletionSource=n=>{let{state:e,pos:r}=n,s=syntaxTree(e).resolveInner(r,-1);if(s.name=="PropertyName")return{from:s.from,options:properties(),validFor:identifier};if(s.name=="ValueName")return{from:s.from,options:values,validFor:identifier};if(s.name=="PseudoClassName")return{from:s.from,options:pseudoClasses,validFor:identifier};if(s.name=="TagName"){for(let{parent:l}=s;l;l=l.parent)if(l.name=="Block")return{from:s.from,options:properties(),validFor:identifier};return{from:s.from,options:tags,validFor:identifier}}if(!n.explicit)return null;let o=s.resolve(r),a=o.childBefore(r);return a&&a.name==":"&&o.name=="PseudoClassSelector"?{from:r,options:pseudoClasses,validFor:identifier}:a&&a.name==":"&&o.name=="Declaration"||o.name=="ArgList"?{from:r,options:values,validFor:identifier}:o.name=="Block"?{from:r,options:properties(),validFor:identifier}:null},cssLanguage=LRLanguage.define({name:"css",parser:parser.configure({props:[indentNodeProp.add({Declaration:continuedIndent()}),foldNodeProp.add({Block:foldInside})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function css(){return new LanguageSupport(cssLanguage,cssLanguage.data.of({autocomplete:cssCompletionSource}))}const Styles_vue_vue_type_style_index_0_lang="",themes={reds:`
.screen {
  background-color: white
}

.node .content {
  background-color: pink;
  color: red;
  box-shadow: inset 0px 0px 0px 4px red;
}

.edge {
  stroke: red;
  stroke-linejoin: round;
  marker-end: url(#arrow-end-red);
}
`,blueprint:`
.screen {
  background-color: #1A53A9
}

.node .content {
  background-color: #559EF5;
  color: #fff;
  box-shadow: inset 0px 0px 0px 4px #fff;
}

.edge {
  stroke: #fff;
  stroke-linejoin: round;
  marker-start: url(#circle-white);
  marker-end: url(#circle-white);
}
  `},_sfc_main$3={components:{Screen,Node,Edge,Markers:Markers$1,Codemirror:T},data(){return{css,themeSelect:"blueprint",graph:new Graph,visible:!0,markers:[{id:"arrow-end-red",type:"arrow-end",scale:.5,style:"fill: red"},{id:"circle-white",type:"circle",scale:1,style:"fill: white"}],theme:themes.blueprint.trim()}},mounted(){this.graph.createNode("a"),this.graph.createNode("b"),this.graph.createNode("c"),this.graph.createNode("d"),this.graph.createNode("e"),this.graph.createNode("f");const n="rect",e="rect";this.graph.createEdge("a","b",{fromAnchor:n,toAnchor:e}),this.graph.createEdge("a","c",{fromAnchor:n,toAnchor:e}),this.graph.createEdge("a","d",{fromAnchor:n,toAnchor:e}),this.graph.createEdge("c","e",{fromAnchor:n,toAnchor:e}),this.graph.createEdge("e","f",{fromAnchor:n,toAnchor:e}),this.graph.graphNodes({type:"tree",spacing:50}),this.applyTheme(),window.t=this},methods:{selectTheme(n){this.theme=themes[n].trim()},forceRender(){return this.visible=!1,this.$nextTick().then(()=>{this.visible=!0,this.$nextTick(()=>{this.$refs.screen.zoomNodes(this.graph.nodes,{scale:1})})})},async applyTheme(){let n;try{n=cssParse(this.theme).stylesheet.rules.filter(e=>e.type==="rule")}catch{return}await this.forceRender(),n.forEach(e=>{const r=e.selectors.length?"#styles-demo "+e.selectors.join(", "):"",s=[...document.querySelectorAll(r)];e.declarations.filter(o=>o.type==="declaration").forEach(o=>{s.filter(a=>a).forEach(a=>{const l=o.property.replace(/-([a-z])/g,function(c){return c[1].toUpperCase()});a.style[l]=o.value})})})}},watch:{theme:"applyTheme",themeSelect:"selectTheme"}},_hoisted_1$3={class:"demo",id:"styles-demo"},_hoisted_2$3={class:"viewport"},_hoisted_3$3={class:"sidebar"},_hoisted_4$3=createBaseVNode("div",null,"Theme:",-1),_hoisted_5$3=createBaseVNode("option",{value:"blueprint"},"blueprint",-1),_hoisted_6$3=createBaseVNode("option",{value:"reds"},"reds",-1),_hoisted_7$3=[_hoisted_5$3,_hoisted_6$3];function _sfc_render$3(n,e,r,s,o,a){const l=resolveComponent("markers"),c=resolveComponent("edge"),u=resolveComponent("node"),f=resolveComponent("screen"),d=resolveComponent("codemirror");return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[o.visible?(openBlock(),createBlock(f,{key:0,ref:"screen"},{default:withCtx(()=>[createVNode(l,{markers:o.markers},null,8,["markers"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.edges,g=>(openBlock(),createBlock(c,{data:g,nodes:o.graph.nodes,key:g.id},null,8,["data","nodes"]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.nodes,g=>(openBlock(),createBlock(u,{data:g,ref_for:!0,ref:"node",key:g.id},null,8,["data"]))),128))]),_:1},512)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_3$3,[_hoisted_4$3,withDirectives(createBaseVNode("select",{"onUpdate:modelValue":e[0]||(e[0]=g=>o.themeSelect=g),style:{width:"100%"}},_hoisted_7$3,512),[[vModelSelect,o.themeSelect]]),createVNode(d,{modelValue:o.theme,"onUpdate:modelValue":e[1]||(e[1]=g=>o.theme=g),"indent-with-tab":!0,"tab-size":2,extensions:[o.css()],style:{"font-size":"13.3333px","font-family":"monospace",height:"425px",width:"100%"}},null,8,["modelValue","extensions"])])])}const Styles=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]),Groups_vue_vue_type_style_index_0_scoped_24e8b0e4_lang="",Groups_vue_vue_type_style_index_1_lang="",_sfc_main$2={components:{Screen,Node,Edge,Group},data(){return{graph:new Graph,groupNodes:["a","b","c","d","e","f","g","h"],padding:10,label:!0}},methods:{},mounted(){this.graph.createNode("a"),this.graph.createNode("b"),this.graph.createNode("c"),this.graph.createNode({id:"d",x:-51,y:90}),this.graph.createNode({id:"e",x:-50,y:-100}),this.graph.createNode({id:"f",x:290,y:-90}),this.graph.createNode({id:"g",x:300,y:95}),this.graph.createNode({id:"h",x:200,y:0}),this.graph.createEdge("a","b",{fromAnchor:"rect",toAnchor:"rect"}),this.graph.createEdge("a","c",{fromAnchor:"rect",toAnchor:"rect"}),this.graph.graphNodes({type:"tree"}),this.$nextTick(()=>{this.$refs.screen.zoomNodes(this.graph.nodes,{scale:.9})})}},_withScopeId$1=n=>(pushScopeId("data-v-24e8b0e4"),n=n(),popScopeId(),n),_hoisted_1$2={class:"demo",id:"group-demo"},_hoisted_2$2={class:"viewport"},_hoisted_3$2={key:0,class:"group-label"},_hoisted_4$2={class:"sidebar"},_hoisted_5$2={class:"checkboxes"},_hoisted_6$2=_withScopeId$1(()=>createBaseVNode("span",null,"A",-1)),_hoisted_7$2=_withScopeId$1(()=>createBaseVNode("span",null,"B",-1)),_hoisted_8$2=_withScopeId$1(()=>createBaseVNode("span",null,"C",-1)),_hoisted_9=_withScopeId$1(()=>createBaseVNode("br",null,null,-1)),_hoisted_10=_withScopeId$1(()=>createBaseVNode("span",null,"D",-1)),_hoisted_11=_withScopeId$1(()=>createBaseVNode("span",null,"E",-1)),_hoisted_12=_withScopeId$1(()=>createBaseVNode("span",null,"F",-1)),_hoisted_13=_withScopeId$1(()=>createBaseVNode("br",null,null,-1)),_hoisted_14=_withScopeId$1(()=>createBaseVNode("span",null,"G",-1)),_hoisted_15=_withScopeId$1(()=>createBaseVNode("span",null,"H",-1)),_hoisted_16=_withScopeId$1(()=>createBaseVNode("span",null,"Label",-1));function _sfc_render$2(n,e,r,s,o,a){const l=resolveComponent("group"),c=resolveComponent("edge"),u=resolveComponent("node"),f=resolveComponent("screen");return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[createVNode(f,{ref:"screen"},{default:withCtx(()=>[o.groupNodes.length?(openBlock(),createBlock(l,{key:0,nodes:o.graph.nodes.filter(d=>o.groupNodes.includes(d.id)),padding:{left:parseInt(o.padding),right:parseInt(o.padding),top:parseInt(o.padding)+(o.label?50:0),bottom:parseInt(o.padding)}},{default:withCtx(()=>[o.label?(openBlock(),createElementBlock("div",_hoisted_3$2," Groups ")):createCommentVNode("",!0)]),_:1},8,["nodes","padding"])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.edges,d=>(openBlock(),createBlock(c,{data:d,nodes:o.graph.nodes,key:d.id},null,8,["data","nodes"]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.graph.nodes,d=>(openBlock(),createBlock(u,{data:d,ref_for:!0,ref:"node",key:d.id},null,8,["data"]))),128))]),_:1},512)]),createBaseVNode("div",_hoisted_4$2,[createBaseVNode("div",_hoisted_5$2,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"a",value:"a","onUpdate:modelValue":e[0]||(e[0]=d=>o.groupNodes=d)},null,512),[[vModelCheckbox,o.groupNodes]]),_hoisted_6$2,withDirectives(createBaseVNode("input",{type:"checkbox",id:"b",value:"b","onUpdate:modelValue":e[1]||(e[1]=d=>o.groupNodes=d)},null,512),[[vModelCheckbox,o.groupNodes]]),_hoisted_7$2,withDirectives(createBaseVNode("input",{type:"checkbox",id:"c",value:"c","onUpdate:modelValue":e[2]||(e[2]=d=>o.groupNodes=d)},null,512),[[vModelCheckbox,o.groupNodes]]),_hoisted_8$2,_hoisted_9,withDirectives(createBaseVNode("input",{type:"checkbox",id:"d",value:"d","onUpdate:modelValue":e[3]||(e[3]=d=>o.groupNodes=d)},null,512),[[vModelCheckbox,o.groupNodes]]),_hoisted_10,withDirectives(createBaseVNode("input",{type:"checkbox",id:"e",value:"e","onUpdate:modelValue":e[4]||(e[4]=d=>o.groupNodes=d)},null,512),[[vModelCheckbox,o.groupNodes]]),_hoisted_11,withDirectives(createBaseVNode("input",{type:"checkbox",id:"f",value:"f","onUpdate:modelValue":e[5]||(e[5]=d=>o.groupNodes=d)},null,512),[[vModelCheckbox,o.groupNodes]]),_hoisted_12,_hoisted_13,withDirectives(createBaseVNode("input",{type:"checkbox",id:"g",value:"g","onUpdate:modelValue":e[6]||(e[6]=d=>o.groupNodes=d)},null,512),[[vModelCheckbox,o.groupNodes]]),_hoisted_14,withDirectives(createBaseVNode("input",{type:"checkbox",id:"h",value:"h","onUpdate:modelValue":e[7]||(e[7]=d=>o.groupNodes=d)},null,512),[[vModelCheckbox,o.groupNodes]]),_hoisted_15]),createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"label","onUpdate:modelValue":e[8]||(e[8]=d=>o.label=d)},null,512),[[vModelCheckbox,o.label]]),_hoisted_16]),createBaseVNode("div",null,"Padding "+toDisplayString(o.padding),1),withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":e[9]||(e[9]=d=>o.padding=d),min:"10",max:"50"},null,512),[[vModelText,o.padding]])])])}const Groups=_export_sfc(_sfc_main$2,[["render",_sfc_render$2],["__scopeId","data-v-24e8b0e4"]]),_sfc_main$1={components:{Screen,Node,Edge,Markers:Markers$1},data(){return{graph:new Graph,visible:!0,markers:[{id:"arrow-start-blue",type:"arrow-start",scale:.5,style:"fill: blue"},{id:"arrow-end-blue",type:"arrow-end",scale:.5,style:"fill: blue"},{id:"squared",type:"square",scale:1,style:"fill: blue;"},{id:"circular",type:"circle",scale:1,style:"fill: blue"},{id:"crossed",type:"cross",scale:1,style:"stroke: blue"},{id:"arrow-slim-start-blue",type:"arrow-slim-start",scale:.5,style:"stroke: blue"},{id:"arrow-slim-end-blue",type:"arrow-slim-end",scale:.5,style:"stroke: blue"}]}}},_hoisted_1$1={class:"demo",id:"markers-demo"},_hoisted_2$1={class:"viewport"},_hoisted_3$1=createBaseVNode("text",{x:"350",y:"155",class:"small"},"#arrow-start, #arrow-end",-1),_hoisted_4$1=createBaseVNode("text",{x:"350",y:"205",class:"small"},"#square",-1),_hoisted_5$1=createBaseVNode("text",{x:"350",y:"255",class:"small"},"#circle",-1),_hoisted_6$1=createBaseVNode("text",{x:"350",y:"305",class:"small"},"#cross",-1),_hoisted_7$1=createBaseVNode("text",{x:"350",y:"355",class:"small"},"#arrow-slim-start, #arrow-slim-end",-1),_hoisted_8$1=createBaseVNode("div",{class:"sidebar"},null,-1);function _sfc_render$1(n,e,r,s,o,a){const l=resolveComponent("edge"),c=resolveComponent("screen");return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[o.visible?(openBlock(),createBlock(c,{key:0,ref:"screen",markers:o.markers},{default:withCtx(()=>[createVNode(l,{data:{from:{x:100,y:150},to:{x:300,y:150}},style:{"marker-start":"url(#arrow-start-blue)","marker-end":"url(#arrow-end-blue)",stroke:"blue"}}),_hoisted_3$1,createVNode(l,{data:{from:{x:100,y:200},to:{x:300,y:200}},style:{"marker-start":"url(#squared)","marker-end":"url(#squared)",stroke:"blue"}}),_hoisted_4$1,createVNode(l,{data:{from:{x:100,y:250},to:{x:300,y:250}},style:{"marker-start":"url(#circular)","marker-end":"url(#circular)",stroke:"blue"}}),_hoisted_5$1,createVNode(l,{data:{from:{x:100,y:300},to:{x:300,y:300}},style:{"marker-start":"url(#crossed)","marker-end":"url(#crossed)",stroke:"blue"}}),_hoisted_6$1,createVNode(l,{data:{from:{x:100,y:350},to:{x:300,y:350}},style:{"marker-start":"url(#arrow-slim-start-blue)","marker-end":"url(#arrow-slim-end-blue)",stroke:"blue"}}),_hoisted_7$1]),_:1},8,["markers"])):createCommentVNode("",!0)]),_hoisted_8$1])}const Markers=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),Demo_vue_vue_type_style_index_0_scoped_41bd1598_lang="",Demo_vue_vue_type_style_index_1_lang="",_sfc_main={components:{Sink,Edit,Ports,Labels,Benchpress,Styles,Groups,Markers}},_withScopeId=n=>(pushScopeId("data-v-41bd1598"),n=n(),popScopeId(),n),_hoisted_1={style:{"margin-top":"50px","margin-bottom":"50px"}},_hoisted_2=_withScopeId(()=>createBaseVNode("h1",null,"Vnodes",-1)),_hoisted_3=_withScopeId(()=>createBaseVNode("h2",null,[createTextVNode(" Sink "),createBaseVNode("a",{href:"https://github.com/txlabs/vnodes/blob/master/src/demo/Sink.vue",target:"_blank"},"</>")],-1)),_hoisted_4=_withScopeId(()=>createBaseVNode("h2",null,[createTextVNode("Ports "),createBaseVNode("a",{href:"https://github.com/txlabs/vnodes/blob/master/src/demo/Ports.vue",target:"_blank"},"</>")],-1)),_hoisted_5=_withScopeId(()=>createBaseVNode("h2",null,[createTextVNode("Labels "),createBaseVNode("a",{href:"https://github.com/txlabs/vnodes/blob/master/src/demo/Labels.vue",target:"_blank"},"</>")],-1)),_hoisted_6=_withScopeId(()=>createBaseVNode("h2",null,[createTextVNode("Styles "),createBaseVNode("a",{href:"https://github.com/txlabs/vnodes/blob/master/src/demo/Styles.vue",target:"_blank"},"</>")],-1)),_hoisted_7=_withScopeId(()=>createBaseVNode("h2",null,[createTextVNode("Markers "),createBaseVNode("a",{href:"https://github.com/txlabs/vnodes/blob/master/src/demo/Markers.vue",target:"_blank"},"</>")],-1)),_hoisted_8=_withScopeId(()=>createBaseVNode("h2",null,[createTextVNode("Benchpress "),createBaseVNode("a",{href:"https://github.com/txlabs/vnodes/blob/master/src/demo/Benchmark.vue",target:"_blank"},"</>")],-1));function _sfc_render(n,e,r,s,o,a){const l=resolveComponent("sink"),c=resolveComponent("ports"),u=resolveComponent("labels"),f=resolveComponent("styles"),d=resolveComponent("markers"),g=resolveComponent("benchpress");return openBlock(),createElementBlock("div",_hoisted_1,[_hoisted_2,_hoisted_3,createVNode(l),_hoisted_4,createVNode(c),_hoisted_5,createVNode(u),_hoisted_6,createVNode(f),_hoisted_7,createVNode(d),_hoisted_8,createVNode(g)])}const Demo=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-41bd1598"]]),demo=createApp(Demo);demo.mount("#app");
